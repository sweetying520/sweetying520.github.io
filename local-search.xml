<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Androidå­—ä½“ç³»åˆ— ï¼ˆå››ï¼‰ï¼šå…¨å±€æ›¿æ¢å­—ä½“æ–¹å¼</title>
    <link href="/2022/10/11/Android%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%20%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E5%85%A8%E5%B1%80%E6%9B%BF%E6%8D%A2%E5%AD%97%E4%BD%93%E6%96%B9%E5%BC%8F/"/>
    <url>/2022/10/11/Android%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%20%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E5%85%A8%E5%B1%80%E6%9B%BF%E6%8D%A2%E5%AD%97%E4%BD%93%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210111040025.jpeg" alt="noaa-ZdYX57yQdOQ-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº† Xml ä¸­çš„å­—ä½“ï¼Œè¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6974388756275019812">Androidå­—ä½“ç³»åˆ— ï¼ˆä¸‰ï¼‰ï¼šXmlä¸­çš„å­—ä½“</a>ï¼Œæœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±çœ‹ä¸‹ Android ä¸­å…¨å±€æ›¿æ¢å­—ä½“çš„å‡ ç§æ–¹å¼</p><p><strong>æ³¨æ„ï¼šæœ¬æ–‡æ‰€å±•ç¤ºçš„ç³»ç»Ÿæºç éƒ½æ˜¯åŸºäºAndroid-30 ï¼Œå¹¶æå–æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œåˆ†æ</strong></p><p> <a href="https://github.com/sweetying520/ChangeDefaultFontDemo">Github Demo åœ°å€</a> , å¤§å®¶å¯ä»¥çœ‹ Demo è·Ÿéšæˆ‘çš„æ€è·¯ä¸€èµ·åˆ†æ</p><h2 id="ä¸€ã€æ–¹å¼ä¸€ï¼šé€šè¿‡éå†-ViewTreeï¼Œå…¨å±€æ›¿æ¢å­—ä½“"><a href="#ä¸€ã€æ–¹å¼ä¸€ï¼šé€šè¿‡éå†-ViewTreeï¼Œå…¨å±€æ›¿æ¢å­—ä½“" class="headerlink" title="ä¸€ã€æ–¹å¼ä¸€ï¼šé€šè¿‡éå† ViewTreeï¼Œå…¨å±€æ›¿æ¢å­—ä½“"></a>ä¸€ã€æ–¹å¼ä¸€ï¼šé€šè¿‡éå† ViewTreeï¼Œå…¨å±€æ›¿æ¢å­—ä½“</h2><p>ä¹‹å‰æˆ‘è®²è¿‡ï¼šåœ¨ Android ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šç›´æ¥æˆ–é—´æ¥çš„é€šè¿‡ TextView æ§ä»¶å»æ‰¿è½½å­—ä½“çš„æ˜¾ç¤ºï¼Œå› ä¸ºå…³äº Android æä¾›çš„æ‰¿è½½å­—ä½“æ˜¾ç¤ºçš„æ§ä»¶éƒ½ä¼šç›´æ¥æˆ–é—´æ¥ç»§æ‰¿ TextViewã€‚ </p><p>é‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªçªç ´å£ï¼š<strong>æˆ‘ä»¬å¯ä»¥åœ¨ Activity æˆ– Fragment çš„åŸºç±»é‡Œé¢è·å–å½“å‰å¸ƒå±€çš„ ViewTreeï¼Œéå† ViewTree ï¼Œè·å– TextView åŠå…¶å­ç±»ï¼Œæ‰¹é‡ä¿®æ”¹å®ƒä»¬çš„å­—ä½“ï¼Œä»è€Œè¾¾åˆ°å…¨å±€æ›¿æ¢å­—ä½“çš„æ•ˆæœã€‚</strong></p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">//å…¨å±€æ›¿æ¢å­—ä½“å·¥å…·ç±»</span><br><span class="hljs-keyword">object</span> ChangeDefaultFontUtils &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> NOTO_SANS_BOLD = R.font.noto_sans_bold<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ–¹å¼ä¸€: éå†å¸ƒå±€çš„ ViewTree, æ‰¾åˆ° TextView åŠå…¶å­ç±»è¿›è¡Œæ‰¹é‡æ›¿æ¢</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> mContext ä¸Šä¸‹æ–‡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> rootView æ ¹View</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">changeDefaultFont</span><span class="hljs-params">(mContext: <span class="hljs-type">Context</span>?, rootView: <span class="hljs-type">View</span>?)</span></span>&#123;<br>        <span class="hljs-keyword">when</span>(rootView)&#123;<br>            <span class="hljs-keyword">is</span> ViewGroup -&gt; &#123;<br>                rootView.forEach &#123;<br>                    changeDefaultFont(mContext,it)<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">is</span> TextView -&gt; &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-keyword">val</span> typeface = ResourcesCompat.getFont(mContext!!, NOTO_SANS_BOLD)<br>                    <span class="hljs-keyword">val</span> fontStyle = rootView.typeface?.style ?: Typeface.NORMAL<br>                    rootView.setTypeface(typeface,fontStyle)<br>                &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>                    e.printStackTrace()<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//Activity åŸºç±»</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseActivity</span>: <span class="hljs-type">AppCompatActivity</span>()&#123;<br><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> &#123;<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        <span class="hljs-keyword">val</span> mRootView = LayoutInflater.from(<span class="hljs-keyword">this</span>).inflate(getLayoutId(), <span class="hljs-literal">null</span>)<br>        setContentView(mRootView)<br>        ChangeDefaultFontUtils.changeDefaultFont(<span class="hljs-keyword">this</span>,mRootView)<br>        initView()<br>    &#125;<br><br>    <span class="hljs-comment">/**è·å–å¸ƒå±€Id*/</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLayoutId</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span><br><br>    <span class="hljs-comment">/**åˆå§‹åŒ–*/</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initView</span><span class="hljs-params">()</span></span><br>&#125;<br><br><span class="hljs-comment">//MainActivity</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">BaseActivity</span>() &#123;<br><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLayoutId</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> &#123;<br>        <span class="hljs-keyword">return</span> R.layout.activity_main<br>    &#125;<br><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initView</span><span class="hljs-params">()</span></span> &#123;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ï¼š</p><p>1ã€åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€æ›¿æ¢å­—ä½“çš„å·¥å…·ç±»ï¼Œä¸»è¦é€»è¾‘ï¼š</p><p>åˆ¤æ–­å½“å‰ rootView æ˜¯å¦æ˜¯ä¸€ä¸ª ViewGroupï¼Œå¦‚æœæ˜¯ï¼Œéå†å–å‡ºå…¶æ‰€æœ‰çš„å­ Viewï¼Œç„¶åé€’å½’è°ƒç”¨ changeDefaultFont æ–¹æ³•ã€‚å†åˆ¤æ–­æ˜¯å¦æ˜¯ TextView æˆ–å…¶å­ç±»ï¼Œå¦‚æœæ˜¯å°±æ›¿æ¢å­—ä½“</p><p>2ã€åˆ›å»ºäº†ä¸€ä¸ª Activity åŸºç±»ï¼Œå¹¶åœ¨å…¶ä¸­å†™å…¥å­—ä½“æ›¿æ¢çš„é€»è¾‘</p><p>3ã€æœ€åè®©ä¸Šå±‚ Activity ç»§æ‰¿åŸºç±» Activity</p><p>é€»è¾‘å¾ˆç®€å•ï¼Œåœ¨çœ‹ä¸‹æˆ‘ä»¬ç¼–å†™çš„ Xml çš„ä¸€ä¸ªæ•ˆæœï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92b45198f4a6491f9be4eeb275ac4461~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616144417422"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿è¡Œçœ‹ä¸‹å®é™…æ›¿æ¢åçš„ä¸€ä¸ªæ•ˆæœï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7879ac4a76214c1bad6841f20cd0bf04~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616144927196" style="zoom:50%;" /><p>å¯ä»¥çœ‹åˆ°ï¼Œå­—ä½“è¢«æ›¿æ¢äº†ã€‚</p><p>ç°åœ¨æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹è¿™ç§æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼š</p><p><strong>ä¼˜ç‚¹</strong>ï¼šæˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹ Xml å¸ƒå±€ï¼Œä¸éœ€è¦é‡å†™å¤šä¸ªæ§ä»¶ï¼Œåªéœ€è¦åœ¨ <strong>inflate View</strong> ä¹‹åè°ƒä¸€ä¸‹å°±å¯ä»¥äº†</p><p><strong>ç¼ºç‚¹</strong>ï¼šä¸éš¾å‘ç°è¿™ç§æ–¹å¼ä¼šéå† Xml æ–‡ä»¶ä¸­çš„æ‰€æœ‰ View å’Œ ViewGroupï¼Œä½†æ˜¯å¦‚æœå‡ºç° RecyclerView , ListViewï¼Œæˆ–è€…å…¶ä»– ViewGroup é‡Œé¢åŠ¨æ€æ·»åŠ  Viewï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æ˜¯éœ€è¦å»æ‰‹åŠ¨æ·»åŠ æ›¿æ¢çš„é€»è¾‘ï¼Œå¦åˆ™å­—ä½“ä¸ä¼šç”Ÿæ•ˆã€‚è€Œä¸”å®ƒæ¯æ¬¡é€’å½’éå† ViewTreeï¼Œæ€§èƒ½ä¸Šå¤šå°‘ä¼šæœ‰ç‚¹å½±å“</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ç¬¬äºŒç§æ–¹å¼</p><h2 id="äºŒã€æ–¹å¼äºŒï¼šé€šè¿‡-LayoutInflaterï¼Œå…¨å±€æ›¿æ¢å­—ä½“"><a href="#äºŒã€æ–¹å¼äºŒï¼šé€šè¿‡-LayoutInflaterï¼Œå…¨å±€æ›¿æ¢å­—ä½“" class="headerlink" title="äºŒã€æ–¹å¼äºŒï¼šé€šè¿‡ LayoutInflaterï¼Œå…¨å±€æ›¿æ¢å­—ä½“"></a>äºŒã€æ–¹å¼äºŒï¼šé€šè¿‡ LayoutInflaterï¼Œå…¨å±€æ›¿æ¢å­—ä½“</h2><p>è®²è¿™ç§æ–¹å¼å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å¯¹ LayoutInflater çš„ inflate è¿‡ç¨‹æœ‰ä¸€å®šçš„äº†è§£ï¼Œä»¥ AppCompatActivity çš„ setContentView ä¸ºä¾‹å¤§è‡´è¯´ä¸‹æµç¨‹ï¼š</p><p><strong>æˆ‘ä»¬åœ¨ Activity çš„ setContentView ä¸­ä¼ å…¥ä¸€ä¸ªå¸ƒå±€ Xmlï¼ŒActivity ä¼šé€šè¿‡ä»£ç†ç±» AppCompatDelegateImpl æŠŠå®ƒäº¤ç”± LayoutInflater è¿›è¡Œè§£æï¼Œè§£æå‡ºæ¥åï¼Œä¼šäº¤ç”±è‡ªå·±çš„ 3 ä¸ªå·¥å‚å»åˆ›å»º Viewï¼Œä¼˜å…ˆçº§åˆ†åˆ«æ˜¯mFactory2ã€mFactoryã€mPrivateFactory</strong></p><p>æµç¨‹å¤§æ¦‚å°±è¯´åˆ°è¿™é‡Œï¼Œå…·ä½“è¿‡ç¨‹æˆ‘åç»­ä¼šå†™ä¸€ç¯‡æ–‡ç« ä¸“é—¨å»è®²ã€‚</p><p>mFactory2ã€mFactory ï¼Œç³»ç»Ÿæä¾›äº†å¼€æ”¾çš„ Api ç»™æˆ‘ä»¬å»è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•åœ¨ LayoutInflaterCompat.java æ–‡ä»¶ä¸­</span><br><span class="hljs-meta">@Deprecated</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFactory</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> LayoutInflater inflater, <span class="hljs-meta">@NonNull</span> LayoutInflaterFactory factory)</span> &#123;<br>    <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">21</span>) &#123;<br>        inflater.setFactory2(factory != <span class="hljs-literal">null</span> ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">Factory2Wrapper</span>(factory) : <span class="hljs-literal">null</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">final</span> LayoutInflater.<span class="hljs-type">Factory2</span> <span class="hljs-variable">factory2</span> <span class="hljs-operator">=</span> factory != <span class="hljs-literal">null</span><br>                ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">Factory2Wrapper</span>(factory) : <span class="hljs-literal">null</span>;<br>        inflater.setFactory2(factory2);<br><br>        <span class="hljs-keyword">final</span> LayoutInflater.<span class="hljs-type">Factory</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> inflater.getFactory();<br>        <span class="hljs-keyword">if</span> (f <span class="hljs-keyword">instanceof</span> LayoutInflater.Factory2) &#123;<br>            forceSetFactory2(inflater, (LayoutInflater.Factory2) f);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            forceSetFactory2(inflater, factory2);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFactory2</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> LayoutInflater inflater, <span class="hljs-meta">@NonNull</span> LayoutInflater.Factory2 factory)</span> &#123;<br>    inflater.setFactory2(factory);<br>  <br>    <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &lt; <span class="hljs-number">21</span>) &#123;<br>        <span class="hljs-keyword">final</span> LayoutInflater.<span class="hljs-type">Factory</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> inflater.getFactory();<br>        <span class="hljs-keyword">if</span> (f <span class="hljs-keyword">instanceof</span> LayoutInflater.Factory2) &#123;<br>            forceSetFactory2(inflater, (LayoutInflater.Factory2) f);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            forceSetFactory2(inflater, factory);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨ LayoutInflaterCompat è¿™ä¸ªç±»ä¸­ï¼ŒLayoutInflaterCompat æ˜¯ LayoutInflater ä¸€ä¸ªè¾…åŠ©ç±»ï¼Œå¯ä»¥çœ‹åˆ°ï¼š</p><p>1ã€setFactory æ–¹æ³•ä½¿ç”¨äº† @Deprecated æ³¨è§£è¡¨ç¤ºè¿™ä¸ª Api è¢«å¼ƒç”¨</p><p>2ã€setFactory2 æ˜¯ Android 3.0 å¼•å…¥çš„ï¼Œå®ƒå’Œ setFactory åŠŸèƒ½æ˜¯ä¸€è‡´çš„ï¼ŒåŒºåˆ«å°±åœ¨äºä¼ å…¥çš„æ¥å£å‚æ•°ä¸ä¸€æ ·ï¼ŒsetFactory2 çš„æ¥å£å‚æ•°è¦å¤šå®ç°ä¸€ä¸ªæ–¹æ³•</p><p>åˆ©ç”¨ setFactory ç³»åˆ—æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p><p><strong>1ï¼‰ã€æ‹¿åˆ° LayoutInflater inflate è¿‡ç¨‹ä¸­ Xml æ§ä»¶å¯¹åº”çš„åç§°å’Œå±æ€§</strong></p><p><strong>2ï¼‰ã€æˆ‘ä»¬å¯ä»¥å¯¹æ§ä»¶è¿›è¡Œæ›¿æ¢æˆ–è€…åšç›¸å…³çš„é€»è¾‘å¤„ç†</strong></p><p>çœ‹ä¸ªå®é™…ä¾‹å­ï¼šè¿˜æ˜¯æ–¹å¼ä¸€çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨ BaseActivity ä¸­å¢åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">//Activity åŸºç±»</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseActivity</span>: <span class="hljs-type">AppCompatActivity</span>()&#123;<br><br>   <span class="hljs-comment">//æ–°å¢éƒ¨åˆ†</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> TAG: String? = javaClass.simpleName<br>  <br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> &#123;<br>      <span class="hljs-comment">//...</span><br>      <span class="hljs-comment">//æ–°å¢éƒ¨åˆ†ï¼Œå…¶ä½™ä»£ç çœç•¥</span><br>      LayoutInflaterCompat.setFactory2(layoutInflater,<span class="hljs-keyword">object</span> : LayoutInflater.Factory2&#123;<br>            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(parent: <span class="hljs-type">View</span>?, name: <span class="hljs-type">String</span>, context: <span class="hljs-type">Context</span>, attrs: <span class="hljs-type">AttributeSet</span></span></span><br><span class="hljs-params"><span class="hljs-function">            )</span></span>: View? &#123;<br>                Log.d(TAG, <span class="hljs-string">&quot;name: <span class="hljs-variable">$name</span>&quot;</span> )<br>                <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until attrs.attributeCount)&#123;<br>                    Log.d(TAG, <span class="hljs-string">&quot;attr: <span class="hljs-subst">$&#123;attrs.getAttributeName(i)&#125;</span> <span class="hljs-subst">$&#123;attrs.getAttributeValue(i)&#125;</span>&quot;</span>)<br>                &#125;<br>              <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>            &#125;<br><br>            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(name: <span class="hljs-type">String</span>, context: <span class="hljs-type">Context</span>, attrs: <span class="hljs-type">AttributeSet</span>)</span></span>: View? &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>            &#125;<br><br>        &#125;)<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>       <span class="hljs-comment">//...</span><br>    &#125;<br><br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢ LayoutInflaterCompat.setFactory2 æ–¹æ³•å¿…é¡»æ”¾åœ¨ super.onCreate(savedInstanceState) çš„å‰é¢ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼Œå› ä¸ºç³»ç»Ÿä¼šåœ¨ AppCompatActivity çš„ oncreate æ–¹æ³•ç»™ LayoutInflater è®¾ç½®ä¸€ä¸ª Factoryï¼Œè€Œå¦‚æœåœ¨å·²ç»è®¾ç½®çš„æƒ…å†µä¸‹å†å»è®¾ç½®ï¼ŒLayoutInflater çš„ setFactory ç³»åˆ—æ–¹æ³•å°±ä¼šæŠ›å¼‚å¸¸ï¼Œæºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//AppCompatActivity çš„ oncreate</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> &#123;<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">AppCompatDelegate</span> <span class="hljs-variable">delegate</span> <span class="hljs-operator">=</span> getDelegate();<br>    <span class="hljs-comment">//è°ƒç”¨ AppCompatDelegateImpl çš„ installViewFactory è®¾ç½® Factory</span><br>    delegate.installViewFactory();<br>    <span class="hljs-comment">//...</span><br>&#125;<br><br><span class="hljs-comment">//AppCompatDelegateImpl çš„ installViewFactory</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">installViewFactory</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">LayoutInflater</span> <span class="hljs-variable">layoutInflater</span> <span class="hljs-operator">=</span> LayoutInflater.from(mContext);<br>    <span class="hljs-keyword">if</span> (layoutInflater.getFactory() == <span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-comment">//å¦‚æœå½“å‰ LayoutInflater çš„ Factory ä¸ºç©ºï¼Œåˆ™è¿›è¡Œè®¾ç½®</span><br>        LayoutInflaterCompat.setFactory2(layoutInflater, <span class="hljs-built_in">this</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">//å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™è¿›è¡Œ Log æ—¥å¿—æ‰“å°</span><br>        <span class="hljs-keyword">if</span> (!(layoutInflater.getFactory2() <span class="hljs-keyword">instanceof</span> AppCompatDelegateImpl)) &#123;<br>            Log.i(TAG, <span class="hljs-string">&quot;The Activity&#x27;s LayoutInflater already has a Factory installed&quot;</span><br>                    + <span class="hljs-string">&quot; so we can not install AppCompat&#x27;s&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//LayoutInflater çš„ setFactory2</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFactory2</span><span class="hljs-params">(Factory2 factory)</span> &#123;<br>    <span class="hljs-comment">//å¦‚æœå·²ç»è®¾ç½®ï¼Œåˆ™æŠ›å¼‚å¸¸</span><br>    <span class="hljs-keyword">if</span> (mFactorySet) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">&quot;A factory has already been set on this LayoutInflater&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (factory == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NullPointerException</span>(<span class="hljs-string">&quot;Given factory can not be null&quot;</span>);<br>    &#125;<br>    mFactorySet = <span class="hljs-literal">true</span>;<br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢ AppCompatActivity ä¸­è®¾ç½® Factory æ˜¯ android.appcompat  1.1.0 ç‰ˆæœ¬ï¼Œè€Œå¦‚æœæ˜¯æ›´é«˜çš„ç‰ˆæœ¬ï¼Œå¦‚ 1.3.0ï¼Œå¯èƒ½è®¾ç½®çš„åœ°æ–¹ä¼šæœ‰ç‚¹å˜åŒ–ï¼Œä½†æ˜¯ä¸å½±å“æˆ‘ä»¬è®¾ç½®ä½ç½®çš„å˜åŒ–ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹ä¸‹æºç ï¼Œè¿™é‡Œä½ åªè¦çŸ¥é“æˆ‘ä»¬å¿…é¡»åœ¨ Activity çš„ super.onCreate(savedInstanceState) ä¹‹å‰è®¾ç½® Factory å°±å¯ä»¥äº†</p><p>è¿è¡Œåº”ç”¨ç¨‹åºï¼Œçœ‹ä¸‹å‡ ä¸ªä¸»è¦æ§ä»¶çš„æˆªå›¾æ‰“å°ä¿¡æ¯ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d11def9507f94b05bfd95556137142ee~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616150016885" style="zoom:50%;" /><p>ä» Log è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œä½ æ‰€æœ‰çš„ Xml æ§ä»¶ï¼Œéƒ½ä¼šç»è¿‡ LayoutInflaterFactory.onCreateView æ–¹æ³•èµ°ä¸€éå»å®ç°åˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œåœ¨å…¶ä¸­å¯ä»¥æœ‰æ•ˆçš„åˆ†è¾¨å‡ºæ˜¯ä»€ä¹ˆæ§ä»¶ï¼Œä»¥åŠå®ƒæœ‰ä»€ä¹ˆå±æ€§ã€‚å¹¶ä¸” onCreateView æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯ä¸€ä¸ª Viewï¼Œå› æ­¤æˆ‘ä»¬åœ¨æ­¤å¤„å¯ä»¥å¯¹æ§ä»¶è¿›è¡Œæ›¿æ¢æˆ–è€…åšç›¸å…³çš„é€»è¾‘å¤„ç†</p><p>åˆ°è¿™é‡Œï¼Œä½ æ˜¯å¦æœ‰äº†å…¨ä½“æ›¿æ¢å­—ä½“çš„æ€è·¯äº†å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå·²ç»å¾ˆæ˜äº†ï¼š<strong>åˆ©ç”¨è‡ªå®šä¹‰çš„ Factory è¿›è¡Œå­—ä½“çš„æ›¿æ¢</strong></p><p>è¿™ç§æ–¹å¼æˆ‘ä»¬åªéœ€è¦åœ¨ BaseActivity é‡Œé¢æ“ä½œå°±å¯ä»¥äº†ï¼Œè€Œä¸”æœ‰æ•ˆçš„è§£å†³äº†æ–¹å¼ä¸€å¸¦æ¥çš„é—®é¢˜ï¼Œæé«˜äº†æ•ˆç‡ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseActivity</span>: <span class="hljs-type">AppCompatActivity</span>()&#123;<br><br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> &#123;<br>        LayoutInflaterCompat.setFactory2(layoutInflater,<span class="hljs-keyword">object</span> : LayoutInflater.Factory2&#123;<br>            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(parent: <span class="hljs-type">View</span>?, name: <span class="hljs-type">String</span>, context: <span class="hljs-type">Context</span>, attrs: <span class="hljs-type">AttributeSet</span></span></span><br><span class="hljs-params"><span class="hljs-function">            )</span></span>: View? &#123;<br>                <span class="hljs-keyword">var</span> view: View? = <span class="hljs-literal">null</span><br>                <span class="hljs-keyword">if</span>(<span class="hljs-number">1</span> == name.indexOf(<span class="hljs-string">&quot;.&quot;</span>))&#123;<br>                    <span class="hljs-comment">//è¡¨ç¤ºè‡ªå®šä¹‰ View</span><br>                    <span class="hljs-comment">//é€šè¿‡åå°„åˆ›å»º</span><br>                    view = layoutInflater.createView(name,<span class="hljs-literal">null</span>,attrs)<br>                &#125;<br><br>                <span class="hljs-keyword">if</span>(view == <span class="hljs-literal">null</span>)&#123;<br>                    <span class="hljs-comment">//é€šè¿‡ç³»ç»Ÿåˆ›å»ºä¸€ç³»åˆ— appcompat çš„ View</span><br>                    view = delegate.createView(parent, name, context, attrs)<br>                &#125;<br><br>                <span class="hljs-keyword">if</span>(view <span class="hljs-keyword">is</span> TextView)&#123;<br>                    <span class="hljs-comment">//å¦‚æœæ˜¯ TextView æˆ–å…¶å­ç±»ï¼Œåˆ™è¿›è¡Œå­—ä½“çš„æ›¿æ¢</span><br>                    ChangeDefaultFontUtils.changeDefaultFont(<span class="hljs-keyword">this</span><span class="hljs-symbol">@BaseActivity</span>,view)<br>                &#125;<br><br>                <span class="hljs-keyword">return</span> view<br>            &#125;<br><br>            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(name: <span class="hljs-type">String</span>, context: <span class="hljs-type">Context</span>, attrs: <span class="hljs-type">AttributeSet</span>)</span></span>: View? &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>            &#125;<br><br>        &#125;)<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        setContentView(getLayoutId())<br>        initView()<br>    &#125;<br><br>    <span class="hljs-comment">/**è·å–å¸ƒå±€Id*/</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLayoutId</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span><br><br>    <span class="hljs-comment">/**åˆå§‹åŒ–*/</span><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initView</span><span class="hljs-params">()</span></span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æˆ‘ä»¬åšäº†ï¼š</p><p>1ã€åˆ¤æ–­æ˜¯è‡ªå®šä¹‰ View ï¼Œé€šè¿‡åå°„åˆ›å»º</p><p>2ã€åˆ¤æ–­æ˜¯ç³»ç»Ÿæä¾›çš„ä¸€äº›æ§ä»¶ï¼Œä½¿ç”¨ appcompat ç³»åˆ— View è¿›è¡Œæ›¿æ¢</p><p>3ã€åˆ¤æ–­æ˜¯ TextView æˆ–å…¶å­ç±»ï¼Œè¿›è¡Œå­—ä½“çš„æ›¿æ¢</p><p>è¿è¡Œåº”ç”¨ç¨‹åºï¼Œæœ€ç»ˆå®ç°äº†å’Œæ–¹å¼ä¸€ä¸€æ ·çš„æ•ˆæœï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0f36137458d145c3a1847624f1db2c4b~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616144927196" style="zoom:50%;" /><h2 id="ä¸‰ã€æ–¹å¼ä¸‰ï¼šé€šè¿‡é…ç½®åº”ç”¨ä¸»é¢˜ï¼Œå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“"><a href="#ä¸‰ã€æ–¹å¼ä¸‰ï¼šé€šè¿‡é…ç½®åº”ç”¨ä¸»é¢˜ï¼Œå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“" class="headerlink" title="ä¸‰ã€æ–¹å¼ä¸‰ï¼šé€šè¿‡é…ç½®åº”ç”¨ä¸»é¢˜ï¼Œå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“"></a>ä¸‰ã€æ–¹å¼ä¸‰ï¼šé€šè¿‡é…ç½®åº”ç”¨ä¸»é¢˜ï¼Œå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“</h2><p>è¿™ç§æ–¹å¼æŒºç®€å•çš„ï¼Œåœ¨ application ä¸­ï¼Œé€šè¿‡ android:theme æ¥é…ç½®ä¸€ä¸ª App çš„ä¸»é¢˜ã€‚ä¸€èˆ¬æ–°åˆ›å»ºçš„é¡¹ç›®ï¼Œéƒ½æ˜¯ä¼šæœ‰ä¸€ä¸ªé»˜è®¤åŸºç¡€ä¸»é¢˜ã€‚åœ¨å…¶ä¸­è¿½åŠ å…³äºå­—ä½“çš„å±æ€§ï¼Œå°±å¯ä»¥å®Œæˆå…¨å±€é»˜è®¤å­—ä½“çš„æ›¿æ¢ï¼Œåœ¨ä¸»é¢˜ä¸­æˆ‘ä»¬å¯ä»¥å¯¹ä»¥ä¸‹ä¸‰ä¸ªå±æ€§è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;android:typeface&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;android:fontFamily&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;android:textStyle&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸‰è€…çš„è®¾ç½®å’Œå…³ç³»æˆ‘ä»¬åœ¨æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­å·²ç»è®²è¿‡ï¼Œè¿˜ä¸æ¸…æ¥šçš„å¯ä»¥å»çœ‹ä¸‹ <a href="https://juejin.cn/post/6973064546420260878#heading-5">ä¼ é€é—¨</a></p><p>å…³äº Xml ä¸­ä½¿ç”¨å­—ä½“çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸Šç¯‡æ–‡ç« ä¹Ÿå·²ç»è®²è¿‡ï¼Œè¿˜ä¸æ¸…æ¥šçš„å¯ä»¥å»çœ‹ä¸‹ <a href="https://juejin.cn/post/6974388756275019812">ä¼ é€é—¨</a></p><p>å› ä¸ºæˆ‘ä»¬åªéœ€è¦é…ç½®é»˜è®¤å­—ä½“ï¼Œæ‰€ä»¥æ–°å¢ä¸€è¡Œå¦‚ä¸‹é…ç½®ï¼Œå°±å¯ä»¥å®ç°å…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“çš„æ•ˆæœäº†ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Theme.ChangeDefaultFontDemo&quot;</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">&quot;Theme.MaterialComponents.DayNight.DarkActionBar.Bridge&quot;</span>&gt;</span><span class="language-xml"></span><br><span class="language-xml">//...</span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;android:fontFamily&quot;</span>&gt;</span>@font/noto_sans_bold<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span></span><br><span class="language-xml">  //...</span><br><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆå‡¡äº‹éƒ½æœ‰æ„å¤–ï¼Œå‡å¦‚ä½ çš„ Activity å¼•ç”¨äº†è‡ªå®šä¹‰ä¸»é¢˜ï¼Œä¸”è‡ªå®šä¹‰ä¸»é¢˜æ²¡æœ‰ç»§æ‰¿åŸºç¡€ä¸»é¢˜ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦è¡¥ä¸Šè¿™ä¸€è¡Œé…ç½®ï¼Œä¸ç„¶é…ç½®çš„é»˜è®¤å­—ä½“ä¸ä¼šç”Ÿæ•ˆ</p><h2 id="å››ã€æ–¹å¼å››ï¼šé€šè¿‡åå°„ï¼Œå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“"><a href="#å››ã€æ–¹å¼å››ï¼šé€šè¿‡åå°„ï¼Œå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“" class="headerlink" title="å››ã€æ–¹å¼å››ï¼šé€šè¿‡åå°„ï¼Œå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“"></a>å››ã€æ–¹å¼å››ï¼šé€šè¿‡åå°„ï¼Œå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“</h2><p>é€šè¿‡åå°„ä¿®æ”¹ï¼Œå…¶å®å’Œæ–¹å¼ä¸‰æœ‰ç‚¹ç±»ä¼¼ã€‚å› ä¸ºåœ¨  Android Support Library 26 ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨ Xml ä¸­è®¾ç½®ç¬¬ä¸‰æ–¹å­—ä½“ï¼Œè€Œåªèƒ½è®¾ç½®ç³»ç»Ÿæä¾›çš„ä¸€äº›é»˜è®¤å­—ä½“ï¼Œæ‰€ä»¥é€šè¿‡åå°„è¿™ç§æ–¹å¼ï¼Œå¯ä»¥æŠŠç³»ç»Ÿé»˜è®¤çš„å­—ä½“æ›¿æ¢ä¸ºç¬¬ä¸‰æ–¹çš„å­—ä½“ã€‚è€Œç°åœ¨æˆ‘ä»¬ä½¿ç”¨çš„ç‰ˆæœ¬åŸºæœ¬ä¸Šéƒ½ä¼šå¤§äºç­‰äº 26ï¼Œå› æ­¤é€šè¿‡é…ç½®åº”ç”¨ä¸»é¢˜çš„æ–¹å¼å°±å¯ä»¥å®ç°å…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“çš„æ•ˆæœã€‚ä½†æ˜¯è¿™é‡Œå¹¶ä¸å¦¨ç¢æˆ‘ä»¬è®²åå°„ä¿®æ”¹é»˜è®¤å­—ä½“ã€‚</p><h3 id="1ã€æ­¥éª¤ä¸€ï¼šåœ¨-App-çš„ä¸»é¢˜é…ç½®é»˜è®¤å­—ä½“"><a href="#1ã€æ­¥éª¤ä¸€ï¼šåœ¨-App-çš„ä¸»é¢˜é…ç½®é»˜è®¤å­—ä½“" class="headerlink" title="1ã€æ­¥éª¤ä¸€ï¼šåœ¨  App çš„ä¸»é¢˜é…ç½®é»˜è®¤å­—ä½“"></a>1ã€æ­¥éª¤ä¸€ï¼šåœ¨  App çš„ä¸»é¢˜é…ç½®é»˜è®¤å­—ä½“</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Theme.ChangeDefaultFontDemo&quot;</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">&quot;Theme.MaterialComponents.DayNight.DarkActionBar.Bridge&quot;</span>&gt;</span><span class="language-xml"></span><br><span class="language-xml">//...</span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;android:typeface&quot;</span>&gt;</span>serif<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span></span><br><span class="language-xml">  //...</span><br><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œéšä¾¿é€‰ä¸€ä¸ªé»˜è®¤å­—ä½“ï¼Œåç»­æˆ‘ä»¬åå°„çš„æ—¶å€™éœ€è¦æ‹¿åˆ°ä½ è¿™ä¸ªé€‰çš„é»˜è®¤å­—ä½“ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªæ›¿æ¢</p><p><strong>æ³¨æ„</strong>: è¿™é‡Œå¿…é¡»é…ç½® <strong>android:typeface</strong> ï¼Œå…¶ä»–ä¸¤ä¸ªä¸è¡Œï¼Œåœ¨æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ä¸­ï¼Œå…³äº typefaceï¼ŒtextStyle å’Œ fontFamily å±æ€§ä¸‰è€…çš„å…³ç³»æˆ‘ä»¬åˆ†æè¿‡ï¼Œè¿˜ä¸æ¸…æ¥šçš„å¯ä»¥å»çœ‹çœ‹ <a href="https://juejin.cn/post/6973064546420260878#heading-5">ä¼ é€é—¨</a>ï¼š</p><p>setTypefaceFromAttrs æ–¹æ³•æ˜¯ TextView æœ€ç»ˆè®¾ç½®å­—ä½“çš„æ–¹æ³•ï¼Œ<strong>å½“ typeface å’Œ familyName éƒ½ä¸ºç©ºï¼Œåˆ™ä¼šæ ¹æ® typefaceIndex çš„å€¼å–ç›¸åº”çš„ç³»ç»Ÿé»˜è®¤å­—ä½“</strong>ã€‚å½“æˆ‘ä»¬è®¾ç½®  <strong>android:typeface</strong>  å±æ€§æ—¶ï¼Œä¼šå°†å¯¹åº”çš„å±æ€§å€¼èµ‹ç»™ typefaceIndex ï¼Œå¹¶æŠŠ familyName ç½®ä¸º nullï¼Œè€Œ typeface é»˜è®¤ä¸º nullï¼Œå› æ­¤æ»¡è¶³æ¡ä»¶</p><h3 id="2ã€é€šè¿‡åå°„ä¿®æ”¹-Typeface-é»˜è®¤å­—ä½“"><a href="#2ã€é€šè¿‡åå°„ä¿®æ”¹-Typeface-é»˜è®¤å­—ä½“" class="headerlink" title="2ã€é€šè¿‡åå°„ä¿®æ”¹ Typeface é»˜è®¤å­—ä½“"></a>2ã€é€šè¿‡åå°„ä¿®æ”¹ Typeface é»˜è®¤å­—ä½“</h3><p><strong>æ³¨æ„</strong>ï¼šGoogle åœ¨ Android 9.0 åŠä¹‹åå¯¹åå°„åšäº†é™åˆ¶ï¼Œè¢«ä½¿ç”¨ <code>@hide</code> æ ‡è®°çš„å±æ€§å’Œæ–¹æ³•é€šè¿‡åå°„æ‹¿ä¸åˆ°</p><p>åœ¨ Typeface ä¸­ï¼Œè‡ªå¸¦çš„ä¸€äº›é»˜è®¤å­—ä½“è¢«æ ‡è®°çš„æ˜¯ <strong>public static final</strong>ï¼Œå› æ­¤è¿™é‡Œæ— éœ€æ‹…å¿ƒåå°„çš„é™åˆ¶</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae1c4453f9f94bc08754628b525bd687~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210618174439624"></p><p>å› ä¸ºåœ¨ä¸Šä¸€æ­¥é…ç½®çš„ä¸»é¢˜ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®çš„æ˜¯ serif ï¼Œæ‰€ä»¥è¿™é‡Œæ›¿æ¢å®ƒå°±å¥½äº†ï¼Œå®Œæ•´çš„æ–¹æ³•å°±æ˜¯é€šè¿‡åå°„æ‹¿åˆ° Typeface çš„é»˜è®¤å­—ä½“ SERIFï¼Œç„¶åä½¿ç”¨åå°„å°†å®ƒä¿®æ”¹æˆæˆ‘ä»¬éœ€è¦çš„å­—ä½“å³å¯ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">object</span> ChangeDefaultFontUtils &#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> NOTO_SANS_BOLD = R.font.noto_sans_bold<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">changeDefaultFont</span><span class="hljs-params">(mContext: <span class="hljs-type">Context</span>)</span></span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">val</span> typeface = ResourcesCompat.getFont(mContext, NOTO_SANS_BOLD)<br>            <span class="hljs-keyword">val</span> defaultField = Typeface::<span class="hljs-keyword">class</span>.java.getDeclaredField(<span class="hljs-string">&quot;SERIF&quot;</span>)<br>            defaultField.isAccessible = <span class="hljs-literal">true</span><br>            defaultField[<span class="hljs-literal">null</span>] = typeface<br>        &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>            e.printStackTrace()<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3ã€åœ¨-Application-é‡Œé¢ï¼Œè°ƒç”¨æ›¿æ¢çš„æ–¹æ³•"><a href="#3ã€åœ¨-Application-é‡Œé¢ï¼Œè°ƒç”¨æ›¿æ¢çš„æ–¹æ³•" class="headerlink" title="3ã€åœ¨ Application é‡Œé¢ï¼Œè°ƒç”¨æ›¿æ¢çš„æ–¹æ³•"></a>3ã€åœ¨ Application é‡Œé¢ï¼Œè°ƒç”¨æ›¿æ¢çš„æ–¹æ³•</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() &#123;<br>    <br>    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> &#123;<br>        <span class="hljs-keyword">super</span>.onCreate()<br>        ChangeDefaultFontUtils.changeDefaultFont(<span class="hljs-keyword">this</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆç»è¿‡ä¸Šé¢çš„ä¸‰ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥å®ç°å…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“çš„æ•ˆæœ</p><h2 id="äº”ã€é¡¹ç›®å®è·µ"><a href="#äº”ã€é¡¹ç›®å®è·µ" class="headerlink" title="äº”ã€é¡¹ç›®å®è·µ"></a>äº”ã€é¡¹ç›®å®è·µ</h2><p>å›åˆ°æˆ‘ä»¬å‰©ä¸‹çš„éœ€æ±‚ï¼š<strong>å…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“</strong></p><p>1ã€æ–¹å¼ä¸€å’Œæ–¹å¼äºŒéƒ½æ˜¯å…¨å±€æ›¿æ¢å­—ä½“ï¼Œä¼šå°†æˆ‘ä»¬ä¹‹å‰å·²ç»è®¾ç½®å¥½çš„å­—ä½“ç»™è¦†ç›–ï¼Œå› æ­¤å¹¶ä¸é€‚åˆ</p><p>2ã€æ–¹å¼ä¸‰å’Œæ–¹å¼å››éƒ½æ˜¯å…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“ï¼Œæˆ‘ä»¬ä¹‹å‰å·²ç»è®¾ç½®å¥½çš„å­—ä½“ä¸ä¼šè¢«è¦†ç›–ï¼Œæ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ï¼Œä½†æ˜¯æ–¹å¼å››é€šè¿‡åå°„ï¼Œæ˜¯å› ä¸ºä¹‹å‰æˆ‘ä»¬ä¸èƒ½ç›´æ¥åœ¨ Xml é‡Œé¢è®¾ç½®ç¬¬ä¸‰æ–¹å­—ä½“ã€‚ä» Android Support Library 26 åŠä¹‹åæ”¯æŒåœ¨ Xml é‡Œé¢è®¾ç½®é»˜è®¤å­—ä½“äº†ï¼Œå› æ­¤æˆ‘åœ¨é¡¹ç›®å®è·µä¸­ï¼Œæœ€ç»ˆé€‰æ‹©äº†æ–¹å¼ä¸‰å®ç°äº†å…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“çš„æ•ˆæœï¼Œéœ€æ±‚å®Œç»“ ğŸ‰</p><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><p>æœ€åå›é¡¾ä¸€ä¸‹æˆ‘ä»¬è®²çš„é‡ç‚¹çŸ¥è¯†ï¼š</p><p>1ã€é€šè¿‡éå† ViewTreeï¼Œå…¨å±€æ›¿æ¢å­—ä½“ï¼Œè¿™ç§æ–¹å¼æ¯æ¬¡éƒ½éœ€è¦é€’å½’éå†ï¼Œæœ‰æ€§èƒ½é—®é¢˜</p><p>2ã€é€šè¿‡ LayoutInflater è®¾ç½®è‡ªå®šä¹‰ Factory å…¨å±€æ›¿æ¢å­—ä½“ï¼Œæ•ˆç‡é«˜</p><p>3ã€é€šè¿‡é…ç½®åº”ç”¨ä¸»é¢˜å…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“ï¼Œç®€å•é«˜æ•ˆ</p><p>4ã€é€šè¿‡åå°„å…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“ï¼Œç›¸å¯¹äº 3ï¼Œæ€§èƒ½ä¼šå·®ç‚¹ï¼Œä½¿ç”¨æ­¥éª¤ä¹Ÿç›¸å¯¹å¤æ‚</p><p>5ã€æˆ‘åœ¨é¡¹ç›®å®è·µè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªé€‰æ‹©</p><p>å¥½äº†ï¼Œæœ¬ç³»åˆ—æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://segmentfault.com/a/1190000011401796">å…¨å±€ä¿®æ”¹é»˜è®¤å­—ä½“ï¼Œé€šè¿‡åå°„ä¹Ÿèƒ½åšåˆ°</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>Font</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Android Font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Androidå­—ä½“ç³»åˆ— ï¼ˆä¸‰ï¼‰ï¼šXmlä¸­çš„å­—ä½“</title>
    <link href="/2022/10/11/Android%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AXml%E4%B8%AD%E7%9A%84%E5%AD%97%E4%BD%93/"/>
    <url>/2022/10/11/Android%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AXml%E4%B8%AD%E7%9A%84%E5%AD%97%E4%BD%93/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210111037504.jpeg" alt="michael-baccin-sN4nCLXGiu8-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹ Typeface è¿›è¡Œäº†æ·±å…¥çš„è§£æï¼Œè¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6973553157326503943">Androidå­—ä½“ç³»åˆ— ï¼ˆäºŒï¼‰ï¼šTypefaceå®Œå…¨è§£æ</a>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹ Google æ¨å‡ºçš„ Xml ä¸­ä½¿ç”¨å­—ä½“</p><h2 id="ä¸€ã€Xml-ä¸­å­—ä½“ä»‹ç»"><a href="#ä¸€ã€Xml-ä¸­å­—ä½“ä»‹ç»" class="headerlink" title="ä¸€ã€Xml ä¸­å­—ä½“ä»‹ç»"></a>ä¸€ã€Xml ä¸­å­—ä½“ä»‹ç»</h2><p>Google åœ¨ Android Support Library 26 å¼•å…¥äº† Xml ä¸­è®¾ç½®å­—ä½“è¿™é¡¹æ–°åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è®©ä½ å°†å­—ä½“å½“æˆèµ„æºå»ä½¿ç”¨ï¼Œä½ å¯ä»¥åœ¨ res&#x2F;font&#x2F; æ–‡ä»¶å¤¹ä¸­æ·»åŠ  font æ–‡ä»¶ï¼Œå°†å­—ä½“æ†ç»‘ä¸ºèµ„æºã€‚è¿™äº›å­—ä½“ä¼šåœ¨ R æ–‡ä»¶ä¸­ç¼–è¯‘ï¼Œå¯ç›´æ¥åœ¨ Android Studio ä¸­ä½¿ç”¨ï¼Œå¦‚:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml">@font/myfont <br>R.font.myfont<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šè¦ä½¿ç”¨ Xml å­—ä½“åŠŸèƒ½ï¼Œéœ€å¼•å…¥ Android Support Library 26 åŠæ›´é«˜ç‰ˆæœ¬ä¸”è¦åœ¨ Android 4.1 åŠæ›´é«˜ç‰ˆæœ¬çš„è®¾å¤‡</p><h2 id="äºŒã€ä½¿ç”¨æ­¥éª¤"><a href="#äºŒã€ä½¿ç”¨æ­¥éª¤" class="headerlink" title="äºŒã€ä½¿ç”¨æ­¥éª¤"></a>äºŒã€ä½¿ç”¨æ­¥éª¤</h2><p>1ã€å³é”®ç‚¹å‡» <strong>res</strong> æ–‡ä»¶å¤¹ï¼Œç„¶åè½¬åˆ° <strong>New &gt; Android resource directory</strong></p><p>2ã€åœ¨ <strong>Resource type</strong> åˆ—è¡¨ä¸­ï¼Œé€‰æ‹© <strong>font</strong>ï¼Œç„¶åç‚¹å‡» <strong>OK</strong></p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cd62460948db4b58890928b39f79f5d1~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616203615018" style="zoom:50%;" /><p>3ã€åœ¨ <strong>font</strong> æ–‡ä»¶å¤¹ä¸­æ·»åŠ å­—ä½“æ–‡ä»¶</p><blockquote><p>å…³äºå­—ä½“ï¼Œæ¨èä¸¤ä¸ªå…è´¹ä¸‹è½½çš„ç½‘ç«™</p><p><a href="https://fonts.google.com/">https://fonts.google.com/</a></p><p><a href="https://www.1001freefonts.com/">https://www.1001freefonts.com/</a></p></blockquote><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/569d3b8d750e4d3ebf07598940d2523f~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616203940427" style="zoom:50%;" /><p>æ·»åŠ ä¹‹åå°±ä¼šç”Ÿæˆ R.font.ma_shan_zhenng_regular å’Œ R.font.noto_sans_bold</p><p>4ã€åŒå‡»å­—ä½“æ–‡ä»¶å¯é¢„è§ˆå½“å‰å­—ä½“</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5da14193f7c94277a54a15e39832c291~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616204148155"></p><p>ä»¥ä¸Š 4 ä¸ªæ­¥éª¤å®Œæˆåæˆ‘ä»¬å°±å¯ä»¥åœ¨ Xml ä¸­ä½¿ç”¨å­—ä½“äº†</p><p>5ã€åˆ›å»º font family</p><p>1ï¼‰ã€å³é”®ç‚¹å‡» font æ–‡ä»¶å¤¹ï¼Œç„¶åè½¬åˆ° <strong>New &gt; Font resource file</strong>ã€‚æ­¤æ—¶å°†æ˜¾ç¤º <strong>New Resource File</strong> çª—å£ã€‚</p><p>2ï¼‰ã€è¾“å…¥æ–‡ä»¶åï¼Œç„¶åç‚¹å‡» <strong>OK</strong>ã€‚æ–°çš„å­—ä½“èµ„æº Xml ä¼šåœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ã€‚</p><p>3ï¼‰ã€å°†å„ä¸ªå­—ä½“æ–‡ä»¶ã€æ ·å¼å’Œç²—ç»†å±æ€§éƒ½å°è£…åœ¨ <code>&lt;font&gt;</code> å…ƒç´ ä¸­ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">font-family</span> <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">tools:ignore</span>=<span class="hljs-string">&quot;UnusedAttribute&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">font</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fontStyle</span>=<span class="hljs-string">&quot;normal&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fontWeight</span>=<span class="hljs-string">&quot;400&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:font</span>=<span class="hljs-string">&quot;@font/ma_shan_zheng_regular&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">tools:ignore</span>=<span class="hljs-string">&quot;UnusedAttribute&quot;</span> /&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">font</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fontStyle</span>=<span class="hljs-string">&quot;normal&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:fontWeight</span>=<span class="hljs-string">&quot;400&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:font</span>=<span class="hljs-string">&quot;@font/noto_sans_bold&quot;</span></span><br><span class="hljs-tag">         /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">font-family</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å®è·µå‘ç°ä½¿ç”¨ font family å­˜åœ¨ä¸€äº›å‘ï¼š</p><p>1ã€ä¾‹å¦‚æˆ‘ä¸Šé¢æ·»åŠ äº†ä¸¤ä¸ª font æ ‡ç­¾ï¼Œè¿™ä¸ªæ—¶å€™åœ¨ Xml é‡Œé¢å¼•ç”¨å°†ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœï¼Œè€Œä¸”è®¾ç½®çš„ fontStyle ç­‰å±æ€§ä¸ä¼šç”Ÿæ•ˆã€‚</p><p>2ã€å½“åªæ·»åŠ äº†ä¸€ä¸ª font æ ‡ç­¾ï¼Œæ­¤æ—¶å­—ä½“ä¼šç”Ÿæ•ˆï¼Œä½†æ˜¯è®¾ç½®çš„ fontStyle ç­‰å±æ€§è¿˜æ˜¯ä¸ä¼šç”Ÿæ•ˆ</p><p>å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å»ºè®®ç›´æ¥å¯¹å­—ä½“èµ„æºè¿›è¡Œå¼•ç”¨ï¼Œæ ·å¼ç²—ç»†è¿™äº›åœ¨è¿›è¡Œå•ç‹¬çš„è®¾ç½®</p><h2 id="ä¸‰ã€åœ¨-XML-å¸ƒå±€ä¸­ä½¿ç”¨å­—ä½“"><a href="#ä¸‰ã€åœ¨-XML-å¸ƒå±€ä¸­ä½¿ç”¨å­—ä½“" class="headerlink" title="ä¸‰ã€åœ¨ XML å¸ƒå±€ä¸­ä½¿ç”¨å­—ä½“"></a>ä¸‰ã€åœ¨ XML å¸ƒå±€ä¸­ä½¿ç”¨å­—ä½“</h2><p>ç›´æ¥åœ¨å¸ƒå±€ Xml ä¸­ä½¿ç”¨ fontFamily å±æ€§è¿›è¡Œå¼•ç”¨ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81fe6df932464ebaa318c945c2cf8a82~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616205129045"></p><h2 id="å››ã€åœ¨æ ·å¼ä¸­æ·»åŠ å¹¶ä½¿ç”¨å­—ä½“"><a href="#å››ã€åœ¨æ ·å¼ä¸­æ·»åŠ å¹¶ä½¿ç”¨å­—ä½“" class="headerlink" title="å››ã€åœ¨æ ·å¼ä¸­æ·»åŠ å¹¶ä½¿ç”¨å­—ä½“"></a>å››ã€åœ¨æ ·å¼ä¸­æ·»åŠ å¹¶ä½¿ç”¨å­—ä½“</h2><p>1ã€åœ¨ style.xml ä¸­æ·»åŠ æ ·å¼</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;customfontstyle&quot;</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">&quot;Theme.ChangeDefaultFontDemo&quot;</span>&gt;</span><span class="language-xml"></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;android:fontFamily&quot;</span>&gt;</span>@font/noto_sans_bold<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span></span><br><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2ã€åœ¨å¸ƒå±€ Xml ä¸­ä½¿ç”¨ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/294f76797cd44994a3a753eb7327c6ae~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210616205611588"></p><h2 id="äº”ã€åœ¨ä»£ç ä¸­ä½¿ç”¨å­—ä½“"><a href="#äº”ã€åœ¨ä»£ç ä¸­ä½¿ç”¨å­—ä½“" class="headerlink" title="äº”ã€åœ¨ä»£ç ä¸­ä½¿ç”¨å­—ä½“"></a>äº”ã€åœ¨ä»£ç ä¸­ä½¿ç”¨å­—ä½“</h2><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ResourcesCompat æˆ– Resource çš„ gontFont æ–¹æ³•æ‹¿åˆ° Typeface å¯¹è±¡ï¼Œç„¶åè°ƒç”¨ç›¸å…³çš„ Api å»è®¾ç½®å°±è¡Œäº†ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-comment">//æ–¹å¼1</span><br><span class="hljs-keyword">val</span> typeface = ResourcesCompat.getFont(context, R.font.myfont)<br><span class="hljs-comment">//æ–¹å¼2</span><br><span class="hljs-keyword">val</span> typeface = resources.getFont(R.font.myfont)<br><span class="hljs-comment">//è®¾ç½®å­—ä½“</span><br>textView.typeface = typeface<br></code></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œåˆç†çš„å°è£…ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">object</span> FontUtil &#123;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> NOTO_SANS_BOLD = R.font.noto_sans_bold<br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> MA_SHAN_ZHENG_REGULAR = R.font.ma_shan_zheng_regular<br><br>    <span class="hljs-comment">/**ç¼“å­˜å­—ä½“ Map*/</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cacheTypeFaceMap: HashMap&lt;<span class="hljs-built_in">Int</span>,Typeface&gt; = HashMap()<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è®¾ç½® NotoSanUIBold å­—ä½“</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setNotoSanUIBold</span><span class="hljs-params">(mTextView: <span class="hljs-type">TextView</span>)</span></span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            mTextView.typeface = getTypeface(NOTO_SANS_BOLD)<br>        &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>            e.printStackTrace()<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è®¾ç½® MaShanZhengRegular å­—ä½“</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setMaShanZhengRegular</span><span class="hljs-params">(mTextView: <span class="hljs-type">TextView</span>)</span></span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            mTextView.typeface = getTypeface(MA_SHAN_ZHENG_REGULAR)<br>        &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>            e.printStackTrace()<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å­—ä½“ Typeface å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTypeface</span><span class="hljs-params">(fontResName: <span class="hljs-type">Int</span>)</span></span>: Typeface? &#123;<br>        <span class="hljs-keyword">val</span> cacheTypeface = cacheTypeFaceMap[fontResName]<br>        <span class="hljs-keyword">if</span> (cacheTypeface != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> cacheTypeface<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">val</span> typeface: Typeface? = ResourcesCompat.getFont(MyApplication.mApplication, fontResName)<br>            cacheTypeFaceMap[fontResName] = typeface!!<br>            typeface<br>        &#125; <span class="hljs-keyword">catch</span> (e: Exception) &#123;<br>            e.printStackTrace()<br>            Typeface.DEFAULT<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆåç»­æˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨å­—ä½“ï¼Œå°±åªéœ€è°ƒä¸€è¡Œä»£ç å°± Ok äº†</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">FontUtil.setMaShanZhengRegular(mTextView1)<br>FontUtil.setNotoSanUIBold(mTextView2)<br></code></pre></td></tr></table></figure><h2 id="å…­ã€é¡¹ç›®éœ€æ±‚å®è·µ"><a href="#å…­ã€é¡¹ç›®éœ€æ±‚å®è·µ" class="headerlink" title="å…­ã€é¡¹ç›®éœ€æ±‚å®è·µ"></a>å…­ã€é¡¹ç›®éœ€æ±‚å®è·µ</h2><p>å›é¡¾ä¸€ä¸‹æˆ‘æ¥åˆ°çš„é¡¹ç›®éœ€æ±‚ï¼š<strong>å…¨å±€æ›¿æ¢å½“å‰é¡¹ç›®ä¸­çš„é»˜è®¤å­—ä½“ï¼Œå¹¶å¼•å…¥ UI è®¾è®¡å¸ˆæä¾›çš„ä¸€äº›æ–°å­—ä½“</strong></p><p>åœ¨å­¦ä¹ æœ¬ç¯‡æ–‡ç« ä¹‹å‰ï¼Œæˆ‘ä»¬å¼•å…¥å­—ä½“éƒ½æ˜¯æ”¾åœ¨ assets æ–‡ä»¶ç›®å½•ä¸‹ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„å­—ä½“æ–‡ä»¶ï¼Œæˆ‘ä»¬åªèƒ½åœ¨ä»£ç ä¸­è·å–å¹¶ä½¿ç”¨ã€‚é‚£ä¹ˆé€šè¿‡æœ¬ç¯‡æ–‡ç« çš„è®²è§£ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥åœ¨ä»£ç ä¸­è¿›è¡Œä½¿ç”¨ï¼Œè¿˜å¯ä»¥åœ¨ Xml ä¸­è¿›è¡Œä½¿ç”¨ã€‚ç°åœ¨æˆ‘ä»¬è§£å†³äº†ä¸€åŠçš„éœ€æ±‚ï¼Œå…³äºå…¨å±€æ›¿æ¢é»˜è®¤å­—ä½“è¿˜éœ€ç­‰åˆ°ä¸‹ä¸€ç¯‡æ–‡ç« ğŸ˜„</p><h2 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h2><p>å›é¡¾ä¸‹æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€å°†å­—ä½“æ”¾åœ¨ res çš„ font ç›®å½•ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ Xml ä¸­ä½¿ç”¨å­—ä½“äº†</p><p>2ã€é€šè¿‡å­—ä½“ R èµ„æºç´¢å¼•è·å–å­—ä½“æ–‡ä»¶ï¼Œå°è£…ç›¸åº”çš„å­—ä½“å·¥å…·ç±»ï¼Œåœ¨ä»£ç ä¸­ä¼˜é›…çš„ä½¿ç”¨</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><a href="https://github.com/sweetying520/ChangeDefaultFontDemo">Github Demo åœ°å€</a></p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®² Android å…¨å±€æ›¿æ¢å­—ä½“çš„å‡ ç§æ–¹å¼ï¼Œæ•¬è¯·æœŸå¾…å§ ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml#kotlin">XML ä¸­çš„å­—ä½“</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>Font</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Android Font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Androidå­—ä½“ç³»åˆ— ï¼ˆäºŒï¼‰ï¼šTypefaceå®Œå…¨è§£æ</title>
    <link href="/2022/10/11/Android%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9ATypeface%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90/"/>
    <url>/2022/10/11/Android%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9ATypeface%E5%AE%8C%E5%85%A8%E8%A7%A3%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210111037963.jpeg" alt="fabian-quintero-UWQP2mh5YJI-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å…³äº Android å­—ä½“çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œè¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6973064546420260878">Androidå­—ä½“ç³»åˆ— ï¼ˆä¸€ï¼‰ï¼šAndroidå­—ä½“åŸºç¡€</a>ï¼Œä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬è®¾ç½®çš„é‚£ä¸‰ä¸ªå±æ€§æœ€ç»ˆéƒ½ä¼šå»æ„å»ºä¸€ä¸ª Typeface å¯¹è±¡ï¼Œä»Šå¤©æˆ‘ä»¬å°±å¥½å¥½çš„æ¥è®²è®²å®ƒ</p><p><strong>æ³¨æ„ï¼šæœ¬æ–‡æ‰€å±•ç¤ºçš„ç³»ç»Ÿæºç éƒ½æ˜¯åŸºäºAndroid-30 ï¼Œå¹¶æå–æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œåˆ†æ</strong></p><h2 id="ä¸€ã€Typeface-ä»‹ç»"><a href="#ä¸€ã€Typeface-ä»‹ç»" class="headerlink" title="ä¸€ã€Typeface ä»‹ç»"></a>ä¸€ã€Typeface ä»‹ç»</h2><p><strong>Typeface è´Ÿè´£ Android å­—ä½“çš„åŠ è½½ä»¥åŠå¯¹ä¸Šå±‚æä¾›ç›¸å…³å­—ä½“ API çš„è°ƒç”¨</strong></p><p>å¦‚æœä½ æƒ³è¦æ“ä½œå­—ä½“ï¼Œæ— è®ºæ˜¯ä½¿ç”¨ Android ç³»ç»Ÿè‡ªå¸¦çš„å­—ä½“ï¼Œè¿˜æ˜¯åŠ è½½è‡ªå·±å†…ç½®çš„ .ttf(TureType) æˆ–è€… .otf(OpenType) æ ¼å¼çš„å­—ä½“æ–‡ä»¶ï¼Œä½ éƒ½éœ€è¦ä½¿ç”¨åˆ° Typeface è¿™ä¸ªç±»ã€‚å› æ­¤æˆ‘ä»¬è¦å…¨å±€ä¿®æ”¹å­—ä½“ï¼Œé¦–å…ˆå°±è¦æŠŠ Typeface ç»™å¼„æ˜ç™½</p><h2 id="äºŒã€Typeface-æºç åˆ†æ"><a href="#äºŒã€Typeface-æºç åˆ†æ" class="headerlink" title="äºŒã€Typeface æºç åˆ†æ"></a>äºŒã€Typeface æºç åˆ†æ</h2><p>æºç åˆ†æç¯èŠ‚å¯èƒ½æ¯”è¾ƒæ¯ç‡¥ï¼ŒåšæŒå°±æ˜¯èƒœåˆ© â›½ï¸</p><h3 id="1ã€Typeface-åˆå§‹åŒ–"><a href="#1ã€Typeface-åˆå§‹åŒ–" class="headerlink" title="1ã€Typeface åˆå§‹åŒ–"></a>1ã€Typeface åˆå§‹åŒ–</h3><p>Typeface è¿™ä¸ªç±»ä¼šåœ¨ Android åº”ç”¨ç¨‹åºå¯åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡åå°„çš„æ–¹å¼è¢«åŠ è½½ã€‚ç‚¹å‡»æºç å¯ä»¥çœ‹åˆ°å®ƒé‡Œé¢æœ‰ä¸€ä¸ª static ä»£ç å—ï¼Œå®ƒä¼šéšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå¹¶ä¸”åªä¼šåŠ è½½ä¸€æ¬¡ï¼ŒTypeface å°±æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥è¿›è¡Œåˆå§‹åŒ–çš„ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> &#123;<br>    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå­˜æ”¾å­—ä½“çš„ Map</span><br>    <span class="hljs-keyword">final</span> HashMap&lt;String, Typeface&gt; systemFontMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-comment">//å°†ç³»ç»Ÿçš„ä¸€äº›é»˜è®¤å­—ä½“æ”¾å…¥ Map ä¸­</span><br>    initSystemDefaultTypefaces(systemFontMap,SystemFonts.getRawSystemFallbackMap(),SystemFonts.getAliases());<br>    <span class="hljs-comment">//unmodifiableMap æ–¹æ³•çš„ä½œç”¨å°±æ˜¯å°†å½“å‰ Map è¿›è¡ŒåŒ…è£…ï¼Œè¿”å›ä¸€ä¸ªä¸å¯ä¿®æ”¹çš„Mapï¼Œå¦‚æœè°ƒç”¨ä¿®æ”¹æ–¹æ³•å°±ä¼šæŠ›å¼‚å¸¸</span><br>  sSystemFontMap = Collections.unmodifiableMap(systemFontMap);<br><br>    <span class="hljs-comment">// We can&#x27;t assume DEFAULT_FAMILY available on Roboletric.</span><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è®¾ç½®ç³»ç»Ÿé»˜è®¤å­—ä½“  DEFAULT_FAMILY = &quot;sans-serif&quot;;</span><br><span class="hljs-comment">     * å› æ­¤ç³»ç»Ÿé»˜è®¤çš„å­—ä½“å°±æ˜¯ sans-serif</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">if</span> (sSystemFontMap.containsKey(DEFAULT_FAMILY)) &#123;<br>        setDefault(sSystemFontMap.get(DEFAULT_FAMILY));<br>    &#125;<br><br>    <span class="hljs-comment">// Set up defaults and typefaces exposed in public API</span><br>    <span class="hljs-comment">//ä¸€äº›ç³»ç»Ÿé»˜è®¤çš„å­—ä½“</span><br>    DEFAULT         = create((String) <span class="hljs-literal">null</span>, <span class="hljs-number">0</span>);<br>    DEFAULT_BOLD    = create((String) <span class="hljs-literal">null</span>, Typeface.BOLD);<br>    SANS_SERIF      = create(<span class="hljs-string">&quot;sans-serif&quot;</span>, <span class="hljs-number">0</span>);<br>    SERIF           = create(<span class="hljs-string">&quot;serif&quot;</span>, <span class="hljs-number">0</span>);<br>    MONOSPACE       = create(<span class="hljs-string">&quot;monospace&quot;</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-comment">//åˆå§‹åŒ–ä¸€ä¸ª sDefaults æ•°ç»„ï¼Œå¹¶é¢„åŠ è½½å¥½ç²—ä½“ã€æ–œä½“ç­‰ä¸€äº›å¸¸ç”¨çš„ Style</span><br>    sDefaults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Typeface</span>[] &#123;<br>        DEFAULT,<br>        DEFAULT_BOLD,<br>        create((String) <span class="hljs-literal">null</span>, Typeface.ITALIC),<br>        create((String) <span class="hljs-literal">null</span>, Typeface.BOLD_ITALIC),<br>    &#125;;<br><br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å†™äº†è¯¦ç»†çš„æ³¨é‡Šï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒTypeface åˆå§‹åŒ–ä¸»è¦åšäº†ï¼š</p><p>1ã€å°†ç³»ç»Ÿçš„ä¸€äº›é»˜è®¤å­—ä½“æ”¾å…¥ä¸€ä¸ª Map ä¸­</p><p>2ã€è®¾ç½®é»˜è®¤çš„å­—ä½“</p><p>3ã€åˆå§‹åŒ–ä¸€äº›é»˜è®¤å­—ä½“</p><p>4ã€åˆå§‹åŒ–ä¸€ä¸ª sDefaults æ•°ç»„ï¼Œå­˜æ”¾ä¸€äº›å¸¸ç”¨çš„ Style</p><p>å®Œæˆäº† Typeface çš„åˆå§‹åŒ–ï¼Œæ¥ä¸‹æ¥çœ‹ Typeface æä¾›äº†ä¸€ç³»åˆ—åˆ›å»ºå­—ä½“çš„ API ï¼Œå…¶ä¸­å¯¹ä¸Šå±‚å¼€æ”¾è°ƒç”¨çš„æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/837f18d801a1409fa99f4e3ba024f981~tplv-k3u1fbpfcp-watermark.image" alt="image-20210614130149262.png"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥é‡ç‚¹åˆ†æè¿™å‡ ä¸ªæ–¹æ³•</p><h3 id="2ã€é€šè¿‡-Typeface-å’Œ-Style-è·å–æ–°çš„-Typeface"><a href="#2ã€é€šè¿‡-Typeface-å’Œ-Style-è·å–æ–°çš„-Typeface" class="headerlink" title="2ã€é€šè¿‡ Typeface å’Œ Style è·å–æ–°çš„ Typeface"></a>2ã€é€šè¿‡ Typeface å’Œ Style è·å–æ–°çš„ Typeface</h3><p>å¯¹åº”ä¸Šé¢æˆªå›¾çš„ç¬¬ä¸€ä¸ª API , çœ‹ä¸‹å®ƒçš„æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Typeface <span class="hljs-title function_">create</span><span class="hljs-params">(Typeface family, <span class="hljs-meta">@Style</span> <span class="hljs-type">int</span> style)</span> &#123;<br>    <span class="hljs-comment">//åˆ¤æ–­å½“å‰æ˜¯å¦è®¾ç½®äº† style , å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œç½®ä¸º NORMAL</span><br>    <span class="hljs-keyword">if</span> ((style &amp; ~STYLE_MASK) != <span class="hljs-number">0</span>) &#123;<br>        style = NORMAL;<br>    &#125;<br>    <span class="hljs-comment">//åˆ¤æ–­å½“å‰ä¼ å…¥çš„ Typeface æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ˜¯ï¼Œç½®ä¸ºé»˜è®¤å­—ä½“</span><br>    <span class="hljs-keyword">if</span> (family == <span class="hljs-literal">null</span>) &#123;<br>        family = sDefaultTypeface;<br>    &#125;<br><br>    <span class="hljs-comment">// Return early if we&#x27;re asked for the same face/style</span><br>    <span class="hljs-comment">//å¦‚æœå½“å‰ Typeface çš„ mStyle å±æ€§å’Œä¼ å…¥çš„ style ç›¸åŒï¼Œç›´æ¥è¿”å› Typeface å¯¹è±¡</span><br>    <span class="hljs-keyword">if</span> (family.mStyle == style) &#123;<br>        <span class="hljs-keyword">return</span> family;<br>    &#125;<br><br>    <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">ni</span> <span class="hljs-operator">=</span> family.native_instance;<br><br>    Typeface typeface;<br>    <span class="hljs-comment">//ä½¿ç”¨ sStyledCacheLock ä¿è¯çº¿ç¨‹å®‰å…¨</span><br>    <span class="hljs-keyword">synchronized</span> (sStyledCacheLock) &#123;<br>      <span class="hljs-comment">//ä»ç¼“å­˜ä¸­è·å–å­˜æ”¾ Typeface çš„ SparseArray</span><br>        SparseArray&lt;Typeface&gt; styles = sStyledTypefaceCache.get(ni);<br>        <span class="hljs-keyword">if</span> (styles == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">//å­˜æ”¾ Typeface çš„ SparseArray ä¸ºç©ºï¼Œæ–°åˆ›å»ºä¸€ä¸ªï¼Œå®¹é‡ä¸º 4</span><br>            styles = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SparseArray</span>&lt;Typeface&gt;(<span class="hljs-number">4</span>);<br>            <span class="hljs-comment">//å°†å½“å‰ å­˜æ”¾ Typeface çš„ SparseArray æ”¾å…¥ç¼“å­˜ä¸­</span><br>            sStyledTypefaceCache.put(ni, styles);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//å­˜æ”¾ Typeface çš„ SparseArray ä¸ä¸ºç©ºï¼Œç›´æ¥è·å– Typeface å¹¶è¿”å›</span><br>            typeface = styles.get(style);<br>            <span class="hljs-keyword">if</span> (typeface != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">return</span> typeface;<br>            &#125;<br>        &#125;<br><br>      <span class="hljs-comment">//é€šè¿‡ native å±‚æ„å»ºåˆ›å»º Typeface çš„å‚æ•°å¹¶åˆ›å»º Typeface å¯¹è±¡</span><br>        typeface = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Typeface</span>(nativeCreateFromTypeface(ni, style));<br>      <span class="hljs-comment">//å°†æ–°åˆ›å»ºçš„  Typeface å¯¹è±¡æ”¾å…¥ SparseArray ä¸­ç¼“å­˜èµ·æ¥</span><br>        styles.put(style, typeface);<br>    &#125;<br>    <span class="hljs-keyword">return</span> typeface;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»ä¸Šè¿°ä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p><p>1ã€å½“ä½ è®¾ç½®çš„ Typeface å’Œ Style ä¸º null å’Œ 0 æ—¶ï¼Œä¼šç»™å®ƒä»¬è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼</p><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œçš„ Style ï¼Œå¯¹åº”ä¸Šä¸€ç¯‡ä¸­è®²çš„ android:textStyle å±æ€§ä¼ é€’çš„å€¼ï¼Œç”¨äºè®¾å®šå­—ä½“çš„ç²—ä½“ã€æ–œä½“ç­‰å‚æ•°</p><p>2ã€å¦‚æœå½“å‰è®¾ç½®çš„ Typeface çš„ mStyle å±æ€§å’Œä¼ å…¥çš„ Style ç›¸åŒï¼Œç›´æ¥å°† Typeface ç»™è¿”å›</p><p>3ã€ä»ç¼“å­˜ä¸­è·å–å­˜æ”¾ Typeface çš„å®¹å™¨ï¼Œå¦‚æœç¼“å­˜ä¸­å­˜åœ¨ï¼Œåˆ™ä»å®¹å™¨ä¸­å–å‡ºè¯¥ Typeface å¹¶è¿”å›</p><p>4ã€å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°çš„å®¹å™¨å¹¶åŠ å…¥ç¼“å­˜ï¼Œç„¶åé€šè¿‡ native å±‚åˆ›å»º Typefaceï¼Œå¹¶æŠŠå½“å‰ Typeface æ”¾å…¥åˆ°å®¹å™¨ä¸­</p><p><strong>å› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™æ— éœ€æ‹…å¿ƒæ•ˆç‡é—®é¢˜ï¼Œå®ƒä¼šæŠŠæˆ‘ä»¬ä¼ å…¥çš„å­—ä½“è¿›è¡Œä¸€ä¸ªç¼“å­˜ï¼Œåç»­éƒ½æ˜¯ä»ç¼“å­˜ä¸­å»æ‹¿çš„</strong></p><h3 id="3ã€é€šè¿‡å­—ä½“åç§°å’Œ-Style-è·å–å­—ä½“"><a href="#3ã€é€šè¿‡å­—ä½“åç§°å’Œ-Style-è·å–å­—ä½“" class="headerlink" title="3ã€é€šè¿‡å­—ä½“åç§°å’Œ Style è·å–å­—ä½“"></a>3ã€é€šè¿‡å­—ä½“åç§°å’Œ Style è·å–å­—ä½“</h3><p>å¯¹åº”ä¸Šé¢æˆªå›¾çš„ç¬¬äºŒä¸ª APIï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Typeface <span class="hljs-title function_">create</span><span class="hljs-params">(String familyName, <span class="hljs-meta">@Style</span> <span class="hljs-type">int</span> style)</span> &#123;<br>    <span class="hljs-comment">//è°ƒç”¨æˆªå›¾çš„ç¬¬ä¸€ä¸ª API</span><br>    <span class="hljs-keyword">return</span> create(getSystemDefaultTypeface(familyName), style);<br>&#125;<br><br><span class="hljs-comment">//è·å–ç³»ç»Ÿæä¾›çš„ä¸€äº›é»˜è®¤å­—ä½“ï¼Œå¦‚æœè·å–ä¸åˆ°åˆ™è¿”å›ç³»ç»Ÿçš„é»˜è®¤å­—ä½“</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Typeface <span class="hljs-title function_">getSystemDefaultTypeface</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> String familyName)</span> &#123;<br>    <span class="hljs-type">Typeface</span> <span class="hljs-variable">tf</span> <span class="hljs-operator">=</span> sSystemFontMap.get(familyName);<br>    <span class="hljs-keyword">return</span> tf == <span class="hljs-literal">null</span> ? Typeface.DEFAULT : tf;<br>&#125;<br></code></pre></td></tr></table></figure><p>1ã€è¿™ä¸ªåˆ›å»º Typeface çš„ API å¾ˆç®€å•ï¼Œå°±æ˜¯è°ƒç”¨å®ƒçš„ä¸€ä¸ªé‡è½½æ–¹æ³•ï¼Œæˆ‘ä»¬å·²ç»åˆ†æè¿‡</p><p>2ã€getSystemDefaultTypeface ä¸»è¦æ˜¯é€šè¿‡ sSystemFontMap è·å–å­—ä½“ï¼Œè€Œè¿™ä¸ª sSystemFontMap åœ¨ Typeface åˆå§‹åŒ–çš„æ—¶å€™ä¼šå­˜æ”¾ç³»ç»Ÿæä¾›çš„ä¸€äº›é»˜è®¤å­—ä½“ï¼Œå› æ­¤è¿™é‡Œç›´æ¥å–å°±å¯ä»¥äº†</p><h3 id="4ã€é€šè¿‡-Typeface-ã€weight-ç²—ä½“-å’Œ-italic-æ–œä½“-è·å–æ–°çš„-Typeface"><a href="#4ã€é€šè¿‡-Typeface-ã€weight-ç²—ä½“-å’Œ-italic-æ–œä½“-è·å–æ–°çš„-Typeface" class="headerlink" title="4ã€é€šè¿‡ Typeface ã€weight(ç²—ä½“) å’Œ italic(æ–œä½“) è·å–æ–°çš„ Typeface"></a>4ã€é€šè¿‡ Typeface ã€weight(ç²—ä½“) å’Œ italic(æ–œä½“) è·å–æ–°çš„ Typeface</h3><p>å¯¹åº”ä¸Šé¢æˆªå›¾çš„ç¬¬ä¸‰ä¸ª API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-meta">@NonNull</span> Typeface <span class="hljs-title function_">create</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Typeface family,</span><br><span class="hljs-params">            <span class="hljs-meta">@IntRange(from = 1, to = 1000)</span> <span class="hljs-type">int</span> weight, <span class="hljs-type">boolean</span> italic)</span> &#123;<br>    <span class="hljs-comment">//æ ¡éªŒä¼ å…¥çš„ weight å±æ€§æ˜¯å¦åœ¨èŒƒå›´å†…</span><br>    Preconditions.checkArgumentInRange(weight, <span class="hljs-number">0</span>, <span class="hljs-number">1000</span>, <span class="hljs-string">&quot;weight&quot;</span>);<br>    <span class="hljs-keyword">if</span> (family == <span class="hljs-literal">null</span>) &#123;<br>      <span class="hljs-comment">//å¦‚æœå½“å‰ä¼ å…¥çš„ Typeface ä¸º null, åˆ™ç½®ä¸ºé»˜è®¤å€¼</span><br>        family = sDefaultTypeface;<br>    &#125;<br>    <span class="hljs-comment">//è°ƒç”¨ createWeightStyle æ–¹æ³•åˆ›å»º Typeface</span><br>    <span class="hljs-keyword">return</span> createWeightStyle(family, weight, italic);<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-meta">@NonNull</span> Typeface <span class="hljs-title function_">createWeightStyle</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> Typeface base,</span><br><span class="hljs-params">            <span class="hljs-meta">@IntRange(from = 1, to = 1000)</span> <span class="hljs-type">int</span> weight, <span class="hljs-type">boolean</span> italic)</span> &#123;<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> (weight &lt;&lt; <span class="hljs-number">1</span>) | (italic ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);<br><br>    Typeface typeface;<br>    <span class="hljs-comment">//ä½¿ç”¨ sWeightCacheLock ä¿è¯çº¿ç¨‹å®‰å…¨</span><br>    <span class="hljs-keyword">synchronized</span>(sWeightCacheLock) &#123;<br>        SparseArray&lt;Typeface&gt; innerCache = sWeightTypefaceCache.get(base.native_instance);<br>        <span class="hljs-keyword">if</span> (innerCache == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">//ç¼“å­˜ Typeface çš„ SparseArray ä¸º null, æ–°å»ºå¹¶ç¼“å­˜</span><br>            innerCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SparseArray</span>&lt;&gt;(<span class="hljs-number">4</span>);<br>            sWeightTypefaceCache.put(base.native_instance, innerCache);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//ä»ç¼“å­˜ä¸­æ‹¿å– typeface å¹¶è¿”å›</span><br>            typeface = innerCache.get(key);<br>            <span class="hljs-keyword">if</span> (typeface != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">return</span> typeface;<br>            &#125;<br>        &#125;<br><span class="hljs-comment">//é€šè¿‡ native åˆ›å»º Typeface å¯¹è±¡</span><br>        typeface = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Typeface</span>(<br>                nativeCreateFromTypefaceWithExactStyle(base.native_instance, weight, italic));<br>        <span class="hljs-comment">//å°† Typeface åŠ å…¥ç¼“å­˜</span><br>      innerCache.put(key, typeface);<br>    &#125;<br>    <span class="hljs-keyword">return</span> typeface;<br>&#125;<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°ä»£ç å¯ä»¥çŸ¥é“ï¼Œä»–ä¸æˆªå›¾ä¸€ API çš„æºç å¾ˆç±»ä¼¼ï¼Œæ— éå°±æ˜¯å°†ä¹‹å‰éœ€è¦è®¾ç½®çš„ Style æ¢æˆäº† weight å’Œ italicï¼Œé‡Œé¢çš„å®ç°æœºåˆ¶æ˜¯ç±»ä¼¼çš„</p><h3 id="5ã€é€šè¿‡-AssetManager-å’Œå¯¹åº”å­—ä½“è·¯å¾„è·å–å­—ä½“"><a href="#5ã€é€šè¿‡-AssetManager-å’Œå¯¹åº”å­—ä½“è·¯å¾„è·å–å­—ä½“" class="headerlink" title="5ã€é€šè¿‡ AssetManager å’Œå¯¹åº”å­—ä½“è·¯å¾„è·å–å­—ä½“"></a>5ã€é€šè¿‡ AssetManager å’Œå¯¹åº”å­—ä½“è·¯å¾„è·å–å­—ä½“</h3><p>å¯¹åº”ä¸Šé¢æˆªå›¾çš„ç¬¬å››ä¸ª API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Typeface <span class="hljs-title function_">createFromAsset</span><span class="hljs-params">(AssetManager mgr, String path)</span> &#123;<br>    <span class="hljs-comment">//å‚æ•°æ£€æŸ¥</span><br>    Preconditions.checkNotNull(path); <span class="hljs-comment">// for backward compatibility</span><br>    Preconditions.checkNotNull(mgr);<br><br>    <span class="hljs-comment">//é€šè¿‡ Typeface çš„ Builder æ¨¡å¼æ„å»º typeface</span><br>    <span class="hljs-type">Typeface</span> <span class="hljs-variable">typeface</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Builder</span>(mgr, path).build();<br>    <span class="hljs-comment">//å¦‚æœæ„å»ºçš„ typeface ä¸ä¸ºç©ºåˆ™è¿”å›</span><br>    <span class="hljs-keyword">if</span> (typeface != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> typeface;<br>    <span class="hljs-comment">// check if the file exists, and throw an exception for backward compatibility</span><br>    <span class="hljs-comment">//çœ‹å½“å‰å­—ä½“è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ç›´æ¥æŠ›å¼‚å¸¸</span><br>    <span class="hljs-keyword">try</span> (<span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> mgr.open(path)) &#123;<br>    &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;Font asset not found &quot;</span> + path);<br>    &#125;<br>    <span class="hljs-comment">//å¦‚æœæ„å»ºçš„å­—ä½“ä¸º null åˆ™è¿”å›é»˜è®¤å­—ä½“</span><br>    <span class="hljs-keyword">return</span> Typeface.DEFAULT;<br>&#125;<br><br><span class="hljs-comment">//æ¥ç€çœ‹ Typeface çš„ Builder æ¨¡å¼æ„å»º typeface</span><br><span class="hljs-comment">//Builder æ„é€ æ–¹æ³• ä¸»è¦å°±æ˜¯åˆå§‹åŒ– mFontBuilder å’Œä¸€äº›å‚æ•°</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">Builder</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> AssetManager assetManager, <span class="hljs-meta">@NonNull</span> String path, <span class="hljs-type">boolean</span> isAsset,</span><br><span class="hljs-params">                <span class="hljs-type">int</span> cookie)</span> &#123;<br>    mFontBuilder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Font</span>.Builder(assetManager, path, isAsset, cookie);<br>    mAssetManager = assetManager;<br>    mPath = path;<br>&#125;<br><br><span class="hljs-comment">//build æ–¹æ³•</span><br><span class="hljs-keyword">public</span> Typeface <span class="hljs-title function_">build</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-comment">//å¦‚æœ mFontBuilder ä¸º nullï¼Œåˆ™ä¼šè°ƒç”¨ resolveFallbackTypeface æ–¹æ³•</span><br>  <span class="hljs-comment">//resolveFallbackTypeface å†…éƒ¨ä¼šè°ƒç”¨ createWeightStyle åˆ›å»º Typeface å¹¶è¿”å›</span><br>    <span class="hljs-keyword">if</span> (mFontBuilder == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">return</span> resolveFallbackTypeface();<br>    &#125;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-comment">//é€šè¿‡ mFontBuilder æ„å»º Font</span><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">Font</span> <span class="hljs-variable">font</span> <span class="hljs-operator">=</span> mFontBuilder.build();<br>      <span class="hljs-comment">//ä½¿ç”¨ createAssetUid æ–¹æ³•è·å–åˆ°è¿™ä¸ªå­—ä½“çš„å”¯ä¸€ key</span><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> mAssetManager == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : createAssetUid(<br>                mAssetManager, mPath, font.getTtcIndex(), font.getAxes(),<br>                mWeight, mItalic,<br>                mFallbackFamilyName == <span class="hljs-literal">null</span> ? DEFAULT_FAMILY : mFallbackFamilyName);<br>        <span class="hljs-keyword">if</span> (key != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">// Dynamic cache lookup is only for assets.</span><br>            <span class="hljs-comment">//ä½¿ç”¨ sDynamicCacheLock ä¿è¯çº¿ç¨‹å®‰å…¨</span><br>            <span class="hljs-keyword">synchronized</span> (sDynamicCacheLock) &#123;<br>              <span class="hljs-comment">//é€šè¿‡ key ä»ç¼“å­˜ä¸­æ‹¿å­—ä½“</span><br>                <span class="hljs-keyword">final</span> <span class="hljs-type">Typeface</span> <span class="hljs-variable">typeface</span> <span class="hljs-operator">=</span> sDynamicTypefaceCache.get(key);<br>              <span class="hljs-comment">//å¦‚æœå½“å‰å­—ä½“ä¸ä¸º null ç›´æ¥è¿”å›</span><br>                <span class="hljs-keyword">if</span> (typeface != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-keyword">return</span> typeface;<br>                &#125;<br>            &#125;<br>        &#125;<br>      <span class="hljs-comment">//å¦‚æœå½“å‰å­—ä½“ä¸å­˜åœ¨ï¼Œé€šè¿‡ Builder æ¨¡å¼æ„å»º FontFamily å¯¹è±¡</span><br>      <span class="hljs-comment">//é€šè¿‡ FontFamily æ„å»º CustomFallbackBuilder å¯¹è±¡</span><br>     <span class="hljs-comment">//æœ€ç»ˆé€šè¿‡ CustomFallbackBuilder æ„å»º Typeface å¯¹è±¡</span><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">FontFamily</span> <span class="hljs-variable">family</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FontFamily</span>.Builder(font).build();<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">weight</span> <span class="hljs-operator">=</span> mWeight == RESOLVE_BY_FONT_TABLE<br>                ? font.getStyle().getWeight() : mWeight;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">slant</span> <span class="hljs-operator">=</span> mItalic == RESOLVE_BY_FONT_TABLE<br>                ? font.getStyle().getSlant() : mItalic;<br>        <span class="hljs-keyword">final</span> <span class="hljs-type">CustomFallbackBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomFallbackBuilder</span>(family)<br>                .setStyle(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FontStyle</span>(weight, slant));<br>        <span class="hljs-keyword">if</span> (mFallbackFamilyName != <span class="hljs-literal">null</span>) &#123;<br>            builder.setSystemFallback(mFallbackFamilyName);<br>        &#125;<br>      <span class="hljs-comment">//builder.build æ–¹æ³•å†…éƒ¨æœ€ç»ˆä¼šé€šè¿‡è°ƒç”¨ native å±‚åˆ›å»º Typeface å¯¹è±¡</span><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">Typeface</span> <span class="hljs-variable">typeface</span> <span class="hljs-operator">=</span> builder.build();<br>      <span class="hljs-comment">//ç¼“å­˜ Typeface å¯¹è±¡å¹¶è¿”å›</span><br>        <span class="hljs-keyword">if</span> (key != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">synchronized</span> (sDynamicCacheLock) &#123;<br>                sDynamicTypefaceCache.put(key, typeface);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> typeface;<br>    &#125; <span class="hljs-keyword">catch</span> (IOException | IllegalArgumentException e) &#123;<br>      <span class="hljs-comment">//å¦‚æœæµç¨‹æœ‰ä»»ä½•å¼‚å¸¸ï¼Œåˆ™å†…éƒ¨ä¼šè°ƒç”¨ createWeightStyle åˆ›å»º Typeface å¹¶è¿”å›</span><br>        <span class="hljs-keyword">return</span> resolveFallbackTypeface();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ­¥éª¤ï¼š</p><p>1ã€å¤§é‡è¿ç”¨äº† Builder æ¨¡å¼å»æ„å»ºç›¸å…³å¯¹è±¡</p><p>2ã€å…·ä½“é€»è¾‘å°±æ˜¯ä½¿ç”¨ createAssetUid æ–¹æ³•è·å–åˆ°å½“å‰å­—ä½“çš„å”¯ä¸€ key ï¼Œé€šè¿‡è¿™ä¸ªå”¯ä¸€ key ï¼Œä»ç¼“å­˜ä¸­è·å–å·²ç»è¢«åŠ è½½è¿‡çš„å­—ä½“ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åˆ›å»ºä¸€ä¸ª FontFamily å¯¹è±¡ï¼Œç»è¿‡ä¸€ç³»åˆ— Builder æ¨¡å¼ï¼Œæœ€ç»ˆè°ƒç”¨ native å±‚åˆ›å»º Typeface å¯¹è±¡ï¼Œå¹¶å°†è¿™ä¸ª Typeface å¯¹è±¡åŠ å…¥ç¼“å­˜å¹¶è¿”å›</p><p>3ã€å¦‚æœæµç¨‹æœ‰ä»»ä½•å¼‚å¸¸ï¼Œå†…éƒ¨ä¼šè°ƒç”¨ createWeightStyle åˆ›å»º Typeface å¹¶è¿”å›</p><h3 id="6ã€é€šè¿‡å­—ä½“æ–‡ä»¶è·å–å­—ä½“"><a href="#6ã€é€šè¿‡å­—ä½“æ–‡ä»¶è·å–å­—ä½“" class="headerlink" title="6ã€é€šè¿‡å­—ä½“æ–‡ä»¶è·å–å­—ä½“"></a>6ã€é€šè¿‡å­—ä½“æ–‡ä»¶è·å–å­—ä½“</h3><p>å¯¹åº”ä¸Šé¢æˆªå›¾çš„ç¬¬äº”ä¸ª API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Typeface <span class="hljs-title function_">createFromFile</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> File file)</span> &#123;<br>    <span class="hljs-comment">// For the compatibility reasons, leaving possible NPE here.</span><br>    <span class="hljs-comment">// See android.graphics.cts.TypefaceTest#testCreateFromFileByFileReferenceNull</span><br>    <span class="hljs-comment">//é€šè¿‡ Typeface çš„ Builder æ¨¡å¼æ„å»º typeface</span><br>    <span class="hljs-type">Typeface</span> <span class="hljs-variable">typeface</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Builder</span>(file).build();<br>    <span class="hljs-keyword">if</span> (typeface != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> typeface;<br><br>    <span class="hljs-comment">// check if the file exists, and throw an exception for backward compatibility</span><br>    <span class="hljs-comment">//æ–‡ä»¶ä¸å­˜åœ¨ï¼ŒæŠ›å¼‚å¸¸</span><br>    <span class="hljs-keyword">if</span> (!file.exists()) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;Font asset not found &quot;</span> + file.getAbsolutePath());<br>    &#125;<br>    <span class="hljs-comment">//å¦‚æœæ„å»ºçš„å­—ä½“ä¸º null åˆ™è¿”å›é»˜è®¤å­—ä½“</span><br>    <span class="hljs-keyword">return</span> Typeface.DEFAULT;<br>&#125;<br><br><span class="hljs-comment">//Builder å¦å¤–ä¸€ä¸ªæ„é€ æ–¹æ³• ä¸»è¦æ˜¯åˆå§‹åŒ– mFontBuilder</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">Builder</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> File path)</span> &#123;<br>    mFontBuilder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Font</span>.Builder(path);<br>    mAssetManager = <span class="hljs-literal">null</span>;<br>    mPath = <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»ä¸Šè¿°ä»£ç å¯ä»¥çŸ¥é“ï¼Œè¿™ç§æ–¹å¼ä¸»è¦ä¹Ÿæ˜¯é€šè¿‡ Builder æ¨¡å¼å»æ„å»º Typeface å¯¹è±¡ï¼Œå…·ä½“é€»è¾‘æˆ‘ä»¬åˆšæ‰å·²ç»åˆ†æè¿‡</p><h3 id="7ã€é€šè¿‡å­—ä½“è·¯å¾„è·å–å­—ä½“"><a href="#7ã€é€šè¿‡å­—ä½“è·¯å¾„è·å–å­—ä½“" class="headerlink" title="7ã€é€šè¿‡å­—ä½“è·¯å¾„è·å–å­—ä½“"></a>7ã€é€šè¿‡å­—ä½“è·¯å¾„è·å–å­—ä½“</h3><p>å¯¹åº”ä¸Šé¢æˆªå›¾çš„ç¬¬å…­ä¸ª API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Typeface <span class="hljs-title function_">createFromFile</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> String path)</span> &#123;<br>    Preconditions.checkNotNull(path); <span class="hljs-comment">// for backward compatibility</span><br>    <span class="hljs-keyword">return</span> createFromFile(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(path));<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå°±æ›´ç®€å•äº†ï¼Œä¸»è¦å°±æ˜¯åˆ›å»ºæ–‡ä»¶å¯¹è±¡ç„¶åè°ƒç”¨å¦å¤–ä¸€ä¸ªé‡è½½æ–¹æ³•</p><h3 id="8ã€Typeface-ç›¸å…³-Native-æ–¹æ³•"><a href="#8ã€Typeface-ç›¸å…³-Native-æ–¹æ³•" class="headerlink" title="8ã€Typeface ç›¸å…³ Native æ–¹æ³•"></a>8ã€Typeface ç›¸å…³ Native æ–¹æ³•</h3><p>åœ¨ Typeface ä¸­ï¼Œæ‰€æœ‰æœ€ç»ˆæ“ä½œåˆ°åŠ è½½å­—ä½“çš„éƒ¨åˆ†ï¼Œå…¨éƒ¨éƒ½æ˜¯ native çš„æ–¹æ³•ã€‚è€Œ native æ–¹æ³•å°±æ˜¯ä»¥æ•ˆç‡è‘—ç§°çš„ï¼Œè¿™é‡Œåªéœ€è¦ä¿è¯ä¸é¢‘ç¹çš„è°ƒç”¨ï¼ˆTypeface å·²ç»åšå¥½äº†ç¼“å­˜ï¼Œä¸ä¼šé¢‘ç¹çš„è°ƒç”¨ï¼‰ï¼ŒåŸºæœ¬ä¸Šä¹Ÿä¸ä¼šå­˜åœ¨æ•ˆç‡çš„é—®é¢˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nativeCreateFromTypeface</span><span class="hljs-params">(<span class="hljs-type">long</span> native_instance, <span class="hljs-type">int</span> style)</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nativeCreateFromTypefaceWithExactStyle</span><span class="hljs-params">(</span><br><span class="hljs-params">            <span class="hljs-type">long</span> native_instance, <span class="hljs-type">int</span> weight, <span class="hljs-type">boolean</span> italic)</span>;<br><span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> clean up: change List&lt;FontVariationAxis&gt; to FontVariationAxis[]</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nativeCreateFromTypefaceWithVariation</span><span class="hljs-params">(</span><br><span class="hljs-params">            <span class="hljs-type">long</span> native_instance, List&lt;FontVariationAxis&gt; axes)</span>;<br><span class="hljs-meta">@UnsupportedAppUsage</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nativeCreateWeightAlias</span><span class="hljs-params">(<span class="hljs-type">long</span> native_instance, <span class="hljs-type">int</span> weight)</span>;<br><span class="hljs-meta">@UnsupportedAppUsage</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nativeCreateFromArray</span><span class="hljs-params">(<span class="hljs-type">long</span>[] familyArray, <span class="hljs-type">int</span> weight, <span class="hljs-type">int</span> italic)</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">int</span>[] nativeGetSupportedAxes(<span class="hljs-type">long</span> native_instance);<br><br><span class="hljs-meta">@CriticalNative</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nativeSetDefault</span><span class="hljs-params">(<span class="hljs-type">long</span> nativePtr)</span>;<br><br><span class="hljs-meta">@CriticalNative</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">int</span>  <span class="hljs-title function_">nativeGetStyle</span><span class="hljs-params">(<span class="hljs-type">long</span> nativePtr)</span>;<br><br><span class="hljs-meta">@CriticalNative</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">int</span>  <span class="hljs-title function_">nativeGetWeight</span><span class="hljs-params">(<span class="hljs-type">long</span> nativePtr)</span>;<br><br><span class="hljs-meta">@CriticalNative</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-type">long</span> <span class="hljs-title function_">nativeGetReleaseFunc</span><span class="hljs-params">()</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nativeRegisterGenericFamily</span><span class="hljs-params">(String str, <span class="hljs-type">long</span> nativePtr)</span>;<br></code></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œå…³äº Typeface æºç éƒ¨åˆ†æˆ‘ä»¬å°±ä»‹ç»å®Œäº†ï¼Œä¸‹é¢çœ‹ä¸‹å®ƒçš„ä¸€äº›å…¶ä»–ç»†èŠ‚</p><h2 id="ä¸‰ã€Typeface-å…¶å®ƒç»†èŠ‚"><a href="#ä¸‰ã€Typeface-å…¶å®ƒç»†èŠ‚" class="headerlink" title="ä¸‰ã€Typeface å…¶å®ƒç»†èŠ‚"></a>ä¸‰ã€Typeface å…¶å®ƒç»†èŠ‚</h2><h3 id="1ã€é»˜è®¤ä½¿ç”¨"><a href="#1ã€é»˜è®¤ä½¿ç”¨" class="headerlink" title="1ã€é»˜è®¤ä½¿ç”¨"></a>1ã€é»˜è®¤ä½¿ç”¨</h3><p>åœ¨åˆå§‹åŒ–é‚£éƒ¨åˆ†ï¼ŒTypeface å¯¹å­—ä½“å’Œ Style æœ‰ä¸€äº›é»˜è®¤å®ç°</p><p>å¦‚æœæˆ‘ä»¬åªæƒ³ç”¨ç³»ç»Ÿé»˜è®¤çš„å­—ä½“ï¼Œç›´æ¥æ‹¿ä¸Šé¢çš„å¸¸é‡ç”¨å°± ok äº†ï¼Œå¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Typeface.DEFAULT<br>Typeface.DEFAULT_BOLD<br>Typeface.SANS_SERIF<br>Typeface.SERIF<br>Typeface.MONOSPACE<br></code></pre></td></tr></table></figure><p>è€Œå¦‚æœæƒ³è¦è®¾ç½® Style ï¼Œæˆ‘ä»¬ä¸èƒ½é€šè¿‡ sDefaults ç›´æ¥å»æ‹¿ï¼Œå› ä¸ºä¸Šå±‚è°ƒç”¨ä¸åˆ° sDefaultsï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ Typeface æä¾›çš„ API è·å–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Typeface <span class="hljs-title function_">defaultFromStyle</span><span class="hljs-params">(<span class="hljs-meta">@Style</span> <span class="hljs-type">int</span> style)</span> &#123;<br>    <span class="hljs-keyword">return</span> sDefaults[style];<br>&#125;<br><br><span class="hljs-comment">//å…·ä½“è°ƒç”¨</span><br>Typeface.defaultFromStyle(Typeface.NORMAL)<br>Typeface.defaultFromStyle(Typeface.BOLD)<br>Typeface.defaultFromStyle(Typeface.ITALIC)<br>Typeface.defaultFromStyle(Typeface.BOLD_ITALIC)<br></code></pre></td></tr></table></figure><h3 id="2ã€Typeface-ä¸­çš„-Style"><a href="#2ã€Typeface-ä¸­çš„-Style" class="headerlink" title="2ã€Typeface ä¸­çš„ Style"></a>2ã€Typeface ä¸­çš„ Style</h3><p>1ï¼‰ã€Typeface ä¸­çš„ Style å¯ä»¥é€šè¿‡ android:textStyle å±æ€§å»è®¾ç½®ç²—ä½“ã€æ–œä½“ç­‰æ ·å¼</p><p>2ï¼‰ã€åœ¨ Typeface ä¸­ï¼Œè¿™äº›æ ·å¼ä¹Ÿå¯¹åº”äº†ä¸€ä¸ªä¸ªçš„å¸¸é‡ï¼Œå¹¶ä¸” Typeface ä¹Ÿæä¾›äº†å¯¹åº”çš„ Apiï¼Œè®©æˆ‘ä»¬è·å–åˆ°å½“å‰å­—ä½“çš„æ ·å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Style</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">NORMAL</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">BOLD</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">ITALIC</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">BOLD_ITALIC</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;<br><br><span class="hljs-comment">/** Returns the typeface&#x27;s intrinsic style attributes */</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@Style</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getStyle</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> mStyle;<br>&#125;<br><br><span class="hljs-comment">/** Returns true if getStyle() has the BOLD bit set. */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBold</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> (mStyle &amp; BOLD) != <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">/** Returns true if getStyle() has the ITALIC bit set. */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isItalic</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> (mStyle &amp; ITALIC) != <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3ã€FontFamily-ä»‹ç»"><a href="#3ã€FontFamily-ä»‹ç»" class="headerlink" title="3ã€FontFamily ä»‹ç»"></a>3ã€FontFamily ä»‹ç»</h3><p><strong>FontFamily</strong> ä¸»è¦å°±æ˜¯ç”¨æ¥æ„å»º Typeface çš„ä¸€ä¸ªç±»ï¼Œæ³¨æ„å’Œåœ¨ Xml å±æ€§ä¸­è®¾ç½®çš„ android:fontFamily åŒºåˆ†å¼€æ¥å°±å¥½äº†</p><h2 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h2><p>æ€»ç»“ä¸‹æœ¬ç¯‡æ–‡ç« æ‰€è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€Typeface åˆå§‹åŒ–å¯¹å­—ä½“å’Œ Style ä¼šæœ‰ä¸€äº›é»˜è®¤å®ç°</p><p>2ã€Typeface create ç³»åˆ—æ–¹æ³•æ”¯æŒä»ç³»ç»Ÿé»˜è®¤å­—ä½“ã€ assets ç›®å½•ã€å­—ä½“æ–‡ä»¶ä»¥åŠå­—ä½“è·¯å¾„å»è·å–å­—ä½“</p><p>3ã€Typeface æœ¬èº«æ”¯æŒç¼“å­˜ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™æ— éœ€æ³¨æ„æ•ˆç‡é—®é¢˜</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®²åœ¨ Xml ä¸­ä½¿ç”¨å­—ä½“ï¼Œæ•¬è¯·æœŸå¾…å§ ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://segmentfault.com/a/1190000011299442">Android ä¿®æ”¹å­—ä½“ï¼Œè·³ä¸è¿‡çš„ Typeface</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>Font</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Android Font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Androidå­—ä½“ç³»åˆ— ï¼ˆä¸€ï¼‰ï¼šAndroidå­—ä½“åŸºç¡€</title>
    <link href="/2022/10/11/Android%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AAndroid%E5%AD%97%E4%BD%93%E5%9F%BA%E7%A1%80/"/>
    <url>/2022/10/11/Android%E5%AD%97%E4%BD%93%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AAndroid%E5%AD%97%E4%BD%93%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210111039669.jpeg" alt="robert-lukeman-_RBcxo9AU-U-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>æœ€è¿‘æ¥åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œå¤§è‡´å†…å®¹æ˜¯ï¼šå…¨å±€æ›¿æ¢å½“å‰é¡¹ç›®ä¸­çš„é»˜è®¤å­—ä½“ï¼Œå¹¶å¼•å…¥ UI è®¾è®¡å¸ˆæä¾›çš„ä¸€äº›æ–°å­—ä½“ã€‚äºæ˜¯å¯¹å­—ä½“åšäº†äº›ç ”ç©¶ï¼ŒæŠŠè‡ªå·±çš„ä¸€äº›å¿ƒå¾—åˆ†äº«ç»™å¤§å®¶ã€‚</p><p><strong>æ³¨æ„ï¼šæœ¬æ–‡æ‰€å±•ç¤ºçš„ç³»ç»Ÿæºç éƒ½æ˜¯åŸºäºAndroid-30 ï¼Œå¹¶æå–æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œåˆ†æ</strong></p><h2 id="ä¸€ã€Android-é»˜è®¤å­—ä½“ä»‹ç»"><a href="#ä¸€ã€Android-é»˜è®¤å­—ä½“ä»‹ç»" class="headerlink" title="ä¸€ã€Android é»˜è®¤å­—ä½“ä»‹ç»"></a>ä¸€ã€Android é»˜è®¤å­—ä½“ä»‹ç»</h2><p>1ã€Android ç³»ç»Ÿé»˜è®¤ä½¿ç”¨çš„æ˜¯ä¸€æ¬¾å«åš <strong>Roboto</strong> çš„å­—ä½“ï¼Œè¿™ä¹Ÿæ˜¯ Google æ¨èä½¿ç”¨çš„ä¸€æ¬¾å­—ä½“ <a href="https://fonts.google.com/specimen/Roboto">ä¼ é€é—¨</a>ã€‚å®ƒæä¾›äº†å¤šç§å­—ä½“å½¢å¼çš„é€‰æ‹©ï¼Œä¾‹å¦‚ï¼šç²—ä½“ï¼Œæ–œä½“ç­‰ç­‰ã€‚</p><p>2ã€åœ¨ Android ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šç›´æ¥æˆ–é—´æ¥çš„é€šè¿‡ TextView æ§ä»¶å»æ‰¿è½½å­—ä½“çš„æ˜¾ç¤ºï¼Œå› ä¸ºå…³äº Android æä¾›çš„æ‰¿è½½å­—ä½“æ˜¾ç¤ºçš„æ§ä»¶éƒ½ä¼šç›´æ¥æˆ–é—´æ¥ç»§æ‰¿ TextViewï¼Œä¾‹å¦‚ï¼šEditTextï¼ŒButton ç­‰ç­‰ï¼Œä¸‹é¢ç»™å‡ºä¸€å¼  TextView ç»§æ‰¿å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d39161a73f724a768e1eabde15b04c4e~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210612124458481"></p><p>3ã€TextView ä¸­æœ‰ä¸‰ä¸ªå±æ€§å¯ä»¥è®¾ç½®å­—ä½“çš„æ˜¾ç¤ºï¼š</p><p>1ï¼‰ã€textStyle</p><p>2ï¼‰ã€typeface</p><p>3ï¼‰ã€fontFamily</p><p>ä¸‹é¢æˆ‘ä»¬é‡ç‚¹ä»‹ç»ä¸‹è¿™ä¸‰ä¸ªå±æ€§</p><h2 id="äºŒã€textStyle"><a href="#äºŒã€textStyle" class="headerlink" title="äºŒã€textStyle"></a>äºŒã€textStyle</h2><p><strong>textStyle</strong> ä¸»è¦ç”¨æ¥è®¾ç½®å­—ä½“çš„æ ·å¼ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ƒåœ¨ TextView çš„è‡ªå®šä¹‰å±æ€§ä¸­çš„ä¸€ä¸ªä½“ç°ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml">//TextView çš„è‡ªå®šä¹‰å±æ€§ textStyle<br><span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;textStyle&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">flag</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;normal&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">flag</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;bold&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">flag</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;italic&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">attr</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä»ä¸Šè¿°è‡ªå®šä¹‰å±æ€§ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p><p>1ã€textStyle ä¸»è¦æœ‰ 3 ç§æ ·å¼ï¼š</p><ul><li>normalï¼šé»˜è®¤å­—ä½“ </li><li>boldï¼šç²—ä½“</li><li>italicï¼šæ–œä½“</li></ul><p>2ã€textStyle æ˜¯ç”¨ flag æ¥æ‰¿è½½çš„ï¼Œflag è¡¨ç¤ºçš„å€¼å¯ä»¥åšæˆ–è¿ç®—ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥è®¾ç½®å¤šç§å­—ä½“æ ·å¼è¿›è¡Œå åŠ </p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ xml ä¸­è®¾ç½®ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e2f6c4a7ba141e0b05c0c45bd802b0a~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210612205549971"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç»™ TextView çš„ textStyle å±æ€§è®¾ç½®äº†<strong>ç²—ä½“å’Œæ–œä½“</strong>ä¸¤ç§æ ·å¼å åŠ ï¼Œå³è¾¹å¯ä»¥çœ‹åˆ°é¢„è§ˆæ•ˆæœ</p><p>åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­å¯¹å…¶è¿›è¡Œè®¾ç½®ï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­è®¾ç½®å­—ä½“æ ·å¼åªèƒ½è®¾ç½®ä¸€ç§ï¼Œä¸èƒ½å åŠ ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">mTextView.setTypeface(<span class="hljs-literal">null</span>, Typeface.BOLD)<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€typeface"><a href="#ä¸‰ã€typeface" class="headerlink" title="ä¸‰ã€typeface"></a>ä¸‰ã€typeface</h2><p><strong>typeface</strong> ä¸»è¦ç”¨äºè®¾ç½® TextView çš„å­—ä½“ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ƒåœ¨ TextView çš„è‡ªå®šä¹‰å±æ€§ä¸­çš„ä¸€ä¸ªä½“ç°ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml">//TextView çš„è‡ªå®šä¹‰å±æ€§ typeface<br><span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;typeface&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">enum</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;normal&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;0&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">enum</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sans&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">enum</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;serif&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;2&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">enum</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;monospace&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;3&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">attr</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä»ä¸Šè¿°è‡ªå®šä¹‰å±æ€§ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p><p>1ã€typeface æä¾›äº† 4 ç§å­—ä½“:</p><ul><li>noramlï¼šæ™®é€šå­—ä½“ï¼Œç³»ç»Ÿé»˜è®¤ä½¿ç”¨çš„å­—ä½“</li><li>sansï¼šéè¡¬çº¿å­—ä½“</li><li>serifï¼šè¡¬çº¿å­—ä½“</li><li>monospaceï¼šç­‰å®½å­—ä½“</li></ul><p>2ã€typeface æ˜¯ç”¨ enum æ¥æ‰¿è½½çš„ï¼Œenum è¡¨ç¤ºæšä¸¾ç±»å‹ï¼Œæ¯æ¬¡åªèƒ½é€‰æ‹©ä¸€ä¸ªï¼Œå› æ­¤æˆ‘ä»¬æ¯æ¬¡åªèƒ½è®¾ç½®ä¸€ç§å­—ä½“ï¼Œä¸èƒ½å åŠ </p><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ xml ä¸­è®¾ç½®ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/af5a02a649b74a8b8ca9eb05eeb7bbff~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210612133722082"></p><p>ç®€å•ä»‹ç»è¿™å‡ ç§å­—ä½“çš„åŒºåˆ«ï¼š</p><p>serif (è¡¬çº¿å­—ä½“)ï¼šåœ¨å­—çš„ç¬”åˆ’å¼€å§‹åŠç»“æŸçš„åœ°æ–¹æœ‰é¢å¤–çš„è£…é¥°ï¼Œè€Œä¸”ç¬”åˆ’çš„ç²—ç»†ä¼šå› ç›´æ¨ªçš„ä¸åŒè€Œæœ‰ä¸åŒç›¸</p><p>sans (éè¡¬çº¿å­—ä½“)ï¼šæ²¡æœ‰ serif å­—ä½“è¿™äº›é¢å¤–çš„è£…é¥°ï¼Œå’Œ noraml å­—ä½“æ˜¯ä¸€æ ·çš„</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cdccfc3d87ec4fc29d5e8459f6a0972d~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210612134441993"></p><p>monospace (ç­‰å®½å­—ä½“)ï¼šé™åˆ¶æ¯ä¸ªå­—ç¬¦çš„å®½åº¦ï¼Œè®©å®ƒä»¬è¾¾åˆ°ä¸€ä¸ªç­‰å®½çš„æ•ˆæœ</p><p>åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­è¿›è¡Œè®¾ç½®ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">mTv.setTypeface(Typeface.SERIF)<br></code></pre></td></tr></table></figure><h2 id="å››ã€fontFamily"><a href="#å››ã€fontFamily" class="headerlink" title="å››ã€fontFamily"></a>å››ã€fontFamily</h2><p>fontFamily ç›¸å½“äºæ˜¯åŠ å¼ºç‰ˆçš„ typefaceï¼Œå®ƒè¡¨ç¤º android ç³»ç»Ÿæ”¯æŒçš„ä¸€ç³»åˆ—å­—ä½“ï¼Œæ¯ä¸ªå­—ä½“éƒ½æœ‰ä¸€ä¸ªåˆ«åï¼Œæˆ‘ä»¬é€šè¿‡åˆ«åå°±èƒ½è®¾ç½®è¿™ç§å­—ä½“ï¼Œçœ‹ä¸‹å®ƒåœ¨ TextView çš„è‡ªå®šä¹‰å±æ€§ä¸­çš„ä¸€ä¸ªä½“ç°ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml">//TextView çš„è‡ªå®šä¹‰å±æ€§ fontFamily<br><span class="hljs-tag">&lt;<span class="hljs-name">attr</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fontFamily&quot;</span> <span class="hljs-attr">format</span>=<span class="hljs-string">&quot;string&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>ä»ä¸Šè¿°è‡ªå®šä¹‰å±æ€§ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼š</p><p>fontFamily æ¥æ”¶çš„æ˜¯ä¸€ä¸ª String ç±»å‹çš„å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡å­—ä½“åˆ«åè®¾ç½®è¿™ç§å­—ä½“ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb550779d94c4e2d9765e9e965a64239~tplv-k3u1fbpfcp-zoom-1.image" alt="fontFamily"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒç»†è‡´çš„åŒºåˆ†äº†æ¯ä¸ªç³»åˆ—å­—ä½“çš„æ ·å¼ï¼ŒåŒæ ·æˆ‘ä»¬åœ¨ xml ä¸­å¯¹å®ƒè¿›è¡Œä¸€ä¸ªè®¾ç½®ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/58193c885a64490aaf7d5f2f77b50348~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210612212209243"><br>æˆ‘ä»¬åœ¨ä»£ç ä¸­åœ¨å¯¹ä»–è¿›è¡Œä¸€ä¸ªè®¾ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">mTv.setTypeface(Typeface.create(<span class="hljs-string">&quot;sans-serif-medium&quot;</span>,Typeface.NORMAL))<br></code></pre></td></tr></table></figure><p><strong>å€¼çš„æ³¨æ„çš„æ˜¯</strong>ï¼šfontFamily è®¾ç½®çš„æŸäº›å­—ä½“æœ‰å…¼å®¹æ€§é—®é¢˜ï¼Œå¦‚æˆ‘ä¸Šé¢è®¾ç½®çš„ sans-serif-medium å­—ä½“ï¼Œå®ƒåœ¨ Android ç³»ç»Ÿç‰ˆæœ¬å¤§äºç­‰äº 21 æ‰ä¼šç”Ÿæ•ˆï¼Œå¦‚æœå°äº 21 ï¼Œåˆ™ä¼šä½¿ç”¨é»˜è®¤å­—ä½“ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨ fontFamily<br>å±æ€§æ—¶ï¼Œéœ€è¦æ³¨æ„è¿™ä¸ªé—®é¢˜</p><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±æŠŠå½±å“ Android å­—ä½“çš„ 3 ä¸ªå±æ€§ç»™è®²å®Œäº†ï¼Œä½†æ˜¯æˆ‘å¿ƒé‡Œæœ‰ä¸ªç–‘é—®ğŸ¤”ï¸ ï¼Ÿå‡è®¾æˆ‘è¿™ä¸‰ä¸ªå±æ€§åŒæ—¶è®¾ç½®ï¼Œä¼šä¸€èµ·ç”Ÿæ•ˆå—ï¼Ÿ</p><p>å¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¢ç´¢ä¸€ä¸‹æºç </p><h2 id="äº”ã€textStyleï¼Œtypefaceï¼ŒfontFamily-ä¸‰è€…å…³ç³»åˆ†æ"><a href="#äº”ã€textStyleï¼Œtypefaceï¼ŒfontFamily-ä¸‰è€…å…³ç³»åˆ†æ" class="headerlink" title="äº”ã€textStyleï¼Œtypefaceï¼ŒfontFamily ä¸‰è€…å…³ç³»åˆ†æ"></a>äº”ã€textStyleï¼Œtypefaceï¼ŒfontFamily ä¸‰è€…å…³ç³»åˆ†æ</h2><p>TextView åœ¨æˆ‘ä»¬ä½¿ç”¨å®ƒä¹‹å‰éœ€è¿›è¡Œä¸€ä¸ªåˆå§‹åŒ–ï¼Œæœ€ç»ˆä¼šè°ƒç”¨å®ƒå‚æ•°æœ€å¤šçš„é‚£ä¸ªæ„é€ æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">TextView</span><span class="hljs-params">(Context context, <span class="hljs-meta">@Nullable</span> AttributeSet attrs, <span class="hljs-type">int</span> defStyleAttr, <span class="hljs-type">int</span> defStyleRes)</span> &#123;<br>    <span class="hljs-built_in">super</span>(context, attrs, defStyleAttr, defStyleRes);<br>  <span class="hljs-comment">//çœç•¥æˆå¨ä»£ç .....</span><br>  <span class="hljs-comment">//è¯»å–è®¾ç½®çš„å±æ€§</span><br>  readTextAppearance(context, appearance, attributes, <span class="hljs-literal">false</span> <span class="hljs-comment">/* styleArray */</span>);<br>  <span class="hljs-comment">//è®¾ç½®å­—ä½“</span><br>  applyTextAppearance(attributes);<br> &#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">applyTextAppearance</span><span class="hljs-params">(TextAppearanceAttributes attributes)</span> &#123;<br>   <span class="hljs-comment">//çœç•¥æˆå¨ä»£ç .....</span><br>  setTypefaceFromAttrs(attributes.mFontTypeface, attributes.mFontFamily,<br>                attributes.mTypefaceIndex, attributes.mTextStyle, attributes.mFontWeight);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢è¿™æ¡è°ƒç”¨é“¾ï¼Œé¦–å…ˆä¼šè¯»å– TextView è®¾ç½®çš„ç›¸å…³å±æ€§ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¸å­—ä½“ç›¸å…³çš„å‡ ä¸ªï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">readTextAppearance</span><span class="hljs-params">(Context context, TypedArray appearance,</span><br><span class="hljs-params">            TextAppearanceAttributes attributes, <span class="hljs-type">boolean</span> styleArray)</span> &#123;<br>  <span class="hljs-comment">//...</span><br>  <span class="hljs-keyword">switch</span> (index) &#123;<br>     <span class="hljs-keyword">case</span> com.android.internal.R.styleable.TextAppearance_typeface:<br>                attributes.mTypefaceIndex = appearance.getInt(attr, attributes.mTypefaceIndex);<br>                <span class="hljs-keyword">if</span> (attributes.mTypefaceIndex != -<span class="hljs-number">1</span> &amp;&amp; !attributes.mFontFamilyExplicit) &#123;<br>                    attributes.mFontFamily = <span class="hljs-literal">null</span>;<br>                &#125;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> com.android.internal.R.styleable.TextAppearance_fontFamily:<br>                <span class="hljs-keyword">if</span> (!context.isRestricted() &amp;&amp; context.canLoadUnsafeResources()) &#123;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        attributes.mFontTypeface = appearance.getFont(attr);<br>                    &#125; <span class="hljs-keyword">catch</span> (UnsupportedOperationException | Resources.NotFoundException e) &#123;<br>                        <span class="hljs-comment">// Expected if it is not a font resource.</span><br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (attributes.mFontTypeface == <span class="hljs-literal">null</span>) &#123;<br>                    attributes.mFontFamily = appearance.getString(attr);<br>                &#125;<br>                attributes.mFontFamilyExplicit = <span class="hljs-literal">true</span>;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> com.android.internal.R.styleable.TextAppearance_textStyle:<br>                attributes.mTextStyle = appearance.getInt(attr, attributes.mTextStyle);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-comment">//...</span><br>       <span class="hljs-keyword">default</span>:<br>     &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä»ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><p>1ã€å½“æˆ‘ä»¬è®¾ç½® typeface å±æ€§æ—¶ï¼Œä¼šå°†å¯¹åº”çš„å±æ€§å€¼èµ‹ç»™ mTypefaceIndex ï¼Œå¹¶æŠŠ mFontFamily ç½®ä¸º null</p><p>2ã€å½“æˆ‘ä»¬è®¾ç½® fontFamily å±æ€§æ—¶ï¼Œé¦–å…ˆä¼šé€šè¿‡ appearance.getFont() æ–¹æ³•å»è·å–å­—ä½“æ–‡ä»¶ï¼Œå¦‚æœèƒ½è·å–åˆ°ï¼Œåˆ™èµ‹å€¼ç»™ mFontTypefaceï¼Œå¦‚æœè·å–ä¸åˆ°ï¼Œåˆ™é€šè¿‡ appearance.getString() æ–¹æ³•å–è·å–å½“å‰å­—ä½“åˆ«åå¹¶èµ‹å€¼ç»™ mFontFamily</p><p><strong>æ³¨æ„</strong>ï¼šå½“æˆ‘ä»¬ç»™ fontFamily è®¾ç½®äº†ä¸€äº›ç¬¬ä¸‰æ–¹å­—ä½“ï¼Œé‚£ä¹ˆæ­¤æ—¶  appearance.getFont() æ–¹æ³•å°±è·å–ä¸åˆ°å­—ä½“</p><p>3ã€å½“æˆ‘ä»¬è®¾ç½® textStyle å±æ€§æ—¶ï¼Œä¼šå°†è·å–çš„å±æ€§å€¼èµ‹ç»™ mTextStyle </p><p>ä¸Šè¿°æ–¹æ³•èµ°å®Œäº†ï¼Œä¼šè°ƒ setTypefaceFromAttrs() æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æœ€ç»ˆ TextView è®¾ç½®å­—ä½“çš„æ–¹æ³•ï¼Œæˆ‘ä»¬æ¥è§£æä¸‹è¿™ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTypefaceFromAttrs</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Typeface typeface, <span class="hljs-meta">@Nullable</span> String familyName,</span><br><span class="hljs-params">            <span class="hljs-meta">@XMLTypefaceAttr</span> <span class="hljs-type">int</span> typefaceIndex, <span class="hljs-meta">@Typeface</span>.Style <span class="hljs-type">int</span> style,</span><br><span class="hljs-params">            <span class="hljs-meta">@IntRange(from = -1, to = FontStyle.FONT_WEIGHT_MAX)</span> <span class="hljs-type">int</span> weight)</span> &#123;<br>    <span class="hljs-keyword">if</span> (typeface == <span class="hljs-literal">null</span> &amp;&amp; familyName != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// Lookup normal Typeface from system font map.</span><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">Typeface</span> <span class="hljs-variable">normalTypeface</span> <span class="hljs-operator">=</span> Typeface.create(familyName, Typeface.NORMAL);<br>        resolveStyleAndSetTypeface(normalTypeface, style, weight);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (typeface != <span class="hljs-literal">null</span>) &#123;<br>        resolveStyleAndSetTypeface(typeface, style, weight);<br>    &#125; <span class="hljs-keyword">else</span> &#123;  <span class="hljs-comment">// both typeface and familyName is null.</span><br>        <span class="hljs-keyword">switch</span> (typefaceIndex) &#123;<br>            <span class="hljs-keyword">case</span> SANS:<br>                resolveStyleAndSetTypeface(Typeface.SANS_SERIF, style, weight);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> SERIF:<br>                resolveStyleAndSetTypeface(Typeface.SERIF, style, weight);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> MONOSPACE:<br>                resolveStyleAndSetTypeface(Typeface.MONOSPACE, style, weight);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> DEFAULT_TYPEFACE:<br>            <span class="hljs-keyword">default</span>:<br>                resolveStyleAndSetTypeface(<span class="hljs-literal">null</span>, style, weight);<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æ­¥éª¤ï¼š</p><p>1ã€å½“ typeface ä¸ºç©ºå¹¶ä¸” familyName ä¸ä¸ºç©ºæ—¶ï¼Œå– familyName çš„å­—ä½“</p><p>2ã€å½“ typeface ä¸ä¸ºç©ºå¹¶ä¸” familyName ä¸ºç©ºæ—¶ï¼Œå– typeface çš„å­—ä½“</p><p>3ã€å½“ typeface å’Œ familyName éƒ½ä¸ºç©ºï¼Œåˆ™æ ¹æ® typefaceIndex çš„å€¼å–ç›¸åº”çš„å­—ä½“</p><p>4ã€typeface ï¼ŒfamilyName å’Œ typefaceIndex åœ¨æˆ‘ä»¬åˆ†æçš„ readTextAppearance æ–¹æ³•ä¼šè¢«èµ‹å€¼</p><p>5ã€resolveStyleAndSetTypefce æ–¹æ³•ä¼šè¿›è¡Œå­—ä½“å’Œå­—ä½“æ ·å¼çš„è®¾ç½®</p><p>6ã€style æ˜¯åœ¨ readTextAppearance æ–¹æ³•ä¸­èµ‹å€¼çš„ï¼Œä»–å’Œè®¾ç½®å­—ä½“å¹¶ä¸å†²çª</p><p>å¥½ï¼Œç°åœ¨ä»£ç åˆ†æçš„å·®ä¸å¤šäº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹ä¸Šé¢é‚£ä¸ªç–‘é—®ï¼Ÿæˆ‘ä»¬ä½¿ç”¨å‡è®¾æ³•æ¥è¿›è¡Œæ¨å¯¼ï¼š</p><p>å‡è®¾åœ¨ Xml ä¸­ï¼Œ typefaceï¼ŒfamilyName å’Œ textStyle æˆ‘éƒ½è®¾ç½®äº†ï¼Œé‚£ä¹ˆæ ¹æ®ä¸Šé¢åˆ†æï¼š</p><p>1ã€textStyle è‚¯å®šä¼šç”Ÿæ•ˆ</p><p>2ã€å½“è®¾ç½®äº† typeface å±æ€§ï¼ŒtypefaceIndex ä¼šè¢«èµ‹å€¼ï¼ŒåŒæ—¶ familyName ä¼šç½®ä¸ºç©º</p><p>3ã€å½“è®¾ç½®äº† familyName å±æ€§ï¼Œåˆ†æƒ…å†µï¼š1ã€å¦‚æœè®¾ç½®çš„æ˜¯ç³»ç»Ÿå­—ä½“ï¼Œtypeface ä¼šè¢«èµ‹å€¼ï¼ŒfamilyName è¿˜æ˜¯ä¸ºç©ºã€‚2ã€å¦‚æœè®¾ç½®çš„æ˜¯ç¬¬ä¸‰æ–¹å­—ä½“ï¼Œtypeface ä¸ºç©ºï¼ŒfamilyName è¢«èµ‹å€¼</p><p>å› æ­¤ï¼Œå½“æˆ‘ä»¬è®¾ç½®äº†è¿™ä¸ªä¸‰ä¸ªå±æ€§ï¼Œtypeface å’Œ familyName æ€»æœ‰ä¸€ä¸ªä¸ä¼šä¸ºç©ºï¼Œå› æ­¤ä¸ä¼šèµ°ç¬¬ä¸‰ä¸ªæ¡ä»¶ä½“ï¼Œé‚£ä¹ˆ typeface è®¾ç½®çš„å±æ€§å°±ä¸ä¼šç”Ÿæ•ˆäº†ï¼Œè€Œå‰©ä¸‹çš„ä¸¤ä¸ªå±æ€§éƒ½èƒ½å¤Ÿç”Ÿæ•ˆ</p><p>æœ€åå¯¹è¿™ä¸‰ä¸ªå±æ€§åšä¸€ä¸ªæ€»ç»“ï¼š</p><p><strong>1ã€fontFamilyã€typeface å±æ€§ç”¨äºå­—ä½“è®¾ç½®ï¼Œå¦‚æœéƒ½è®¾ç½®äº†ï¼Œä¼˜å…ˆä½¿ç”¨ fontFamily å±æ€§ï¼Œtypeface å±æ€§ä¸ä¼šç”Ÿæ•ˆ</strong></p><p><strong>2ã€textStyle ç”¨äºå­—ä½“æ ·å¼è®¾ç½®ï¼Œä¸å­—ä½“è®¾ç½®ä¸ä¼šäº§ç”Ÿå†²çª</strong></p><p>ä¸Šé¢è¿™æ®µæºç åˆ†æå¯èƒ½æœ‰ç‚¹ç»•ï¼Œå¦‚æœæœ‰ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œæ¬¢è¿è¯„è®ºåŒºç»™æˆ‘ç•™è¨€æé—®</p><h2 id="å…­ã€TextView-è®¾ç½®å­—ä½“å±æ€§æºç åˆ†æ"><a href="#å…­ã€TextView-è®¾ç½®å­—ä½“å±æ€§æºç åˆ†æ" class="headerlink" title="å…­ã€TextView è®¾ç½®å­—ä½“å±æ€§æºç åˆ†æ"></a>å…­ã€TextView è®¾ç½®å­—ä½“å±æ€§æºç åˆ†æ</h2><p>é€šè¿‡ä¸Šé¢æºç çš„åˆ†æï¼Œæˆ‘ä»¬æ¸…æ¥šäº† fontFamilyï¼Œtypeface å’Œ textStyle è¿™ä¸‰è€…çš„å…³ç³»ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç ”ç©¶ä¸€ä¸‹ï¼Œæˆ‘ä»¬è®¾ç½®çš„è¿™äº›å±æ€§æ˜¯æ€ä¹ˆå®ç°è¿™äº›æ•ˆæœçš„å‘¢ï¼Ÿåˆåˆ°äº†æºç åˆ†æç¯èŠ‚ğŸ˜‚ï¼Œå¯èƒ½ä¼šæœ‰ç‚¹æ¯ç‡¥ï¼Œä½†æ˜¯å¦‚æœä½ èƒ½å¤Ÿè®¤çœŸçœ‹å®Œï¼Œä¸€å®šä¼šæ”¶è·å¾ˆå¤šï¼Œå¹²å°±å®Œäº†</p><p>æˆ‘ä»¬ä¸Šé¢ç”¨ Xml æˆ–ä»£ç è®¾ç½®çš„å­—ä½“å±æ€§ï¼Œæœ€ç»ˆéƒ½ä¼šèµ°åˆ° TextView çš„ setTypeface é‡è½½æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//é‡è½½æ–¹æ³•ä¸€</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTypeface</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Typeface tf)</span> &#123;<br>    <span class="hljs-keyword">if</span> (mTextPaint.getTypeface() != tf) &#123;<br>      <span class="hljs-comment">//é€šè¿‡ mTextPaint è®¾ç½®å­—ä½“</span><br>        mTextPaint.setTypeface(tf);<br>      <br>      <span class="hljs-comment">//åˆ·æ–°é‡ç»˜</span><br>        <span class="hljs-keyword">if</span> (mLayout != <span class="hljs-literal">null</span>) &#123;<br>            nullLayouts();<br>            requestLayout();<br>            invalidate();<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//é‡è½½æ–¹æ³•äºŒ</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTypeface</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Typeface tf, <span class="hljs-meta">@Typeface</span>.Style <span class="hljs-type">int</span> style)</span> &#123;<br>  <span class="hljs-keyword">if</span> (style &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">if</span> (tf == <span class="hljs-literal">null</span>) &#123;<br>            tf = Typeface.defaultFromStyle(style);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            tf = Typeface.create(tf, style);<br>        &#125;<br><span class="hljs-comment">//è°ƒç”¨é‡è½½æ–¹æ³•ä¸€ï¼Œè®¾ç½®å­—ä½“</span><br>        setTypeface(tf);<br>      <span class="hljs-comment">//ç»è¿‡ä¸€äº›ç®—æ³•</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">typefaceStyle</span> <span class="hljs-operator">=</span> tf != <span class="hljs-literal">null</span> ? tf.getStyle() : <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">need</span> <span class="hljs-operator">=</span> style &amp; ~typefaceStyle;<br>      <span class="hljs-comment">//æ‰“å¼€ç”»ç¬”çš„ç²—ä½“å’Œæ–œä½“</span><br>        mTextPaint.setFakeBoldText((need &amp; Typeface.BOLD) != <span class="hljs-number">0</span>);<br>        mTextPaint.setTextSkewX((need &amp; Typeface.ITALIC) != <span class="hljs-number">0</span> ? -<span class="hljs-number">0.25f</span> : <span class="hljs-number">0</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        mTextPaint.setFakeBoldText(<span class="hljs-literal">false</span>);<br>        mTextPaint.setTextSkewX(<span class="hljs-number">0</span>);<br>        setTypeface(tf);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ†æä¸‹ä¸Šè¿°ä»£ç ï¼š</p><p>é‡è½½æ–¹æ³•ä¸€ï¼š</p><p>TextView è®¾ç½®å­—ä½“å®é™…ä¸Šå°±æ˜¯æ“ä½œ mTextPaintï¼ŒmTextPaint æ˜¯ TextPaint çš„ç±»å¯¹è±¡ï¼Œç»§æ‰¿è‡ª Paint å³ç”»ç¬”ï¼Œå› æ­¤æˆ‘ä»¬è®¾ç½®çš„å­—ä½“å®é™…ä¸Šä¼šé€šè¿‡è°ƒç”¨ç”»ç¬”çš„æ–¹æ³•æ¥è¿›è¡Œç»˜åˆ¶</p><p>é‡è½½æ–¹æ³•äºŒï¼š</p><p>ç›¸å¯¹äºé‡è½½æ–¹æ³•ä¸€ï¼Œæ³•äºŒå¤šä¼ é€’äº†ä¸€ä¸ª textStyle å‚æ•°ï¼Œä¸»è¦ç”¨æ¥æ ‡è®°ç²—ä½“å’Œæ–œä½“çš„ï¼š</p><p>1ï¼‰ã€å¦‚æœè®¾ç½®äº† textStyle ï¼Œè¿›å…¥ç¬¬ä¸€ä¸ªæ¡ä»¶ä½“ï¼Œåˆ†æƒ…å†µï¼š1ã€å¦‚æœä¼ è¿›æ¥çš„ tf ä¸º null ï¼Œåˆ™ä¼šæ ¹æ®ä¼ å…¥çš„ style å»è·å– Typeface å­—ä½“ï¼Œ2ã€å¦‚æœä¸ä¸º null ï¼Œåˆ™ä¼šæ ¹æ®ä¼ å…¥çš„ tf å’Œ style å»è·å– Typeface å­—ä½“ã€‚è®¾ç½®å¥½å­—ä½“åï¼Œæ¥ä¸‹æ¥è¿˜ä¼šæ‰“å¼€ç”»ç¬”çš„ç²—ä½“å’Œæ–œä½“è®¾ç½®</p><p>2ï¼‰ã€å¦‚æœæ²¡æœ‰è®¾ç½® textStyleï¼Œåˆ™åªä¼šè®¾ç½®å­—ä½“ï¼Œå¹¶æŠŠç”»ç¬”çš„ç²—æ–œä½“è®¾ç½®ç½®ä¸º false å’Œ 0</p><p>ä»ä¸Šè¿°åˆ†ææˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼š<strong>TextView è®¾ç½®å­—ä½“å’Œå­—ä½“æ ·å¼æœ€ç»ˆéƒ½æ˜¯é€šè¿‡ç”»ç¬”æ¥å®Œæˆçš„</strong></p><h2 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« ä¸»è¦è®²äº†ï¼š</p><p>1ã€Android å­—ä½“å¤§æ¦‚çš„ä¸€ä¸ªä»‹ç»</p><p>2ã€å…³äºå½±å“ Android å­—ä½“æ˜¾ç¤ºçš„ä¸‰ä¸ªå±æ€§</p><p>3ã€textStyleï¼Œtypefaceï¼ŒfontFamily ä¸‰è€…çš„ä¸€ä¸ªå…³ç³»</p><p>4ã€è®¾ç½®çš„è¿™ä¸‰ä¸ªå±æ€§æ˜¯æ€ä¹ˆå®ç°è¿™äº›æ•ˆæœçš„ï¼Ÿ</p><p>å¯èƒ½å¤§å®¶ä¼šé—®ï¼Œä½ ä¸Šé¢é‚£ä¸ªéœ€æ±‚è¿˜æ²¡è®²æ€ä¹ˆå°±è¦ç»“æŸäº†å‘¢ï¼Ÿæˆ‘ä¸Šé¢é‚£ä¸ªéœ€æ±‚ï¼Œä»¥ä»Šå¤©æ‰€è®²çš„çŸ¥è¯†å¯èƒ½è¿˜å®ç°ä¸äº†ï¼Œåˆ«ç€æ€¥ï¼Œå…³äº Android å­—ä½“æˆ‘å‡†å¤‡å†™ä¸ªç³»åˆ—ï¼Œå› ä¸ºå†…å®¹å®åœ¨æ˜¯å¤ªå¤šäº†ã€‚è¿™ä¸ªç³»åˆ—æ–‡ç« ä¸ä¼šè®©å¤§å®¶ç­‰å¤ªä¹…ï¼Œå› ä¸ºåœ¨å‚åŠ æ˜é‡‘ 6 æœˆæ›´æ–‡æŒ‘æˆ˜ï¼Œå‡†å¤‡çˆ†è‚ 9 ç¯‡ğŸ˜„</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿ç»™æˆ‘ç•™è¨€ï¼Œæˆ‘ä»¬è¯„è®ºåŒºä¸€èµ·è®¨è®ºğŸ¤</p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>Font</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Android Font</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gradle ç³»åˆ— ï¼ˆå››ï¼‰ã€Gradle æ’ä»¶å®æˆ˜åº”ç”¨</title>
    <link href="/2022/10/11/Gradle%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E5%9B%9B%EF%BC%89%E3%80%81Gradle%20%E6%8F%92%E4%BB%B6%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8/"/>
    <url>/2022/10/11/Gradle%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E5%9B%9B%EF%BC%89%E3%80%81Gradle%20%E6%8F%92%E4%BB%B6%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210111024742.jpeg" alt="beach-418742_1920"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>å…³äº Gradle å­¦ä¹ ï¼Œæˆ‘æ‰€ç†è§£çš„æµç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e010cee57604e179607243e027608d4~tplv-k3u1fbpfcp-zoom-1.image" alt="Gradle_learning"></p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²äº†è‡ªå®šä¹‰ Gradle æ’ä»¶ç›¸å…³çš„å†…å®¹ï¼Œå®Œæˆäº†ç¬¬ä¸‰ä¸ªç¯èŠ‚ã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6988051489306443789">Gradle ç³»åˆ— ï¼ˆä¸‰ï¼‰ã€Gradle æ’ä»¶å¼€å‘</a>ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬ä»‹ç»çš„è¿˜æ˜¯ç¯èŠ‚ä¸‰ï¼šGradle æ’ä»¶å®æˆ˜åº”ç”¨</p><p><a href="https://github.com/sweetying520/GradleDemo">Github Demo åœ°å€</a> , å¤§å®¶å¯ä»¥ç»“åˆ demo ä¸€èµ·çœ‹ï¼Œæ•ˆæœæ æ æ»´ğŸº</p><h2 id="ä¸€ã€å›é¡¾"><a href="#ä¸€ã€å›é¡¾" class="headerlink" title="ä¸€ã€å›é¡¾"></a>ä¸€ã€å›é¡¾</h2><p>ä¹‹å‰åœ¨è®² <a href="https://juejin.cn/post/6979191724983713805">Android APT ç³»åˆ— ï¼ˆå››ï¼‰ï¼šAPT å®æˆ˜åº”ç”¨</a> çš„æ—¶å€™ï¼Œæˆ‘ä»¬åšäº†ä¸€æ¬¡å¸ƒå±€ä¼˜åŒ–ï¼ŒAndroid ä¸­å°‘é‡çš„ç³»ç»Ÿæ§ä»¶æ˜¯é€šè¿‡ <code>new</code> çš„æ–¹å¼åˆ›å»ºå‡ºæ¥çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ§ä»¶å¦‚ <code>androidx.appcompat.widget</code> ä¸‹çš„æ§ä»¶ï¼Œè‡ªå®šä¹‰æ§ä»¶ï¼Œç¬¬ä¸‰æ–¹æ§ä»¶ç­‰ç­‰ï¼Œéƒ½æ˜¯é€šè¿‡åå°„åˆ›å»ºçš„ã€‚å¤§é‡çš„åå°„åˆ›å»ºå¤šå¤šå°‘å°‘ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å»è§£å†³åå°„åˆ›å»ºçš„é—®é¢˜ï¼Œæˆ‘çš„è§£å†³æ€è·¯æ˜¯ï¼š</p><blockquote><p>1ã€é€šè¿‡ç¼–å†™ Android æ’ä»¶è·å– Xml å¸ƒå±€ä¸­çš„æ‰€æœ‰æ§ä»¶</p><p>2ã€æ‹¿åˆ°æ§ä»¶åï¼Œé€šè¿‡ APT ç”Ÿæˆç”¨ <code>new</code> çš„æ–¹å¼åˆ›å»º View çš„ç±»</p><p>3ã€æœ€åé€šè¿‡åå°„è·å–å½“å‰ç±»å¹¶åœ¨åŸºç±»é‡Œé¢å®Œæˆæ›¿æ¢</p></blockquote><p>å…¶ä¸­ 1 çš„å…·ä½“æµç¨‹æ˜¯ï¼šé€šè¿‡ Android æ’ä»¶è·å–æ‰€æœ‰ Xml å¸ƒå±€ä¸­çš„æ§ä»¶åç§°ï¼Œå¹¶å†™å…¥åˆ°ä¸€ä¸ª<code>.txt</code>æ–‡ä»¶ä¸­ã€‚å›  Gradle ç³»åˆ—è¿˜æ²¡è®²ï¼Œå½“æ—¶åªæ˜¯å‡è®¾è¿™ä¹ˆä¸€ä¸ªæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬å·²ç»ä¼šäº†å¦‚ä½•è‡ªå®šä¹‰ Gradle æ’ä»¶ï¼Œæˆ‘ä»¬å°±æ¥å®ç°ä¸€ä¸‹å®ƒã€‚</p><p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ Extension å’Œ Variants ï¼Œåç»­ä¼šç”¨åˆ°</p><h2 id="äºŒã€Extension-ä»‹ç»"><a href="#äºŒã€Extension-ä»‹ç»" class="headerlink" title="äºŒã€Extension ä»‹ç»"></a>äºŒã€Extension ä»‹ç»</h2><h3 id="1ï¼‰ã€ä»€ä¹ˆæ˜¯-Extension-ï¼Ÿ"><a href="#1ï¼‰ã€ä»€ä¹ˆæ˜¯-Extension-ï¼Ÿ" class="headerlink" title="1ï¼‰ã€ä»€ä¹ˆæ˜¯ Extension ï¼Ÿ"></a>1ï¼‰ã€ä»€ä¹ˆæ˜¯ Extension ï¼Ÿ</h3><p>Extension ä¸­æ–‡æ„æ€å³æ‰©å±•ã€‚å®ƒçš„ä½œç”¨å°±æ˜¯é€šè¿‡å®ç°è‡ªå®šä¹‰çš„ Extensionï¼Œå¯ä»¥åœ¨ Gradle è„šæœ¬æ–‡ä»¶ä¸­å¢åŠ ç±»ä¼¼ android è¿™æ ·å‘½åçš„ç©ºé—´é…ç½®ï¼ŒGradle å¯ä»¥è¯†åˆ«è¿™ç§é…ç½®ï¼Œå¹¶è¯»å–é‡Œé¢çš„é…ç½®å†…å®¹ã€‚ä»¥ä¸€æ®µæˆ‘ä»¬ç†Ÿæ‚‰çš„ Android é…ç½®ä¸ºä¾‹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs groovy">android &#123;<br>    compileSdkVersion <span class="hljs-number">30</span><br><br>    defaultConfig &#123;<br>        applicationId <span class="hljs-string">&#x27;com.dream.gradledemo&#x27;</span><br>        minSdkVersion <span class="hljs-number">19</span><br>        targetSdkVersion <span class="hljs-number">30</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&#x27;1.0&#x27;</span><br><br>        testInstrumentationRunner <span class="hljs-string">&quot;androidx.test.runner.AndroidJUnitRunner&quot;</span><br>    &#125;<br><br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-literal">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android-optimize.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¹‹æ‰€ä»¥èƒ½å¤Ÿè¿™æ ·é…ç½®ï¼Œæ˜¯å› ä¸º Android Gradle Plugin å®šä¹‰äº†è¿™äº› Extension </p><p>é‚£ä¹ˆå¦‚ä½•å»è‡ªå®šä¹‰ Extension å‘¢ï¼Ÿ</p><p>ç­”ï¼šé€šè¿‡ ExtensionContainer</p><h3 id="2ï¼‰ã€é€šè¿‡-ExtensionContainer-è‡ªå®šä¹‰-Extension"><a href="#2ï¼‰ã€é€šè¿‡-ExtensionContainer-è‡ªå®šä¹‰-Extension" class="headerlink" title="2ï¼‰ã€é€šè¿‡ ExtensionContainer è‡ªå®šä¹‰ Extension"></a>2ï¼‰ã€é€šè¿‡ ExtensionContainer è‡ªå®šä¹‰ Extension</h3><p>ExtensionContainer å’Œ TaskContainer å¾ˆç±»ä¼¼ï¼Œä¸Šç¯‡æ–‡ç« æˆ‘ä»¬è®²åˆ° TaskContainer å°±æ˜¯ç®¡ç† Task çš„ä¸€ä¸ªå®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ TaskContainer å»å¯¹ Task è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚åŒç†ï¼ŒExtensionContainer æ˜¯ç®¡ç† Extension çš„ä¸€ä¸ªå®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ExtensionContainer å»å¯¹ Extension è¿›è¡Œç›¸åº”çš„æ“ä½œï¼ŒExtensionContainer åŒæ ·å¯ä»¥é€šè¿‡ Project å¯¹è±¡è·å–åˆ°ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­</span><br><br><span class="hljs-comment">//ä¸‹é¢è¿™ 4 ç§æ–¹å¼æ‹¿åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹</span><br><span class="hljs-comment">//æ–¹å¼1</span><br>extensions<br><span class="hljs-comment">//æ–¹å¼2</span><br>project.extensions<br><span class="hljs-comment">//æ–¹å¼3</span><br>getExtensions()<br><span class="hljs-comment">//æ–¹å¼4</span><br>project.getExtensions()<br></code></pre></td></tr></table></figure><p>é€šè¿‡ ExtensionContainer åˆ›å»ºæ‰©å±•çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><p>1ã€é€šè¿‡ ExtensionContainer çš„ create ç³»åˆ—æ–¹æ³•åˆ›å»º Extension</p><p>2ã€é€šè¿‡ ExtensionContainer çš„ add ç³»åˆ—æ–¹æ³•åˆ›å»º Extension</p><h3 id="3ï¼‰ã€é€šè¿‡-ExtensionContainer-çš„-create-ç³»åˆ—æ–¹æ³•åˆ›å»º-Extension"><a href="#3ï¼‰ã€é€šè¿‡-ExtensionContainer-çš„-create-ç³»åˆ—æ–¹æ³•åˆ›å»º-Extension" class="headerlink" title="3ï¼‰ã€é€šè¿‡ ExtensionContainer çš„ create ç³»åˆ—æ–¹æ³•åˆ›å»º Extension"></a>3ï¼‰ã€é€šè¿‡ ExtensionContainer çš„ create ç³»åˆ—æ–¹æ³•åˆ›å»º Extension</h3><p>é¦–å…ˆçœ‹ä¸€çœ¼ ExtensionContainer æä¾›çš„ create ç³»åˆ—æ–¹æ³•ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b025403581ff4f5fad2a4f888e786500~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210725182159725"></p><p>ä¸Šè¿°æˆªå›¾å¯ä»¥çœ‹åˆ°å®ƒæœ‰ä¸‰ä¸ªé‡è½½æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€ä¸€ä»‹ç»ä¸‹</p><h4 id="1ã€ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•"><a href="#1ã€ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•" class="headerlink" title="1ã€ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•"></a>1ã€ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•</h4><p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p><blockquote><p>sï¼šè¦åˆ›å»ºçš„ Extension çš„åå­—ï¼Œå¯ä»¥æ˜¯ä»»æ„ç¬¦åˆå‘½åè§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¸å·²æœ‰çš„é‡å¤ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸</p><p>aClassï¼šè¯¥ Extension çš„ Class ç±»å‹å¯¹è±¡</p><p>objectsï¼šå½“å‰ç±»çš„æ„é€ å‡½æ•°å‚æ•°å€¼ï¼Œè¯¥å‚æ•°ä¸ºå¯é€‰é¡¹ï¼Œä¸å¡«åˆ™å–é»˜è®¤å€¼</p></blockquote><h4 id="2ã€ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•"><a href="#2ã€ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•" class="headerlink" title="2ã€ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•"></a>2ã€ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•</h4><p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p><blockquote><p>aClassï¼šåˆ›å»ºçš„ Extension å®ä¾‹æš´éœ²å‡ºæ¥çš„ Class ç±»å‹å¯¹è±¡ï¼Œä¸€èˆ¬è¿™é‡Œæˆ‘ä»¬ä¼šæŒ‡å®šçˆ¶ç±»çš„ Class ç±»å‹å¯¹è±¡</p><p>sï¼šè¦åˆ›å»ºçš„ Extension çš„åå­—ï¼Œå¯ä»¥æ˜¯ä»»æ„ç¬¦åˆå‘½åè§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¸å·²æœ‰çš„é‡å¤ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸</p><p>aClass1ï¼šè¯¥ Extension å…·ä½“çš„å®ç° Class ç±»å‹å¯¹è±¡</p><p>objectsï¼šå…·ä½“å®ç°ç±»çš„æ„é€ å‡½æ•°å‚æ•°å€¼ï¼Œè¯¥å‚æ•°ä¸ºå¯é€‰é¡¹ï¼Œä¸å¡«åˆ™å–é»˜è®¤å€¼</p></blockquote><h4 id="3ã€ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•"><a href="#3ã€ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•" class="headerlink" title="3ã€ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•"></a>3ã€ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•</h4><p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p><blockquote><p>typeOfï¼šåˆ›å»ºçš„ Extension å®ä¾‹æš´éœ²å‡ºæ¥çš„ TypeOf ç±»å‹å¯¹è±¡ï¼Œä¸€èˆ¬è¿™é‡Œæˆ‘ä»¬ä¼šæŒ‡å®šçˆ¶ç±»çš„ TypeOf ç±»å‹å¯¹è±¡</p><p>sï¼šè¦åˆ›å»ºçš„ Extension çš„åå­—ï¼Œå¯ä»¥æ˜¯ä»»æ„ç¬¦åˆå‘½åè§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¸å·²æœ‰çš„é‡å¤ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸</p><p>aClassï¼šè¯¥ Extension å…·ä½“çš„å®ç° Class ç±»å‹å¯¹è±¡</p><p>objectsï¼šå…·ä½“å®ç°ç±»çš„æ„é€ å‡½æ•°å‚æ•°å€¼ï¼Œè¯¥å‚æ•°ä¸ºå¯é€‰é¡¹ï¼Œä¸å¡«åˆ™å–é»˜è®¤å€¼</p></blockquote><h4 id="4ã€å…·ä½“ä½¿ç”¨"><a href="#4ã€å…·ä½“ä½¿ç”¨" class="headerlink" title="4ã€å…·ä½“ä½¿ç”¨"></a>4ã€å…·ä½“ä½¿ç”¨</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­</span><br><br><span class="hljs-comment">//ç¬¬ä¸€æ­¥ï¼šå¢åŠ å®ä½“ç±»é…ç½®</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br><br>    String animalName<br>    <span class="hljs-type">int</span> legs<br><br>    Animal()&#123;<br><br>    &#125;<br><br>    Animal(String animalName) &#123;<br>        <span class="hljs-variable language_">this</span>.animalName = animalName<br>    &#125;<br><br>    String toString() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;This animal is $animalName, it has $legs legs.&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span>&#123;<br>    <span class="hljs-type">int</span> age = <span class="hljs-number">5</span><br><br>    Dog()&#123;<br>      <br>    &#125;<br><br>    Dog(<span class="hljs-type">int</span> age) &#123;<br>        <span class="hljs-variable language_">this</span>.age = age<br>    &#125;<br><br>    String toString() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">super</span>.toString() + <span class="hljs-string">&quot; Its age is $age.&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//ç¬¬äºŒæ­¥ï¼šåˆ›å»º Extension</span><br><span class="hljs-comment">//=================== ExtensionContainer create ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³• =========================</span><br>project.extensions.create(<span class="hljs-string">&#x27;animal1&#x27;</span>,Dog)<br><br><span class="hljs-comment">//=================== ExtensionContainer create ç¬¬äºŒä¸ªé‡è½½æ–¹æ³• =========================</span><br>project.extensions.create(Animal,<span class="hljs-string">&#x27;animal2&#x27;</span>,Dog,<span class="hljs-number">10</span>)<br><br><span class="hljs-comment">//=================== ExtensionContainer create ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³• =========================</span><br>project.extensions.create(TypeOf.typeOf(Animal),<span class="hljs-string">&#x27;animal3&#x27;</span>,Dog,<span class="hljs-number">15</span>)<br><br><span class="hljs-comment">//ç¬¬ä¸‰æ­¥ï¼šè¿›è¡Œè¯­å¥å—é…ç½®</span><br>animal1&#123;<br>    animalName <span class="hljs-string">&#x27;å¤§é»„&#x27;</span><br>    legs <span class="hljs-number">4</span><br>&#125;<br><br>animal2&#123;<br>    animalName <span class="hljs-string">&#x27;äºŒé»„&#x27;</span><br>    legs <span class="hljs-number">4</span><br>&#125;<br><br>animal3&#123;<br>    animalName <span class="hljs-string">&#x27;ä¸‰é»„&#x27;</span><br>    legs <span class="hljs-number">4</span><br>&#125;<br><br><span class="hljs-comment">//ç¬¬å››æ­¥ï¼šç¼–å†™ Task è¿›è¡Œæµ‹è¯•</span><br>project.task(<span class="hljs-string">&#x27;testTask&#x27;</span>)&#123;<br>    doLast &#123;<br>        println project.animal1<br>        println project.animal2<br>        println project.animal3<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ testTask</span><br>./gradlew testTask<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>testTask<br>This animal is å¤§é»„, it has <span class="hljs-number">4</span> legs. Its age is <span class="hljs-number">5.</span><br>This animal is äºŒé»„, it has <span class="hljs-number">4</span> legs. Its age is <span class="hljs-number">10.</span><br>This animal is ä¸‰é»„, it has <span class="hljs-number">4</span> legs. Its age is <span class="hljs-number">15.</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> Groovy è¯­æ³•è§„å®šï¼Œå½“ä¼ å…¥ Class å¯¹è±¡ä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œ<code>.class</code> åç¼€å¯çœç•¥ï¼Œå¦‚ï¼š<code>Animal.class</code> å¯ä»¥å†™æˆ <code>Animal</code>ï¼Œå¯¹ Groovy è¯­æ³•è¿˜ä¸ç†Ÿçš„å¯ä»¥æŸ¥çœ‹æˆ‘è¿™ç¯‡æ–‡ç«  <a href="https://juejin.cn/post/6939662617224937503">ä¼ é€é—¨</a></p><h3 id="4ï¼‰ã€é€šè¿‡-ExtensionContainer-çš„-add-ç³»åˆ—æ–¹æ³•åˆ›å»º-Extension"><a href="#4ï¼‰ã€é€šè¿‡-ExtensionContainer-çš„-add-ç³»åˆ—æ–¹æ³•åˆ›å»º-Extension" class="headerlink" title="4ï¼‰ã€é€šè¿‡ ExtensionContainer çš„ add ç³»åˆ—æ–¹æ³•åˆ›å»º Extension"></a>4ï¼‰ã€é€šè¿‡ ExtensionContainer çš„ add ç³»åˆ—æ–¹æ³•åˆ›å»º Extension</h3><p>é¦–å…ˆè¿˜æ˜¯å…ˆçœ‹ä¸€çœ¼ ExtensionContainer æä¾›çš„ add ç³»åˆ—æ–¹æ³•ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ee01092e480f4907803dcec035daf77a~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210725181835083"></p><p>å¯ä»¥çœ‹åˆ°å®ƒä¹Ÿæœ‰ä¸‰ä¸ªé‡è½½æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€ä¸€ä»‹ç»ä¸‹</p><h4 id="1ã€ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•-1"><a href="#1ã€ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•-1" class="headerlink" title="1ã€ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•"></a>1ã€ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•</h4><p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p><blockquote><p>sï¼šè¦åˆ›å»ºçš„ Extension çš„åå­—ï¼Œå¯ä»¥æ˜¯ä»»æ„ç¬¦åˆå‘½åè§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¸å·²æœ‰çš„é‡å¤ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸</p><p>oï¼šObject ç±»å‹ï¼Œå¯ä»¥æ˜¯å®ä¾‹å¯¹è±¡æˆ– Class å¯¹è±¡</p></blockquote><h4 id="2ã€ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•-1"><a href="#2ã€ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•-1" class="headerlink" title="2ã€ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•"></a>2ã€ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•</h4><p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p><blockquote><p>aClassï¼šåˆ›å»ºçš„ Extension å®ä¾‹æš´éœ²å‡ºæ¥çš„ Class ç±»å‹å¯¹è±¡ï¼Œä¸€èˆ¬è¿™é‡Œæˆ‘ä»¬ä¼šæŒ‡å®šçˆ¶ç±»çš„ Class ç±»å‹å¯¹è±¡</p><p>sï¼šè¦åˆ›å»ºçš„ Extension çš„åå­—ï¼Œå¯ä»¥æ˜¯ä»»æ„ç¬¦åˆå‘½åè§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¸å·²æœ‰çš„é‡å¤ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸</p><p>tï¼šObject ç±»å‹ï¼Œå…·ä½“çš„ Class å¯¹è±¡æˆ–å®ä¾‹å¯¹è±¡</p></blockquote><h4 id="3ã€ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•-1"><a href="#3ã€ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•-1" class="headerlink" title="3ã€ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•"></a>3ã€ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•</h4><p><strong>å‚æ•°ä»‹ç»ï¼š</strong></p><blockquote><p>typeOfï¼šåˆ›å»ºçš„ Extension å®ä¾‹æš´éœ²å‡ºæ¥çš„ TypeOf ç±»å‹å¯¹è±¡ï¼Œä¸€èˆ¬è¿™é‡Œæˆ‘ä»¬ä¼šæŒ‡å®šçˆ¶ç±»çš„ TypeOf ç±»å‹å¯¹è±¡</p><p>sï¼šè¦åˆ›å»ºçš„ Extension çš„åå­—ï¼Œå¯ä»¥æ˜¯ä»»æ„ç¬¦åˆå‘½åè§„åˆ™çš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¸å·²æœ‰çš„é‡å¤ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸</p><p>tï¼šObject ç±»å‹ï¼Œå…·ä½“çš„ Class å¯¹è±¡æˆ–å®ä¾‹å¯¹è±¡</p></blockquote><h4 id="4ã€å…·ä½“ä½¿ç”¨-1"><a href="#4ã€å…·ä½“ä½¿ç”¨-1" class="headerlink" title="4ã€å…·ä½“ä½¿ç”¨"></a>4ã€å…·ä½“ä½¿ç”¨</h4><p>æˆ‘ä»¬ä¿®æ”¹ä¸Šè¿°ä»£ç çš„ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥å®ç°ä¸ä¹‹å‰ä¸€æ ·çš„æ‰“å°æ•ˆæœ</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­</span><br><br><span class="hljs-comment">//=================== ExtensionContainer add ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³• =========================</span><br>project.extensions.add(<span class="hljs-string">&#x27;animal1&#x27;</span>,Dog)<br><br><span class="hljs-comment">//=================== ExtensionContainer add ç¬¬äºŒä¸ªé‡è½½æ–¹æ³• =========================</span><br>project.extensions.add(Animal,<span class="hljs-string">&#x27;animal2&#x27;</span>,<span class="hljs-keyword">new</span> Dog(<span class="hljs-number">10</span>))<br><br><span class="hljs-comment">//=================== ExtensionContainer add ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³• =========================</span><br>project.extensions.add(TypeOf.typeOf(Animal),<span class="hljs-string">&#x27;animal3&#x27;</span>,<span class="hljs-keyword">new</span> Dog(<span class="hljs-number">15</span>))<br><br>animal1&#123;<br>    animalName <span class="hljs-string">&#x27;å¤§é»„&#x27;</span><br>    legs <span class="hljs-number">4</span><br>&#125;<br><br><span class="hljs-comment">//æ³¨æ„è¿™é‡Œä½¿ç”¨äº† = å·</span><br>animal2&#123;<br>    animalName = <span class="hljs-string">&#x27;äºŒé»„&#x27;</span><br>    legs = <span class="hljs-number">4</span><br>&#125;<br><br><span class="hljs-comment">//æ³¨æ„è¿™é‡Œä½¿ç”¨äº† = å·</span><br>animal3&#123;<br>    animalName = <span class="hljs-string">&#x27;ä¸‰é»„&#x27;</span><br>    legs = <span class="hljs-number">4</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> ä¸Šè¿° add ç³»åˆ—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•ï¼Œå½“æˆ‘ä»¬æ˜¾ç¤ºçš„åˆ›å»ºäº†ç±»å®ä¾‹ï¼Œé‚£ä¹ˆåœ¨è¿›è¡Œ Extension é…ç½®çš„æ—¶å€™ï¼Œéœ€è¦åŠ ä¸Š <strong>&#x3D;</strong> å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><h3 id="5ï¼‰ã€å®šä¹‰å±æ€§åŒåçš„æ–¹æ³•å»æ‰-x3D-å·"><a href="#5ï¼‰ã€å®šä¹‰å±æ€§åŒåçš„æ–¹æ³•å»æ‰-x3D-å·" class="headerlink" title="5ï¼‰ã€å®šä¹‰å±æ€§åŒåçš„æ–¹æ³•å»æ‰ &#x3D; å·"></a>5ï¼‰ã€å®šä¹‰å±æ€§åŒåçš„æ–¹æ³•å»æ‰ &#x3D; å·</h3><p>å¦‚æœæƒ³å»æ‰ä¸Šè¿°ä½¿ç”¨ add ç³»åˆ—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•é…ç½®è¯­å¥çš„ <strong>&#x3D;</strong> å·ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å’Œå±æ€§åŒåçš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>&#123;<br><br>    String animalName<br>    <span class="hljs-type">int</span> legs<br><br>    <span class="hljs-type">void</span> animalName(String animalName)&#123;<br>        <span class="hljs-variable language_">this</span>.animalName = animalName<br>    &#125;<br><br>    <span class="hljs-type">void</span> legs(<span class="hljs-type">int</span> legs)&#123;<br>        <span class="hljs-variable language_">this</span>.legs = legs<br>    &#125;<br>    <span class="hljs-comment">//...</span><br>&#125;<br><br><span class="hljs-comment">//é‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±å¯ä»¥è¿™æ ·å†™äº†</span><br>animal2&#123;<br>    animalName <span class="hljs-string">&#x27;äºŒé»„&#x27;</span><br>    legs <span class="hljs-number">4</span><br>&#125;<br><br>animal3&#123;<br>    animalName = <span class="hljs-string">&#x27;ä¸‰é»„&#x27;</span><br>    legs = <span class="hljs-number">4</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6ï¼‰ã€create-ç³»åˆ—æ–¹æ³•å’Œ-add-ç³»åˆ—æ–¹æ³•æ¯”è¾ƒ"><a href="#6ï¼‰ã€create-ç³»åˆ—æ–¹æ³•å’Œ-add-ç³»åˆ—æ–¹æ³•æ¯”è¾ƒ" class="headerlink" title="6ï¼‰ã€create ç³»åˆ—æ–¹æ³•å’Œ add ç³»åˆ—æ–¹æ³•æ¯”è¾ƒ"></a>6ï¼‰ã€create ç³»åˆ—æ–¹æ³•å’Œ add ç³»åˆ—æ–¹æ³•æ¯”è¾ƒ</h3><h4 id="ç›¸åŒç‚¹ï¼š"><a href="#ç›¸åŒç‚¹ï¼š" class="headerlink" title="ç›¸åŒç‚¹ï¼š"></a>ç›¸åŒç‚¹ï¼š</h4><blockquote><p>1ã€éƒ½å¯ä»¥é€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>&#x3D;</strong> è¿›è¡Œé…ç½®ï¼Œæœ€ç»ˆè°ƒç”¨çš„éƒ½æ˜¯å±æ€§çš„ setter æ–¹æ³•</p><p>2ã€éƒ½ä¼šæŠ›å¼‚å¸¸ï¼šå½“éœ€è¦åˆ›å»ºçš„ Extension å·²ç»å­˜åœ¨çš„æ—¶å€™ï¼Œå³ Extension é‡å¤ï¼Œåˆ™ä¼šæŠ›å¼‚å¸¸</p></blockquote><h4 id="ä¸åŒç‚¹ï¼š"><a href="#ä¸åŒç‚¹ï¼š" class="headerlink" title="ä¸åŒç‚¹ï¼š"></a>ä¸åŒç‚¹ï¼š</h4><blockquote><p>1ã€create ç³»åˆ—æ–¹æ³•ä¼šå°†ä¼ å…¥çš„æ³›å‹ T ä½œä¸ºè¿”å›å€¼ã€‚add ç³»åˆ—æ–¹æ³•å¹¶ä¸ä¼š</p><p>2ã€add ç³»åˆ—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•ï¼Œå½“æˆ‘ä»¬æ˜¾ç¤ºçš„åˆ›å»ºäº†ç±»å®ä¾‹ï¼Œåœ¨è¿›è¡Œ Extension é…ç½®çš„æ—¶å€™éœ€åŠ ä¸Š <strong>&#x3D;</strong> ï¼Œcreate ç³»åˆ—æ–¹æ³•ä¸éœ€è¦</p></blockquote><h3 id="7ï¼‰ã€é€šè¿‡-ExtensionContainer-getByName-å’Œ-findByName-ç³»åˆ—æ–¹æ³•æŸ¥æ‰¾-Extension"><a href="#7ï¼‰ã€é€šè¿‡-ExtensionContainer-getByName-å’Œ-findByName-ç³»åˆ—æ–¹æ³•æŸ¥æ‰¾-Extension" class="headerlink" title="7ï¼‰ã€é€šè¿‡ ExtensionContainer getByName å’Œ findByName ç³»åˆ—æ–¹æ³•æŸ¥æ‰¾ Extension"></a>7ï¼‰ã€é€šè¿‡ ExtensionContainer getByName å’Œ findByName ç³»åˆ—æ–¹æ³•æŸ¥æ‰¾ Extension</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//1ã€find ç³»åˆ—æ–¹æ³•</span><br>Object findByName(String name)<br>&lt;T&gt; T findByType(Class&lt;T&gt; type)<br><br><span class="hljs-comment">//2ã€get ç³»åˆ—æ–¹æ³•</span><br>Object getByName(String name)<br>&lt;T&gt; T getByType(Class&lt;T&gt; type)<br><br><span class="hljs-comment">//3ã€find ç³»åˆ—æ–¹æ³•å’Œ get ç³»åˆ—æ–¹æ³•åŒºåˆ«</span><br><span class="hljs-comment">//get ç³»åˆ—æ–¹æ³•æ‰¾ä¸åˆ°ä¼šæŠ›å¼‚å¸¸ï¼Œfind ç³»åˆ—æ–¹æ³•ä¸ä¼š</span><br><br><span class="hljs-comment">//4ã€å…·ä½“ä½¿ç”¨</span><br>println project.extensions.getByName(<span class="hljs-string">&quot;animal1&quot;</span>)<br>println project.extensions.getByName(<span class="hljs-string">&quot;animal2&quot;</span>)<br>println project.extensions.getByName(<span class="hljs-string">&quot;animal3&quot;</span>)<br><br>println project.extensions.findByName(<span class="hljs-string">&quot;animal1&quot;</span>)<br>println project.extensions.findByName(<span class="hljs-string">&quot;animal2&quot;</span>)<br>println project.extensions.findByName(<span class="hljs-string">&quot;animal3&quot;</span>)<br><br><span class="hljs-comment">//æ‰“å°ç»“æœå‡ä¸º</span><br>This animal is å¤§é»„, it has <span class="hljs-number">4</span> legs. Its age is <span class="hljs-number">5.</span><br>This animal is äºŒé»„, it has <span class="hljs-number">4</span> legs. Its age is <span class="hljs-number">10.</span><br>This animal is ä¸‰é»„, it has <span class="hljs-number">4</span> legs. Its age is <span class="hljs-number">15.</span><br></code></pre></td></tr></table></figure><h3 id="8ï¼‰ã€é…ç½®åµŒå¥—-Extension"><a href="#8ï¼‰ã€é…ç½®åµŒå¥—-Extension" class="headerlink" title="8ï¼‰ã€é…ç½®åµŒå¥— Extension"></a>8ï¼‰ã€é…ç½®åµŒå¥— Extension</h3><h5 id="1ã€é€šè¿‡å®šä¹‰æ–¹æ³•é…ç½®åµŒå¥—-Extension"><a href="#1ã€é€šè¿‡å®šä¹‰æ–¹æ³•é…ç½®åµŒå¥—-Extension" class="headerlink" title="1ã€é€šè¿‡å®šä¹‰æ–¹æ³•é…ç½®åµŒå¥— Extension"></a>1ã€é€šè¿‡å®šä¹‰æ–¹æ³•é…ç½®åµŒå¥— Extension</h5><p>æˆ‘ä»¬ç»å¸¸åœ¨ android é…ç½®å—çœ‹åˆ°è¿™ç§åµŒå¥— Extension ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy">android &#123;<br>    compileSdkVersion <span class="hljs-number">30</span><br>    defaultConfig &#123;<br>        applicationId <span class="hljs-string">&#x27;com.dream.gradledemo&#x27;</span><br>        minSdkVersion <span class="hljs-number">19</span><br>        targetSdkVersion <span class="hljs-number">30</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&#x27;1.0&#x27;</span><br>    &#125;<br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å®ç°ä¸€ä¸ªç±»ä¼¼çš„ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­</span><br><br><span class="hljs-comment">//ç¬¬ä¸€æ­¥ï¼šå¢åŠ å®ä½“ç±»é…ç½®</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AndroidExt</span>&#123;<br>    <span class="hljs-type">int</span> compileSdkVersionExt<br><br>    DefaultConfigExt defaultConfigExt = <span class="hljs-keyword">new</span> DefaultConfigExt()<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ–¹å¼1:</span><br><span class="hljs-comment">     * é€šè¿‡ Action åˆ›å»ºå†…éƒ¨ Extensionï¼Œåç§°ä¸ºæ–¹æ³•å defaultConfig</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * @param action å¯æ‰§è¡Œçš„åŠ¨ä½œï¼Œå®è´¨ä¸Šæ˜¯ä¸€ä¸ªä»£ç å—</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">void</span> defaultConfigExt(Action&lt;DefaultConfigExt&gt; action) &#123;<br>        action.execute(defaultConfigExt)<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ–¹å¼2:</span><br><span class="hljs-comment">     * é€šè¿‡ ConfigureUtil åˆ›å»ºå†…éƒ¨ Extensionï¼Œåç§°ä¸ºæ–¹æ³•å defaultConfig</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * @param closure é—­åŒ…ï¼Œå®è´¨ä¸Šæ˜¯ä¸€ä¸ªä»£ç å—</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">void</span> defaultConfigExt(Closure&lt;DefaultConfigExt&gt; closure) &#123;<br>        org.gradle.util.ConfigureUtil.configure(closure, defaultConfigExt)<br>    &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultConfigExt</span>&#123;<br>    String applicationIdExt<br>    <span class="hljs-type">int</span> minSdkVersionExt<br>    <span class="hljs-type">int</span> targetSdkVersionExt<br>    <span class="hljs-type">int</span> versionCodeExt<br>    String versionNameExt<br>&#125;<br><br><span class="hljs-comment">//ç¬¬äºŒæ­¥ï¼šåˆ›å»º Extension</span><br>project.extensions.create(<span class="hljs-string">&#x27;androidExt&#x27;</span>,AndroidExt)<br><br><span class="hljs-comment">//ç¬¬ä¸‰æ­¥ï¼šè¿›è¡Œè¯­å¥å—é…ç½®</span><br>androidExt &#123;<br>    compileSdkVersionExt <span class="hljs-number">30</span><br>    defaultConfigExt &#123;<br>        applicationIdExt = <span class="hljs-string">&#x27;com.dream.gradledemo&#x27;</span><br>        minSdkVersionExt = <span class="hljs-number">19</span><br>        targetSdkVersionExt = <span class="hljs-number">30</span><br>        versionCodeExt = <span class="hljs-number">1</span><br>        versionNameExt = <span class="hljs-string">&#x27;1.0&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//ç¬¬å››æ­¥ï¼šç¼–å†™ Task è¿›è¡Œæµ‹è¯•</span><br>project.tasks.create(<span class="hljs-string">&#x27;extensionNested&#x27;</span>)&#123;<br>    doLast &#123;<br>        println project.androidExt.compileSdkVersionExt<br>        println project.androidExt.defaultConfigExt.applicationIdExt<br>        println project.androidExt.defaultConfigExt.minSdkVersionExt<br>        println project.androidExt.defaultConfigExt.targetSdkVersionExt<br>        println project.androidExt.defaultConfigExt.versionCodeExt<br>        println project.androidExt.defaultConfigExt.versionNameExt<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ extensionNested</span><br>./gradlew extensionNested<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>extensionNested<br><span class="hljs-number">30</span><br>com.dream.gradledemo<br><span class="hljs-number">19</span><br><span class="hljs-number">30</span><br><span class="hljs-number">1</span><br><span class="hljs-number">1.0</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå’Œ android é…ç½®å—ç±»ä¼¼çš„é…ç½®ï¼Œå…³é”®ä»£ç åœ¨äºï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs groovy">DefaultConfigExt defaultConfigExt = <span class="hljs-keyword">new</span> DefaultConfigExt()<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ–¹å¼1:</span><br><span class="hljs-comment"> * é€šè¿‡ Action åˆ›å»ºå†…éƒ¨ Extensionï¼Œåç§°ä¸ºæ–¹æ³•å defaultConfig</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * @param action å¯æ‰§è¡Œçš„åŠ¨ä½œï¼Œå®è´¨ä¸Šæ˜¯ä¸€ä¸ªä»£ç å—</span><br><span class="hljs-comment"> */</span><br><span class="hljs-type">void</span> defaultConfigExt(Action&lt;DefaultConfigExt&gt; action) &#123;<br>    action.execute(defaultConfigExt)<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ–¹å¼2:</span><br><span class="hljs-comment"> * é€šè¿‡ ConfigureUtil åˆ›å»ºå†…éƒ¨ Extensionï¼Œåç§°ä¸ºæ–¹æ³•å defaultConfig</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * @param closure é—­åŒ…ï¼Œå®è´¨ä¸Šæ˜¯ä¸€ä¸ªä»£ç å—</span><br><span class="hljs-comment"> */</span><br><span class="hljs-type">void</span> defaultConfigExt(Closure&lt;DefaultConfigExt&gt; closure) &#123;<br>    org.gradle.util.ConfigureUtil.configure(closure, defaultConfigExt)<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä¿©ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥åˆ›å»ºå†…éƒ¨ Extensionï¼Œå®é™…ä½¿ç”¨åªéœ€è¦å…¶ä¸­ä¸€ä¸ªæ–¹æ³•å°±è¡Œï¼Œ<strong>éœ€è¦æ³¨æ„çš„æ˜¯æ–¹æ³•çš„åå­—å°½é‡å’Œå±æ€§çš„åå­—ä¿æŒä¸€è‡´</strong></p><p>ä¸çŸ¥ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸Šè¿°æˆ‘çš„ defaultConfigExt é…ç½®å—ä¸­éƒ½åŠ äº† <strong>&#x3D;</strong> å·ï¼Œå®ƒå’Œæˆ‘ä»¬å®é™…çš„ android é…ç½®å—è¿˜æ˜¯æœ‰ç‚¹åŒºåˆ«ï¼Œå¯èƒ½ä½ ä¼šé—®ï¼Œæˆ‘èƒ½ä¸èƒ½æŠŠ <strong>&#x3D;</strong> å·ç»™å»æ‰å‘¢ï¼Ÿ</p><p>ç­”ï¼šä¸èƒ½ã€‚å¦‚æœæƒ³å»æ‰ï¼š</p><p>1ã€ä½¿ç”¨ ExtensionContainer ç³»åˆ— API åˆ›å»ºåµŒå¥— Extension</p><p>2ã€åˆ›å»ºä¸å±æ€§åŒåçš„æ–¹æ³•</p><p>åˆ›å»ºä¸å±æ€§åŒåçš„æ–¹æ³•å·²ç»æ¼”ç¤ºè¿‡ï¼Œæˆ‘ä»¬ä¸»è¦æ¼”ç¤ºä¸€ä¸‹ä½¿ç”¨ ExtensionContainer ç³»åˆ— API åˆ›å»ºåµŒå¥— Extension</p><h5 id="2ã€é€šè¿‡-ExtensionContainer-ç³»åˆ—åˆ›å»º-Extension-API-é…ç½®åµŒå¥—-Extension"><a href="#2ã€é€šè¿‡-ExtensionContainer-ç³»åˆ—åˆ›å»º-Extension-API-é…ç½®åµŒå¥—-Extension" class="headerlink" title="2ã€é€šè¿‡ ExtensionContainer ç³»åˆ—åˆ›å»º Extension API é…ç½®åµŒå¥— Extension"></a>2ã€é€šè¿‡ ExtensionContainer ç³»åˆ—åˆ›å»º Extension API é…ç½®åµŒå¥— Extension</h5><p>é€šè¿‡ ExtensionContainer åˆ›å»º Extension æˆ‘ä»¬éƒ½è®²è¿‡äº†ï¼Œè¿™é‡Œç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AndroidExt</span>&#123;<br>    <span class="hljs-type">int</span> compileSdkVersionExt<br>  <br>    AndroidExt()&#123;<br>      <span class="hljs-comment">//æ³¨æ„ï¼šè¿™é‡Œçš„ extensions æ˜¯å±äº AndroidExt çš„ï¼Œå¹¶ä¸æ˜¯ project å¯¹è±¡çš„</span><br>        extensions.create(<span class="hljs-string">&#x27;defaultConfigExt&#x27;</span>,DefaultConfigExt)<br>    &#125;<br>&#125;<br><br><br>extensions.create(<span class="hljs-string">&#x27;defaultConfigExt&#x27;</span>,DefaultConfigExt)<br><span class="hljs-comment">//ä¸Šé¢è¿™å¥é…ç½®ç­‰åŒäºä¸‹é¢</span><br>project.extensions.create(<span class="hljs-string">&#x27;androidExt&#x27;</span>,AndroidExt)<br>project.androidExt.extensions.create(<span class="hljs-string">&#x27;defaultConfigExt&#x27;</span>,DefaultConfigExt)<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç åœ¨ AndroidExt çš„æ„é€ æ–¹æ³•é‡Œé¢åˆ›å»ºäº†ä¸€ä¸ª DefaultConfigExt çš„æ‰©å±•ï¼Œè¿™æ ·å°±èƒ½å®ç°æŠŠ defaultConfigExt é…ç½®å—ä¸­çš„ <strong>&#x3D;</strong> ç»™å»æ‰</p><h3 id="9ï¼‰ã€é…ç½®ä¸å›ºå®šæ•°é‡-Extension"><a href="#9ï¼‰ã€é…ç½®ä¸å›ºå®šæ•°é‡-Extension" class="headerlink" title="9ï¼‰ã€é…ç½®ä¸å›ºå®šæ•°é‡ Extension"></a>9ï¼‰ã€é…ç½®ä¸å›ºå®šæ•°é‡ Extension</h3><p>æˆ‘ä»¬ç»å¸¸åœ¨ android é…ç½®å—çœ‹åˆ°è¿™ç§ä¸å›ºå®šæ•°é‡çš„ Extension ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs groovy">buildTypes &#123;<br>    release &#123;<br>        <span class="hljs-comment">//å¼€å¯æ··æ·†</span><br>        minifyEnabled <span class="hljs-literal">true</span><br>        <span class="hljs-comment">//èµ„æºå¯¹é½</span><br>        zipAlignEnabled <span class="hljs-literal">true</span><br>        <span class="hljs-comment">//æ˜¯å¦å¼€å¯ debug æ¨¡å¼</span><br>        debuggable <span class="hljs-literal">false</span><br>        <span class="hljs-comment">//...</span><br>    &#125;<br>    debug &#123;<br>        minifyEnabled <span class="hljs-literal">false</span><br>        zipAlignEnabled <span class="hljs-literal">false</span><br>        debuggable <span class="hljs-literal">true</span><br>        <span class="hljs-comment">//...</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ç§ç±»å‹å¯ä»¥ç”¨äºåœ¨ä»£ç å—ä¸­åˆ›å»ºæ–°çš„æŒ‡å®šç±»å‹çš„å¯¹è±¡ã€‚</p><p>å…ˆæ¥çœ‹ä¸€ä¸‹ buildTypes å¯¹åº”çš„æºç ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> buildTypes(Action&lt;? super NamedDomainObjectContainer&lt;BuildType&gt;&gt; action) &#123;<br>    this.checkWritability();<br>    action.execute(this.buildTypes);<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ƒä¼ å…¥çš„æ˜¯ä¸€ä¸ª BuildType ç±»å‹åˆ—è¡¨çš„ Actionï¼Œå…¶ä¸­å¯ä»¥çœ‹åˆ° NamedDomainObjectContainer ï¼Œè¿™ä¸ªä¸œè¥¿å¾ˆé‡è¦ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹å®ƒ</p><h5 id="1ã€NamedDomainObjectContainer-ä»‹ç»"><a href="#1ã€NamedDomainObjectContainer-ä»‹ç»" class="headerlink" title="1ã€NamedDomainObjectContainer ä»‹ç»"></a>1ã€NamedDomainObjectContainer ä»‹ç»</h5><p>NamedDomainObjectContainer ä¸­æ–‡ç¿»è¯‘å³å‘½åé¢†åŸŸå¯¹è±¡å®¹å™¨ï¼Œè¿½æ ¹æº¯æºå®ƒç»§æ‰¿è‡ª <code>Collection&lt;T&gt;</code>ã€‚å®ƒçš„ä½œç”¨æ˜¯åœ¨è„šæœ¬æ–‡ä»¶ä¸­åˆ›å»ºå¯¹è±¡ï¼Œä¸”åˆ›å»ºçš„å¯¹è±¡å¿…é¡»è¦æœ‰ name è¿™ä¸ªå±æ€§ä½œä¸ºå®¹å™¨å†…å…ƒç´ çš„æ ‡è¯†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Project å¯¹è±¡çš„ container ç³»åˆ—æ–¹æ³•è·å– NamedDomainObjectContainer å¯¹è±¡ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32c3f85769ec493789feddcd96990ea4~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210725223142994"></p><p>ä¸‹é¢æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ª buildTypes é…ç½®å—ç±»ä¼¼çš„é…ç½®</p><h5 id="2ã€ç±»ä¼¼-buildTypes-é…ç½®å—å¤š-Extension-å®ç°"><a href="#2ã€ç±»ä¼¼-buildTypes-é…ç½®å—å¤š-Extension-å®ç°" class="headerlink" title="2ã€ç±»ä¼¼ buildTypes é…ç½®å—å¤š Extension å®ç°"></a>2ã€ç±»ä¼¼ buildTypes é…ç½®å—å¤š Extension å®ç°</h5><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle ä¸­</span><br><br><span class="hljs-comment">//ç¬¬ä¸€æ­¥ï¼šå¢åŠ å®ä½“ç±»é…ç½®</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BuildTypesConfigExt</span>&#123;<br>    <span class="hljs-comment">//æ³¨æ„ï¼šå¿…é¡»è¦æœ‰ name å±æ€§è¿›è¡Œæ ‡è¯†</span><br>    String name<br>    <span class="hljs-type">boolean</span> minifyEnabledExt<br>    <span class="hljs-type">boolean</span> zipAlignEnabled<br>    <span class="hljs-type">boolean</span> debuggableExt<br><br>    BuildTypesConfigExt(String name) &#123;<br>        <span class="hljs-variable language_">this</span>.name = name<br>    &#125;<br><br>    <span class="hljs-comment">//=====================é…ç½®ä¸å±æ€§åŒåçš„æ–¹æ³•================</span><br>    <span class="hljs-type">void</span> minifyEnabledExt(<span class="hljs-type">boolean</span> minifyEnabledExt) &#123;<br>        <span class="hljs-variable language_">this</span>.minifyEnabledExt = minifyEnabledExt<br>    &#125;<br><br>    <span class="hljs-type">void</span> zipAlignEnabled(<span class="hljs-type">boolean</span> zipAlignEnabled) &#123;<br>        <span class="hljs-variable language_">this</span>.zipAlignEnabled = zipAlignEnabled<br>    &#125;<br><br>    <span class="hljs-type">void</span> debuggableExt(<span class="hljs-type">boolean</span> debuggableExt) &#123;<br>        <span class="hljs-variable language_">this</span>.debuggableExt = debuggableExt<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//ç¬¬äºŒæ­¥ï¼šæ„å»ºå‘½åé¢†åŸŸå¯¹è±¡å®¹å™¨ï¼Œå¹¶æ·»åŠ åˆ° Extension</span><br>NamedDomainObjectContainer&lt;BuildTypesConfigExt&gt; container = project.container(BuildTypesConfigExt)<br>project.extensions.add(<span class="hljs-string">&#x27;buildTypesExt&#x27;</span>,container)<br><br><span class="hljs-comment">//ç¬¬ä¸‰æ­¥ï¼šè¿›è¡Œè¯­å¥å—é…ç½®</span><br>buildTypesExt &#123;<br>    release &#123;<br>        minifyEnabledExt <span class="hljs-literal">true</span><br>        zipAlignEnabled <span class="hljs-literal">true</span><br>        debuggableExt <span class="hljs-literal">false</span><br>    &#125;<br><br>    debug &#123;<br>        minifyEnabledExt <span class="hljs-literal">false</span><br>        zipAlignEnabled <span class="hljs-literal">false</span><br>        debuggableExt <span class="hljs-literal">true</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//ç¬¬å››æ­¥ï¼šç¼–å†™ Task è¿›è¡Œæµ‹è¯•</span><br>project.tasks.create(<span class="hljs-string">&quot;buildTypesTask&quot;</span>)&#123;<br>    doLast &#123;<br>        project.buildTypesExt.each&#123;<br>            println <span class="hljs-string">&quot;$it.name: $it.minifyEnabledExt $it.zipAlignEnabled $it.debuggableExt&quot;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ buildTypesTask</span><br>./gradlew buildTypesTask<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>buildTypesTask<br><span class="hljs-attr">debug:</span> <span class="hljs-literal">false</span> <span class="hljs-literal">false</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">release:</span> <span class="hljs-literal">true</span> <span class="hljs-literal">true</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œå…³äº Extension æˆ‘ä»¬å°±ä»‹ç»å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹å˜ä½“ï¼ˆVariantsï¼‰</p><h2 id="ä¸‰ã€å˜ä½“-Variants-ä»‹ç»"><a href="#ä¸‰ã€å˜ä½“-Variants-ä»‹ç»" class="headerlink" title="ä¸‰ã€å˜ä½“ (Variants) ä»‹ç»"></a>ä¸‰ã€å˜ä½“ (Variants) ä»‹ç»</h2><p>å˜ä½“å±äº Android Gradle Pluginï¼ˆåç»­ç»Ÿç§° AGPï¼‰ é‡Œé¢éœ€è¦ä»‹ç»çš„çŸ¥è¯†ç‚¹ï¼Œåç»­ç­‰æˆ‘ä»¬è®²åˆ°  AGP çš„æ—¶å€™åœ¨åšè¯¦ç»†ä»‹ç»ã€‚è¿™é‡Œæš‚æ—¶å…ˆä»‹ç»ä¸€äº›æ¥ä¸‹æ¥ä¼šç”¨åˆ°çš„</p><p> AGP ç»™ android å¯¹è±¡æä¾›äº†ä¸‰ç§ç±»å‹å˜ä½“ï¼ˆVariantsï¼‰ï¼š</p><blockquote><p>1ã€applicationVariantsï¼šåªé€‚ç”¨äº app plugin</p><p>2ã€libraryVariantsï¼šåªé€‚ç”¨äº library plugin</p><p>3ã€testVariantsï¼šåœ¨ app plugin ä¸ libarary plugin ä¸­éƒ½é€‚ç”¨ï¼Œè¿™ä¸ªä¸€èˆ¬å¾ˆå°‘ç”¨</p></blockquote><p>å…¶ä¸­æˆ‘ä»¬æœ€å¸¸ç”¨çš„ä¾¿æ˜¯ applicationVariantsï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹å®ƒ</p><h3 id="1ï¼‰ã€applicationVariants-ä½¿ç”¨"><a href="#1ï¼‰ã€applicationVariants-ä½¿ç”¨" class="headerlink" title="1ï¼‰ã€applicationVariants ä½¿ç”¨"></a>1ï¼‰ã€applicationVariants ä½¿ç”¨</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Project å¯¹è±¡è·å– android è¿™ä¸ªå±æ€§ï¼Œç„¶åé€šè¿‡ android åœ¨å»è·å–å˜ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­</span><br><span class="hljs-comment">//æ–¹å¼1</span><br>android.applicationVariants<br><span class="hljs-comment">//æ–¹å¼2</span><br>project.android.applicationVariants<br><span class="hljs-comment">//æ–¹å¼3</span><br>project.property(<span class="hljs-string">&#x27;android&#x27;</span>).applicationVariants<br></code></pre></td></tr></table></figure><p>ä¸Šè¿° 3 ç§æ–¹å¼è·å–çš„éƒ½æ˜¯åŒä¸€ä¸ªå˜ä½“</p><p>ä¸ºäº†æ›´å¥½çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬åœ¨ app çš„ build.gradle å¢åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs groovy">android &#123;<br>    <span class="hljs-comment">//...</span><br><br>    buildTypes &#123;<br>        debug&#123;<br><br>        &#125;<br><br>        release &#123;<br>            minifyEnabled <span class="hljs-literal">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android-optimize.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br><br><br><br>    productFlavors&#123;<br><br>        flavorDimensions <span class="hljs-string">&#x27;isFree&#x27;</span><br><br>        baidu&#123;<br>            dimension <span class="hljs-string">&#x27;isFree&#x27;</span><br>        &#125;<br><br>        google&#123;<br>            dimension <span class="hljs-string">&#x27;isFree&#x27;</span><br>        &#125;<br><br>        winxin&#123;<br>            dimension <span class="hljs-string">&#x27;isFree&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®ä¼šäº§ç”Ÿ 6 ä¸ªå˜ä½“ï¼Œ<strong>å®é™…ä¸Šå˜ä½“æ˜¯é€šè¿‡ buildTypes å’Œ productFlavors çš„æ’åˆ—ç»„åˆæ‰€äº§ç”Ÿçš„</strong>ï¼Œæˆ‘ä»¬éå†æ‰“å°ä¸€ä¸‹æ¯ä¸ªå˜ä½“çš„ name å’Œ baseName</p><p><strong>æ³¨æ„</strong>ï¼š</p><p>1ã€ä» AGP 3.0 å¼€å§‹ï¼Œå¿…é¡»è‡³å°‘æ˜ç¡®æŒ‡å®šä¸€ä¸ª flavor dimension</p><p>2ã€é€šè¿‡ android å¯¹è±¡è·å–çš„ applicationVariants æˆ– libraryVariants æ˜¯æ‰€æœ‰çš„å˜ä½“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡éå†å–å‡ºæ¯ä¸€ä¸ªå˜ä½“</p><p>3ã€å…³äºå˜ä½“èƒ½å¤Ÿæ“ä½œçš„å±æ€§å’Œæ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥å»æŸ¥é˜… AGP å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªä¸­æ–‡ç‰ˆçš„ï¼Œ<a href="https://chaosleong.gitbooks.io/gradle-for-android/content/advanced_build_customization/manipulating_tasks.html">ä¼ é€é—¨</a></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­</span><br>afterEvaluate &#123;<br>    project.android.applicationVariants.all&#123; variant -&gt;<br>        println <span class="hljs-string">&quot;$variant.name $variant.baseName&quot;</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>baiduDebug baidu-debug<br>googleDebug google-debug<br>winxinDebug winxin-debug<br>baiduRelease baidu-release<br>googleRelease google-release<br>winxinRelease winxin-release<br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢æˆ‘ä»¬å°±èƒ½çœ‹åˆ° name å’Œ baseName çš„ä¸€ä¸ªåŒºåˆ«</p><h3 id="2ï¼‰ã€å¯¹-applicationVariants-ä¸­çš„-Task-è¿›è¡Œ-Hook"><a href="#2ï¼‰ã€å¯¹-applicationVariants-ä¸­çš„-Task-è¿›è¡Œ-Hook" class="headerlink" title="2ï¼‰ã€å¯¹ applicationVariants ä¸­çš„ Task è¿›è¡Œ Hook"></a>2ï¼‰ã€å¯¹ applicationVariants ä¸­çš„ Task è¿›è¡Œ Hook</h3><p>é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨å˜ä½“æ¥å¯¹æ„å»ºè¿‡ç¨‹ä¸­çš„ Task è¿›è¡Œ hookï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­</span><br>afterEvaluate &#123;<br>    project.android.applicationVariants.all&#123; variant -&gt;<br>        <span class="hljs-keyword">def</span> task = variant.mergeResources<br>        println <span class="hljs-string">&quot;$task.name&quot;</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>mergeBaiduDebugResources<br>mergeGoogleDebugResources<br>mergeWinxinDebugResources<br>mergeBaiduReleaseResources<br>mergeGoogleReleaseResources<br>mergeWinxinReleaseResources<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æ“ä½œæˆ‘ä»¬æ‹¿åˆ°äº†æ‰€æœ‰å˜ä½“å¯¹åº”çš„ mergeResources Task å¹¶æ‰“å°äº†å®ƒçš„åç§°</p><h3 id="3ï¼‰ã€ä½¿ç”¨-applicationVariants-å¯¹-APK-è¿›è¡Œé‡å‘½å"><a href="#3ï¼‰ã€ä½¿ç”¨-applicationVariants-å¯¹-APK-è¿›è¡Œé‡å‘½å" class="headerlink" title="3ï¼‰ã€ä½¿ç”¨ applicationVariants å¯¹ APK è¿›è¡Œé‡å‘½å"></a>3ï¼‰ã€ä½¿ç”¨ applicationVariants å¯¹ APK è¿›è¡Œé‡å‘½å</h3><p>applicationVariants ä¸­æ¯ä¸€ä¸ªå˜ä½“å¯¹åº”çš„è¾“å‡ºæ–‡ä»¶ä¾¿æ˜¯ä¸€ä¸ª APKï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ applicationVariants å¯¹ APK è¿›è¡Œé‡å‘½åï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸­</span><br><br>project.android.applicationVariants.all&#123; variant -&gt;<br>    variant.outputs.all&#123;<br>        outputFileName = <span class="hljs-string">&quot;$&#123;variant.baseName&#125;&quot;</span> + <span class="hljs-string">&quot;.apk&quot;</span><br>        println outputFileName<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>baidu-debug.apk<br>google-debug.apk<br>winxin-debug.apk<br>baidu-release.apk<br>google-release.apk<br>winxin-release.apk<br></code></pre></td></tr></table></figure><p>å…³äºå˜ä½“æˆ‘ä»¬æš‚æ—¶å°±ä»‹ç»åˆ°è¿™</p><h2 id="å››ã€è·å–-App-ä¸­æ‰€æœ‰-Xml-æ§ä»¶å®æˆ˜åº”ç”¨"><a href="#å››ã€è·å–-App-ä¸­æ‰€æœ‰-Xml-æ§ä»¶å®æˆ˜åº”ç”¨" class="headerlink" title="å››ã€è·å– App ä¸­æ‰€æœ‰ Xml æ§ä»¶å®æˆ˜åº”ç”¨"></a>å››ã€è·å– App ä¸­æ‰€æœ‰ Xml æ§ä»¶å®æˆ˜åº”ç”¨</h2><p>Okï¼Œäº†è§£äº† Extension å’Œ Variants ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ­£å¼è¿›å…¥ Gradle æ’ä»¶å®æˆ˜åº”ç”¨ï¼Œå…³äºå¦‚ä½•è‡ªå®šä¹‰ Gradle æ’ä»¶ï¼Œå‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/6988051489306443789">ä¼ é€é—¨</a>ï¼Œä¸€äº›ç»†èŠ‚æˆ‘ä»¬å°±ç•¥è¿‡äº†</p><h3 id="1ï¼‰ã€æ€è·¯åˆ†æ"><a href="#1ï¼‰ã€æ€è·¯åˆ†æ" class="headerlink" title="1ï¼‰ã€æ€è·¯åˆ†æ"></a>1ï¼‰ã€æ€è·¯åˆ†æ</h3><p>åœ¨ Android æ‰“åŒ…æ„å»ºæµç¨‹ä¸­ï¼Œ<code>merge...Resources</code> è¿™ä¸ª Task ä¼šå¯¹æ‰€æœ‰çš„èµ„æºæ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œè€Œ <code>merge...Resources</code> ä¸­é—´çš„ <code>...</code> ä¼šæ ¹æ®å˜ä½“çš„ä¸åŒè€Œå˜åŒ–ï¼ŒåŒæ—¶å¯¹è¾“å‡ºçš„æ–‡ä»¶ç›®å½•ä¹Ÿæœ‰ä¸€å®šçš„å½±å“ï¼Œä¾‹å¦‚ï¼š</p><p>1ã€å¦‚æœå½“å‰è¿è¡Œçš„æ˜¯ debug ç¯å¢ƒï¼Œé‚£ä¹ˆå˜ä½“å³ debugï¼Œåœ¨ Android æ‰“åŒ…æ„å»ºæµç¨‹ä¸­ï¼Œå°±ä¼šé€šè¿‡ <strong>mergeDebugResources</strong> è¿™ä¸ª Task å¯¹æ‰€æœ‰çš„èµ„æºè¿›è¡Œåˆå¹¶ï¼Œå¹¶å°†åˆå¹¶çš„æ–‡ä»¶è¾“å‡ºåˆ°ï¼š&#x2F;build&#x2F;intermediates&#x2F;incremental&#x2F;mergeDebugResources&#x2F;merger.xml</p><p>2ã€å¦‚æœå½“å‰è¿è¡Œçš„æ˜¯ release ç¯å¢ƒï¼Œé‚£ä¹ˆå˜ä½“å³ releaseï¼Œåœ¨ Android æ‰“åŒ…æ„å»ºæµç¨‹ä¸­ï¼Œå°±ä¼šé€šè¿‡ <strong>mergeReleaseResources</strong> è¿™ä¸ª Task å¯¹æ‰€æœ‰çš„èµ„æºè¿›è¡Œåˆå¹¶ï¼Œå¹¶å°†åˆå¹¶çš„æ–‡ä»¶è¾“å‡ºåˆ°ï¼š&#x2F;build&#x2F;intermediates&#x2F;incremental&#x2F;mergeReleaseResources&#x2F;merger.xml</p><p>é‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥ï¼š<strong>è‡ªå®šä¹‰ Gradle æ’ä»¶ï¼Œå°†è‡ªå·±ç¼–å†™çš„ Task æŒ‚æ¥åˆ° mergeâ€¦Resources åé¢ï¼Œç„¶åéå† merger.xml è¿™ä¸ªæ–‡ä»¶ï¼ŒæŠŠå®ƒé‡Œé¢æ‰€æœ‰ Xml ä¸­çš„ View è¾“å‡ºåˆ°ä¸€ä¸ª .txt æ–‡ä»¶ä¸­</strong></p><p>å—¯ï¼Œæ„Ÿè§‰å¯è¡Œï¼Œå¹²å°±å®Œäº†</p><h3 id="2ï¼‰ã€å®æˆ˜åº”ç”¨"><a href="#2ï¼‰ã€å®æˆ˜åº”ç”¨" class="headerlink" title="2ï¼‰ã€å®æˆ˜åº”ç”¨"></a>2ï¼‰ã€å®æˆ˜åº”ç”¨</h3><p>é¦–å…ˆçœ‹ä¸€çœ¼åˆå§‹çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬çš„é¡¹ç›®ç»“æ„ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/be848f2ca214433790596d648237e3e7~tplv-k3u1fbpfcp-zoom-1.image" alt="init_plugin_constructor"></p><h4 id="1ã€ç¬¬ä¸€æ­¥ï¼šè‡ªå®šä¹‰æ’ä»¶ï¼Œå°†è‡ªå®šä¹‰-Task-æŒ‚æ¥åˆ°-mergeâ€¦Resources"><a href="#1ã€ç¬¬ä¸€æ­¥ï¼šè‡ªå®šä¹‰æ’ä»¶ï¼Œå°†è‡ªå®šä¹‰-Task-æŒ‚æ¥åˆ°-mergeâ€¦Resources" class="headerlink" title="1ã€ç¬¬ä¸€æ­¥ï¼šè‡ªå®šä¹‰æ’ä»¶ï¼Œå°†è‡ªå®šä¹‰ Task æŒ‚æ¥åˆ°  mergeâ€¦Resources"></a>1ã€ç¬¬ä¸€æ­¥ï¼šè‡ªå®šä¹‰æ’ä»¶ï¼Œå°†è‡ªå®šä¹‰ Task æŒ‚æ¥åˆ°  mergeâ€¦Resources</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">package</span> com.dream.xmlviewscanplugin<br><br><span class="hljs-keyword">import</span> org.gradle.api.Plugin<br><span class="hljs-keyword">import</span> org.gradle.api.Project<br><span class="hljs-keyword">import</span> org.gradle.api.Task<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ‰«æ Xml Plugin</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">XmlViewScanPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Plugin</span>&lt;Project&gt;&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">void</span> apply(Project project) &#123;<br>        println <span class="hljs-string">&#x27;Hello XmlViewScanPlugin&#x27;</span><br>        <span class="hljs-comment">//æ·»åŠ é»‘åå•æ‰©å±•é…ç½®</span><br>        project.extensions.create(<span class="hljs-string">&#x27;ignore&#x27;</span>,IgnoreViewExtension)<br><br>        project.afterEvaluate &#123;<br>            <span class="hljs-comment">//æ˜¯å¦æ˜¯ Android æ’ä»¶</span><br>            <span class="hljs-keyword">def</span> isAppPlugin = project.plugins.hasPlugin(<span class="hljs-string">&#x27;com.android.application&#x27;</span>)<br><br>            <span class="hljs-comment">//è·å–å˜ä½“</span><br>            <span class="hljs-keyword">def</span> variants<br>            <span class="hljs-keyword">if</span>(isAppPlugin)&#123;<br>                variants = project.android.applicationVariants<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                variants = project.android.libraryVariants<br>            &#125;<br><br>            variants.each&#123; variant -&gt;<br>                <span class="hljs-comment">//é€šè¿‡å˜ä½“è·å–å¯¹åº”çš„ merge...Resources</span><br>                Task mergeResourcesTask = variant.mergeResources<br><br>                <span class="hljs-comment">//å®šä¹‰è‡ªå®šä¹‰ Task æ‰©å±•å‰ç¼€</span><br>                <span class="hljs-keyword">def</span> prefix = variant.name<br>                <span class="hljs-comment">//è·å–æˆ‘ä»¬è‡ªå®šä¹‰çš„ Task</span><br>                Task xmlViewScanTask = project.tasks.create(<span class="hljs-string">&quot;$&#123;prefix&#125;XmlViewScanTask&quot;</span>, XmlViewScanTask,variant)<br><br>                <span class="hljs-comment">//å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„ Task æŒ‚æ¥åˆ° mergeResourcesTask</span><br>                mergeResourcesTask.finalizedBy(xmlViewScanTask)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2ã€ç¬¬äºŒæ­¥ï¼šç¼–å†™è‡ªå®šä¹‰-Task-ï¼Œå°†æ‰«æå‡ºæ¥çš„æ§ä»¶å†™å…¥åˆ°æ–‡ä»¶ä¸­"><a href="#2ã€ç¬¬äºŒæ­¥ï¼šç¼–å†™è‡ªå®šä¹‰-Task-ï¼Œå°†æ‰«æå‡ºæ¥çš„æ§ä»¶å†™å…¥åˆ°æ–‡ä»¶ä¸­" class="headerlink" title="2ã€ç¬¬äºŒæ­¥ï¼šç¼–å†™è‡ªå®šä¹‰ Task ï¼Œå°†æ‰«æå‡ºæ¥çš„æ§ä»¶å†™å…¥åˆ°æ–‡ä»¶ä¸­"></a>2ã€ç¬¬äºŒæ­¥ï¼šç¼–å†™è‡ªå®šä¹‰ Task ï¼Œå°†æ‰«æå‡ºæ¥çš„æ§ä»¶å†™å…¥åˆ°æ–‡ä»¶ä¸­</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">package</span> com.dream.xmlviewscanplugin<br><br><span class="hljs-keyword">import</span> com.android.build.gradle.api.BaseVariant<br><span class="hljs-keyword">import</span> groovy.util.slurpersupport.GPathResult<br><span class="hljs-keyword">import</span> groovy.util.slurpersupport.Node<br><span class="hljs-keyword">import</span> org.gradle.api.DefaultTask<br><span class="hljs-keyword">import</span> org.gradle.api.Task<br><span class="hljs-keyword">import</span> org.gradle.api.tasks.TaskAction<br><span class="hljs-keyword">import</span> javax.inject.Inject<br><span class="hljs-keyword">import</span> java.util.function.Consumer<br><span class="hljs-keyword">import</span> java.util.function.Predicate<br><span class="hljs-keyword">import</span> java.util.stream.Stream<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ‰«æ Xml Task</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">XmlViewScanTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DefaultTask</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Xml å¸ƒå±€ä¸­è¢«æ·»åŠ è¿›æ¥çš„ View</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Set&lt;String&gt; mXmlScanViewSet = <span class="hljs-keyword">new</span> HashSet&lt;&gt;()<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å½“å‰å˜ä½“</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> BaseVariant variant<br><br>    <span class="hljs-meta">@Inject</span><br>    XmlViewScanTask(BaseVariant variant) &#123;<br>        <span class="hljs-variable language_">this</span>.variant = variant<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ‰§è¡Œ xml æ‰«æ Task</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@TaskAction</span><br>    <span class="hljs-type">void</span> performXmlScanTask() &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            println <span class="hljs-string">&#x27;performXmlScanTask start...&#x27;</span><br><br>            <span class="hljs-comment">//åˆ›å»ºéœ€è¦è¾“å‡º View çš„æ–‡ä»¶è·¯å¾„</span><br>            File outputFile = <span class="hljs-keyword">new</span> File(project.buildDir.path + <span class="hljs-string">&quot;/$&#123;variant.name&#125;_xml_scan_view/xml_scan_view.txt&quot;</span>)<br>            <span class="hljs-keyword">if</span> (!outputFile.parentFile.exists()) &#123;<br>                outputFile.parentFile.mkdirs()<br>            &#125;<br>            <span class="hljs-keyword">if</span> (outputFile.exists()) &#123;<br>                outputFile.delete()<br>            &#125;<br>            outputFile.createNewFile()<br>            println <span class="hljs-string">&#x27;file create success...&#x27;</span><br>            mXmlScanViewSet.clear()<br><br>            <span class="hljs-comment">//è·å– merger.xml æ–‡ä»¶</span><br>            Task mergeResourcesTask = variant.mergeResources<br>            String mergerPath = <span class="hljs-string">&quot;$&#123;project.buildDir.path&#125;/intermediates/incremental/$&#123;mergeResourcesTask.name&#125;/merger.xml&quot;</span><br>            File mergerFile = <span class="hljs-keyword">new</span> File(mergerPath)<br><br>            <span class="hljs-comment">//å¼€å§‹è§£æ  merger.xml</span><br>            XmlSlurper xmlSlurper = <span class="hljs-keyword">new</span> XmlSlurper()<br>            GPathResult result = xmlSlurper.parse(mergerFile)<br>            <span class="hljs-keyword">if</span> (result.children()) &#123;<br>                result.childNodes().forEachRemaining(<span class="hljs-keyword">new</span> Consumer() &#123;<br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-type">void</span> accept(Object o) &#123;<br>                        parseNode(o)<br>                    &#125;<br>                &#125;)<br>            &#125;<br>            println <span class="hljs-string">&#x27;merger.xml parsing success...&#x27;</span><br><br><br>            <span class="hljs-comment">//åˆ°è¿™é‡Œï¼Œæ‰€æœ‰çš„ xml æ§ä»¶éƒ½è¢«æ·»åŠ åˆ°äº†mXmScanViewSet</span><br>            <span class="hljs-comment">//æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦è¯»å–é»‘åå•ä¸­çš„ View å¹¶ç»™è¿‡æ»¤æ‰</span><br>            Stream&lt;String&gt; viewNameStream<br>            <span class="hljs-comment">//æ˜¯å¦å¼€å¯é»‘åå•è¿‡æ»¤åŠŸèƒ½</span><br>            <span class="hljs-keyword">if</span>(project.ignore.isEnable)&#123;<br>                println <span class="hljs-string">&#x27;blacklist enable...&#x27;</span><br>                viewNameStream = filterXmlScanViewSet()<br><br>                <span class="hljs-comment">//å¦‚æœæ­¤æ—¶æ²¡æœ‰é…ç½®é»‘åå• viewNameStream è¿˜æ˜¯ä¼šä¸º null</span><br>                <span class="hljs-keyword">if</span>(viewNameStream == <span class="hljs-literal">null</span>)&#123;<br>                    viewNameStream = mXmlScanViewSet.stream()<br>                &#125;<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                println <span class="hljs-string">&#x27;blacklist disable...&#x27;</span><br>                viewNameStream = mXmlScanViewSet.stream()<br>            &#125;<br><br>            <span class="hljs-comment">//å°† viewName å†™å…¥æ–‡ä»¶ä¸­</span><br>            PrintWriter printWriter = <span class="hljs-keyword">new</span> PrintWriter(<span class="hljs-keyword">new</span> FileWriter(outputFile))<br>            viewNameStream.forEach(<span class="hljs-keyword">new</span> Consumer&lt;String&gt;() &#123;<br>                <span class="hljs-meta">@Override</span><br>                <span class="hljs-type">void</span> accept(String viewName) &#123;<br>                    printWriter.println(viewName)<br>                &#125;<br>            &#125;)<br>            printWriter.flush()<br>            printWriter.close()<br>            println <span class="hljs-string">&#x27;write all viewName to file success...&#x27;</span><br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace()<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¿‡æ»¤é»‘åå•ä¸­çš„ viewName</span><br><span class="hljs-comment">     * @return Stream&lt;String&gt;</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Stream&lt;String&gt; filterXmlScanViewSet() &#123;<br>        List&lt;String&gt; ignoreViewList = project.ignore.ignoreViewList<br>        Stream&lt;String&gt; viewNameStream = <span class="hljs-literal">null</span><br>        <span class="hljs-keyword">if</span> (ignoreViewList) &#123;<br>            println <span class="hljs-string">&quot;ignoreViewList: $ignoreViewList&quot;</span><br>            viewNameStream = mXmlScanViewSet.stream().filter(<span class="hljs-keyword">new</span> Predicate&lt;String&gt;() &#123;<br>                <span class="hljs-meta">@Override</span><br>                <span class="hljs-type">boolean</span> test(String viewName) &#123;<br>                    <span class="hljs-keyword">for</span> (String <span class="hljs-attr">ignoreViewName :</span> ignoreViewList) &#123;<br>                        <span class="hljs-keyword">if</span> (viewName == ignoreViewName) &#123;<br>                            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>                        &#125;<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>                &#125;<br>            &#125;)<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            println <span class="hljs-string">&#x27;ignoreViewList is null, no filter...&#x27;</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> viewNameStream<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é€’å½’è§£æ merger.xml ä¸­çš„ Node èŠ‚ç‚¹</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * merger.xml æ–‡ä»¶ä¸­çš„å¸ƒå±€æ–‡ä»¶æ ‡ç­¾å¦‚ä¸‹ï¼š</span><br><span class="hljs-comment">     * &lt;file name=&quot;activity_main&quot;</span><br><span class="hljs-comment">     *       path=&quot;/Users/zhouying/learning/GradleDemo/app/src/main/res/layout/activity_main.xml&quot;</span><br><span class="hljs-comment">     *       qualifiers=&quot;&quot;</span><br><span class="hljs-comment">     *       type=&quot;layout&quot;/&gt;</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">void</span> parseNode(Object obj) &#123;<br>        <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> Node) &#123;<br>            Node node = obj<br><br>            <span class="hljs-keyword">if</span> (node) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;file&quot;</span> == node.name() &amp;&amp; <span class="hljs-string">&quot;layout&quot;</span> == node.attributes().get(<span class="hljs-string">&quot;type&quot;</span>)) &#123;<br>                    <span class="hljs-comment">//è·å–å¸ƒå±€æ–‡ä»¶</span><br>                    String layoutPath = node.attributes().get(<span class="hljs-string">&quot;path&quot;</span>)<br>                    File layoutFile = <span class="hljs-keyword">new</span> File(layoutPath)<br><br>                    <span class="hljs-comment">//å¼€å§‹è§£æå¸ƒå±€æ–‡ä»¶</span><br>                    XmlSlurper xmlSlurper = <span class="hljs-keyword">new</span> XmlSlurper()<br>                    GPathResult result = xmlSlurper.parse(layoutFile)<br>                    String viewName = result.name()<br>                    mXmlScanViewSet.add(viewName)<br><br>                    <span class="hljs-keyword">if</span> (result.children()) &#123;<br>                        result.childNodes().forEachRemaining(<span class="hljs-keyword">new</span> Consumer() &#123;<br>                            <span class="hljs-meta">@Override</span><br>                            <span class="hljs-type">void</span> accept(Object o) &#123;<br>                              <span class="hljs-comment">//é€’å½’è§£æå­èŠ‚ç‚¹</span><br>                                parseLayoutNode(o)<br>                            &#125;<br>                        &#125;)<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-comment">//å¦‚æœä¸æ˜¯å¸ƒå±€æ–‡ä»¶ï¼Œé€’å½’è°ƒç”¨</span><br>                    node.childNodes().forEachRemaining(<span class="hljs-keyword">new</span> Consumer() &#123;<br>                        <span class="hljs-meta">@Override</span><br>                        <span class="hljs-type">void</span> accept(Object o) &#123;<br>                            parseNode(o)<br>                        &#125;<br>                    &#125;)<br><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é€’å½’è§£æ layout å¸ƒå±€å­èŠ‚ç‚¹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">void</span> parseLayoutNode(Object obj) &#123;<br>        <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> Node) &#123;<br>            Node node = obj<br>            <span class="hljs-keyword">if</span> (node) &#123;<br>                mXmlScanViewSet.add(node.name())<br>                node.childNodes().findAll &#123;<br>                    parseLayoutNode(it)<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> </p><p>1ã€ä¸Šè¿°è¿™ç§é€šè¿‡åˆ›å»ºä¸€ä¸ªç±»è‡ªå®šä¹‰ Task æ–¹å¼ï¼Œæ„é€ æ–¹æ³•å¿…é¡»ä½¿ç”¨ <code> @javax.inject.Inject</code> æ³¨è§£æ ‡è¯†ï¼Œå¦‚æœå±æ€§æ²¡æœ‰ä½¿ç”¨ <code>private</code>ä¿®é¥°ç¬¦ä¿®é¥°ï¼Œä¹Ÿéœ€è¦ä½¿ç”¨ <code> @javax.inject.Inject</code> æ³¨è§£æ ‡è¯†ï¼Œå¦åˆ™ Gradle ä¼šæŠ¥é”™</p><p>2ã€è‡ªå®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•åéšæ„å–ï¼Œç„¶åä½¿ç”¨ <code>@TaskAction</code> æ³¨è§£æ ‡è¯†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±ä¼šåœ¨ Gradle çš„æ‰§è¡Œé˜¶æ®µå»æ‰§è¡Œ</p><p>3ã€ä½¿ç”¨ä¸€äº›ç±»æ—¶ï¼Œæ³¨æ„åŒ…ååˆ«å¯¼é”™äº†</p><h4 id="3ã€ç¬¬ä¸‰æ­¥ï¼šå°†æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ°ä»“åº“è¿›è¡Œå¼•ç”¨"><a href="#3ã€ç¬¬ä¸‰æ­¥ï¼šå°†æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ°ä»“åº“è¿›è¡Œå¼•ç”¨" class="headerlink" title="3ã€ç¬¬ä¸‰æ­¥ï¼šå°†æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ°ä»“åº“è¿›è¡Œå¼•ç”¨"></a>3ã€ç¬¬ä¸‰æ­¥ï¼šå°†æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ°ä»“åº“è¿›è¡Œå¼•ç”¨</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//1ã€æ‰§è¡Œå‘å¸ƒæ’ä»¶çš„ Task æˆ–é€šè¿‡ Gradle å¯è§†åŒ–ç•Œé¢è¿›è¡Œå‘å¸ƒ</span><br><br><span class="hljs-comment">//2ã€æ’ä»¶ä¾èµ–å¼•ç”¨</span><br><span class="hljs-comment">//æ ¹ build.gradle ä¸­</span><br>buildscript &#123;<br>    repositories &#123;<br>      <span class="hljs-comment">//...</span><br>        <span class="hljs-comment">//æœ¬åœ° Maven ä»“åº“</span><br>        maven&#123;<br>            url uri(<span class="hljs-string">&#x27;XmlViewScanPlugin&#x27;</span>)<br>        &#125;<br>    &#125;<br>    dependencies &#123;<br>      <span class="hljs-comment">//...</span><br>        <span class="hljs-comment">//å¼•å…¥æ’ä»¶ä¾èµ–</span><br>        classpath <span class="hljs-string">&#x27;com.dream:xmlviewscanplugin:1.0.2&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//app build.gradle ä¸­</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;XmlViewScanPlugin&#x27;</span><br></code></pre></td></tr></table></figure><p>ç»è¿‡ä¸Šé¢ 3 æ­¥ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸€ä¸ªæ•ˆæœéªŒè¯äº†</p><h4 id="4ã€æ•ˆæœéªŒè¯"><a href="#4ã€æ•ˆæœéªŒè¯" class="headerlink" title="4ã€æ•ˆæœéªŒè¯"></a>4ã€æ•ˆæœéªŒè¯</h4><p>1ã€å…ˆçœ‹ä¸€ä¸‹æˆ‘ä»¬çš„å¸ƒå±€æ–‡ä»¶ activity_main.xmlï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a612bddf8241459a8d662586ccaaf741~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210728130458228"></p><p>2ã€æ¥ä¸‹æ¥è¿è¡Œé¡¹ç›®çœ‹ä¸€ä¸‹æˆ‘ä»¬çš„ view æ˜¯å¦è¢«è¾“å‡ºåˆ° <code>.txt</code>æ–‡ä»¶ä¸­</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/200b0daa1c4e4668b9de44215a993c04~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210728130807224" style="zoom:50%;" /><p>ä¸Šè¿°æˆªå›¾å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„ View è¢«è¾“å‡ºåˆ°äº†<code>.txt</code>æ–‡ä»¶ä¸­ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨éªŒè¯ä¸€ä¸‹é»‘åå•åŠŸèƒ½</p><p>3ã€åœ¨ app çš„ build.gradle æ·»åŠ é»‘åå•é…ç½®</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy">ignore &#123;<br>    ignoreViewList = [<br>            <span class="hljs-string">&#x27;TextView&#x27;</span><br>    ]<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æŠŠ TextView åŠ å…¥äº†é»‘åå•ï¼Œè¿è¡Œé¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç”Ÿæˆçš„ <code>.txt</code>æ–‡ä»¶æ²¡æœ‰ TextView äº†</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79e53b707f3e401c86b28831704e7edb~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210728141118681" style="zoom:50%;" /><p>è‡³æ­¤ï¼Œå…³äº Gradle æ’ä»¶å®æˆ˜åº”ç”¨å°±è®²å®Œäº†</p><h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€Extension çš„è¯¦ç»†ä»‹ç»ï¼Œé‡ç‚¹æŒæ¡ï¼š</p><blockquote><p>1ã€å®šä¹‰ Extension çš„å‡ ç§æ–¹æ³•ï¼Œå‚æ•°åŒºåˆ«</p><p>2ã€å¦‚ä½•å®šä¹‰ Extension èƒ½å¤Ÿå»æ‰ &#x3D; å·</p><p>3ã€å¦‚ä½•å®šä¹‰åµŒå¥— Extension å’Œ å¤šä¸ªä¸å›ºå®šæ•°é‡çš„ Extension</p></blockquote><p>2ã€é€šè¿‡å˜ä½“å¯¹æ„å»ºæµç¨‹ä¸­çš„ Task è¿›è¡Œ Hook</p><p>3ã€è‡ªå®šä¹‰ Gradle æ’ä»¶å°†æ‰€æœ‰ Xml ä¸­çš„ View è¾“å‡ºåˆ°ä¸€ä¸ª<code>.txt</code>æ–‡ä»¶ä¸­</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®²è‡ªå®šä¹‰ Gradle Transformï¼Œæ•¬è¯·æœŸå¾…å§ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://juejin.cn/post/6844904135314128903">æ·±åº¦æ¢ç´¢ Gradle è‡ªåŠ¨åŒ–æ„å»ºæŠ€æœ¯ï¼ˆå››ã€è‡ªå®šä¹‰ Gradle æ’ä»¶)</a></p><p><a href="https://www.jianshu.com/p/58d86b4c0ee5">Android Gradleå­¦ä¹ (äº”)ï¼šExtensionè¯¦è§£</a></p><p><a href="https://juejin.cn/post/6986806041618939917">Gradle åˆ›å»ºæ‰©å±•å±æ€§è¯¦è§£</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>Gradle</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Gradle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gradle ç³»åˆ— ï¼ˆä¸‰ï¼‰ã€Gradle æ’ä»¶å¼€å‘</title>
    <link href="/2022/10/11/Gradle%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%89%EF%BC%89%E3%80%81Gradle%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/"/>
    <url>/2022/10/11/Gradle%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%89%EF%BC%89%E3%80%81Gradle%20%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210111024176.jpeg" alt="town-6467851_1920"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>å…³äº Gradle å­¦ä¹ ï¼Œæˆ‘æ‰€ç†è§£çš„æµç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c09f872b2165474f81381f51f996cde5~tplv-k3u1fbpfcp-zoom-1.image" alt="Gradle_learning"></p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²äº† Gradle çš„ç”Ÿå‘½å‘¨æœŸåŠä¸€äº›å¸¸ç”¨ APIï¼Œäº†è§£äº† Settingsï¼ŒProjectï¼ŒTask ç­‰ç­‰ï¼Œå®Œæˆäº†ç¬¬äºŒä¸ªç¯èŠ‚ã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6986191903888769032">Gradle ç³»åˆ— ï¼ˆäºŒï¼‰ã€Gradle æŠ€æœ¯æ¢ç´¢</a>ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬ä¸»è¦ä»‹ç»ç¯èŠ‚ä¸‰ï¼šç†Ÿæ‚‰è‡ªå®šä¹‰ Gradle æ’ä»¶</p><p>Gradle ç»™æˆ‘ä»¬æä¾›äº†æ„å»ºåº”ç”¨çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœè¦ç¼–è¯‘æ„å»º Android å·¥ç¨‹ï¼Œå°±éœ€è¦é€šè¿‡ Gradle æ’ä»¶æ¥å®ç°äº†ï¼ŒGoogle å¼€å‘äº†ä¸€å¥— Android Gradle Plugin æ’ä»¶ä¸“é—¨æ¥ç¼–è¯‘æ„å»º Android å·¥ç¨‹ã€‚æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ Gradle æ’ä»¶å»å®Œæˆä¸€äº›ç‰¹å®šçš„åŠŸèƒ½</p><p><a href="https://github.com/sweetying520/GradleDemo">Github Demo åœ°å€</a> , å¤§å®¶å¯ä»¥ç»“åˆ demo ä¸€èµ·çœ‹ï¼Œæ•ˆæœæ æ æ»´ğŸº</p><h2 id="ä¸€ã€Gradle-æ’ä»¶ä»‹ç»"><a href="#ä¸€ã€Gradle-æ’ä»¶ä»‹ç»" class="headerlink" title="ä¸€ã€Gradle æ’ä»¶ä»‹ç»"></a>ä¸€ã€Gradle æ’ä»¶ä»‹ç»</h2><h3 id="1ï¼‰ã€ä»€ä¹ˆæ˜¯-Gradle-æ’ä»¶ï¼Ÿ"><a href="#1ï¼‰ã€ä»€ä¹ˆæ˜¯-Gradle-æ’ä»¶ï¼Ÿ" class="headerlink" title="1ï¼‰ã€ä»€ä¹ˆæ˜¯ Gradle æ’ä»¶ï¼Ÿ"></a>1ï¼‰ã€ä»€ä¹ˆæ˜¯ Gradle æ’ä»¶ï¼Ÿ</h3><p>ç®€å•çš„ç†è§£ï¼šGradle æ’ä»¶å°±æ˜¯å°è£…äº†ä¸€ç³»åˆ— Task å¹¶æ‰§è¡Œ</p><h3 id="2ï¼‰ã€æ’ä»¶åˆ†ç±»"><a href="#2ï¼‰ã€æ’ä»¶åˆ†ç±»" class="headerlink" title="2ï¼‰ã€æ’ä»¶åˆ†ç±»"></a>2ï¼‰ã€æ’ä»¶åˆ†ç±»</h3><p>Android ä¸‹çš„ Gradle æ’ä»¶åˆ†ä¸ºä¸¤ç§ï¼š</p><p>1)ã€è„šæœ¬æ’ä»¶</p><p>è„šæœ¬æ’ä»¶å°±æ˜¯åœ¨ Android å·¥ç¨‹ä¸­åˆ›å»ºä¸€ä¸ª <code>.gradle</code>ä¸ºåç¼€çš„æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ <code>apply from</code> çš„æ–¹å¼å»å¼•ç”¨è¿™ä¸ªæ’ä»¶</p><p>2)ã€å¯¹è±¡æ’ä»¶</p><p>å¯¹è±¡æ’ä»¶å°±æ˜¯å®ç°äº†  <code>org.gradle.api.plugins</code> æ¥å£çš„æ’ä»¶ï¼ŒGradle æœ¬èº«å°±ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç³»åˆ—å¯¹è±¡æ’ä»¶ï¼Œå¦‚ï¼š<code>java</code> ï¼Œ<code>groovy</code> ï¼Œ<code>maven-publish</code> ç­‰ç­‰ã€‚è€Œå¦‚æœæˆ‘ä»¬è¦è‡ªå®šä¹‰å¯¹è±¡æ’ä»¶ï¼Œåˆ™æœ‰ä»¥ä¸‹ä¸‰ç§ç¼–å†™å½¢å¼ï¼š</p><p>1ã€åœ¨ build.gradle æ–‡ä»¶ä¸­ç›´æ¥ç¼–å†™</p><p>2ã€åœ¨ buildSrc é»˜è®¤æ’ä»¶ç›®å½•ä¸‹ç¼–å†™</p><p>3ã€åœ¨è‡ªå®šä¹‰é¡¹ç›®ä¸‹ç¼–å†™</p><p>ç„¶åé€šè¿‡ <code>apply plugin</code> çš„æ–¹å¼å»å¼•ç”¨è¿™ä¸ªæ’ä»¶</p><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€ä¸€æ¼”ç¤ºä¸€ä¸‹</p><h2 id="äºŒã€è„šæœ¬æ’ä»¶"><a href="#äºŒã€è„šæœ¬æ’ä»¶" class="headerlink" title="äºŒã€è„šæœ¬æ’ä»¶"></a>äºŒã€è„šæœ¬æ’ä»¶</h2><p>1ï¼‰ã€åˆ›å»ºä¸€ä¸ªä»¥ <code>.gradle</code> ä¸ºåç¼€çš„æ–‡ä»¶ï¼Œåå­—éšæ„å–ã€‚è¿™é‡Œæˆ‘åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ª script.gradle çš„æ–‡ä»¶å¹¶éšæ„ç¼–å†™äº†ä¸€äº›é€»è¾‘</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fea94ae1d3d04696960ef930ad82a052~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210721213439960"></p><p>2ï¼‰ã€åœ¨ build.gradle ä¸­é€šè¿‡ <code>apply from</code> è¿›è¡Œæ’ä»¶çš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle ä¸­</span><br><br><span class="hljs-comment">//ç›¸å¯¹è·¯å¾„</span><br>apply <span class="hljs-attr">from:</span> <span class="hljs-string">&#x27;../script.gradle&#x27;</span><br><br><span class="hljs-comment">//ç»å¯¹è·¯å¾„</span><br>apply <span class="hljs-attr">from:</span> rootDir.path + <span class="hljs-string">&#x27;/script.gradle&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šä¸Šè¿°æ–¹å¼çš„å¼•ç”¨å®é™…ä¸Šæ˜¯è°ƒç”¨äº†project å¯¹è±¡çš„ apply æ–¹æ³•ï¼Œæ–¹æ³•ä¸­ä¼ å…¥ä¸€ä¸ª mapã€‚map çš„ key æ˜¯ <code>from</code>ï¼Œvalue æ˜¯ <code>../script.gradle</code> ã€‚<code>apply plugin: &#39;...&#39;</code> ä¹Ÿæ˜¯åŒæ ·çš„é“ç†</p><p>3ï¼‰ã€ä½¿ç”¨æ’ä»¶æä¾›çš„åŠŸèƒ½</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle ä¸­</span><br><br><span class="hljs-comment">//1ã€æ‰“å°æ‰©å±•å±æ€§</span><br>println property1<br>println property2<br><br><span class="hljs-comment">//2ã€æ‰§è¡Œ scriptTask</span><br>./gradlew scriptTask<br><br><span class="hljs-comment">//æ‰§è¡Œç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>erdai<br><span class="hljs-number">666</span><br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>scriptTask<br>Hello, I am Script Plugin<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€å¯¹è±¡æ’ä»¶"><a href="#ä¸‰ã€å¯¹è±¡æ’ä»¶" class="headerlink" title="ä¸‰ã€å¯¹è±¡æ’ä»¶"></a>ä¸‰ã€å¯¹è±¡æ’ä»¶</h2><p>ä¸Šé¢è®²åˆ°å¯¹è±¡æ’ä»¶å°±æ˜¯å®ç°äº† <code>org.gradle.api.plugin</code> æ¥å£çš„æ’ä»¶ï¼Œè‡ªå®šä¹‰å¯¹è±¡æ’ä»¶ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§ç¼–å†™å½¢å¼ï¼š</p><p><strong>æ³¨æ„ï¼š</strong> ä¸‹é¢æ¼”ç¤ºçš„æ’ä»¶éƒ½æ˜¯é€šè¿‡ groovy è¯­æ³•ç¼–å†™çš„</p><h3 id="1ï¼‰ã€build-gradle-æ–‡ä»¶ä¸­ç›´æ¥ç¼–å†™"><a href="#1ï¼‰ã€build-gradle-æ–‡ä»¶ä¸­ç›´æ¥ç¼–å†™" class="headerlink" title="1ï¼‰ã€build.gradle æ–‡ä»¶ä¸­ç›´æ¥ç¼–å†™"></a>1ï¼‰ã€build.gradle æ–‡ä»¶ä¸­ç›´æ¥ç¼–å†™</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle ä¸­</span><br><br><span class="hljs-comment">//1ã€é€šè¿‡ apply plugin å¼•ç”¨å½“å‰æ’ä»¶</span><br>apply <span class="hljs-attr">plugin:</span> Method1Plugin<br><br><span class="hljs-comment">//2ã€è‡ªå®šä¹‰å¯¹è±¡æ’ä»¶</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Method1Plugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Plugin</span>&lt;Project&gt; &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">void</span> apply(Project project) &#123;<br>        println <span class="hljs-string">&#x27;æˆ‘æ˜¯è‡ªå®šä¹‰ Method1Plugin &#x27;</span><br><br>        project.task(<span class="hljs-string">&quot;Method1PluginTask&quot;</span>)&#123;<br>            doLast &#123;<br>                println <span class="hljs-string">&#x27;Method1PluginTask exec success...&#x27;</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//3ã€æ‰§è¡Œ Method1PluginTask</span><br>./gradlew Method1PluginTask<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>I am Method1Plugin <br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>Method1PluginTask<br>Method1PluginTask exec success...<br></code></pre></td></tr></table></figure><p>ä½†è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç¼ºç‚¹ï¼š<strong>åªèƒ½åœ¨å½“å‰ build.gradle è„šæœ¬æ–‡ä»¶ä¸‹ä½¿ç”¨ï¼Œå…¶ä»–çš„  build.gradle ç”¨ä¸äº†ï¼Œå±€é™æ€§å¾ˆå¼º</strong></p><p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ buildSrc çš„æ–¹å¼æ¥ç¼–å†™æ’ä»¶</p><h3 id="2ï¼‰ã€buildSrc-é»˜è®¤æ’ä»¶ç›®å½•ä¸‹ç¼–å†™"><a href="#2ï¼‰ã€buildSrc-é»˜è®¤æ’ä»¶ç›®å½•ä¸‹ç¼–å†™" class="headerlink" title="2ï¼‰ã€buildSrc é»˜è®¤æ’ä»¶ç›®å½•ä¸‹ç¼–å†™"></a>2ï¼‰ã€buildSrc é»˜è®¤æ’ä»¶ç›®å½•ä¸‹ç¼–å†™</h3><p>åœ¨ Android å·¥ç¨‹ä¸­ï¼ŒbuildSrc æ˜¯ Gradle é»˜è®¤çš„æ’ä»¶ç›®å½•ï¼Œç¼–è¯‘ Gradle çš„æ—¶å€™ä¼šè‡ªåŠ¨è¯†åˆ«è¿™ä¸ªç›®å½•ï¼Œå› æ­¤åœ¨ buildSrc ä¸‹ç¼–å†™çš„æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›è¡Œå¼•ç”¨ã€‚<strong>é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œæ’ä»¶çš„è°ƒè¯•</strong></p><p>buildSrc æ–¹å¼å…·ä½“ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><h4 id="1ã€æ­¥éª¤ä¸€"><a href="#1ã€æ­¥éª¤ä¸€" class="headerlink" title="1ã€æ­¥éª¤ä¸€"></a>1ã€æ­¥éª¤ä¸€</h4><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªåä¸º <strong>buildSrc</strong> çš„ Java Module (å»ºç«‹ Android Module ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯åˆ é™¤çš„ä¸œè¥¿å¤šğŸ˜‚)ï¼Œåªä¿ç•™ <strong>build.gradle</strong> æ–‡ä»¶å’Œ <strong>src&#x2F;main</strong> ç›®å½•ï¼Œå…¶ä½™çš„å…¨éƒ¨åˆ é™¤</p><p><strong>æ³¨æ„</strong>ï¼š</p><p>1ã€åˆ›å»ºçš„ Module åå­—ä¸€å®šè¦æ˜¯ buildSrc , ä¸ç„¶ä¼šæ‰¾ä¸åˆ°æ’ä»¶</p><p>2ã€buildSrc çš„æ‰§è¡Œæ—¶æœºä¸ä»…æ—©äºä»»ä½•â¼€ä¸ª projectï¼ˆbuild.gradleï¼‰ï¼Œè€Œä¸”ä¹Ÿæ—©äº settings.gradle</p><p>3ã€å½“ä½ åˆ›å»ºä¸€ä¸ª buildSrc Module åï¼ˆæ— è®ºæ˜¯ Java Module è¿˜æ˜¯ Android Moduleï¼‰ï¼ŒGradle æ„å»ºçš„æ—¶å€™ä¼šåœ¨ settings.gradle æ–‡ä»¶ä¸­å¼•å…¥å½“å‰ moduleï¼Œ å› æ­¤å®ƒä¼šè¢«æ‰§è¡Œä¸¤éï¼Œè¿™ä¸ªæ—¶å€™ Gradle ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/48731dd12c4d4829940395f69a83e7fa~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722104436027"></p><p>å¤§è‡´æ„æ€æ˜¯ï¼šâ€™buildSrcâ€™ ä¸èƒ½ç”¨ä½œé¡¹ç›®åï¼Œå› ä¸ºå®ƒæ˜¯ä¿ç•™åã€‚å› æ­¤æˆ‘ä»¬éœ€è¦åˆ é™¤ settings.gradle æ–‡ä»¶ä¸­å¼•å…¥çš„ buildSrc é…ç½®</p><h4 id="2ã€æ­¥éª¤äºŒ"><a href="#2ã€æ­¥éª¤äºŒ" class="headerlink" title="2ã€æ­¥éª¤äºŒ"></a>2ã€æ­¥éª¤äºŒ</h4><p>ä¿®æ”¹ build.gradle æ–‡ä»¶ä¸­çš„å†…å®¹</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//ä¾èµ– groovy æ’ä»¶ï¼Œè¿™ä¸ªæ˜¯ Gradle å†…ç½®çš„æ’ä»¶</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;groovy&#x27;</span><br><br><span class="hljs-comment">//å¼•å…¥ç›¸å…³çš„ä¾èµ–</span><br>dependencies &#123;<br>    <span class="hljs-comment">//Groovy DSL</span><br>    implementation gradleApi()<br>    <span class="hljs-comment">//Gradle DSL</span><br>    implementation localGroovy()<br>&#125;<br><br><span class="hljs-comment">//å¼•å…¥ç›¸å…³çš„ä»“åº“</span><br>repositories &#123;<br>    mavenCentral()<br>&#125;<br><br><span class="hljs-comment">//æŒ‡å®šå¥½ç›¸å…³èµ„æºç›®å½•ï¼Œå®é™…ä¸Šä¹Ÿå¯ä»¥ä¸ç”¨æŒ‡å®šï¼ŒAndroidStudio èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å‡ºæ¥</span><br>sourceSets &#123;<br>    main &#123;<br>        groovy &#123;<br>            srcDir <span class="hljs-string">&#x27;src/main/groovy&#x27;</span><br>        &#125;<br>      <br>      resources &#123;<br>            srcDir <span class="hljs-string">&#x27;src/main/resources&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹å¥½åï¼Œ build ä¸€ä¸‹é¡¹ç›®ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±èƒ½çœ‹åˆ° Gradle æŠŠå®ƒè¯†åˆ«ä¸ºä¸€ä¸ªæ’ä»¶ç›®å½•äº†</p><h4 id="3ã€æ­¥éª¤ä¸‰"><a href="#3ã€æ­¥éª¤ä¸‰" class="headerlink" title="3ã€æ­¥éª¤ä¸‰"></a>3ã€æ­¥éª¤ä¸‰</h4><p>åœ¨ src&#x2F;main ä¸‹åˆ›å»º groovy ç›®å½•ï¼Œç„¶åæ ¹æ®è‡ªå·±å–œå¥½åˆ›å»ºæ’ä»¶ä»£ç å­˜æ”¾çš„åŒ…è·¯å¾„ï¼Œç¼–å†™æ’ä»¶å³å¯ï¼Œæˆ‘ç¼–å†™çš„æ’ä»¶ä»£ç å¦‚ä¸‹æˆªå›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ad37d5e82334a7298b3b764a4eb78f4~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722160741350"></p><p><strong>æ³¨æ„ï¼š</strong></p><p>1ã€æˆ‘è¿™é‡Œæ˜¯ç”¨ groovy è¯­æ³•å†™çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª <code>.groovy</code> ä¸ºåç¼€çš„æ–‡ä»¶ç¼–å†™æ’ä»¶ä»£ç ï¼Œæˆ‘åˆ›å»ºçš„æ˜¯ï¼š BuildSrcPlugin.groovy</p><p>2ã€åˆ›å»ºçš„ groovy æ–‡ä»¶é‡Œé¢å•¥éƒ½æ²¡æœ‰ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¼•å…¥åŒ…è·¯å¾„ï¼Œç„¶åè¿›è¡Œç›¸å…³é€»è¾‘ç¼–å†™</p><h4 id="4ã€æ­¥éª¤å››"><a href="#4ã€æ­¥éª¤å››" class="headerlink" title="4ã€æ­¥éª¤å››"></a>4ã€æ­¥éª¤å››</h4><p>è¿™ä¸€æ­¥å®é™…ä¸Šå°±æ˜¯æ³¨å†Œæˆ‘ä»¬ç¼–å†™çš„æ’ä»¶ç±»ï¼Œæ–¹ä¾¿å¤–éƒ¨å¼•ç”¨ï¼Œä»‹ç»ä¸¤ç§æ³¨å†Œæ–¹å¼ï¼š</p><p>1ã€åˆ›å»ºä¸€ç³»åˆ—æ–‡ä»¶å¤¹è¿›è¡Œæ’ä»¶æ³¨å†Œ</p><p>2ã€é€šè¿‡ Gradle é…ç½®è¿›è¡Œæ’ä»¶æ³¨å†Œ</p><h5 id="1ã€åˆ›å»ºä¸€ç³»åˆ—æ–‡ä»¶å¤¹è¿›è¡Œæ’ä»¶æ³¨å†Œ"><a href="#1ã€åˆ›å»ºä¸€ç³»åˆ—æ–‡ä»¶å¤¹è¿›è¡Œæ’ä»¶æ³¨å†Œ" class="headerlink" title="1ã€åˆ›å»ºä¸€ç³»åˆ—æ–‡ä»¶å¤¹è¿›è¡Œæ’ä»¶æ³¨å†Œ"></a>1ã€åˆ›å»ºä¸€ç³»åˆ—æ–‡ä»¶å¤¹è¿›è¡Œæ’ä»¶æ³¨å†Œ</h5><p>åœ¨  src&#x2F;main ä¸‹åˆ›å»º resources ç›®å½•ï¼Œåœ¨  resources ç›®å½•ä¸‹åˆ›å»º META-INF ç›®å½•ï¼Œåœ¨ META-INF ç›®å½•ä¸‹åˆ›å»º gradle-plugins ç›®å½•ï¼Œåœ¨ gradle-plugins ç›®å½•ä¸‹åˆ›å»º <code>.properties</code> ä¸ºåç¼€çš„æ–‡ä»¶ï¼Œåå­—å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½å–ï¼Œæœ€ååœ¨åˆ›å»ºçš„ properties æ–‡ä»¶ä¸‹æ ‡è¯†è¯¥æ’ä»¶å¯¹åº”çš„ç±»è·¯å¾„å³å¯å®Œæˆæ’ä»¶çš„æ³¨å†Œï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">implementation-<span class="hljs-keyword">class</span>=com.dream.plugin.BuildSrcPlugin<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><p>1ã€ä¸Šé¢çš„ç›®å½•åç§°éƒ½æ˜¯å›ºå®šçš„ï¼Œåˆ«å†™é”™äº†ï¼Œä¸ç„¶å¼•ç”¨çš„æ—¶å€™ä¼šæ‰¾ä¸åˆ°æ’ä»¶</p><p>2ã€ä½ åˆ›å»ºçš„è¿™ä¸ª properties æ–‡ä»¶çš„åå­—å¾ˆé‡è¦ï¼Œåç»­å¼•ç”¨æ’ä»¶å°±æ˜¯æ ¹æ®è¿™ä¸ªåç§°æ¥çš„ï¼Œä¾‹å¦‚æˆ‘åˆ›å»ºçš„åç§°ä¸º <strong>BuildSrcPlugin.properties</strong> , é‚£ä¹ˆå¼•ç”¨æ’ä»¶çš„æ—¶å€™å°±æ˜¯è¿™æ ·ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;BuildSrcPlugin&#x27;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä¸‰ï¼Œå››æ­¥éª¤å®Œæˆåï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2cd9b620154744b5882de52ccd4aae62~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722143609118"></p><p>è¿™ç§æ³¨å†Œæ–¹å¼æ¯”è¾ƒå›ºå®šï¼Œå®¹æ˜“å‡ºé”™ï¼Œä¸æ¨èä½¿ç”¨ï¼Œä¸‹é¢ä»‹ç»å¦å¤–ä¸€ç§æ³¨å†Œæ–¹å¼</p><h5 id="2ã€é€šè¿‡-Gradle-é…ç½®è¿›è¡Œæ’ä»¶æ³¨å†Œ"><a href="#2ã€é€šè¿‡-Gradle-é…ç½®è¿›è¡Œæ’ä»¶æ³¨å†Œ" class="headerlink" title="2ã€é€šè¿‡ Gradle é…ç½®è¿›è¡Œæ’ä»¶æ³¨å†Œ"></a>2ã€é€šè¿‡ Gradle é…ç½®è¿›è¡Œæ’ä»¶æ³¨å†Œ</h5><p>åœ¨æ’ä»¶çš„ build.gradle ä¸­è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//...</span><br><span class="hljs-comment">//1ã€å¼•å…¥ java-gradle-plugin æ’ä»¶</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;java-gradle-plugin&#x27;</span><br><br><br><span class="hljs-comment">//2ã€è¿›è¡Œæ’ä»¶æ³¨å†Œç›¸å…³çš„é…ç½®</span><br>gradlePlugin &#123;<br>    plugins &#123;<br>        greeting &#123;<br>            <span class="hljs-comment">// æ’ä»¶id</span><br>            id = <span class="hljs-string">&#x27;BuildSrcPlugin&#x27;</span><br>            <span class="hljs-comment">// æ’ä»¶å®ç°ç±»</span><br>            implementationClass = <span class="hljs-string">&#x27;com.dream.plugin.BuildSrcPlugin&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä¸å®¹æ˜“å‡ºé”™ï¼Œæ¨èä½¿ç”¨</p><p>ok, ç»è¿‡ä¸Šé¢ 4 ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬çš„æ’ä»¶å°±ç¼–å†™å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥ç›´æ¥å¼•ç”¨å³å¯ï¼Œåœ¨éœ€è¦çš„ build.gradle è¿›è¡Œå¼•ç”¨ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle ä¸‹</span><br><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;BuildSrcPlugin&#x27;</span><br><br><span class="hljs-comment">//å› ä¸ºå½“å‰æ’ä»¶ä¸­çš„ Task æŒ‚æ¥åˆ°äº†æ„å»ºæµç¨‹ä¸­çš„ Taskï¼Œæˆ‘ä»¬ç›´æ¥è¿è¡Œé¡¹ç›®å°±å¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœï¼Œå¦‚ä¸‹æˆªå›¾</span><br></code></pre></td></tr></table></figure><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/534911a6b92e463588a32874ec3f3548~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722142743405"></p><p>buildSrc æ–¹å¼çš„ç¼ºç‚¹ï¼š<strong>åªèƒ½åœ¨å½“å‰å·¥ç¨‹ä¸­ä½¿ç”¨ï¼Œå…¶ä»–çš„é¡¹ç›®å·¥ç¨‹ä½¿ç”¨ä¸äº†ï¼Œé‚£å¦‚æœæˆ‘å¸Œæœ›ç¼–å†™çš„æ’ä»¶å…¶ä»–é¡¹ç›®ä¹Ÿèƒ½ç”¨ï¼Œè¿™ç§æ–¹å¼å°±åšä¸åˆ°äº†</strong></p><h3 id="3ï¼‰ã€åœ¨è‡ªå®šä¹‰é¡¹ç›®ä¸‹ç¼–å†™"><a href="#3ï¼‰ã€åœ¨è‡ªå®šä¹‰é¡¹ç›®ä¸‹ç¼–å†™" class="headerlink" title="3ï¼‰ã€åœ¨è‡ªå®šä¹‰é¡¹ç›®ä¸‹ç¼–å†™"></a>3ï¼‰ã€åœ¨è‡ªå®šä¹‰é¡¹ç›®ä¸‹ç¼–å†™</h3><p>å‰é¢æˆ‘ä»¬è®²åˆ°ï¼ŒbuildSrc æ–¹å¼çš„ç¼ºç‚¹å°±æ˜¯åªèƒ½åœ¨å½“å‰é¡¹ç›®å·¥ç¨‹ä¸‹ä½¿ç”¨ï¼Œå¦‚æœè¦åœ¨å…¶ä»–çš„å·¥ç¨‹ä½¿ç”¨ï¼Œåˆ™ä½¿ç”¨ä¸äº†ã€‚é‚£ä¹ˆè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨è‡ªå®šä¹‰é¡¹ç›®ä¸‹ç¼–å†™æ’ä»¶ï¼Œç„¶åæŠŠå½“å‰æ’ä»¶å‘å¸ƒåˆ°è¿œç¨‹ä»“åº“ï¼Œæœ€åå¯¹æ’ä»¶è¿›è¡Œå¼•ç”¨å³å¯</p><p>ç±»ä¼¼äº Android Gradle Plugin çš„æ’ä»¶å¼•ç”¨ï¼Œå¦‚ä¸‹ï¼š</p><p>1ã€åœ¨æ ¹ build.gradle ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç :</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy">buildscript &#123;<br>    <span class="hljs-comment">//é…ç½®æ’ä»¶çš„ä»“åº“åœ°å€</span><br>    repositories &#123;<br>        google()<br>        mavenCentral()<br>    &#125;<br>    <span class="hljs-comment">//é…ç½®æ’ä»¶çš„ä¾èµ–</span><br>    dependencies &#123;<br>        classpath <span class="hljs-string">&quot;com.android.tools.build:gradle:4.2.1&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€åœ¨å­ build.gradle ä¸­å¼•ç”¨æ’ä»¶</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//1ã€å¦‚æœæ˜¯ Android åº”ç”¨å·¥ç¨‹</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.android.application&#x27;</span><br><br><span class="hljs-comment">//2ã€å¦‚æœæ˜¯ Android åº“å·¥ç¨‹</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.android.library&#x27;</span><br></code></pre></td></tr></table></figure><p>ä¾è‘«èŠ¦ç”»ç“¢ï¼Œæˆ‘ä»¬ä¹Ÿæ¥å®ç°ä¸€ä¸ªç±»ä¼¼äº Android Gradle Plugin çš„æ’ä»¶å¼•ç”¨</p><p><strong>æ³¨æ„ï¼š</strong> è¿™ç§æ–¹å¼ç¼–å†™æ’ä»¶å’Œ buildSrc æ–¹å¼éå¸¸çš„ç±»ä¼¼ï¼ŒåŒºåˆ«å°±åœ¨äºï¼š</p><blockquote><p>1ã€è‡ªå®šä¹‰äº†é¡¹ç›®åç§°</p><p>2ã€å¢åŠ äº†ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“çš„é…ç½®</p></blockquote><p>å› æ­¤å¦‚æœä½ ä¸æƒ³é€šè¿‡è‡ªå®šä¹‰é¡¹ç›®çš„æ–¹å¼ç¼–å†™æ’ä»¶ï¼Œä½ å¯ä»¥æŠŠä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“çš„é…ç½®å†™åœ¨ buildSrc çš„ build.gradle é‡Œé¢ï¼Œç„¶åè¿›è¡Œä¸Šä¼ </p><p>ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡è‡ªå®šä¹‰é¡¹ç›®çš„æ–¹å¼å»ç¼–å†™ä¸€ä¸ªæ’ä»¶</p><h4 id="1ã€è‡ªå®šä¹‰ä¸€ä¸ª-Java-Moduleï¼Œåå­—ä»»æ„å–"><a href="#1ã€è‡ªå®šä¹‰ä¸€ä¸ª-Java-Moduleï¼Œåå­—ä»»æ„å–" class="headerlink" title="1ã€è‡ªå®šä¹‰ä¸€ä¸ª Java Moduleï¼Œåå­—ä»»æ„å–"></a>1ã€è‡ªå®šä¹‰ä¸€ä¸ª Java Moduleï¼Œåå­—ä»»æ„å–</h4><p>æˆ‘è¿™é‡Œè‡ªå®šä¹‰äº†ä¸€ä¸ª customplugin çš„ Java Moduleï¼Œå…¶ä½™æ­¥éª¤å’Œ buildSrc æ–¹å¼åŸºæœ¬ä¸€æ ·ï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯ build.gradle è¿™ä¸ªæ–‡ä»¶ä¸­æ–°å¢äº†ä¸Šä¼ åˆ° Maven çš„é…ç½®ï¼Œè¿™é‡Œæˆ‘æ˜¯ä¸Šä¼ åˆ°æœ¬åœ° Maven</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/842ac9d4e76e4cadb1481ffca307aeeb~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210723155621390"></p><p>çœ‹ä¸€çœ¼æˆ‘ä»¬çš„ build.gradle æ–‡ä»¶ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs groovy">apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;groovy&#x27;</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;java-gradle-plugin&#x27;</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;maven&#x27;</span><br><br><br><span class="hljs-comment">//å¼•å…¥ç›¸å…³çš„ä¾èµ–</span><br>dependencies &#123;<br>    <span class="hljs-comment">//Groovy DSL</span><br>    implementation gradleApi()<br>    <span class="hljs-comment">//Gradle DSL</span><br>    implementation localGroovy()<br>&#125;<br><br><span class="hljs-comment">//å¼•å…¥ç›¸å…³çš„ä»“åº“</span><br>repositories &#123;<br>    mavenCentral()<br>&#125;<br><br><span class="hljs-comment">//Gradle é…ç½®çš„æ–¹å¼æ³¨å†Œæ’ä»¶</span><br>gradlePlugin &#123;<br>    plugins &#123;<br>        greeting &#123;<br>            <span class="hljs-comment">// æ’ä»¶id</span><br>            id = <span class="hljs-string">&#x27;CustomPlugin&#x27;</span><br>            <span class="hljs-comment">// æ’ä»¶å®ç°ç±»</span><br>            implementationClass = <span class="hljs-string">&#x27;com.dream.plugin.CustomPlugin&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><br><span class="hljs-comment">//å°†æ’ä»¶æ‰“åŒ…ä¸Šä¼ åˆ°æœ¬åœ°mavenä»“åº“</span><br>uploadArchives &#123;<br>    repositories &#123;<br>        mavenDeployer &#123;<br>            <span class="hljs-comment">//æŒ‡å®š maven å‘å¸ƒä¸‰å‰‘å®¢</span><br>            pom.groupId = <span class="hljs-string">&#x27;com.dream&#x27;</span><br>            pom.artifactId = <span class="hljs-string">&#x27;customplugin&#x27;</span><br>            pom.version = <span class="hljs-string">&#x27;1.0.0&#x27;</span><br>            <span class="hljs-comment">//æŒ‡å®šæœ¬åœ° maven ä»“åº“çš„è·¯å¾„ï¼Œè¿™é‡Œæˆ‘æŒ‡å®šçš„å°±æ˜¯å½“å‰ Module ç›®å½•ä¸‹</span><br>            repository(<span class="hljs-attr">url:</span> uri(<span class="hljs-string">&#x27;../customplugin&#x27;</span>))<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°é…ç½®æ–‡ä»¶æ–°å¢çš„å†…å®¹ï¼š</p><p>1ã€é‡‡ç”¨äº† Gradle é…ç½®çš„æ–¹å¼è¿›è¡Œæ’ä»¶çš„æ³¨å†Œ</p><p>2ã€å¢åŠ äº†ä¸Šä¼ åˆ° maven æœ¬åœ°ä»“åº“çš„é…ç½®</p><p>æ¥ç€çœ‹ä¸€çœ¼æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„å’Œç¼–å†™çš„æ’ä»¶ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3d5d3e543dd4b58851958448fe435e4~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722201238241"></p><h4 id="2ã€å°†å½“å‰æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ°-Maven-ä»“åº“"><a href="#2ã€å°†å½“å‰æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ°-Maven-ä»“åº“" class="headerlink" title="2ã€å°†å½“å‰æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ° Maven ä»“åº“"></a>2ã€å°†å½“å‰æ’ä»¶å‘å¸ƒåˆ°æœ¬åœ° Maven ä»“åº“</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å»æ“ä½œï¼š</p><blockquote><p>1ã€æ‰§è¡Œ <code>./gradlew uploadArchives</code> å‘½ä»¤</p><p>2ã€åœ¨ AndroidStudio æ‰¾åˆ° Gradle å¯è§†åŒ–ç•Œé¢çš„ uploadArchives Task ç‚¹å‡»å‘å¸ƒ</p></blockquote><p>å¦‚æœä¸Šä¼ æˆåŠŸï¼Œä½ å°†çœ‹åˆ°å¦‚ä¸‹ä¸€äº›æ–‡ä»¶ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1b1ee1594cad4394be3515a825a4ade6~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722203228840"  /><p>ä¸Šä¼ åˆ°æœ¬åœ° Maven ä»“åº“æˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä½¿ç”¨ Android Gradle Plugin é‚£æ ·ä½¿ç”¨æ’ä»¶äº†</p><h4 id="3ã€æ’ä»¶ä¾èµ–é…ç½®"><a href="#3ã€æ’ä»¶ä¾èµ–é…ç½®" class="headerlink" title="3ã€æ’ä»¶ä¾èµ–é…ç½®"></a>3ã€æ’ä»¶ä¾èµ–é…ç½®</h4><p><strong>æ³¨æ„</strong>ï¼šæ’ä»¶ä¾èµ–å°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¼ åˆ° Maven ä»“åº“é…ç½®çš„é‚£ä¸‰å‰‘å®¢ï¼Œæ ¼å¼ä¸ºï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">classpath <span class="hljs-string">&#x27;[groupId]:[artifactId]:[version]&#x27;</span> <br></code></pre></td></tr></table></figure><p>å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åœ¨æ ¹ build.gradle ä¸­å¼•å…¥æœ¬åœ°ä»“åº“å’Œæ’ä»¶ä¾èµ–</span><br>buildscript &#123;<br>    repositories &#123;<br>        google()<br>        mavenCentral()<br>        jcenter()<br>      <span class="hljs-comment">//å¼•å…¥æœ¬åœ° Maven ä»“åº“</span><br>        maven&#123;<br>            url uri(<span class="hljs-string">&#x27;customplugin&#x27;</span>)<br>        &#125;<br>    &#125;<br>    dependencies &#123;<br>        classpath <span class="hljs-string">&quot;com.android.tools.build:gradle:4.2.1&quot;</span><br>      <span class="hljs-comment">//å¼•å…¥æ’ä»¶ä¾èµ–</span><br>        classpath <span class="hljs-string">&quot;com.dream:customplugin:1.0.0&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°æ­¥éª¤å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ’ä»¶äº†ï¼Œåœ¨éœ€è¦çš„ build.gradle è¿›è¡Œå¼•ç”¨ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨ app çš„ build.gradle ä¸‹</span><br><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;CustomPlugin&#x27;</span><br><br><span class="hljs-comment">//å› ä¸ºå½“å‰æ’ä»¶ä¸­çš„ Task æŒ‚æ¥åˆ°äº†æ„å»ºæµç¨‹ä¸­çš„ Taskï¼Œæˆ‘ä»¬ç›´æ¥è¿è¡Œé¡¹ç›®å°±å¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœï¼Œå¦‚ä¸‹æˆªå›¾</span><br></code></pre></td></tr></table></figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/75c517e03ea14ed9812d78d9b867dd32~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722204535977"  /><p>è‡³æ­¤ï¼Œå…³äºå¯¹è±¡æ’ä»¶çš„ç¼–å†™åŠåº”ç”¨å°±è®²çš„å·®ä¸å¤šäº†ï¼Œæ¥ä¸‹æ¥è®²ä¸‹å¦‚ä½•å‘å¸ƒæ’ä»¶åˆ°è¿œç¨‹ä»“åº“</p><h2 id="å››ã€å‘å¸ƒæ’ä»¶åˆ°è¿œç¨‹ä»“åº“"><a href="#å››ã€å‘å¸ƒæ’ä»¶åˆ°è¿œç¨‹ä»“åº“" class="headerlink" title="å››ã€å‘å¸ƒæ’ä»¶åˆ°è¿œç¨‹ä»“åº“"></a>å››ã€å‘å¸ƒæ’ä»¶åˆ°è¿œç¨‹ä»“åº“</h2><p>æˆ‘ä»¬å¸¸ç”¨çš„è¿œç¨‹ä»“åº“æœ‰ï¼šJcenterï¼ŒmavenCentralï¼ŒMaven ç§æœä»“åº“ï¼ŒJitPackç­‰ç­‰</p><p><strong>å…³äº Jcenter</strong></p><p>Jcenter å®˜æ–¹åœ¨ 2021.2.3 å‘å¸ƒå£°æ˜å³å°†åœæ­¢ Jcenter çš„è¿è¥</p><blockquote><p>è‡ª 2021.3.31åä¸åœ¨æ¥å—ä»»ä½•æ–°çš„æäº¤ï¼Œåœ¨2022.2.1å‰ï¼Œä½ è¿˜æ˜¯å¯ä»¥æ­£å¸¸æ‹‰å–2021.3.31å‰æäº¤çš„åº“</p></blockquote><p>å› æ­¤è¿™é‡Œå°±ä¸è®²å¦‚ä½•å‘å¸ƒæ’ä»¶åˆ° Jcenter</p><p><strong>å…³äº mavenCentral</strong></p><p>è‡ª Jcenter å®£å¸ƒå³å°†åœæ­¢æœåŠ¡åï¼Œå¾ˆå¤šç¬¬ä¸‰æ–¹åº“å’Œæ’ä»¶éƒ½è¿ç§»åˆ°äº† mavenCentral ï¼Œä½†æ˜¯å‘å¸ƒ mavenCentral æµç¨‹ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œä¸åšè¿‡å¤šèµ˜è¿°ï¼Œåç»­æˆ‘ä¼šä¸“é—¨å†™ä¸€éæ–‡ç« æ•™å¤§å®¶å¦‚ä½•ä¸Šä¼ åˆ° mavenCentral</p><h3 id="1ï¼‰ã€å‘å¸ƒæ’ä»¶åˆ°-Maven-ç§æœä»“åº“"><a href="#1ï¼‰ã€å‘å¸ƒæ’ä»¶åˆ°-Maven-ç§æœä»“åº“" class="headerlink" title="1ï¼‰ã€å‘å¸ƒæ’ä»¶åˆ° Maven ç§æœä»“åº“"></a>1ï¼‰ã€å‘å¸ƒæ’ä»¶åˆ° Maven ç§æœä»“åº“</h3><p>å¦‚æœæœ‰ Maven ç§æœä»“åº“ï¼Œé‚£å‘å¸ƒæ’ä»¶å°†ä¼šå˜å¾—å¼‚å¸¸ç®€å•ï¼Œä½ åªéœ€è¦å°† build.gradle é‡Œé¢çš„æœ¬åœ°ä»“åº“æ”¹æˆè¿œç¨‹ä»“åº“åœ°å€ï¼Œå¹¶éªŒè¯ç”¨æˆ·åå¯†ç å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å¼•å…¥ maven æ’ä»¶</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;maven&#x27;</span><br><br><span class="hljs-comment">//å°†æ’ä»¶æ‰“åŒ…ä¸Šä¼ åˆ°è¿œç¨‹ maven ä»“åº“</span><br>uploadArchives &#123;<br>    repositories &#123;<br>        mavenDeployer &#123;<br>            <span class="hljs-comment">//æŒ‡å®š maven å‘å¸ƒä¸‰å‰‘å®¢</span><br>            pom.groupId = <span class="hljs-string">&#x27;com.dream&#x27;</span><br>            pom.artifactId = <span class="hljs-string">&#x27;customplugin&#x27;</span><br>            pom.version = <span class="hljs-string">&#x27;1.0.0&#x27;</span><br>            <span class="hljs-comment">//æŒ‡å®šè¿œç¨‹ä»“åº“</span><br>            repository(<span class="hljs-attr">url:</span> <span class="hljs-string">&#x27;ä½ çš„è¿œç¨‹ä»“åº“åœ°å€&#x27;</span>)&#123;<br>              authentication(<span class="hljs-attr">userName:</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>, <span class="hljs-attr">password:</span> <span class="hljs-string">&quot;å¯†ç &quot;</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> ä¸€èˆ¬å…¬å¸éƒ½ä¼šæ­å»ºè‡ªå·±çš„ Maven ä»“åº“</p><h3 id="2ï¼‰ã€å‘å¸ƒæ’ä»¶åˆ°-JitPack"><a href="#2ï¼‰ã€å‘å¸ƒæ’ä»¶åˆ°-JitPack" class="headerlink" title="2ï¼‰ã€å‘å¸ƒæ’ä»¶åˆ° JitPack"></a>2ï¼‰ã€å‘å¸ƒæ’ä»¶åˆ° JitPack</h3><p>ä¹‹å‰æˆ‘å†™è¿‡ä¸€ç¯‡æ–‡ç« æ•™å¤§å®¶å¦‚ä½•ä¸Šä¼ ç¬¬ä¸‰æ–¹åº“åˆ° JitPack <a href="https://juejin.cn/post/6916061679079915528#heading-9">ä¼ é€é—¨</a> ï¼Œå®é™…ä¸Šä¸Šä¼ æ’ä»¶ä¹Ÿæ˜¯åŒæ ·çš„æ“ä½œ</p><h4 id="1ã€åˆ›å»ºå¥½é¡¹ç›®å¹¶ç¼–å†™-Gradle-æ’ä»¶"><a href="#1ã€åˆ›å»ºå¥½é¡¹ç›®å¹¶ç¼–å†™-Gradle-æ’ä»¶" class="headerlink" title="1ã€åˆ›å»ºå¥½é¡¹ç›®å¹¶ç¼–å†™ Gradle æ’ä»¶"></a>1ã€åˆ›å»ºå¥½é¡¹ç›®å¹¶ç¼–å†™ Gradle æ’ä»¶</h4><p>è¿™ä¸€æ­¥æˆ‘ä»¬å·²ç»å®Œæˆï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><p><strong>ä½ çš„é¡¹ç›®åç§°ï¼ˆæ ¹å·¥ç¨‹çš„åç§°ï¼‰å°†ä¼šä½œä¸ºæ’ä»¶ä¾èµ–çš„ artifactIdï¼Œå› æ­¤æˆ‘ä»¬åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™å°½é‡å–ä¸€ä¸ªå¥½ç‚¹çš„åå­—</strong></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8064a27b3f004af3a40b2f0b99d236c1~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210723155739473"></p><h4 id="2ã€é…ç½®å¥½ä¸Šä¼ æ’ä»¶å¹¶å°†é¡¹ç›®ä¸Šä¼ è‡³-Github"><a href="#2ã€é…ç½®å¥½ä¸Šä¼ æ’ä»¶å¹¶å°†é¡¹ç›®ä¸Šä¼ è‡³-Github" class="headerlink" title="2ã€é…ç½®å¥½ä¸Šä¼ æ’ä»¶å¹¶å°†é¡¹ç›®ä¸Šä¼ è‡³ Github"></a>2ã€é…ç½®å¥½ä¸Šä¼ æ’ä»¶å¹¶å°†é¡¹ç›®ä¸Šä¼ è‡³ Github</h4><p>ä¸Šä¼  JitPack æ’ä»¶ <a href="https://github.com/dcendents/android-maven-gradle-plugin">ä¼ é€é—¨</a></p><p>åœ¨æ ¹ build.gradle æ–‡ä»¶ä¸‹æ·»åŠ å¦‚ä¸‹æ’ä»¶ä¾èµ–ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs groovy">buildscript &#123;<br>    <span class="hljs-comment">//...</span><br>    dependencies &#123;<br>      <span class="hljs-comment">//...</span><br>        <span class="hljs-comment">//ä¸Šä¼  JitPack æ’ä»¶ä¾èµ–</span><br>        classpath <span class="hljs-string">&#x27;com.github.dcendents:android-maven-gradle-plugin:2.1&#x27;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨æ’ä»¶çš„ build.gradle è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs groovy">apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.github.dcendents.android-maven&#x27;</span><br><span class="hljs-comment">//ç»„å com.github æ˜¯å›ºå®šçš„ï¼Œåé¢çš„ sweetying520 æ˜¯æˆ‘ Github çš„ç”¨æˆ·åï¼Œæ›¿æ¢æˆä½ è‡ªå·±çš„å°±å¯ä»¥äº†</span><br>group = <span class="hljs-string">&#x27;com.github.sweetying520&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> </p><p>1ã€å®é™…æµ‹è¯•å‘ç°ï¼Œä¸Šé¢çš„ group ä½ é…ç½®æˆå…¶ä»–çš„æˆ–ä¸å†™å‡ºæ¥éƒ½æ— æ‰€è°“ï¼Œæœ€ç»ˆçš„ groupId éƒ½ä¼šæ˜¯ï¼š<code>com.github.sweetying520</code></p><p>2ã€å¦å¤–æˆ‘ä»¬ä¸Šä¼ çš„æ’ä»¶åœ¨ Github è¢«è¯´æ˜ä¸ºåºŸå¼ƒäº†ï¼Œå¹¶æ¨èæˆ‘ä»¬ä½¿ç”¨ <code>maven-publish</code> æ’ä»¶ <a href="https://developer.android.com/studio/build/maven-publish-plugin">ä¼ é€é—¨</a> å»ä¸Šä¼ ï¼Œä½†åœ¨å®é™…æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ä½¿ç”¨  <code>maven-publish</code> æ’ä»¶ä¸Šä¼ åˆ° JitPack ä¼šä½¿å¾—æ’ä»¶çš„ä¾èµ–åœ°å€ç‰¹åˆ«é•¿ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ã€‚è™½ç„¶ä¹‹å‰çš„æ’ä»¶è¢«æ ‡è¯†ä¸ºåºŸå¼ƒï¼Œä½†æ˜¯å¹¶ä¸å¦¨ç¢æˆ‘ä»¬ä½¿ç”¨</p><p>ç»è¿‡ä¸Šé¢çš„ä¸¤æ­¥ï¼Œæˆ‘ä»¬å°±æœ‰äº† groupId å’Œ artifactIdï¼Œå› ä¸ºæˆ‘çš„é¡¹ç›®åç§°å«ï¼šGradleDemoï¼Œé‚£ä¹ˆæ­¤æ—¶çš„ä¾èµ–å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">com.github.<span class="hljs-attr">sweetying520:</span>GradleDemo<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆç°åœ¨å°±è¿˜å·® version äº†ï¼Œè¦è·å– version ï¼Œæˆ‘ä»¬å°±å…ˆè¦æŠŠé¡¹ç›®ä¸Šä¼ è‡³ Githubï¼Œä¸Šä¼ æˆåŠŸåï¼Œæ¥ç€è¿›è¡Œä¸‹ä¸€æ­¥</p><h4 id="3ã€æ‰“å¼€é¡¹ç›®çš„-Github-ä¸»é¡µï¼Œåˆ›å»ºä¸€ä¸ª-Release-æˆ–-Tag"><a href="#3ã€æ‰“å¼€é¡¹ç›®çš„-Github-ä¸»é¡µï¼Œåˆ›å»ºä¸€ä¸ª-Release-æˆ–-Tag" class="headerlink" title="3ã€æ‰“å¼€é¡¹ç›®çš„ Github ä¸»é¡µï¼Œåˆ›å»ºä¸€ä¸ª Release æˆ– Tag"></a>3ã€æ‰“å¼€é¡¹ç›®çš„ Github ä¸»é¡µï¼Œåˆ›å»ºä¸€ä¸ª Release æˆ– Tag</h4><p>è¿™ä¸€æ­¥å»ºè®®å‚è€ƒæˆ‘ä¹‹å‰å†™çš„é‚£ç¯‡æ–‡ç«   <a href="https://juejin.cn/post/6916061679079915528#heading-9">ä¼ é€é—¨</a> </p><h4 id="4ã€å°†é¡¹ç›®ä»“åº“-Github-åœ°å€æäº¤åˆ°-JitPack"><a href="#4ã€å°†é¡¹ç›®ä»“åº“-Github-åœ°å€æäº¤åˆ°-JitPack" class="headerlink" title="4ã€å°†é¡¹ç›®ä»“åº“ Github åœ°å€æäº¤åˆ° JitPack"></a>4ã€å°†é¡¹ç›®ä»“åº“ Github åœ°å€æäº¤åˆ° <a href="https://link.juejin.cn/?target=https://jitpack.io/">JitPack</a></h4><blockquote><p>1ã€æ‰“å¼€ <a href="https://link.juejin.cn/?target=https://jitpack.io/">JitPack</a> ï¼Œå¹¶ç™»é™†ï¼ˆä½¿ç”¨ä½ è‡ªå·±çš„ Github è´¦å·ç™»é™†å³å¯ï¼‰</p><p>2ã€å°†ä½ é¡¹ç›®ä»“åº“ Github åœ°å€æ”¾å…¥æœç´¢æ ï¼Œç‚¹å‡»look upï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè¿›è¡Œç¼–è¯‘ï¼Œå¦‚æœç¼–è¯‘æˆåŠŸï¼Œé‚£ä¹ˆå°±è¯æ˜ä½ æˆåŠŸçš„å°†æ’ä»¶ä¸Šä¼ åˆ° JitPack äº†</p></blockquote><p>ä¸‹é¢çš„ Version æ˜¯æˆ‘ä¹‹å‰ç”Ÿæˆçš„ä¸€äº›ç‰ˆæœ¬</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/48b574c3c1174a9098bafd64fc3a3af1~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210723115443338"></p><p>ç¼–è¯‘å®Œæˆå JitPack ä¼šè‡ªåŠ¨ç»™ä½ ç”Ÿæˆç›¸å…³çš„é…ç½®ä¿¡æ¯ï¼ŒæŒ‰ç…§å¦‚ä¸‹é…ç½®ï¼Œé…ç½®ä½ çš„é¡¹ç›®å³å¯</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33197a69700d4b1fa42086d21956e364~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210723115812720"></p><p><strong>æ³¨æ„ï¼š</strong> ä¸Šè¿°æˆªå›¾æ˜¯æ•™æˆ‘ä»¬å¦‚ä½•å¼•ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œè€Œæˆ‘ä»¬ä¸Šä¼ çš„æ˜¯æ’ä»¶ï¼Œå› æ­¤æŒ‰ç…§æ’ä»¶çš„ä¾èµ–å¼•å…¥è§„åˆ™å³å¯ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨æ ¹ build.gradle ä¸‹</span><br><br>buildscript &#123;<br>    repositories &#123;<br>      <span class="hljs-comment">//...</span><br><br>        <span class="hljs-comment">//è¿œç¨‹ JitPack ä»“åº“åœ°å€</span><br>        maven &#123;<br>            url <span class="hljs-string">&#x27;https://jitpack.io&#x27;</span><br>        &#125;<br>    &#125;<br>    dependencies &#123;<br>      <span class="hljs-comment">//...</span><br>      <br>        <span class="hljs-comment">//å¼•å…¥æ’ä»¶ä¾èµ–</span><br>        classpath <span class="hljs-string">&#x27;com.github.sweetying520:GradleDemo:1.0.1&#x27;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨æ’ä»¶äº†</p><h4 id="5ã€å…³äºåç»­ç‰ˆæœ¬æ›´æ–°"><a href="#5ã€å…³äºåç»­ç‰ˆæœ¬æ›´æ–°" class="headerlink" title="5ã€å…³äºåç»­ç‰ˆæœ¬æ›´æ–°"></a>5ã€å…³äºåç»­ç‰ˆæœ¬æ›´æ–°</h4><p>1ã€å°†ä¿®æ”¹å¥½çš„ä¸œè¥¿ä¸Šä¼ åˆ° Github</p><p>2ã€æ‰“å¼€é¡¹ç›®çš„ Github ä¸»é¡µï¼Œåˆ›å»ºä¸€ä¸ª Release æˆ– Tagï¼ˆè¿™ä¸ªæ­¥éª¤å°±æ˜¯é‡å¤æ­¥éª¤3ï¼‰</p><p>3ã€å°†é¡¹ç›®çš„ä»“åº“æäº¤åˆ° <a href="https://link.juejin.cn/?target=https://jitpack.io/">JitPack</a>ï¼ˆè¿™ä¸ªæ­¥éª¤å°±æ˜¯é‡å¤æ­¥éª¤4ï¼‰</p><h2 id="äº”ã€æ’ä»¶è°ƒè¯•"><a href="#äº”ã€æ’ä»¶è°ƒè¯•" class="headerlink" title="äº”ã€æ’ä»¶è°ƒè¯•"></a>äº”ã€æ’ä»¶è°ƒè¯•</h2><p>æˆ‘ä»¬åœ¨å¼€å‘æ’ä»¶çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°å„ç§é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¯¹æ’ä»¶è°ƒè¯•å°±æ˜¾å¾—å°¤ä¸ºé‡è¦äº†ã€‚<strong>æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯æ‰“å° Log æ—¥å¿—</strong>ï¼Œä½†æ˜¯æ‰“å° Log æ—¥å¿—åŠŸèƒ½æ¯”è¾ƒæœ‰é™ï¼Œæ»¡è¶³ä¸äº†æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘ã€‚æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹å¼ºå¤§çš„ debug æ–¹å¼</p><p>ä»¥ä¸Šé¢ç¼–å†™çš„ buildSrc æ–¹å¼ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯¹å®ƒè¿›è¡Œä¸€ä¸ª debugï¼Œæ’ä»¶çš„è°ƒè¯•åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç§ï¼š</p><p>1ã€ç®€å•ç‰ˆè°ƒè¯•ï¼šç›´æ¥åœ¨ AndroidStudio æä¾›çš„ Gradle å¯è§†åŒ–ç•Œé¢ï¼Œæ‰¾åˆ°éœ€è¦è°ƒè¯•çš„ Taskï¼Œæ‰“å¼€å¯é€‰é¡¹ï¼Œé€‰æ‹© debug å³å¯</p><p>2ã€å¤æ‚ç‰ˆè°ƒè¯•ï¼šé€šè¿‡ Gradle å‘½ä»¤ç»“åˆä¸€äº›ç›¸å…³çš„é…ç½®å¼€å¯è°ƒè¯•åŠŸèƒ½</p><h3 id="1ï¼‰ã€ç®€å•ç‰ˆè°ƒè¯•"><a href="#1ï¼‰ã€ç®€å•ç‰ˆè°ƒè¯•" class="headerlink" title="1ï¼‰ã€ç®€å•ç‰ˆè°ƒè¯•"></a>1ï¼‰ã€ç®€å•ç‰ˆè°ƒè¯•</h3><p>ç›´æ¥åœ¨ AndroidStudio æä¾›çš„ Gradle å¯è§†åŒ–ç•Œé¢ï¼Œæ‰¾åˆ°éœ€è¦è°ƒè¯•çš„ Taskï¼Œæ‰“å¼€å¯é€‰é¡¹ï¼Œé€‰æ‹© debug å³å¯</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/beca96f53fb541ad946361f986bd4a6c~tplv-k3u1fbpfcp-watermark.image" alt="debug_gradle_simple_use.png"></p><p>æ¥ä¸‹æ¥çš„æ­¥éª¤å°±å’Œæˆ‘ä»¬è°ƒè¯• Java ä»£ç æ˜¯ä¸€æ ·çš„</p><p><strong>æ³¨æ„ï¼š</strong> æå‰æ‰“å¥½æ–­ç‚¹</p><p>è¿™ç§æ–¹å¼ä½¿ç”¨æå…¶ç®€å•ï¼Œæ¨èä½¿ç”¨</p><h3 id="2ï¼‰ã€å¤æ‚ç‰ˆè°ƒè¯•"><a href="#2ï¼‰ã€å¤æ‚ç‰ˆè°ƒè¯•" class="headerlink" title="2ï¼‰ã€å¤æ‚ç‰ˆè°ƒè¯•"></a>2ï¼‰ã€å¤æ‚ç‰ˆè°ƒè¯•</h3><p>é€šè¿‡ Gradle å‘½ä»¤ç»“åˆä¸€äº›ç›¸å…³çš„é…ç½®å¼€å¯è°ƒè¯•åŠŸèƒ½</p><h4 id="1ã€æ–°å¢ä¸€ä¸ª-Remote-ç±»å‹çš„-Configuration"><a href="#1ã€æ–°å¢ä¸€ä¸ª-Remote-ç±»å‹çš„-Configuration" class="headerlink" title="1ã€æ–°å¢ä¸€ä¸ª Remote ç±»å‹çš„ Configuration"></a>1ã€æ–°å¢ä¸€ä¸ª Remote ç±»å‹çš„ Configuration</h4><p>ç¬¬ä¸€æ­¥ï¼šç‚¹å‡»å›¾ä¸­çš„ Edit Configurationsâ€¦</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e5eb33347e0b4da49759f67c43601410~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722150428439" style="zoom:50%;" /><p>ç¬¬äºŒæ­¥ï¼šç‚¹å‡»å›¾ä¸­ 1 çš„ + å·ï¼Œé€‰æ‹© 2 </p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2272681c45044c77b9d67f62fd628372~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722150750481" style="zoom:50%;" /><p>ç¬¬ä¸‰æ­¥ï¼š1 ä¸­çš„åå­—éšæ„å–ï¼Œç„¶åç‚¹å‡» 2 ï¼Œå³å¯å®Œæˆ  Remote ç±»å‹ Configuration çš„åˆ›å»º</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/84ede40ea66c4915808bbc3b436742cc~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722151029556" style="zoom:50%;" /><p>ç¬¬å››æ­¥ï¼šåˆ‡æ¢åˆ°åˆšæ‰åˆ›å»ºçš„ erdai Configuration</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ff3fe29e49142bba44e9b949598b00a~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722151407226" style="zoom:50%;" /><h4 id="2ã€æ‰§è¡Œ-Gradle-å‘½ä»¤ï¼š-gradlew-éœ€è¦æ‰§è¡Œçš„Task-Dorg-gradle-debug-true-no-daemon"><a href="#2ã€æ‰§è¡Œ-Gradle-å‘½ä»¤ï¼š-gradlew-éœ€è¦æ‰§è¡Œçš„Task-Dorg-gradle-debug-true-no-daemon" class="headerlink" title="2ã€æ‰§è¡Œ Gradle å‘½ä»¤ï¼š./gradlew éœ€è¦æ‰§è¡Œçš„Task -Dorg.gradle.debug=true --no-daemon"></a>2ã€æ‰§è¡Œ Gradle å‘½ä»¤ï¼š<code>./gradlew éœ€è¦æ‰§è¡Œçš„Task -Dorg.gradle.debug=true --no-daemon</code></h4><p>ä»¥æ‰§è¡Œ assembleDebug è¿™ä¸ª task ä¸ºä¾‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">./gradlew assembleDebug -Dorg.gradle.debug=<span class="hljs-literal">true</span> --no-daemon<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬çš„å‘½ä»¤ä¼šè¿›å…¥ä¸€ä¸ªé”å®šçŠ¶æ€ï¼Œç­‰å¾…æˆ‘ä»¬è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8cd10b40fc3943b49ca49e382be442aa~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722152335257"></p><h4 id="3ã€æ‰“å¥½å›¾ä¸­-1-çš„æ–­ç‚¹ï¼Œç‚¹å‡»-2-çš„-debug-æŒ‰é’®ï¼Œå°±å¯ä»¥è¿›è¡Œæ„‰å¿«çš„è°ƒè¯•äº†"><a href="#3ã€æ‰“å¥½å›¾ä¸­-1-çš„æ–­ç‚¹ï¼Œç‚¹å‡»-2-çš„-debug-æŒ‰é’®ï¼Œå°±å¯ä»¥è¿›è¡Œæ„‰å¿«çš„è°ƒè¯•äº†" class="headerlink" title="3ã€æ‰“å¥½å›¾ä¸­ 1 çš„æ–­ç‚¹ï¼Œç‚¹å‡» 2 çš„ debug æŒ‰é’®ï¼Œå°±å¯ä»¥è¿›è¡Œæ„‰å¿«çš„è°ƒè¯•äº†"></a>3ã€æ‰“å¥½å›¾ä¸­ 1 çš„æ–­ç‚¹ï¼Œç‚¹å‡» 2 çš„ debug æŒ‰é’®ï¼Œå°±å¯ä»¥è¿›è¡Œæ„‰å¿«çš„è°ƒè¯•äº†</h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/379fcb2762e949beaab3dbe0f65e0204~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210722152553072"></p><p>æ¥ä¸‹æ¥çš„æ­¥éª¤å°±å’Œæˆ‘ä»¬è°ƒè¯• Java ä»£ç æ˜¯ä¸€æ ·çš„ã€‚è¿™ç§æ–¹å¼ç¨å¾®å¤æ‚ä¸€ç‚¹</p><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€è„šæœ¬æ’ä»¶çš„å®šä¹‰ä¸ä½¿ç”¨</p><p>2ã€å¯¹è±¡æ’ä»¶å®šä¹‰çš„ä¸‰ç§æ–¹å¼åŠå…·ä½“ä½¿ç”¨ï¼Œæ³¨æ„æ–‡ä¸­æåˆ°çš„ä¸€äº›ç»†èŠ‚ç‚¹</p><p>3ã€å‘å¸ƒ Gradle æ’ä»¶åˆ°è¿œç¨‹ä»“åº“ï¼šå…·ä½“ä»‹ç»äº†å¦‚ä½•å‘å¸ƒ Gradle æ’ä»¶åˆ° JitPack</p><p>4ã€å¦‚ä½•è°ƒè¯•æ’ä»¶ï¼Œç®€å•ç‰ˆè°ƒè¯•æ•ˆç‡é«˜</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®²è‡ªå®šä¹‰ç¬¬ä¸‰æ–¹æ’ä»¶å®æˆ˜åº”ç”¨ï¼Œæ•¬è¯·æœŸå¾…å§ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://juejin.cn/post/6844904135314128903">æ·±åº¦æ¢ç´¢ Gradle è‡ªåŠ¨åŒ–æ„å»ºæŠ€æœ¯ï¼ˆå››ã€è‡ªå®šä¹‰ Gradle æ’ä»¶)</a></p><p><a href="https://juejin.cn/post/6937940389496094751">Gradleå­¦ä¹ ç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šGradleæ’ä»¶</a></p><p><a href="https://juejin.cn/post/6956517422606057479#heading-1">è¡¥é½AndroidæŠ€èƒ½æ ‘ - ç©è½¬Gradleæ’ä»¶ </a></p><p><a href="https://juejin.cn/post/6985188709356273701">æˆ‘æƒ³è°ƒè¯•ä¸‹build.gradle | Gradle è°ƒè¯•</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>Gradle</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Gradle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gradle ç³»åˆ— ï¼ˆäºŒï¼‰ã€Gradle æŠ€æœ¯æ¢ç´¢</title>
    <link href="/2022/10/11/Gradle%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%BA%8C%EF%BC%89%E3%80%81Gradle%20%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%B4%A2/"/>
    <url>/2022/10/11/Gradle%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%BA%8C%EF%BC%89%E3%80%81Gradle%20%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%B4%A2/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210111023302.jpeg" alt="luc-dobigeon-BdvZQL0iebM-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>è¿™åˆæ˜¯ä¸€ä¸ªæ–°çš„ç³»åˆ—ï¼Œå…³äº Gradle å­¦ä¹ ï¼Œæˆ‘æ‰€ç†è§£çš„æµç¨‹å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f65d4a418c9f4c209d6eb3d26a452fba~tplv-k3u1fbpfcp-zoom-1.image" alt="Gradle_learning"></p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹ Gradle çš„ä¸€äº›åŸºç¡€æ¦‚å¿µåŠ Groovy è¯­æ³•è¿›è¡Œäº†è®²è§£ï¼Œå®Œæˆäº†ç¬¬ä¸€ä¸ªç¯èŠ‚ã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6939662617224937503">Gradle ç³»åˆ— ï¼ˆä¸€ï¼‰ã€Gradleç›¸å…³æ¦‚å¿µç†è§£ï¼ŒGroovyåŸºç¡€</a>ã€‚</p><p>ä»Šå¤©æˆ‘ä»¬ä¸»è¦ä»‹ç»ç¯èŠ‚äºŒï¼šç†Ÿæ‚‰ Gradle å¸¸ç”¨ APIï¼Œäº†è§£ Settingsï¼ŒProjectï¼ŒTask ç­‰ç­‰ã€‚</p><p><a href="https://github.com/sweetying520/GradleDemo">Github Demo åœ°å€</a> , å¤§å®¶å¯ä»¥ç»“åˆ demo ä¸€èµ·çœ‹ï¼Œæ•ˆæœæ æ æ»´ğŸº</p><p>ä¸‹é¢å°±æ­£å¼è¿›å…¥ Gradle çš„å­¦ä¹ </p><h2 id="ä¸€ã€Gradle-æ„å»ºæµç¨‹"><a href="#ä¸€ã€Gradle-æ„å»ºæµç¨‹" class="headerlink" title="ä¸€ã€Gradle æ„å»ºæµç¨‹"></a>ä¸€ã€Gradle æ„å»ºæµç¨‹</h2><h3 id="1ï¼‰ã€Gradle-æ„å»ºé˜¶æ®µ"><a href="#1ï¼‰ã€Gradle-æ„å»ºé˜¶æ®µ" class="headerlink" title="1ï¼‰ã€Gradle æ„å»ºé˜¶æ®µ"></a>1ï¼‰ã€Gradle æ„å»ºé˜¶æ®µ</h3><p>Gradle æ„å»ºæµç¨‹ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p><p>1ã€åˆå§‹åŒ–é˜¶æ®µ</p><p>2ã€é…ç½®é˜¶æ®µ</p><p>3ã€æ‰§è¡Œé˜¶æ®µ</p><h4 id="1ã€åˆå§‹åŒ–é˜¶æ®µ"><a href="#1ã€åˆå§‹åŒ–é˜¶æ®µ" class="headerlink" title="1ã€åˆå§‹åŒ–é˜¶æ®µ"></a>1ã€åˆå§‹åŒ–é˜¶æ®µ</h4><p>Gradle åˆå§‹åŒ–é˜¶æ®µä¸»è¦å°±æ˜¯æ‰§è¡Œ settings.gradle è„šæœ¬ï¼Œæ„å»º Project å¯¹è±¡</p><p>æˆ‘ä»¬ä½¿ç”¨ AndroidStudio æ–°å»ºä¸€ä¸ª Android é¡¹ç›®çš„æ—¶å€™ä¼šè‡ªåŠ¨ç”Ÿæˆ settings.gradle æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs groovy">rootProject.name = <span class="hljs-string">&quot;GradleDemo&quot;</span><br>include <span class="hljs-string">&#x27;:app&#x27;</span><br></code></pre></td></tr></table></figure><p>1ã€æŒ‡å®šé¡¹ç›®æ ¹ Project çš„åç§°</p><p>2ã€ä½¿ç”¨ include å¯¼å…¥ app å·¥ç¨‹</p><p>å®é™…ä¸Š settings.gradle å¯¹åº”ä¸€ä¸ª Settings å¯¹è±¡ï¼Œinclude å°±æ˜¯ Settings å¯¹è±¡ä¸‹çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å¼•ç”¨å“ªäº›å·¥ç¨‹éœ€è¦åŠ å…¥æ„å»ºã€‚ç„¶å Gradle ä¼šä¸ºæ¯ä¸ªå¸¦æœ‰ build.gradle è„šæœ¬æ–‡ä»¶çš„å·¥ç¨‹æ„å»ºä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„ Project å¯¹è±¡</p><h5 id="1ã€include-æ‰©å±•"><a href="#1ã€include-æ‰©å±•" class="headerlink" title="1ã€include æ‰©å±•"></a>1ã€include æ‰©å±•</h5><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ include + project æ–¹æ³•å¼•ç”¨ä»»ä½•ä½ç½®ä¸‹çš„å·¥ç¨‹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs groovy">include <span class="hljs-string">&#x27;:test&#x27;</span><br>project(<span class="hljs-string">&#x27;:test&#x27;</span>).projectDir = file(<span class="hljs-string">&#x27;å½“å‰å·¥ç¨‹çš„ç»å¯¹è·¯å¾„&#x27;</span>)<br></code></pre></td></tr></table></figure><p>é€šå¸¸æˆ‘ä¼šä½¿ç”¨è¿™ç§æ–¹å¼å¼•ç”¨è‡ªå·±å†™çš„åº“è¿›è¡Œè°ƒè¯•ï¼Œéå¸¸çš„æ–¹ä¾¿</p><p>ä½†æœ‰çš„æ—¶å€™ä¼šé‡åˆ°åŒæ—¶å¼•å…¥äº† AAR å’Œæºç çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ include + projectï¼Œç»“åˆä¸€äº›å…¶ä»–çš„é…ç½®ï¼Œæ¥å®ç° AAR å’Œæºç çš„å¿«é€Ÿåˆ‡æ¢ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//æ­¥éª¤ä¸€ï¼šåœ¨ settings.gradle ä¸­å¼•å…¥æºç å·¥ç¨‹</span><br>include <span class="hljs-string">&#x27;:test&#x27;</span><br>project(<span class="hljs-string">&#x27;:test&#x27;</span>).projectDir = file(<span class="hljs-string">&#x27;å½“å‰å·¥ç¨‹çš„ç»å¯¹è·¯å¾„&#x27;</span>)<br><br><span class="hljs-comment">//æ­¥éª¤äºŒï¼šåœ¨æ ¹ build.gradle ä¸‹è¿›è¡Œå¦‚ä¸‹é…ç½®</span><br>allprojects &#123;<br>    configurations.all &#123;<br>        resolutionStrategy &#123;<br>            dependencySubstitution &#123;<br>                substitute module(<span class="hljs-string">&quot;com.dream:test&quot;</span>) with project(<span class="hljs-string">&#x27;:test&#x27;</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€Settings"><a href="#2ã€Settings" class="headerlink" title="2ã€Settings"></a>2ã€Settings</h5><p>å…³äº Settings çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå¦‚ä¸‹å›¾ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/353d7348729c4e50bd3ebb0ed107c623~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210707215114352" style="zoom:50%;" /><p>ç»“åˆå®˜ç½‘æä¾›çš„æ–‡æ¡£ <a href="https://docs.gradle.org/current/javadoc/org/gradle/api/initialization/Settings.html">ä¼ é€é—¨</a> å»æŸ¥çœ‹ï¼Œæ•ˆæœæ æ çš„ğŸ˜„</p><h4 id="2ã€é…ç½®é˜¶æ®µ"><a href="#2ã€é…ç½®é˜¶æ®µ" class="headerlink" title="2ã€é…ç½®é˜¶æ®µ"></a>2ã€é…ç½®é˜¶æ®µ</h4><p>Gradle é…ç½®é˜¶æ®µä¸»è¦å°±æ˜¯è§£æ Project å¯¹è±¡(build.gradle è„šæœ¬æ–‡ä»¶)ï¼Œæ„å»º Task æœ‰å‘æ— ç¯å›¾</p><p>é…ç½®é˜¶æ®µä¼šæ‰§è¡Œçš„ä»£ç ï¼š<strong>é™¤ Task çš„ Action ä¸­ç¼–å†™çš„ä»£ç éƒ½ä¼šè¢«æ‰§è¡Œ</strong>ï¼Œä¸æ‡‚ Action çš„ç»§ç»­å¾€ä¸‹çœ‹ï¼Œåé¢ä¼šè®²åˆ°ã€‚å¦‚ï¼š</p><p>1ã€build.gradle ä¸­çš„å„ç§è¯­å¥</p><p>2ã€Task é…ç½®æ®µè¯­å¥</p><p>é…ç½®é˜¶æ®µå®Œæˆåï¼Œæ•´ä¸ªå·¥ç¨‹çš„ Task ä¾èµ–å…³ç³»éƒ½ç¡®å®šäº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Gradle  å¯¹è±¡çš„ getTaskGraph æ–¹æ³•è®¿é—® Task ,å¯¹åº”çš„ç±»ä¸º TaskExecutionGraph ï¼Œå…³äº TaskExecutionGraph API æ–‡æ¡£ <a href="https://docs.gradle.org/current/javadoc/org/gradle/api/execution/TaskExecutionGraph.html">ä¼ é€é—¨</a></p><p><strong>æ³¨æ„ï¼š</strong> æ‰§è¡Œä»»ä½• Gradle å‘½ä»¤ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µå’Œé…ç½®é˜¶æ®µçš„ä»£ç éƒ½ä¼šè¢«æ‰§è¡Œ</p><h4 id="3ã€æ‰§è¡Œé˜¶æ®µ"><a href="#3ã€æ‰§è¡Œé˜¶æ®µ" class="headerlink" title="3ã€æ‰§è¡Œé˜¶æ®µ"></a>3ã€æ‰§è¡Œé˜¶æ®µ</h4><p>Gradle æ‰§è¡Œé˜¶æ®µä¸»è¦å°±æ˜¯æ‰§è¡Œ Task åŠå…¶ä¾èµ–çš„ Task</p><h3 id="2ï¼‰ã€Gradle-ç”Ÿå‘½å‘¨æœŸ-Hook-ç‚¹"><a href="#2ï¼‰ã€Gradle-ç”Ÿå‘½å‘¨æœŸ-Hook-ç‚¹" class="headerlink" title="2ï¼‰ã€Gradle ç”Ÿå‘½å‘¨æœŸ Hook ç‚¹"></a>2ï¼‰ã€Gradle ç”Ÿå‘½å‘¨æœŸ Hook ç‚¹</h3><p>å¼•ç”¨ joe_H ä¸€å¼ å®Œæ•´çš„ Gradle ç”Ÿå‘½å‘¨æœŸå›¾ï¼Œå¦‚ä¸‹ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/403a1114a8ad4d8bb725224a70dedc5a~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210704212912830" style="zoom:50%;" /><p>ä¸Šå›¾å¯¹ Gradle ç”Ÿå‘½å‘¨æœŸæ€»ç»“çš„å¾ˆåˆ°ä½ï¼Œæˆ‘ä»¬è§£æä¸€æ³¢ï¼š</p><p><strong>æ³¨æ„</strong>ï¼šGradle æ‰§è¡Œè„šæœ¬æ–‡ä»¶çš„æ—¶å€™ä¼šç”Ÿæˆå¯¹åº”çš„å®ä¾‹ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ä¸‰ç§å¯¹è±¡ï¼š</p><blockquote><p>1ã€Gradle å¯¹è±¡ï¼šåœ¨é¡¹ç›®åˆå§‹åŒ–æ—¶æ„å»ºï¼Œå…¨å±€å•ä¾‹å­˜åœ¨ï¼Œåªæœ‰è¿™ä¸€ä¸ªå¯¹è±¡</p><p>2ã€Project å¯¹è±¡ï¼šæ¯ä¸€ä¸ª build.gradle éƒ½ä¼šè½¬æ¢æˆä¸€ä¸ª Project å¯¹è±¡</p><p>3ã€Settings å¯¹è±¡ï¼šSeetings.gradle ä¼šè½¬å˜æˆä¸€ä¸ª Seetings å¯¹è±¡</p></blockquote><p>1ã€Gradle åœ¨å„ä¸ªé˜¶æ®µéƒ½æä¾›äº†ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œåœ¨æ·»åŠ ç›‘å¬å™¨çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼š<strong>ç›‘å¬å™¨è¦åœ¨ç”Ÿå‘½å‘¨æœŸå›è°ƒä¹‹å‰æ·»åŠ ï¼Œå¦åˆ™ä¼šå¯¼è‡´æœ‰äº›å›è°ƒæ”¶ä¸åˆ°</strong></p><p>2ã€Gradle åˆå§‹åŒ–é˜¶æ®µ</p><ul><li>åœ¨ settings.gradle æ‰§è¡Œå®Œåï¼Œä¼šå›è°ƒ Gradle å¯¹è±¡çš„ settingsEvaluated æ–¹æ³•</li><li>åœ¨æ„å»ºæ‰€æœ‰å·¥ç¨‹ build.gradle å¯¹åº”çš„ Project å¯¹è±¡åï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ–é˜¶æ®µå®Œæ¯•ï¼Œä¼šå›è°ƒ Gradle å¯¹è±¡çš„ projectsLoaded æ–¹æ³•</li></ul><p>3ã€Gradle é…ç½®é˜¶æ®µï¼š</p><ul><li>Gradle ä¼šå¾ªç¯æ‰§è¡Œæ¯ä¸ªå·¥ç¨‹çš„ build.gradle è„šæœ¬æ–‡ä»¶</li><li>åœ¨æ‰§è¡Œå½“å‰å·¥ç¨‹ build.gradle å‰ï¼Œä¼šå›è°ƒ Gradle å¯¹è±¡çš„ beforeProject æ–¹æ³•å’Œå½“å‰ Project å¯¹è±¡çš„ beforeEvaluate æ–¹æ³•</li><li>åœ¨æ‰§è¡Œå½“å‰å·¥ç¨‹ build.gradle åï¼Œä¼šå›è°ƒ Gradle å¯¹è±¡çš„ afterProject æ–¹æ³•å’Œå½“å‰ Project å¯¹è±¡çš„ afterEvaluate æ–¹æ³•</li><li>åœ¨æ‰€æœ‰å·¥ç¨‹çš„ build.gradle æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå›è°ƒ Gradle å¯¹è±¡çš„ projectsEvaluated æ–¹æ³•</li><li>åœ¨æ„å»º Task ä¾èµ–æœ‰å‘æ— ç¯å›¾åï¼Œä¹Ÿå°±æ˜¯é…ç½®é˜¶æ®µå®Œæ¯•ï¼Œä¼šå›è°ƒ TaskExecutionGraph å¯¹è±¡çš„ whenReady æ–¹æ³•</li></ul><p><strong>æ³¨æ„</strong>ï¼š Gradle å¯¹è±¡çš„ beforeProjectï¼ŒafterProject æ–¹æ³•å’Œ Project å¯¹è±¡çš„ beforeEvaluate ï¼ŒafterEvaluate æ–¹æ³•å›è°ƒæ—¶æœºæ˜¯ä¸€è‡´çš„ï¼ŒåŒºåˆ«åœ¨äºï¼š</p><blockquote><p>1ã€Gradle å¯¹è±¡çš„ beforeProjectï¼ŒafterProject æ–¹æ³•é’ˆå¯¹é¡¹ç›®ä¸‹çš„æ‰€æœ‰å·¥ç¨‹ï¼Œå³æ¯ä¸ªå·¥ç¨‹çš„ build.gradle æ‰§è¡Œå‰åéƒ½ä¼šæ”¶åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•çš„å›è°ƒ</p><p>2ã€ Project å¯¹è±¡çš„ beforeEvaluate ï¼ŒafterEvaluate æ–¹æ³•é’ˆå¯¹å½“å‰å·¥ç¨‹ï¼Œå³å½“å‰å·¥ç¨‹çš„ build.gradle æ‰§è¡Œå‰åä¼šæ”¶åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•çš„å›è°ƒ</p></blockquote><p>4ã€æ‰§è¡Œé˜¶æ®µï¼š</p><ul><li>Gradle ä¼šå¾ªç¯æ‰§è¡Œ Task åŠå…¶ä¾èµ–çš„ Task</li><li>åœ¨å½“å‰ Task æ‰§è¡Œä¹‹å‰ï¼Œä¼šå›è°ƒ TaskExecutionGraph å¯¹è±¡çš„ beforeTask æ–¹æ³•</li><li>åœ¨å½“å‰ Task æ‰§è¡Œä¹‹åï¼Œä¼šå›è°ƒ TaskExecutionGraph å¯¹è±¡çš„ afterTask æ–¹æ³•</li></ul><p>5ã€å½“æ‰€æœ‰çš„ Task æ‰§è¡Œå®Œæ¯•åï¼Œä¼šå›è°ƒ Gradle å¯¹è±¡çš„ buildFinish æ–¹æ³•</p><p>äº†è§£äº† Gradle ç”Ÿå‘½å‘¨æœŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ·»åŠ  Hookã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬å¯ä»¥æ‰“å° Gradle æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå„ä¸ªé˜¶æ®µåŠå„ä¸ª Task çš„è€—æ—¶</p><h3 id="3ï¼‰ã€æ‰“å°-Gradle-æ„å»ºå„ä¸ªé˜¶æ®µåŠå„ä¸ªä»»åŠ¡çš„è€—æ—¶"><a href="#3ï¼‰ã€æ‰“å°-Gradle-æ„å»ºå„ä¸ªé˜¶æ®µåŠå„ä¸ªä»»åŠ¡çš„è€—æ—¶" class="headerlink" title="3ï¼‰ã€æ‰“å° Gradle æ„å»ºå„ä¸ªé˜¶æ®µåŠå„ä¸ªä»»åŠ¡çš„è€—æ—¶"></a>3ï¼‰ã€æ‰“å° Gradle æ„å»ºå„ä¸ªé˜¶æ®µåŠå„ä¸ªä»»åŠ¡çš„è€—æ—¶</h3><p>åœ¨ settings.gradle æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åˆå§‹åŒ–é˜¶æ®µå¼€å§‹æ—¶é—´</span><br><span class="hljs-type">long</span> beginOfSetting = System.currentTimeMillis()<br><span class="hljs-comment">//é…ç½®é˜¶æ®µå¼€å§‹æ—¶é—´</span><br><span class="hljs-keyword">def</span> beginOfConfig<br><span class="hljs-comment">//é…ç½®é˜¶æ®µæ˜¯å¦å¼€å§‹äº†ï¼Œåªæ‰§è¡Œä¸€æ¬¡</span><br><span class="hljs-keyword">def</span> configHasBegin = <span class="hljs-literal">false</span><br><span class="hljs-comment">//å­˜æ”¾æ¯ä¸ª build.gradle æ‰§è¡Œä¹‹å‰çš„æ—¶é—´</span><br><span class="hljs-keyword">def</span> beginOfProjectConfig = <span class="hljs-keyword">new</span> HashMap()<br><span class="hljs-comment">//æ‰§è¡Œé˜¶æ®µå¼€å§‹æ—¶é—´</span><br><span class="hljs-keyword">def</span> beginOfTaskExecute<br><span class="hljs-comment">//åˆå§‹åŒ–é˜¶æ®µæ‰§è¡Œå®Œæ¯•</span><br>gradle.projectsLoaded &#123;<br>    println <span class="hljs-string">&quot;åˆå§‹åŒ–æ€»è€—æ—¶ $&#123;System.currentTimeMillis() - beginOfSetting&#125; ms&quot;</span><br>&#125;<br><br><span class="hljs-comment">//build.gradle æ‰§è¡Œå‰</span><br>gradle.beforeProject &#123;Project project -&gt;<br>    <span class="hljs-keyword">if</span>(!configHasBegin)&#123;<br>        configHasBegin = <span class="hljs-literal">true</span><br>        beginOfConfig = System.currentTimeMillis()<br>    &#125;<br>    beginOfProjectConfig.put(project,System.currentTimeMillis())<br>&#125;<br><br><span class="hljs-comment">//build.gradle æ‰§è¡Œå</span><br>gradle.afterProject &#123;Project project -&gt;<br>    <span class="hljs-keyword">def</span> begin = beginOfProjectConfig.get(project)<br>    println <span class="hljs-string">&quot;é…ç½®é˜¶æ®µï¼Œ$project è€—æ—¶ï¼š$&#123;System.currentTimeMillis() - begin&#125; ms&quot;</span><br>&#125;<br><br><span class="hljs-comment">//é…ç½®é˜¶æ®µå®Œæ¯•</span><br>gradle.taskGraph.whenReady &#123;<br>    println <span class="hljs-string">&quot;é…ç½®é˜¶æ®µæ€»è€—æ—¶ï¼š$&#123;System.currentTimeMillis() - beginOfConfig&#125; ms&quot;</span><br>    beginOfTaskExecute = System.currentTimeMillis()<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œé˜¶æ®µ</span><br>gradle.taskGraph.beforeTask &#123;Task task -&gt;<br>    task.doFirst &#123;<br>        task.ext.beginOfTask = System.currentTimeMillis()<br>    &#125;<br><br>    task.doLast &#123;<br>        println <span class="hljs-string">&quot;æ‰§è¡Œé˜¶æ®µï¼Œ$task è€—æ—¶ï¼š$&#123;System.currentTimeMillis() - task.ext.beginOfTask&#125; ms&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œé˜¶æ®µå®Œæ¯•</span><br>gradle.buildFinished &#123;<br>    println <span class="hljs-string">&quot;æ‰§è¡Œé˜¶æ®µæ€»è€—æ—¶ï¼š$&#123;System.currentTimeMillis() - beginOfTaskExecute&#125;&quot;</span><br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ Gradle å‘½ä»¤</span><br>./gradlew clean<br><br><span class="hljs-comment">//æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</span><br>åˆå§‹åŒ–æ€»è€—æ—¶ <span class="hljs-number">140</span> ms<br><br>&gt; Configure <span class="hljs-attr">project :</span><br>é…ç½®é˜¶æ®µï¼Œroot project <span class="hljs-string">&#x27;GradleDemo&#x27;</span> è€—æ—¶ï¼š<span class="hljs-number">1181</span> ms<br><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>é…ç½®é˜¶æ®µï¼Œproject <span class="hljs-string">&#x27;:app&#x27;</span> è€—æ—¶ï¼š<span class="hljs-number">1122</span> ms<br>é…ç½®é˜¶æ®µæ€»è€—æ—¶ï¼š<span class="hljs-number">2735</span> ms<br><br>&gt; <span class="hljs-attr">Task :</span>clean<br>æ‰§è¡Œé˜¶æ®µï¼Œtask <span class="hljs-string">&#x27;:clean&#x27;</span> è€—æ—¶ï¼š<span class="hljs-number">0</span> ms<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>clean<br>æ‰§è¡Œé˜¶æ®µï¼Œtask <span class="hljs-string">&#x27;:app:clean&#x27;</span> è€—æ—¶ï¼š<span class="hljs-number">1</span> ms<br>æ‰§è¡Œé˜¶æ®µæ€»è€—æ—¶ï¼š<span class="hljs-number">325</span><br></code></pre></td></tr></table></figure><p>äº†è§£äº† Gradle çš„ä¸‰ä¸ªé˜¶æ®µåŠç”Ÿå‘½å‘¨æœŸï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å­¦ä¹  Gradle çš„ä¸€äº›æ ¸å¿ƒ API</p><h2 id="äºŒã€Project-ä»‹ç»"><a href="#äºŒã€Project-ä»‹ç»" class="headerlink" title="äºŒã€Project ä»‹ç»"></a>äºŒã€Project ä»‹ç»</h2><p>å¯¹äºä¸€ä¸ª Android é¡¹ç›®ï¼Œbuild.gradle è„šæœ¬æ–‡ä»¶æ˜¯æˆ‘ä»¬ç»å¸¸æ“ä½œçš„æ–‡ä»¶ä¹‹ä¸€ï¼Œè€Œæ¯ä¸ª build.gradle å°±å¯¹åº”äº†ä¸€ä¸ª Project å¯¹è±¡ï¼Œå› æ­¤å­¦ä¹ å¥½   Project å¯¹åº”çš„ API èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„å»æ“ä½œ build.gradle è„šæœ¬æ–‡ä»¶, åŒæ—¶ä¹Ÿèƒ½çœ‹æ‡‚å¤§ä½¬ä»¬æ‰€å†™çš„ä¸€äº›é…ç½®è¯­å¥ã€‚</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9bc9ab568af4fb2af66bcb398926898~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210718164127432" style="zoom:50%;" /><p>é¦–å…ˆçœ‹ä¸€çœ¼æˆ‘çš„é¡¹ç›®ç»“æ„ï¼Œåç»­å°±æ˜¯åŸºäºå®ƒæ¥åšæ¼”ç¤º</p><p><strong>æ³¨æ„</strong>ï¼š</p><p>1ã€ä¸‹é¢æ‰€æ¼”ç¤ºçš„ API éƒ½æ˜¯ä¸€äº›å¸¸ç”¨çš„ APIï¼Œå¯¹ API ä½¿ç”¨æœ‰ç–‘é—®çš„å¯ä»¥å»æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£</p><p>2ã€API çš„æ¼”ç¤ºå¦‚æœæ²¡åšç‰¹æ®Šè¯´æ˜ï¼Œåˆ™æ˜¯åœ¨ app çš„ build.gradle æ–‡ä»¶ä¸‹æ“ä½œçš„</p><h3 id="1ï¼‰ã€Project-API"><a href="#1ï¼‰ã€Project-API" class="headerlink" title="1ï¼‰ã€Project API"></a>1ï¼‰ã€Project API</h3><p><a href="https://docs.gradle.org/current/javadoc/org/gradle/api/Project.html">Project API æ–‡æ¡£</a>ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ API</p><h4 id="1ã€getRootProject-æ–¹æ³•"><a href="#1ã€getRootProject-æ–¹æ³•" class="headerlink" title="1ã€getRootProject æ–¹æ³•"></a>1ã€getRootProject æ–¹æ³•</h4><p>è·å–æ ¹ Project å¯¹è±¡</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy">println getRootProject()<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>root project <span class="hljs-string">&#x27;GradleDemo&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="2ã€getRootDir-æ–¹æ³•"><a href="#2ã€getRootDir-æ–¹æ³•" class="headerlink" title="2ã€getRootDir æ–¹æ³•"></a>2ã€getRootDir æ–¹æ³•</h4><p>è·å–æ ¹ç›®å½•æ–‡ä»¶å¤¹è·¯å¾„</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy">println getRootDir()<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br><span class="hljs-regexp">/Users/</span>zhouying<span class="hljs-regexp">/learning/</span>GradleDemo<br></code></pre></td></tr></table></figure><h4 id="3ã€getBuildDir-æ–¹æ³•"><a href="#3ã€getBuildDir-æ–¹æ³•" class="headerlink" title="3ã€getBuildDir æ–¹æ³•"></a>3ã€getBuildDir æ–¹æ³•</h4><p>è·å–å½“å‰ Project çš„ build æ–‡ä»¶å¤¹è·¯å¾„</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy">println getBuildDir()<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br><span class="hljs-regexp">/Users/</span>zhouying<span class="hljs-regexp">/learning/</span>GradleDemo<span class="hljs-regexp">/app/</span>build<br></code></pre></td></tr></table></figure><h4 id="4ã€getParent-æ–¹æ³•"><a href="#4ã€getParent-æ–¹æ³•" class="headerlink" title="4ã€getParent æ–¹æ³•"></a>4ã€getParent æ–¹æ³•</h4><p>è·å–å½“å‰çˆ¶ Project å¯¹è±¡</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy">println getParent()<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>root project <span class="hljs-string">&#x27;GradleDemo&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="5ã€getAllprojects-æ–¹æ³•"><a href="#5ã€getAllprojects-æ–¹æ³•" class="headerlink" title="5ã€getAllprojects æ–¹æ³•"></a>5ã€getAllprojects æ–¹æ³•</h4><p>è·å–å½“å‰ Project åŠå…¶å­ Project å¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª Set é›†åˆ</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨æ ¹å·¥ç¨‹çš„ build.gradle æ–‡ä»¶ä¸‹</span><br>println getAllprojects()<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span><br>[root project <span class="hljs-string">&#x27;GradleDemo&#x27;</span>, project <span class="hljs-string">&#x27;:app&#x27;</span>]<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å…¶é—­åŒ…çš„å½¢å¼</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs groovy">allprojects &#123;<br>    println it<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span><br>root project <span class="hljs-string">&#x27;GradleDemo&#x27;</span><br>project <span class="hljs-string">&#x27;:app&#x27;</span><br><br><span class="hljs-comment">//æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨é—­åŒ…çš„è¯­æ³•åœ¨æ ¹ build.gradle ä¸‹è¿›è¡Œç›¸å…³çš„é…ç½®ï¼Œå¦‚ä¸‹ï¼š</span><br>allprojects &#123;<br>    repositories &#123;<br>        google()<br>        mavenCentral()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šæ ¹ Project ä¸å…¶å­ Project ç»„æˆäº†ä¸€ä¸ªæ ‘å½¢ç»“æ„ï¼Œä½†è¿™é¢—æ ‘çš„é«˜åº¦ä¹Ÿä»…ä»…è¢«é™å®šä¸ºäº†ä¸¤å±‚</p><h4 id="6ã€getSubprojects-æ–¹æ³•"><a href="#6ã€getSubprojects-æ–¹æ³•" class="headerlink" title="6ã€getSubprojects æ–¹æ³•"></a>6ã€getSubprojects æ–¹æ³•</h4><p>è·å–å½“å‰ Project ä¸‹çš„æ‰€æœ‰å­ Project å¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª Set é›†åˆ</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨æ ¹å·¥ç¨‹çš„ build.gradle æ–‡ä»¶ä¸‹</span><br>println getSubprojects()<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span><br>[project <span class="hljs-string">&#x27;:app&#x27;</span>]<br></code></pre></td></tr></table></figure><p>åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶é—­åŒ…çš„å½¢å¼</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs groovy">subprojects &#123;<br>    println it<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span><br>project <span class="hljs-string">&#x27;:app&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="7ã€apply-ç³»åˆ—æ–¹æ³•"><a href="#7ã€apply-ç³»åˆ—æ–¹æ³•" class="headerlink" title="7ã€apply ç³»åˆ—æ–¹æ³•"></a>7ã€apply ç³»åˆ—æ–¹æ³•</h4><p>å¼•ç”¨æ’ä»¶</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å¼•ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶</span><br>apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.android.application&#x27;</span><br><br><span class="hljs-comment">//å¼•ç”¨è„šæœ¬æ–‡ä»¶æ’ä»¶</span><br>apply <span class="hljs-attr">from:</span> <span class="hljs-string">&#x27;config.gradle&#x27;</span><br></code></pre></td></tr></table></figure><h4 id="8ã€configurations-é—­åŒ…"><a href="#8ã€configurations-é—­åŒ…" class="headerlink" title="8ã€configurations é—­åŒ…"></a>8ã€configurations é—­åŒ…</h4><p>ç¼–å†™ Project ä¸€äº›ç›¸å…³çš„é…ç½®ï¼Œå¦‚å…¨å±€ç§»é™¤æŸä¸ªä¾èµ–</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs groovy">configurations &#123;<br>    all*.exclude <span class="hljs-attr">group:</span> <span class="hljs-string">&#x27;ç»„å&#x27;</span>, <span class="hljs-attr">module:</span> <span class="hljs-string">&#x27;æ¨¡å—å&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="9ã€project-ç³»åˆ—æ–¹æ³•"><a href="#9ã€project-ç³»åˆ—æ–¹æ³•" class="headerlink" title="9ã€project ç³»åˆ—æ–¹æ³•"></a>9ã€project ç³»åˆ—æ–¹æ³•</h4><p>æŒ‡å®šå·¥ç¨‹å®ä¾‹ï¼Œç„¶ååœ¨é—­åŒ…ä¸­å¯¹å…¶è¿›è¡Œç›¸å…³çš„é…ç½®</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs groovy">project(<span class="hljs-string">&quot;app&quot;</span>) &#123;<br>    apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.android.application&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€æ‰©å±•å±æ€§"><a href="#2ï¼‰ã€æ‰©å±•å±æ€§" class="headerlink" title="2ï¼‰ã€æ‰©å±•å±æ€§"></a>2ï¼‰ã€æ‰©å±•å±æ€§</h3><p>æ‰©å±•å±æ€§ä½œç”¨ï¼šæ–¹ä¾¿æˆ‘ä»¬å…¨å±€çš„ä¸€ä¸ªä½¿ç”¨ã€‚ç±»ä¼¼ Java ä¸­ï¼Œåœ¨å·¥å…·ç±»é‡Œé¢å®šä¹‰é™æ€æ–¹æ³•</p><h4 id="1ã€æ‰©å±•å±æ€§å®šä¹‰"><a href="#1ã€æ‰©å±•å±æ€§å®šä¹‰" class="headerlink" title="1ã€æ‰©å±•å±æ€§å®šä¹‰"></a>1ã€æ‰©å±•å±æ€§å®šä¹‰</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥å®šä¹‰æ‰©å±•å±æ€§ï¼š</p><p>1ã€é€šè¿‡ <strong>ext</strong> å…³é”®å­—å®šä¹‰æ‰©å±•å±æ€§</p><p>2ã€åœ¨ <strong>gradle.properties</strong> ä¸‹å®šä¹‰æ‰©å±•å±æ€§</p><h5 id="1ã€é€šè¿‡-ext-å…³é”®å­—å®šä¹‰æ‰©å±•å±æ€§"><a href="#1ã€é€šè¿‡-ext-å…³é”®å­—å®šä¹‰æ‰©å±•å±æ€§" class="headerlink" title="1ã€é€šè¿‡ ext å…³é”®å­—å®šä¹‰æ‰©å±•å±æ€§"></a>1ã€é€šè¿‡ ext å…³é”®å­—å®šä¹‰æ‰©å±•å±æ€§</h5><p>é€šè¿‡ ext å®šä¹‰æ‰©å±•å±æ€§çš„è¯­æ³•æœ‰ä¸¤ç§ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å½“å‰åœ¨æ ¹ build.gradle ä¸‹</span><br><span class="hljs-comment">//æ–¹å¼1ï¼šext.å±æ€§å</span><br>ext.test = <span class="hljs-string">&#x27;erdai666&#x27;</span><br><br><span class="hljs-comment">//æ–¹å¼2ï¼šext åé¢æ¥ä¸Šä¸€ä¸ªé—­åŒ…</span><br>ext&#123;<br>  test1 = <span class="hljs-string">&#x27;erdai777&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2ã€åœ¨-gradle-properties-ä¸‹å®šä¹‰æ‰©å±•å±æ€§"><a href="#2ã€åœ¨-gradle-properties-ä¸‹å®šä¹‰æ‰©å±•å±æ€§" class="headerlink" title="2ã€åœ¨ gradle.properties ä¸‹å®šä¹‰æ‰©å±•å±æ€§"></a>2ã€åœ¨ gradle.properties ä¸‹å®šä¹‰æ‰©å±•å±æ€§</h5><p>é€šè¿‡ gradle.properties å®šä¹‰æ‰©å±•å±æ€§ï¼Œç›´æ¥ä½¿ç”¨ <strong>key&#x3D;value</strong> çš„å½¢å¼å³å¯ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">test2=erdai888<br></code></pre></td></tr></table></figure><h4 id="2ã€æ‰©å±•å±æ€§è°ƒç”¨"><a href="#2ã€æ‰©å±•å±æ€§è°ƒç”¨" class="headerlink" title="2ã€æ‰©å±•å±æ€§è°ƒç”¨"></a>2ã€æ‰©å±•å±æ€§è°ƒç”¨</h4><p>1ã€ext å®šä¹‰çš„æ‰©å±•å±æ€§è°ƒç”¨çš„æ—¶å€™å¯ä»¥å»æ‰ ext å‰ç¼€ç›´æ¥è°ƒç”¨</p><p>2ã€ext å®šä¹‰çš„æ‰©å±•å±æ€§ä¹Ÿå¯ä»¥é€šè¿‡ <strong>å½“å‰å®šä¹‰æ‰©å±•å±æ€§çš„ Project å¯¹è±¡.ext.å±æ€§å</strong> è¿›è¡Œè°ƒç”¨</p><p>3ã€gradle.properties å®šä¹‰çš„æ‰©å±•å±æ€§ç›´æ¥é€šè¿‡å±æ€§åè°ƒç”¨å³å¯</p><p>ä¸‹é¢æˆ‘ä»¬åœ¨ app çš„ build.gradle ä¸‹è¿›è¡Œæ¼”ç¤ºï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä¸‹é¢è¿™ç§å†™æ³•ä¹‹æ‰€ä»¥èƒ½è¿™ä¹ˆå†™</span><br><span class="hljs-comment"> * 1ã€ext å®šä¹‰çš„æ‰©å±•å±æ€§è°ƒç”¨çš„æ—¶å€™å¯ä»¥å»æ‰ ext å‰ç¼€ç›´æ¥è°ƒç”¨</span><br><span class="hljs-comment"> * 2ã€å­ Project èƒ½æ‹¿åˆ°æ ¹ Project ä¸­çš„å±æ€§å’Œæ–¹æ³•</span><br><span class="hljs-comment"> */</span><br>println test<br>println test1<br>println test2<br><br><span class="hljs-comment">//2ã€ext å®šä¹‰çš„æ‰©å±•å±æ€§ä¹Ÿå¯ä»¥é€šè¿‡ å½“å‰å®šä¹‰æ‰©å±•å±æ€§çš„ Project å¯¹è±¡.ext.å±æ€§å è°ƒç”¨</span><br>println rootProject.ext.test<br>println rootProject.ext.test1<br>println test2<br><br><span class="hljs-comment">//ä¸Šè¿°ä¸¤ç§æ–¹å¼æ‰“å°ç»“æœå‡ä¸º</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>erdai666<br>erdai777<br>erdai888<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> å­ Project å’Œæ ¹ Project å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œå› æ­¤æ ¹ Project ä¸­å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å­ Project èƒ½è·å–åˆ°</p><h4 id="3ã€æ‰©å±•å±æ€§åº”ç”¨"><a href="#3ã€æ‰©å±•å±æ€§åº”ç”¨" class="headerlink" title="3ã€æ‰©å±•å±æ€§åº”ç”¨"></a>3ã€æ‰©å±•å±æ€§åº”ç”¨</h4><p>é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨æ‰©å±•å±æ€§æ¥ä¼˜åŒ– build.gradle è„šæœ¬æ–‡ä»¶ï¼Œä¾‹å¦‚æˆ‘ä»¬ä»¥ä¼˜åŒ– app ä¸‹çš„ build.gradle ä¸ºä¾‹ï¼š</p><p>é¦–å…ˆçœ‹ä¸€çœ¼ä¼˜åŒ–ä¹‹å‰ app çš„ build.gradle é•¿å•¥æ ·ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs groovy">apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.android.application&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">30</span><br><br>    defaultConfig &#123;<br>        applicationId <span class="hljs-string">&quot;com.dream.gradledemo&quot;</span><br>        minSdkVersion <span class="hljs-number">19</span><br>        targetSdkVersion <span class="hljs-number">30</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br><br>        testInstrumentationRunner <span class="hljs-string">&quot;androidx.test.runner.AndroidJUnitRunner&quot;</span><br>    &#125;<br><br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-literal">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android-optimize.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br>dependencies &#123;<br>    implementation <span class="hljs-string">&#x27;androidx.appcompat:appcompat:1.3.0&#x27;</span><br>    implementation <span class="hljs-string">&#x27;com.google.android.material:material:1.4.0&#x27;</span><br>    implementation <span class="hljs-string">&#x27;androidx.constraintlayout:constraintlayout:2.0.4&#x27;</span><br>    testImplementation <span class="hljs-string">&#x27;junit:junit:4.13.2&#x27;</span><br>    androidTestImplementation <span class="hljs-string">&#x27;androidx.test.ext:junit:1.1.3&#x27;</span><br>    androidTestImplementation <span class="hljs-string">&#x27;androidx.test.espresso:espresso-core:3.4.0&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥è¿›è¡Œæ”¹é€ </p><p><strong>æ­¥éª¤1ï¼š</strong> åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ config.gradle ï¼Œç”¨æ¥å­˜æ”¾æ‰©å±•å±æ€§</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs groovy">ext&#123;<br><br>    androidConfig = [<br>            <span class="hljs-attr">compileSdkVersion :</span> <span class="hljs-number">30</span>,<br>            <span class="hljs-attr">applicationId :</span> <span class="hljs-string">&#x27;com.dream.gradledemo&#x27;</span>,<br>            <span class="hljs-attr">minSdkVersion :</span> <span class="hljs-number">19</span>,<br>            <span class="hljs-attr">targetSdkVersion :</span> <span class="hljs-number">30</span>,<br>            <span class="hljs-attr">versionCode :</span> <span class="hljs-number">1</span>,<br>            <span class="hljs-attr">versionName :</span> <span class="hljs-string">&#x27;1.0&#x27;</span><br>    ]<br><br><br>    implementationLib = [<br>            <span class="hljs-attr">appcompat :</span> <span class="hljs-string">&#x27;androidx.appcompat:appcompat:1.3.0&#x27;</span>,<br>            <span class="hljs-attr">material  :</span> <span class="hljs-string">&#x27;com.google.android.material:material:1.4.0&#x27;</span>,<br>            <span class="hljs-attr">constraintlayout :</span> <span class="hljs-string">&#x27;androidx.constraintlayout:constraintlayout:2.0.4&#x27;</span><br>    ]<br><br>    testImplementationLib = [<br>            <span class="hljs-attr">junit :</span> <span class="hljs-string">&#x27;junit:junit:4.13.2&#x27;</span><br>    ]<br><br><br>    androidTestImplementationLib = [<br>            <span class="hljs-attr">junit :</span> <span class="hljs-string">&#x27;androidx.test.ext:junit:1.1.3&#x27;</span>,<br>            <span class="hljs-string">&#x27;espresso-core&#x27;</span> : <span class="hljs-string">&#x27;androidx.test.espresso:espresso-core:3.4.0&#x27;</span><br>    ]<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ­¥éª¤2ï¼š</strong> åœ¨æ ¹ build.gradle å¯¹ config.gradle è¿›è¡Œå¼•ç”¨</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">apply <span class="hljs-attr">from:</span> <span class="hljs-string">&#x27;config.gradle&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong> åœ¨æ ¹ build.gradle è¿›è¡Œå¼•ç”¨çš„å¥½å¤„å°±æ˜¯æ‰€æœ‰çš„å­ build.gradle éƒ½èƒ½å¤Ÿè·å–åˆ°è¿™äº›æ‰©å±•å±æ€§</p><p><strong>æ­¥éª¤3:</strong>  åœ¨ app çš„ build.gradle é‡Œé¢è¿›è¡Œæ‰©å±•å±æ€§çš„è°ƒç”¨</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs groovy">apply <span class="hljs-attr">plugin:</span> <span class="hljs-string">&#x27;com.android.application&#x27;</span><br><br>android &#123;<br>    compileSdkVersion androidConfig.compileSdkVersion<br><br>    defaultConfig &#123;<br>        applicationId androidConfig.applicationId<br>        minSdkVersion androidConfig.minSdkVersion<br>        targetSdkVersion androidConfig.targetSdkVersion<br>        versionCode androidConfig.versionCode<br>        versionName androidConfig.versionName<br><br>        testInstrumentationRunner <span class="hljs-string">&quot;androidx.test.runner.AndroidJUnitRunner&quot;</span><br>    &#125;<br><br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-literal">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android-optimize.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">def</span> implementationLibMap = implementationLib<br><span class="hljs-keyword">def</span> testImplementationLibMap = testImplementationLib<br><span class="hljs-keyword">def</span> androidTestImplementationLibMap = androidTestImplementationLib<br><br>dependencies &#123;<br>    implementationLibMap.each&#123;k,v -&gt;<br>        implementation v<br>    &#125;<br><br>    testImplementationLibMap.each&#123;k,v -&gt;<br>        testImplementation v<br>    &#125;<br><br>    androidTestImplementationLibMap.each&#123;k,v -&gt;<br>        androidTestImplementation v<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3ï¼‰ã€æ–‡ä»¶æ“ä½œ-API"><a href="#3ï¼‰ã€æ–‡ä»¶æ“ä½œ-API" class="headerlink" title="3ï¼‰ã€æ–‡ä»¶æ“ä½œ API"></a>3ï¼‰ã€æ–‡ä»¶æ“ä½œ API</h3><h4 id="1ã€file-x2F-files-ç³»åˆ—æ–‡ä»¶å®šä½"><a href="#1ã€file-x2F-files-ç³»åˆ—æ–‡ä»¶å®šä½" class="headerlink" title="1ã€file&#x2F;files ç³»åˆ—æ–‡ä»¶å®šä½"></a>1ã€file&#x2F;files ç³»åˆ—æ–‡ä»¶å®šä½</h4><p>Project å¯¹è±¡æä¾›çš„ file&#x2F;files ç³»åˆ—æ–¹æ³•ä¸»è¦ç”¨æ¥å®šä½ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶ï¼Œå€¼çš„æ³¨æ„çš„æ˜¯ï¼š<strong>å®ƒä»¬æ¥æ”¶çš„å‚æ•°æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œä»å½“å‰ project å·¥ç¨‹å¼€å§‹æŸ¥æ‰¾</strong>ï¼Œè€Œæˆ‘ä»¬é€šè¿‡ new File çš„æ–¹å¼éœ€è¦ä¼ å…¥ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼Œä¸‹é¢é€šè¿‡ä»£ç æ¼”ç¤ºæ„Ÿå—ä¸€ä¸‹ä»–ä»¬çš„åŒºåˆ«ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//============================== 1ã€file æ–¹æ³•åº”ç”¨============================</span><br><span class="hljs-comment">//é€šè¿‡ file æ–¹æ³•ä¼ å…¥ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª file å¯¹è±¡</span><br>println file(<span class="hljs-string">&#x27;../config.gradle&#x27;</span>).text<br><br><span class="hljs-comment">//é€šè¿‡ new File æ–¹å¼ä¼ å…¥ä¸€ä¸ªç»å¯¹è·¯å¾„</span><br><span class="hljs-keyword">def</span> file = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&#x27;/Users/zhouying/learning/GradleDemo/config.gradle&#x27;</span>)<br>println file.text<br><br><span class="hljs-comment">//ä¸Šè¿°ä¸¤è€…æ‰“å°ç»“æœç›¸åŒï¼Œå¦‚ä¸‹æˆªå›¾</span><br><br><span class="hljs-comment">//============================== 2ã€files æ–¹æ³•åº”ç”¨============================</span><br><span class="hljs-comment">//é€šè¿‡ files æ–¹æ³•ä¼ å…¥å¤šä¸ªç›¸å¯¹è·¯å¾„ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª ConfigurableFileCollection å³æ–‡ä»¶é›†åˆ</span><br>files(<span class="hljs-string">&#x27;../config.gradle&#x27;</span>,<span class="hljs-string">&#x27;../build.gradle&#x27;</span>).each &#123;<br>    println it.name<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>config.gradle<br>build.gradle<br></code></pre></td></tr></table></figure><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/152c811c766440cd857b72a8b8c1542c~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210717121715148"  /><h4 id="2ã€copy-æ–‡ä»¶æ‹·è´"><a href="#2ã€copy-æ–‡ä»¶æ‹·è´" class="headerlink" title="2ã€copy æ–‡ä»¶æ‹·è´"></a>2ã€copy æ–‡ä»¶æ‹·è´</h4><blockquote><p>1ã€Project å¯¹è±¡æä¾›äº† copy æ–¹æ³•ï¼Œå®ƒä½¿å¾—æˆ‘ä»¬æ‹·è´ä¸€ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å˜å¾—ååˆ†ç®€å•</p><p>2ã€copy æ–¹æ³•èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ªé—­åŒ…ï¼Œé—­åŒ…çš„å‚æ•° CopySpec ï¼ŒCopySpec æä¾›äº†å¾ˆå¤šæ–‡ä»¶æ“ä½œçš„ APIï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æ–‡æ¡£ <a href="https://docs.gradle.org/current/javadoc/org/gradle/api/file/CopySpec.html">ä¼ é€é—¨</a></p></blockquote><p>ä¸‹é¢ä¼šä½¿ç”¨åˆ° CopySpec çš„ from å’Œ into æ–¹æ³•</p><p><strong>æ³¨æ„ï¼š</strong> from å’Œ into æ¥æ”¶çš„å‚æ•°æ˜¯ Object ç±»å‹çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªè·¯å¾„æˆ–æ–‡ä»¶</p><p>1ã€æ–‡ä»¶æ‹·è´</p><p>ä¾‹å¦‚æˆ‘ä»¬å®ç°ï¼š<strong>å°†æ ¹ç›®å½•ä¸‹çš„ config.gradle æ–‡ä»¶æ‹·è´æ‹·è´åˆ° app ç›®å½•ä¸‹ã€‚</strong> å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//1ã€ä¼ å…¥è·¯å¾„</span><br>copy &#123;<br>    from getRootDir().path + <span class="hljs-string">&quot;/config.gradle&quot;</span><br>    into getProjectDir().path<br>&#125;<br><br><span class="hljs-comment">//2ã€ä¼ å…¥æ–‡ä»¶</span><br>copy &#123;<br>    from file(<span class="hljs-string">&#x27;../config.gradle&#x27;</span>)<br>    into getProjectDir()<br>&#125;<br><br><span class="hljs-comment">//æœ€ç»ˆç»“æœæ˜¯è¿™ä¸¤ç§æ–¹å¼éƒ½èƒ½æ‹·è´æˆåŠŸ</span><br></code></pre></td></tr></table></figure><p>2ã€æ–‡ä»¶å¤¹æ‹·è´</p><p>ä¾‹å¦‚æˆ‘ä»¬å®ç°ï¼š<strong>å°†æ ¹ç›®å½•ä¸‹çš„ gradle æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‹·è´åˆ° app ç›®å½•ä¸‹çš„ gradle æ–‡ä»¶å¤¹</strong></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs groovy">copy &#123;<br>    from file(<span class="hljs-string">&#x27;../gradle/&#x27;</span>)<br>    into getProjectDir().path + <span class="hljs-string">&quot;/gradle/&quot;</span><br>&#125;<br><br><span class="hljs-comment">//æœ€ç»ˆç»“æœæ‹·è´æˆåŠŸ</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶å¦‚æœ app ç›®å½•ä¸‹æ²¡æœ‰ gradle æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆ copy æ–¹æ³•ä¼šç»™æˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºï¼Œéå¸¸çš„æ–¹ä¾¿</p><h4 id="3ã€fileTree-æ–‡ä»¶æ ‘æ˜ å°„"><a href="#3ã€fileTree-æ–‡ä»¶æ ‘æ˜ å°„" class="headerlink" title="3ã€fileTree æ–‡ä»¶æ ‘æ˜ å°„"></a>3ã€fileTree æ–‡ä»¶æ ‘æ˜ å°„</h4><p>Project å¯¹è±¡æä¾›äº† fileTree æ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬å°†ä¸€ä¸ªç›®å½•è½¬æ¢ä¸ºæ–‡ä»¶æ ‘ï¼Œç„¶åå¯¹æ–‡ä»¶æ ‘è¿›è¡Œç›¸å…³çš„é€»è¾‘å¤„ç†ï¼Œå®ƒæ¥æ”¶çš„å‚æ•°å’Œ file&#x2F;files ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„</p><p>ä¾‹å¦‚æˆ‘ä»¬å®ç°ï¼š<strong>éå†æ ¹ç›®å½•ä¸‹çš„ gradle æ–‡ä»¶å¤¹ï¼Œå¹¶æ‰“å°æ–‡ä»¶åŠæ–‡ä»¶å¤¹çš„åç§°</strong></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy">fileTree(<span class="hljs-string">&#x27;../gradle/&#x27;</span>)&#123; FileTree fileTree -&gt;<br>    fileTree.visit &#123; FileTreeElement fileTreeElement -&gt;<br>        println fileTreeElement.name<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>wrapper<br>gradle-wrapper.jar<br>gradle-wrapper.properties<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šå¸¸ä¼šåœ¨ app çš„ build.gradle ä¸‹çœ‹åˆ°è¿™ä¹ˆä¸€ä¸ªé…ç½®è¯­å¥ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">implementation fileTree(<span class="hljs-attr">include:</span> [<span class="hljs-string">&#x27;*.jar&#x27;</span>], <span class="hljs-attr">dir:</span> <span class="hljs-string">&#x27;libs&#x27;</span>)<br></code></pre></td></tr></table></figure><p>ä»–å®é™…ä¸Šæ˜¯è°ƒç”¨äº† fileTree æ¥æ”¶ Map å‚æ•°çš„é‡è½½æ–¹æ³•ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">ConfigurableFileTree fileTree(Map&lt;String, ?&gt; var1);<br></code></pre></td></tr></table></figure><p>è¿™å¥é…ç½®è¯­å¥çš„æ„æ€å°±æ˜¯ï¼š<strong>å¼•å…¥å½“å‰ project ç›®å½•ä¸‹çš„ libs æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ jar åŒ…</strong></p><h3 id="4ï¼‰ã€buildscript-è§£è¯»"><a href="#4ï¼‰ã€buildscript-è§£è¯»" class="headerlink" title="4ï¼‰ã€buildscript è§£è¯»"></a>4ï¼‰ã€buildscript è§£è¯»</h3><p>æˆ‘ä»¬é€šå¸¸åœ¨æ–°å»ºä¸€ä¸ª Android é¡¹ç›®çš„æ—¶å€™å¯ä»¥çœ‹åˆ°æ ¹ build.gradle æœ‰è¿™ä¹ˆä¸€æ®µé…ç½®ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs groovy">buildscript &#123;<br>    <span class="hljs-comment">//æ’ä»¶ä»“åº“åœ°å€</span><br>    repositories &#123;<br>        google()<br>        mavenCentral()<br>    &#125;<br>  <br>    <span class="hljs-comment">//æ’ä»¶ä¾èµ–</span><br>    dependencies &#123;<br>        classpath <span class="hljs-string">&quot;com.android.tools.build:gradle:4.2.1&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®ƒçš„ä½œç”¨æ˜¯ï¼š<strong>å¼•å…¥ Gradle æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸€äº›æ’ä»¶</strong></p><p>å®é™…ä¸Šä¸Šé¢è¿™æ®µä»£ç çš„å®Œæ•´å†™æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs groovy">buildscript &#123; ScriptHandler scriptHandler -&gt;<br>    scriptHandler.repositories &#123; RepositoryHandler repositoryHandler -&gt;<br>        repositoryHandler.google()<br>        repositoryHandler.mavenCentral()<br>    &#125;<br>  <br>    scriptHandler.dependencies &#123; DependencyHandler dependencyHandler -&gt;<br>        dependencyHandler.classpath <span class="hljs-string">&quot;com.android.tools.build:gradle:4.2.1&quot;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½ æ˜¯å¦ä¼šæœ‰è¿™ä¹ˆä¸€ä¸ªç–‘é—®ï¼šä¸ºå•¥è¿™äº›å‚æ•°éƒ½èƒ½å¤Ÿå»æ‰ï¼Œç®€åŒ–æˆä¸Šé¢é‚£æ ·ï¼ŸğŸ¤”ï¸</p><p>è¦æ˜ç™½ä¸Šé¢è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬å¾—å¯¹é—­åŒ…æœ‰ä¸€å®šçš„äº†è§£ï¼š</p><p>1ã€é¦–å…ˆé—­åŒ…ä¸­æœ‰ owenr this delegate ä¸‰ä¸ªå¯¹è±¡ï¼Œè¿™ä¸‰ä¸ªå¯¹è±¡æ‹¥æœ‰çš„å±æ€§å’Œæ–¹æ³•æˆ‘ä»¬éƒ½å¯ä»¥è°ƒç”¨ï¼Œå¹¶ä¸”æ— éœ€å†™å‡ºæ¥</p><p>2ã€è¿™ä¸‰ä¸ªå¯¹è±¡è°ƒç”¨çš„å…ˆåé¡ºåºå–å†³äºé—­åŒ…çš„å§”æ‰˜ç­–ç•¥ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå¯¹ delegate è¿›è¡Œæ“ä½œå¹¶ä¿®æ”¹å®ƒçš„å§”æ‰˜ç­–ç•¥</p><p>å®é™…ä¸Šï¼ŒGradle å¯¹ä¸Šé¢çš„è¿™äº›é—­åŒ…çš„ delegate ä¿®æ”¹ä¸ºäº†ä¼ å…¥é—­åŒ…çš„å‚æ•°ï¼Œå¹¶æŠŠå§”æ‰˜ç­–ç•¥è®¾ç½®ä¸ºäº† DELEGATE_FIRST ï¼Œå› æ­¤æˆ‘ä»¬è°ƒç”¨çš„æ—¶å€™æ‰èƒ½æŠŠè¿™äº›å‚æ•°ç»™å»æ‰ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ç‚¹å‡» buildscript è¿›å»çœ‹ä¸‹æºç ï¼Œè¿™é‡Œå°±ä¸å¯¹æºç è¿›è¡Œåˆ†æäº†</p><h3 id="5ï¼‰ã€exec-å¤–éƒ¨å‘½ä»¤æ‰§è¡Œ"><a href="#5ï¼‰ã€exec-å¤–éƒ¨å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="5ï¼‰ã€exec å¤–éƒ¨å‘½ä»¤æ‰§è¡Œ"></a>5ï¼‰ã€exec å¤–éƒ¨å‘½ä»¤æ‰§è¡Œ</h3><p>Project å¯¹è±¡æä¾›äº† exec æ–¹æ³•ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ‰§è¡Œå¤–éƒ¨çš„å‘½ä»¤</p><p>æˆ‘ä»¬å¯ä»¥åœ¨ linux ä¸‹é€šè¿‡å¦‚ä¸‹å‘½ä»¤å»ç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">mv -f æºæ–‡ä»¶è·¯å¾„ ç›®æ ‡æ–‡ä»¶è·¯å¾„<br></code></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬åœ¨ Gradle ä¸‹å»è¿›è¡Œè¿™ä¸€æ“ä½œ</p><p>ä¾‹å¦‚æˆ‘ä»¬å®ç°ï¼š<strong>ä½¿ç”¨å¤–éƒ¨å‘½ä»¤ï¼Œå°†æˆ‘ä»¬å­˜æ”¾çš„ apk ç›®å½•ç§»åŠ¨åˆ°é¡¹ç›®çš„æ ¹ç›®å½•</strong> ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs groovy">task taskMove() &#123;<br>    doLast &#123;<br>        <span class="hljs-comment">// åœ¨ gradle çš„æ‰§è¡Œé˜¶æ®µå»æ‰§è¡Œ</span><br>        <span class="hljs-keyword">def</span> sourcePath = buildDir.path + <span class="hljs-string">&quot;/outputs/apk&quot;</span><br>        <span class="hljs-keyword">def</span> destinationPath = getRootDir().path<br>        <span class="hljs-keyword">def</span> command = <span class="hljs-string">&quot;mv -f $sourcePath $destinationPath&quot;</span><br>        exec &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                executable <span class="hljs-string">&quot;bash&quot;</span><br>                args <span class="hljs-string">&quot;-c&quot;</span>, command<br>                println <span class="hljs-string">&quot;The command execute is success&quot;</span><br>            &#125; <span class="hljs-keyword">catch</span> (GradleException e) &#123;<br>                e.printStackTrace()<br>                println <span class="hljs-string">&quot;The command execute is failed&quot;</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€Task-ä»‹ç»"><a href="#ä¸‰ã€Task-ä»‹ç»" class="headerlink" title="ä¸‰ã€Task ä»‹ç»"></a>ä¸‰ã€Task ä»‹ç»</h2><p>Task ä¸­æ–‡ç¿»è¯‘å³ä»»åŠ¡ï¼Œå®ƒæ˜¯ Gradle ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº†è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸åŒçš„æ’ä»¶å¯ä»¥æ·»åŠ ä¸åŒçš„ Taskï¼Œæ¯ä¸€ä¸ª Task éƒ½è¦å’Œ Projectå…³è”ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œçº¿ç¨‹æ˜¯ cpu æ‰§è¡Œçš„æœ€å°å•å…ƒã€‚åŒç†ï¼ŒTask æ˜¯ Gradle æ‰§è¡Œçš„æœ€å°å•å…ƒï¼ŒGradle å°†ä¸€ä¸ªä¸ª Task ä¸²è”èµ·æ¥ï¼Œå®Œæˆä¸€ä¸ªå…·ä½“çš„æ„å»ºä»»åŠ¡</p><h3 id="1ï¼‰ã€doFirstã€doLast-ä»‹ç»"><a href="#1ï¼‰ã€doFirstã€doLast-ä»‹ç»" class="headerlink" title="1ï¼‰ã€doFirstã€doLast ä»‹ç»"></a>1ï¼‰ã€doFirstã€doLast ä»‹ç»</h3><p>é¦–å…ˆæˆ‘ä»¬è¦ææ‡‚ Action è¿™ä¸ªæ¦‚å¿µï¼ŒAction æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰§è¡ŒåŠ¨ä½œï¼Œå®ƒåªæœ‰åœ¨æˆ‘ä»¬æ‰§è¡Œå½“å‰ Task æ—¶æ‰ä¼šè¢«æ‰§è¡Œï¼ŒGradle æ‰§è¡Œé˜¶æ®µæœ¬è´¨ä¸Šå°±æ˜¯åœ¨æ‰§è¡Œæ¯ä¸ª Task ä¸­çš„ä¸€ç³»åˆ— Action</p><p>doFirstï¼ŒdoLast æ˜¯ Task ç»™æˆ‘ä»¬æä¾›çš„ä¸¤ä¸ª Action</p><p><strong>doFirst</strong> è¡¨ç¤ºï¼šTask æ‰§è¡Œæœ€å¼€å§‹æ—¶è¢«è°ƒç”¨çš„ Action</p><p><strong>doLast</strong> è¡¨ç¤ºï¼š task æ‰§è¡Œå®Œæ—¶è¢«è°ƒç”¨çš„ Action</p><p>å€¼çš„æ³¨æ„çš„æ˜¯ï¼š<strong>doFirst å’Œ doLast å¯è¢«å¤šæ¬¡æ·»åŠ æ‰§è¡Œ</strong> ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs groovy">task erdai&#123;<br>    println <span class="hljs-string">&#x27;task start...&#x27;</span><br><br>    doFirst &#123;<br>        println <span class="hljs-string">&#x27;doFirst1&#x27;</span><br>    &#125;<br><br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;doLast1&#x27;</span><br>    &#125;<br><br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;doLast2&#x27;</span><br>    &#125;<br><br>    println <span class="hljs-string">&#x27;task end...&#x27;</span><br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œå½“å‰ task</span><br>./gradlew erdai<br><br><span class="hljs-comment">//æ‰“å°ç»“æœå¦‚ä¸‹</span><br>&gt; Configure <span class="hljs-attr">project :</span>app<br>task start...<br>task end...<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>erdai<br>doFirst1<br>doLast1<br>doLast2<br></code></pre></td></tr></table></figure><p>ä»ä¸Šè¿°æ‰“å°ç»“æœæˆ‘ä»¬å¯ä»¥å‘ç°</p><p>1ã€<code>println &#39;task start...&#39;</code>ï¼Œ<code> println &#39;task end...&#39;</code>è¿™ä¸¤å¥çš„ä»£ç åœ¨ Gradle é…ç½®é˜¶æ®µå°±è¢«æ‰§è¡Œäº†</p><p>2ã€doFirstï¼ŒdoLast ä¸­çš„ä»£ç æ˜¯åœ¨ Gradle æ‰§è¡Œé˜¶æ®µï¼Œæ‰§è¡Œ erdai è¿™ä¸ª task æ—¶è¢«æ‰§è¡Œçš„</p><p>å› æ­¤ä¹ŸéªŒè¯äº†ä¸€å¼€å§‹æˆ‘è¯´çš„é‚£ä¸ªç»“è®ºï¼š <strong>Gradle é…ç½®é˜¶æ®µï¼Œé™¤ Task çš„ Action ä¸­ç¼–å†™çš„ä»£ç éƒ½ä¼šè¢«æ‰§è¡Œ</strong></p><h3 id="2ï¼‰ã€Task-å±æ€§ä»‹ç»"><a href="#2ï¼‰ã€Task-å±æ€§ä»‹ç»" class="headerlink" title="2ï¼‰ã€Task å±æ€§ä»‹ç»"></a>2ï¼‰ã€Task å±æ€§ä»‹ç»</h3><table><thead><tr><th>å±æ€§</th><th>æè¿°</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>name</td><td>task åå­—</td><td>æ— ï¼Œå¿…é¡»æŒ‡å®š</td></tr><tr><td>type</td><td>Task çš„çˆ¶ç±»</td><td>DefaultTask</td></tr><tr><td>action</td><td>å½“ Task æ‰§è¡Œçš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œçš„é—­åŒ…æˆ– Action</td><td>null</td></tr><tr><td>overwrite</td><td>æ›¿æ¢ä¸€ä¸ªå·²å­˜åœ¨çš„ Task</td><td>false</td></tr><tr><td>dependsOn</td><td>è¯¥ Task æ‰€ä¾èµ–çš„ Task é›†åˆ</td><td>[]</td></tr><tr><td>group</td><td>è¯¥ task æ‰€å±åˆ†ç»„</td><td>null</td></tr><tr><td>description</td><td>è¯¥ Task çš„æè¿°ä¿¡æ¯</td><td>null</td></tr><tr><td>constructorArgs</td><td>ä¼ é€’åˆ° Task Class æ„é€ å™¨ä¸­çš„å‚æ•°</td><td>null</td></tr></tbody></table><h3 id="3ï¼‰ã€Task-ç±»å‹ä»‹ç»"><a href="#3ï¼‰ã€Task-ç±»å‹ä»‹ç»" class="headerlink" title="3ï¼‰ã€Task ç±»å‹ä»‹ç»"></a>3ï¼‰ã€Task ç±»å‹ä»‹ç»</h3><p>ä¸€èˆ¬æˆ‘ä»¬åˆ›å»ºçš„ Task é»˜è®¤æ˜¯ç»§æ‰¿ DefaultTaskï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ type å±æ€§è®©ä»–ç»§æ‰¿å…¶ä»–çš„ç±»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ extends å…³é”®å­—ç›´æ¥æŒ‡å®šï¼ŒGradle è‡ªå¸¦çš„æœ‰  Copyã€Delete ç­‰ç­‰ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">// 1ã€ç»§æ‰¿ Delete è¿™ä¸ªç±»ï¼Œåˆ é™¤æ ¹ç›®å½•ä¸‹çš„ build æ–‡ä»¶</span><br>task deleteTask(<span class="hljs-attr">type:</span> Delete) &#123;<br>    delete rootProject.buildDir<br>&#125;<br><br><span class="hljs-comment">//é€šè¿‡ extends å…³é”®å­—æŒ‡å®š</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DeleteTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Delete</span>&#123;<br><br>&#125;<br>DeleteTask deleteTask = tasks.create(<span class="hljs-string">&quot;deleteTask&quot;</span>,DeleteTask)<br>deleteTask.delete(rootProject.buildDir)<br><br><br><span class="hljs-comment">// 2ã€ç»§æ‰¿ Copy è¿™ä¸ªç±»</span><br>task copyTask(<span class="hljs-attr">type:</span> Copy) &#123;<br>    <span class="hljs-comment">//...</span><br>&#125;<br><br><span class="hljs-comment">//é€šè¿‡ extends å…³é”®å­—æŒ‡å®š</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CopyTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Copy</span>&#123;<br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4ï¼‰ã€TaskContainer-ä»‹ç»"><a href="#4ï¼‰ã€TaskContainer-ä»‹ç»" class="headerlink" title="4ï¼‰ã€TaskContainer ä»‹ç»"></a>4ï¼‰ã€TaskContainer ä»‹ç»</h3><p>TaskContainer ä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ª Task å®¹å™¨ï¼ŒProject å¯¹è±¡å°±æ˜¯é€šè¿‡ TaskContainer æ¥ç®¡ç† Taskï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ TaskContainerï¼Œå¯¹ Task è¿›è¡Œç›¸å…³çš„æ“ä½œï¼Œä¸€äº›å¸¸ç”¨çš„ API å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//æŸ¥æ‰¾task</span><br>findByPath(<span class="hljs-attr">path:</span> String): Task <br>getByPath(<span class="hljs-attr">path:</span> String): Task<br>getByName(<span class="hljs-attr">name:</span> String): Task<br><br><span class="hljs-comment">//åˆ›å»ºtask</span><br>create(<span class="hljs-attr">name:</span> String): Task<br>create(<span class="hljs-attr">name:</span> String, <span class="hljs-attr">configure:</span> Closure): Task <br>create(<span class="hljs-attr">name:</span> String, <span class="hljs-attr">type:</span> Class): Task<br>create(<span class="hljs-attr">options:</span> Map&lt;String, ?&gt;): Task<br>create(<span class="hljs-attr">options:</span> Map&lt;String, ?&gt;, configure: Closure): Task<br><br><span class="hljs-comment">//å½“ task è¢«åŠ å…¥åˆ° TaskContainer æ—¶çš„ç›‘å¬</span><br>whenTaskAdded(<span class="hljs-attr">action:</span> Closure)<br></code></pre></td></tr></table></figure><h3 id="5ï¼‰ã€Task-å®šä¹‰åŠé…ç½®"><a href="#5ï¼‰ã€Task-å®šä¹‰åŠé…ç½®" class="headerlink" title="5ï¼‰ã€Task å®šä¹‰åŠé…ç½®"></a>5ï¼‰ã€Task å®šä¹‰åŠé…ç½®</h3><p>å› ä¸º Task å’Œ Project æ˜¯ç›¸äº’å…³è”çš„ï¼ŒProject ä¸­æä¾›äº†ä¸€ç³»åˆ—åˆ›å»º Task çš„æ–¹æ³•ï¼Œä¸‹é¢ä»‹ç»ä¸€äº›å¸¸ç”¨çš„ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//1ã€åˆ›å»ºä¸€ä¸ªåä¸º task1 çš„ Task</span><br>task task1<br><br><span class="hljs-comment">//2ã€åˆ›å»ºä¸€ä¸ªåä¸º task2 çš„ Taskï¼Œå¹¶é€šè¿‡é—­åŒ…è¿›è¡Œç›¸åº”çš„é…ç½®</span><br>task task2&#123;<br>    <span class="hljs-comment">//æŒ‡å®š task çš„åˆ†ç»„</span><br>    group <span class="hljs-string">&#x27;erdai666&#x27;</span><br>  <br>    doFirst&#123;<br>    <br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//3ã€åˆ›å»ºä¸€ä¸ªåä¸º task3 çš„ Taskï¼Œè¯¥ Task ç»§æ‰¿è‡ª Copy è¿™ä¸ª Taskï¼Œä¾èµ– task2</span><br>task task3(<span class="hljs-attr">type:</span> Copy)&#123;<br>    dependsOn <span class="hljs-string">&quot;task2&quot;</span><br>    doLast&#123;<br>    <br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//4ã€åˆ›å»ºä¸€ä¸ªåä¸º task4 çš„ Task å¹¶æŒ‡å®šäº†åˆ†ç»„å’Œæè¿°</span><br>task task4(<span class="hljs-attr">group:</span> <span class="hljs-string">&quot;erdai666&quot;</span>, <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;task4&quot;</span>) &#123;<br>    doFirst &#123;<br>        <br>    &#125;<br>    <br>    doLast &#123;<br>        <br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//5ã€é€šè¿‡ Project å¯¹è±¡çš„ TaskContainer åˆ›å»ºåä¸º task5 çš„ Task</span><br>tasks.create(<span class="hljs-string">&quot;task5&quot;</span>)&#123;<br><br>&#125;<br><br><span class="hljs-comment">//6ã€é€šè¿‡ Project å¯¹è±¡çš„ TaskContainer åˆ›å»ºåä¸º task6 çš„ Task</span><br><span class="hljs-comment">//ç›¸å¯¹äº 5 ï¼Œåªæ˜¯è°ƒç”¨äº†ä¸åŒçš„é‡è½½æ–¹æ³•è€Œå·²</span><br>tasks.create(<span class="hljs-attr">name:</span> <span class="hljs-string">&quot;task6&quot;</span>)&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6ï¼‰ã€Task-æ‰§è¡Œå®æˆ˜"><a href="#6ï¼‰ã€Task-æ‰§è¡Œå®æˆ˜" class="headerlink" title="6ï¼‰ã€Task æ‰§è¡Œå®æˆ˜"></a>6ï¼‰ã€Task æ‰§è¡Œå®æˆ˜</h3><p>é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ doFirst ä¸ doLast åœ¨ Task æ‰§è¡ŒæœŸé—´è¿›è¡Œç›¸å…³æ“ä½œï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥å®ç° <strong>build ä»»åŠ¡æ‰§è¡ŒæœŸé—´è€—æ—¶</strong>ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">// Task æ‰§è¡Œå®æˆ˜ï¼šè®¡ç®— build æ‰§è¡ŒæœŸé—´çš„è€—æ—¶</span><br><span class="hljs-keyword">def</span> startBuildTime, endBuildTime<br><span class="hljs-comment">// 1ã€åœ¨ Gradle é…ç½®é˜¶æ®µå®Œæˆä¹‹åè¿›è¡Œæ“ä½œï¼Œ</span><br><span class="hljs-comment">// ä»¥æ­¤ä¿è¯è¦æ‰§è¡Œçš„ task é…ç½®å®Œæ¯•</span><br><span class="hljs-variable language_">this</span>.afterEvaluate &#123; Project project -&gt;<br>    <span class="hljs-comment">// 2ã€æ‰¾åˆ°å½“å‰ project ä¸‹ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„ taskï¼Œå³ preBuild task</span><br>    <span class="hljs-keyword">def</span> preBuildTask = project.tasks.getByName(<span class="hljs-string">&quot;preBuild&quot;</span>)<br>    preBuildTask.doFirst &#123;<br>        <span class="hljs-comment">// 3ã€è·å–ç¬¬ä¸€ä¸ª task å¼€å§‹æ‰§è¡Œæ—¶åˆ»çš„æ—¶é—´æˆ³</span><br>        startBuildTime = System.currentTimeMillis()<br>    &#125;<br>    <span class="hljs-comment">// 4ã€æ‰¾åˆ°å½“å‰ project ä¸‹æœ€åä¸€ä¸ªæ‰§è¡Œçš„ taskï¼Œå³ build task</span><br>    <span class="hljs-keyword">def</span> buildTask = project.tasks.getByName(<span class="hljs-string">&quot;build&quot;</span>)<br>    buildTask.doLast &#123;<br>        <span class="hljs-comment">// 5ã€è·å–æœ€åä¸€ä¸ª task æ‰§è¡Œå®Œæˆå‰ä¸€ç¬é—´çš„æ—¶é—´æˆ³</span><br>        endBuildTime = System.currentTimeMillis()<br>        <span class="hljs-comment">// 6ã€è¾“å‡º build æ‰§è¡ŒæœŸé—´çš„è€—æ—¶</span><br>        println <span class="hljs-string">&quot;Current project execute time is $&#123;endBuildTime - startBuildTime&#125;&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ build ä»»åŠ¡</span><br>./gradlew build<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>Current project execute time is <span class="hljs-number">21052</span><br></code></pre></td></tr></table></figure><h3 id="7ï¼‰ã€æŒ‡å®š-Task-æ‰§è¡Œé¡ºåº"><a href="#7ï¼‰ã€æŒ‡å®š-Task-æ‰§è¡Œé¡ºåº" class="headerlink" title="7ï¼‰ã€æŒ‡å®š Task æ‰§è¡Œé¡ºåº"></a>7ï¼‰ã€æŒ‡å®š Task æ‰§è¡Œé¡ºåº</h3><p>åœ¨ Gradle ä¸­ï¼Œæœ‰ä¸‰ç§æ–¹å¼å¯ä»¥æŒ‡å®š Task æ‰§è¡Œé¡ºåºï¼š</p><p>1ã€dependsOn å¼ºä¾èµ–æ–¹å¼</p><p>2ã€é€šè¿‡ Task è¾“å…¥è¾“å‡º</p><p>3ã€é€šè¿‡ API æŒ‡å®šæ‰§è¡Œé¡ºåº</p><h4 id="1ã€dependsOn-å¼ºä¾èµ–æ–¹å¼"><a href="#1ã€dependsOn-å¼ºä¾èµ–æ–¹å¼" class="headerlink" title="1ã€dependsOn å¼ºä¾èµ–æ–¹å¼"></a>1ã€dependsOn å¼ºä¾èµ–æ–¹å¼</h4><p>dependsOn å¼ºä¾èµ–æ–¹å¼å¯ç»†åˆ†ä¸º<strong>é™æ€ä¾èµ–</strong>å’Œ<strong>åŠ¨æ€ä¾èµ–</strong></p><ul><li>é™æ€ä¾èµ–ï¼šåœ¨åˆ›å»º Task çš„æ—¶å€™ï¼Œç›´æ¥é€šè¿‡ dependsOn æŒ‡å®šéœ€è¦ä¾èµ–çš„ Task</li><li>åŠ¨æ€ä¾èµ–ï¼šåœ¨åˆ›å»º Task çš„æ—¶å€™ï¼Œä¸çŸ¥é“éœ€è¦ä¾èµ–å“ªäº› Taskï¼Œéœ€é€šè¿‡ dependsOn åŠ¨æ€ä¾èµ–ç¬¦åˆæ¡ä»¶çš„ Task</li></ul><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//=================================é™æ€ä¾èµ–=============================</span><br>task taskA&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskA&#x27;</span><br>    &#125;<br>&#125;<br><br>task taskB&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskB&#x27;</span><br>    &#125;<br>&#125;<br><br>task taskC(<span class="hljs-attr">dependsOn:</span> taskA)&#123;<span class="hljs-comment">//å¤šä¾èµ–æ–¹å¼ dependsOn:[taskA,taskB]</span><br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskC&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ taskC</span><br>./gradlew taskC<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskA<br>taskA<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskC<br>taskC<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œ taskC çš„æ—¶å€™ï¼Œå› ä¸ºä¾èµ–äº† taskAï¼Œå› æ­¤ taskA ä¼šå…ˆæ‰§è¡Œï¼Œåœ¨æ‰§è¡Œ taskC</p><p><strong>æ³¨æ„</strong>ï¼šå½“ä¸€ä¸ª Task ä¾èµ–å¤šä¸ª Task çš„æ—¶å€™ï¼Œè¢«ä¾èµ–çš„ Task ä¹‹é—´å¦‚æœæ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆå®ƒä»¬çš„æ‰§è¡Œé¡ºåºæ˜¯éšæœºçš„ï¼Œå¹¶æ— å½±å“ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy">task taskC(<span class="hljs-attr">dependsOn:</span>[taskA,taskB])&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskC&#x27;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>taskA å’Œ taskB çš„æ‰§è¡Œé¡ºåºæ˜¯éšæœºçš„</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//=================================åŠ¨æ€ä¾èµ–=============================</span><br><span class="hljs-comment">// Task åŠ¨æ€ä¾èµ–æ–¹å¼</span><br>task lib1 &#123;<br>    doLast&#123;<br>        println <span class="hljs-string">&#x27;lib1&#x27;</span><br>    &#125;<br>&#125;<br>task lib2 &#123;<br>    doLast&#123;<br>        println <span class="hljs-string">&#x27;lib2&#x27;</span><br>    &#125;<br>&#125;<br>task lib3 &#123;<br>    doLast&#123;<br>        println <span class="hljs-string">&#x27;lib3&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// åŠ¨æ€æŒ‡å®štaskXä¾èµ–æ‰€æœ‰ä»¥libå¼€å¤´çš„task</span><br>task taskDynamic&#123;<br>    <span class="hljs-comment">// åŠ¨æ€æŒ‡å®šä¾èµ–</span><br>    dependsOn tasks.findAll&#123; Task task -&gt;<br>        <span class="hljs-keyword">return</span> task.name.startsWith(<span class="hljs-string">&#x27;lib&#x27;</span>)<br>    &#125;<br><br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskDynamic&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ taskDynamic</span><br>./gradlew taskDynamic<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>lib1<br>lib1<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>lib2<br>lib2<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>lib3<br>lib3<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskDynamic<br>taskDynamic<br></code></pre></td></tr></table></figure><h4 id="2ã€é€šè¿‡-Task-è¾“å…¥è¾“å‡ºæŒ‡å®šæ‰§è¡Œé¡ºåº"><a href="#2ã€é€šè¿‡-Task-è¾“å…¥è¾“å‡ºæŒ‡å®šæ‰§è¡Œé¡ºåº" class="headerlink" title="2ã€é€šè¿‡ Task è¾“å…¥è¾“å‡ºæŒ‡å®šæ‰§è¡Œé¡ºåº"></a>2ã€é€šè¿‡ Task è¾“å…¥è¾“å‡ºæŒ‡å®šæ‰§è¡Œé¡ºåº</h4><p>å½“ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸º TaskA çš„è¾“å…¥å‚æ•°ï¼ŒåŒæ—¶åˆä½œä¸º TaskB çš„è¾“å‡ºå‚æ•°ï¼Œé‚£ä¹ˆ TaskA æ‰§è¡Œçš„æ—¶å€™å…ˆè¦æ‰§è¡Œ TaskBã€‚å³è¾“å‡ºçš„ Task å…ˆäºè¾“å…¥çš„ Task æ‰§è¡Œ</p><p>ä½†æ˜¯æˆ‘åœ¨å®é™…æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°ï¼š<strong>è¾“å…¥çš„ Task ä¼šå…ˆæ‰§è¡Œï¼Œç„¶ååœ¨æ‰§è¡Œè¾“å‡ºçš„ Task</strong>ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs groovy">ext &#123;<br>    testFile = file(<span class="hljs-string">&quot;$&#123;projectDir.path&#125;/test.txt&quot;</span>)<br>    <span class="hljs-keyword">if</span>(testFile != <span class="hljs-literal">null</span> || !testFile.exists())&#123;<br>        testFile.createNewFile()<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//è¾“å‡º Task</span><br>task outputTask &#123;<br>    outputs.file testFile<br>    doLast &#123;<br>        outputs.getFiles().singleFile.withWriter &#123; writer -&gt;<br>            writer.append(<span class="hljs-string">&quot;erdai666&quot;</span>)<br>        &#125;<br>        println <span class="hljs-string">&quot;outputTask æ‰§è¡Œç»“æŸ&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//è¾“å…¥ Task</span><br>task inputTask &#123;<br>    inputs.file testFile<br>    doLast &#123;<br>        println <span class="hljs-string">&quot;è¯»å–æ–‡ä»¶å†…å®¹ï¼š$&#123;inputs.files.singleFile.text&#125;&quot;</span><br>        println <span class="hljs-string">&quot;inputTask æ‰§è¡Œç»“æŸ&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æµ‹è¯• Task</span><br>task testTask(<span class="hljs-attr">dependsOn:</span> [outputTask, inputTask]) &#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&quot;testTask1 æ‰§è¡Œç»“æŸ&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ testTask</span><br>./gradlew testTask<br><br><span class="hljs-comment">//ç†è®ºä¸Šä¼šå…ˆæ‰§è¡Œ outputTaskï¼Œåœ¨æ‰§è¡Œ inputTaskï¼Œæœ€åæ‰§è¡Œ testTask</span><br><span class="hljs-comment">//ä½†å®é™…æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>inputTask<br>è¯»å–æ–‡ä»¶å†…å®¹ï¼š<br>inputTask æ‰§è¡Œç»“æŸ<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>outputTask<br>outputTask æ‰§è¡Œç»“æŸ<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>testTask<br>testTask1 æ‰§è¡Œç»“æŸ<br></code></pre></td></tr></table></figure><p>æœ€ç»ˆæˆ‘å¯¹ inputTask æŒ‡å®šäº†å…·ä½“ä¾èµ–æ‰è¾¾åˆ°äº†é¢„æœŸæ•ˆæœï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs groovy">task inputTask(<span class="hljs-attr">dependsOn:</span> outputTask) &#123;<br>    inputs.file testFile<br>    doLast &#123;<br>        println <span class="hljs-string">&quot;è¯»å–æ–‡ä»¶å†…å®¹ï¼š$&#123;inputs.files.singleFile.text&#125;&quot;</span><br>        println <span class="hljs-string">&quot;inputTask æ‰§è¡Œç»“æŸ&quot;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//ä¿®æ”¹ä¹‹åçš„æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>outputTask<br>outputTask æ‰§è¡Œç»“æŸ<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>inputTask<br>è¯»å–æ–‡ä»¶å†…å®¹ï¼šerdai666<br>inputTask æ‰§è¡Œç»“æŸ<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>testTask<br>testTask1 æ‰§è¡Œç»“æŸ<br></code></pre></td></tr></table></figure><h4 id="3ã€é€šè¿‡-API-æŒ‡å®šæ‰§è¡Œé¡ºåº"><a href="#3ã€é€šè¿‡-API-æŒ‡å®šæ‰§è¡Œé¡ºåº" class="headerlink" title="3ã€é€šè¿‡ API æŒ‡å®šæ‰§è¡Œé¡ºåº"></a>3ã€é€šè¿‡ API æŒ‡å®šæ‰§è¡Œé¡ºåº</h4><p>å¯ä»¥æŒ‡å®š Task æ‰§è¡Œé¡ºåºçš„ API æœ‰ï¼š</p><p><strong>mustRunAfter</strong>ï¼šæŒ‡å®šå¿…é¡»åœ¨å“ªä¸ª Task æ‰§è¡Œå®Œæˆä¹‹åæ‰§è¡Œ</p><p><strong>shouldRunAfter</strong>ï¼šè·Ÿ mustRunAfter ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºä¸å¼ºåˆ¶ï¼Œä¸å¸¸ç”¨</p><p><strong>finalizeBy</strong>ï¼šåœ¨å½“å‰ Task æ‰§è¡Œå®Œæˆä¹‹åï¼ŒæŒ‡å®šæ‰§è¡Œçš„ Task</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//======================================= mustRunAfter ===========================</span><br>task taskX&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskX&#x27;</span><br>    &#125;<br>&#125;<br><br>task taskY&#123;<br>    mustRunAfter taskX<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskY&#x27;</span><br>    &#125;<br>&#125;<br><br>task taskXY(<span class="hljs-attr">dependsOn:</span> [taskX,taskY])&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskXY&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ taskXY</span><br>./gradlew taskXY<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskX<br>taskX<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskY<br>taskY<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskXY<br>taskXY<br><br><span class="hljs-comment">//======================================= finalizeBy ===========================</span><br>task taskI&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskI&#x27;</span><br>    &#125;<br>&#125;<br><br>task taskJ&#123;<br>    finalizedBy taskI<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskJ&#x27;</span><br>    &#125;<br>&#125;<br><br><br>task taskIJ(<span class="hljs-attr">dependsOn:</span> [taskI,taskJ])&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;taskIJ&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰§è¡Œ taskIJ</span><br>./gradlew taskIJ<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskJ<br>taskJ<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskI<br>taskI<br><br>&gt; <span class="hljs-attr">Task :</span><span class="hljs-attr">app:</span>taskIJ<br>taskIJ<br></code></pre></td></tr></table></figure><h2 id="å››ã€è‡ªå®šä¹‰-Task-æŒ‚æ¥åˆ°-Android-åº”ç”¨æ„å»ºæµç¨‹"><a href="#å››ã€è‡ªå®šä¹‰-Task-æŒ‚æ¥åˆ°-Android-åº”ç”¨æ„å»ºæµç¨‹" class="headerlink" title="å››ã€è‡ªå®šä¹‰ Task æŒ‚æ¥åˆ° Android åº”ç”¨æ„å»ºæµç¨‹"></a>å››ã€è‡ªå®šä¹‰ Task æŒ‚æ¥åˆ° Android åº”ç”¨æ„å»ºæµç¨‹</h2><h3 id="1ï¼‰ã€Task-ä¾èµ–å…³ç³»æ’ä»¶ä»‹ç»"><a href="#1ï¼‰ã€Task-ä¾èµ–å…³ç³»æ’ä»¶ä»‹ç»" class="headerlink" title="1ï¼‰ã€Task ä¾èµ–å…³ç³»æ’ä»¶ä»‹ç»"></a>1ï¼‰ã€Task ä¾èµ–å…³ç³»æ’ä»¶ä»‹ç»</h3><p>æˆ‘ä»¬å¯ä»¥å¼•å…¥å¦‚ä¸‹æ’ä»¶æ¥æŸ¥çœ‹ Task çš„ä¸€ä¸ªä¾èµ–å…³ç³»ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//1ã€åœ¨æ ¹ build.gradle æ·»åŠ å¦‚ä¸‹ä»£ç </span><br>buildscript &#123;<br>    repositories &#123;<br>      <span class="hljs-comment">//...</span><br>        maven&#123;<br>           url <span class="hljs-string">&quot;https://plugins.gradle.org/m2/&quot;</span><br>        &#125;<br>    &#125;<br>    dependencies &#123;<br>      <span class="hljs-comment">//..</span><br>        classpath <span class="hljs-string">&quot;gradle.plugin.com.dorongold.plugins:task-tree:1.5&quot;</span><br>    &#125;<br>&#125;<br><br><br><span class="hljs-comment">// 2ã€åœ¨ app çš„ build.gradle ä¸­åº”ç”¨æ’ä»¶</span><br>apply <span class="hljs-attr">plugin:</span> com.dorongold.gradle.tasktree.TaskTreePlugin<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 3ã€åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š./gradlew &lt;ä»»åŠ¡å&gt; taskTree --no-repeat å‘½ä»¤å³å¯æŸ¥çœ‹</span><br><span class="hljs-comment"> * è¿™é‡Œä»¥æ‰§è¡Œ build è¿™ä¸ª task ä¸ºä¾‹</span><br><span class="hljs-comment"> */</span><br>./gradlew build taskTree --no-repeat<br></code></pre></td></tr></table></figure><p>ç»è¿‡ä¸Šé¢ 3 æ­¥ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¾èµ–å…³ç³»å›¾ï¼Œä»…æˆªå–éƒ¨åˆ†ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86c516a5a77b459da8395072715338d8~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210718114010544" style="zoom:50%;" /><h3 id="2ï¼‰ã€è‡ªå®šä¹‰-Task-æŒ‚æ¥åˆ°-Android-æ„å»ºæµç¨‹"><a href="#2ï¼‰ã€è‡ªå®šä¹‰-Task-æŒ‚æ¥åˆ°-Android-æ„å»ºæµç¨‹" class="headerlink" title="2ï¼‰ã€è‡ªå®šä¹‰ Task æŒ‚æ¥åˆ° Android æ„å»ºæµç¨‹"></a>2ï¼‰ã€è‡ªå®šä¹‰ Task æŒ‚æ¥åˆ° Android æ„å»ºæµç¨‹</h3><p>æˆ‘ä»¬çŸ¥é“ï¼ŒGradle åœ¨æ‰§è¡Œé˜¶æ®µå°±æ˜¯æ‰§è¡Œ Task åŠå…¶ä¾èµ–çš„ Taskï¼Œå°±æ¯”å¦‚ä¸Šé¢æˆªå›¾çš„ build Task çš„å…³ç³»ä¾èµ–å›¾ï¼Œå®ƒä¼šæŒ‰ç…§è¿™ä¸ªä¾èµ–å›¾æœ‰æ¡ä¸ç´Šçš„å»æ‰§è¡Œã€‚</p><p>é‚£ä¹ˆå¦‚æœæˆ‘æƒ³æŠŠè‡ªå·±è‡ªå®šä¹‰çš„ Task æŒ‚æ¥åˆ°è¿™ä¸ªæ„å»ºæµç¨‹ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p><h5 id="1ã€é€šè¿‡-dependsOn-æŒ‡å®š"><a href="#1ã€é€šè¿‡-dependsOn-æŒ‡å®š" class="headerlink" title="1ã€é€šè¿‡ dependsOn æŒ‡å®š"></a>1ã€é€šè¿‡ dependsOn æŒ‡å®š</h5><p><strong>æ³¨æ„ï¼š</strong> å•ç‹¬ä½¿ç”¨ dependsOn ï¼Œå¿…é¡»è®©æ„å»ºæµç¨‹ä¸­çš„ Task ä¾èµ–æˆ‘ä»¬è‡ªå®šä¹‰çš„ Taskï¼Œå¦åˆ™æˆ‘ä»¬çš„ Task ä¸ä¼šç”Ÿæ•ˆ</p><p>å¦‚ä¸‹ä»£ç æ¼”ç¤ºä¸€ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs groovy">task myCustomTask&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;This is myCustomTask&#x27;</span><br>    &#125;<br>&#125;<br><br>afterEvaluate &#123;<br>    <span class="hljs-comment">//1ã€æ‰¾åˆ°éœ€è¦çš„æ„å»ºæµç¨‹ Task</span><br>    <span class="hljs-keyword">def</span> mergeDebugResources = tasks.findByName(<span class="hljs-string">&quot;mergeDebugResources&quot;</span>)<br>    <span class="hljs-comment">//2ã€é€šè¿‡ dependsOn æŒ‡å®š</span><br>    mergeDebugResources.dependsOn(myCustomTask)<br>  <br>    <span class="hljs-comment">//å¦‚æœæ¢æˆä¸‹é¢è¿™ç§å†™æ³•åˆ™è‡ªå®šä¹‰ Task ä¸ä¼šç”Ÿæ•ˆ</span><br>    <span class="hljs-comment">//myCustomTask.dependsOn(mergeDebugResources)</span><br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬éªŒè¯ä¸€ä¸‹</p><p>é¦–å…ˆçœ‹ä¸€çœ¼ Task ä¾èµ–å…³ç³»å›¾ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/abf5fd86aaed4ecd818e9df7b0aa8ba1~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210718130023237" style="zoom:50%;" /><p>æˆ‘ä»¬è‡ªå®šä¹‰çš„ Task æŒ‚æ¥åˆ°äº† mergeDebugResources ä¸Š</p><p>æ‰§è¡Œä¸‹ build è¿™ä¸ª Taskï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬çš„ Task è¢«æ‰§è¡Œäº†ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d4a4b36ece04058ba2430def0685a72~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210718130303391" style="zoom:50%;" /><h5 id="2ã€é€šè¿‡-finalizedBy-æŒ‡å®š"><a href="#2ã€é€šè¿‡-finalizedBy-æŒ‡å®š" class="headerlink" title="2ã€é€šè¿‡ finalizedBy æŒ‡å®š"></a>2ã€é€šè¿‡ finalizedBy æŒ‡å®š</h5><p>åœ¨æŸä¸ª Task æ‰§è¡Œå®Œæˆåï¼ŒæŒ‡å®šéœ€è¦æ‰§è¡Œçš„ Task</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy">task myCustomTask&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;This is myCustomTask&#x27;</span><br>    &#125;<br>&#125;<br><br>afterEvaluate &#123;<br>    <span class="hljs-keyword">def</span> mergeDebugResources = tasks.findByName(<span class="hljs-string">&quot;mergeDebugResources&quot;</span>)<br>    <span class="hljs-comment">//å°† myCustomTask æŒ‚æ¥åœ¨ mergeDebugResources åé¢æ‰§è¡Œ</span><br>    mergeDebugResources.finalizedBy(myCustomTask)<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3ã€é€šè¿‡-mustRunAfter-é…åˆ-dependsOn-æŒ‡å®š"><a href="#3ã€é€šè¿‡-mustRunAfter-é…åˆ-dependsOn-æŒ‡å®š" class="headerlink" title="3ã€é€šè¿‡ mustRunAfter é…åˆ dependsOn æŒ‡å®š"></a>3ã€é€šè¿‡ mustRunAfter é…åˆ dependsOn æŒ‡å®š</h5><p>åœ¨ä¸¤ä¸ª Task ä¹‹é—´ï¼Œæ’å…¥è‡ªå®šä¹‰çš„ Task </p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs groovy">task myCustomTask&#123;<br>    doLast &#123;<br>        println <span class="hljs-string">&#x27;This is myCustomTask&#x27;</span><br>    &#125;<br>&#125;<br><br>afterEvaluate &#123;<br>    <span class="hljs-comment">//åœ¨ mergeDebugResources å’Œ processDebugResources ä¹‹é—´æ’å…¥ myCustomTask</span><br>    <span class="hljs-keyword">def</span> processDebugResources = tasks.findByName(<span class="hljs-string">&quot;processDebugResources&quot;</span>)<br>    <span class="hljs-keyword">def</span> mergeDebugResources = tasks.findByName(<span class="hljs-string">&quot;mergeDebugResources&quot;</span>)<br>    myCustomTask.mustRunAfter(mergeDebugResources)<br>    processDebugResources.dependsOn(myCustomTask)<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿° Task ä¾èµ–å˜åŒ–è¿‡ç¨‹ï¼š</p><p>processDebugResources -&gt; mergeDebugResources &#x3D;&#x3D;&#x3D;&gt; processDebugResources -&gt; myCustomTask -&gt; mergeDebugResources</p><h2 id="äº”ã€Gradle-ç›¸å…³å‘½ä»¤ä»‹ç»"><a href="#äº”ã€Gradle-ç›¸å…³å‘½ä»¤ä»‹ç»" class="headerlink" title="äº”ã€Gradle ç›¸å…³å‘½ä»¤ä»‹ç»"></a>äº”ã€Gradle ç›¸å…³å‘½ä»¤ä»‹ç»</h2><h3 id="1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ‰€æœ‰çš„-Project-å¯¹è±¡"><a href="#1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ‰€æœ‰çš„-Project-å¯¹è±¡" class="headerlink" title="1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ‰€æœ‰çš„ Project å¯¹è±¡"></a>1ï¼‰ã€æŸ¥çœ‹é¡¹ç›®æ‰€æœ‰çš„ Project å¯¹è±¡</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy">./gradlew project<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€æŸ¥çœ‹-module-ä¸‹æ‰€æœ‰çš„-task"><a href="#2ï¼‰ã€æŸ¥çœ‹-module-ä¸‹æ‰€æœ‰çš„-task" class="headerlink" title="2ï¼‰ã€æŸ¥çœ‹ module ä¸‹æ‰€æœ‰çš„ task"></a>2ï¼‰ã€æŸ¥çœ‹ module ä¸‹æ‰€æœ‰çš„ task</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs groovy">./gradlew <span class="hljs-attr">$moduleName:</span>tasks<br><br><span class="hljs-comment">//æ¼”ç¤º</span><br><span class="hljs-comment">//æŸ¥çœ‹ app ä¸‹çš„æ‰€æœ‰ Task</span><br>./gradlew <span class="hljs-attr">app:</span>tasks<br><br><span class="hljs-comment">//æŸ¥çœ‹æ ¹ Project çš„æ‰€æœ‰ Task</span><br>./gradlew tasks<br></code></pre></td></tr></table></figure><h3 id="3ï¼‰ã€æ‰§è¡Œä¸€ä¸ª-Task"><a href="#3ï¼‰ã€æ‰§è¡Œä¸€ä¸ª-Task" class="headerlink" title="3ï¼‰ã€æ‰§è¡Œä¸€ä¸ª Task"></a>3ï¼‰ã€æ‰§è¡Œä¸€ä¸ª Task</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs groovy">./gradlew $taskName<br><br><span class="hljs-comment">//æ‰§è¡Œ build Task</span><br>./gradlew build<br></code></pre></td></tr></table></figure><h3 id="4ï¼‰ã€æŸ¥çœ‹-module-ä¸‹çš„ç¬¬ä¸‰æ–¹åº“ä¾èµ–å…³ç³»"><a href="#4ï¼‰ã€æŸ¥çœ‹-module-ä¸‹çš„ç¬¬ä¸‰æ–¹åº“ä¾èµ–å…³ç³»" class="headerlink" title="4ï¼‰ã€æŸ¥çœ‹ module ä¸‹çš„ç¬¬ä¸‰æ–¹åº“ä¾èµ–å…³ç³»"></a>4ï¼‰ã€æŸ¥çœ‹ module ä¸‹çš„ç¬¬ä¸‰æ–¹åº“ä¾èµ–å…³ç³»</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs groovy">./gradlew <span class="hljs-attr">$moduleName:</span>dependencies<br><br><span class="hljs-comment">//æŸ¥çœ‹ app ä¸‹çš„ç¬¬ä¸‰æ–¹åº“ä¾èµ–å…³ç³»</span><br>./gradlew <span class="hljs-attr">app:</span>dependencies<br></code></pre></td></tr></table></figure><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€Gradle ä¸‰ä¸ªé˜¶æ®µåŠç”Ÿå‘½å‘¨æœŸ Hook ç‚¹</p><p>2ã€Project å¯¹è±¡å¸¸ç”¨ API ä»‹ç»ï¼Œæ‰©å±•å±æ€§çš„åº”ç”¨ä¸å®æˆ˜</p><p>3ã€Task å¸¸ç”¨é…ç½®ä»‹ç»ï¼Œå…¶ä¸­é€šè¿‡ Task è¾“å…¥è¾“å‡ºæŒ‡å®šæ‰§è¡Œé¡ºåºé‡åˆ°äº†å‘ï¼šä¼šå…ˆæ‰§è¡Œè¾“å…¥çš„ Taskã€‚æœ€ç»ˆè¿˜æ˜¯é€šè¿‡ä½¿ç”¨ dependsOn æŒ‡å®šå…·ä½“ä¾èµ–æ‰è¾¾åˆ°é¢„æœŸæ•ˆæœ</p><p>4ã€è‡ªå®šä¹‰ Task æŒ‚æ¥åˆ° Android åº”ç”¨æ„å»ºæµç¨‹çš„ä¸‰ç§æ–¹å¼ï¼š</p><blockquote><p>1ã€å•ç‹¬ä½¿ç”¨ dependsOn ï¼ˆæ³¨æ„å¿…é¡»ä½¿ç”¨æ„å»ºæµç¨‹ä¸­çš„ Task ä¾èµ–æˆ‘ä»¬è‡ªå®šä¹‰çš„ Taskï¼‰</p><p>2ã€ä½¿ç”¨ finalizedBy</p><p>3ã€mustRunAfter é…åˆ dependsOn</p></blockquote><p>5ã€Gradle ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ä»‹ç»</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®²å¦‚ä½•è‡ªå®šä¹‰ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œæ•¬è¯·æœŸå¾…å§ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://juejin.cn/post/6950643579643494431#heading-14">è¡¥é½AndroidæŠ€èƒ½æ ‘ - ç©è½¬Gradle</a></p><p><a href="https://juejin.cn/post/6937208620337610766/#heading-31">Gradleå­¦ä¹ ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šGradleæ ¸å¿ƒæ¢ç´¢</a></p><p><a href="https://juejin.cn/post/6844904122492125198#heading-26">æ·±åº¦æ¢ç´¢ Gradle è‡ªåŠ¨åŒ–æ„å»ºæŠ€æœ¯ï¼ˆä¸‰ã€Gradle æ ¸å¿ƒè§£å¯†ï¼‰</a></p><p><a href="https://juejin.cn/post/6982379643311489032#heading-15">ä»Gradleç”Ÿå‘½å‘¨æœŸåˆ°è‡ªå®šä¹‰TaskæŒ‚æ¥åˆ°Buildæ„å»ºæµç¨‹å…¨è§£</a></p><p><a href="https://juejin.cn/post/6947675376835362846#heading-1">7ä¸ªä½ åº”è¯¥çŸ¥é“çš„Gradleå®ç”¨æŠ€å·§</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>Gradle</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Gradle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Gradle ç³»åˆ— ï¼ˆä¸€ï¼‰ã€Gradleç›¸å…³æ¦‚å¿µç†è§£ï¼ŒGroovyåŸºç¡€</title>
    <link href="/2022/10/11/Gradle%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%80%EF%BC%89%E3%80%81Gradle%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3%EF%BC%8CGroovy%E5%9F%BA%E7%A1%80/"/>
    <url>/2022/10/11/Gradle%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%80%EF%BC%89%E3%80%81Gradle%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3%EF%BC%8CGroovy%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f912f1dfdee430ab27ecd69901ee77b~tplv-k3u1fbpfcp-watermark.image" alt="gradle@å‡¡ç§‘å¿«å›¾.png"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¼•ç”¨ Gradle å®˜æ–¹ä¸€æ®µå¯¹Gradleçš„ä»‹ç»ï¼šGradle is an open-source build automation tool focused on flexibility and performance. Gradle build scripts are written using a Groovy or Kotlin DSL.ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š<strong>Gradle æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œä¸“æ³¨äºçµæ´»æ€§å’Œæ€§èƒ½ã€‚Gradle æ„å»ºè„šæœ¬æ˜¯ä½¿ç”¨ Groovy æˆ– Kotlin DSL ç¼–å†™çš„ã€‚</strong> ä¹‹å‰å®˜ç½‘çš„ä»‹ç»æ˜¯è¯´ Gradle æ˜¯åŸºäº Groovy çš„ DSLï¼Œä¸ºå•¥ç°åœ¨åˆå¤šäº†ä¸ª Kotlin  å‘¢ï¼Ÿå› ä¸º Gradle ä»5.0å¼€å§‹ï¼Œå¼€å§‹æ”¯æŒäº† Kotlin DSLï¼Œç°åœ¨å·²ç»å‘å±•åˆ°äº†6.8.3ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Groovy æˆ–è€… Kotlin æ¥ç¼–å†™ Gradleè„šæœ¬ã€‚Kotlin ç°ä½œä¸º Android ç¬¬ä¸€å¼€å‘è¯­è¨€ï¼Œé‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œä½œä¸ºä¸€ä¸ª Androidå¼€å‘è€…ï¼ŒKotlin æ˜¯å¿…å­¦çš„ï¼Œåç»­æˆ‘ä¹Ÿä¼šå‡ºä¸ª Kotlin ç³»åˆ—æ–‡ç« ã€‚ä»Šå¤©æˆ‘ä»¬çš„é‡ç‚¹æ˜¯ä»‹ç»ä¸€äº› Gradle çš„ç›¸å…³æ¦‚å¿µï¼Œä»¥åŠå¯¹ Groovy è¯­è¨€çš„å­¦ä¹ </p><h2 id="ä¸€ã€é—®é¢˜"><a href="#ä¸€ã€é—®é¢˜" class="headerlink" title="ä¸€ã€é—®é¢˜"></a>ä¸€ã€é—®é¢˜</h2><p>æˆ‘å­¦ä¹ çŸ¥è¯†å–œæ¬¢ä»¥é—®é¢˜ä¸ºå¯¼å‘ï¼Œè¿™æ ·å¯ä»¥è®©æˆ‘æ˜ç¡®å­¦ä¹ çš„ç›®çš„ï¼Œæé«˜å­¦ä¹ æ•ˆç‡ï¼Œä¸‹é¢ä¹Ÿæ˜¯æˆ‘åœ¨å­¦ä¹  Gradle çš„è¿‡ç¨‹ä¸­ï¼Œç”±æµ…å…¥æ·±æ‰€äº§ç”Ÿçš„ä¸€äº›ç–‘é—®ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒAndroid åº”ç”¨æ˜¯ç”¨ Gradle æ„å»ºçš„ï¼Œåœ¨åˆšå¼€å‘ Android çš„æ—¶å€™æˆ‘ä¼šæƒ³ï¼š</p><p>1ã€ä»€ä¹ˆæ˜¯è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Ÿ</p><p>2ã€Gradle æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>3ã€ä»€ä¹ˆæ˜¯ DSLï¼Ÿ</p><p>4ã€ä»€ä¹ˆæ˜¯ Groovyï¼Ÿ</p><p>5ã€Gradle å’Œ Groovy æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>6ã€é™æ€ç¼–ç¨‹è¯­è¨€å’ŒåŠ¨æ€ç¼–ç¨‹è¯­è¨€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><p>å¸¦ç€è¿™äº›ç–‘é—®ï¼Œæˆ‘ä»¬ç»§ç»­å­¦ä¹ </p><h3 id="1ã€è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·"><a href="#1ã€è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·" class="headerlink" title="1ã€è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·"></a>1ã€è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·</h3><p>åœ¨ Android ä¸Šçš„ä½“ç°ï¼Œç®€å•çš„è¯´å°±æ˜¯è‡ªåŠ¨åŒ–çš„ç¼–è¯‘ã€æ‰“åŒ…ç¨‹åº</p><p>åœ¨ä¸Šå¤§å­¦å­¦ä¹  Java é‚£ä¼šï¼Œè€å¸ˆä¸ºäº†è®©æˆ‘ä»¬æ·±åˆ»çš„ä½“éªŒæ’¸ç çš„é­…åŠ›ï¼Œéƒ½æ˜¯é€šè¿‡æ–‡æœ¬ç›´æ¥æ•²ä»£ç çš„ï¼Œæ•²å®Œä¹‹åæŠŠæ‰©å±•åæ”¹æˆ<code>.java</code>åç¼€ï¼Œç„¶åé€šè¿‡<code>javac</code>å‘½ä»¤ç¼–è¯‘ï¼Œç¼–è¯‘é€šè¿‡åï¼Œåœ¨æ‰§è¡Œ<code>java</code>å‘½ä»¤å»è¿è¡Œï¼Œé‚£ä¹ˆè¿™ç§æ–‡ä»¶ä¸€å¤šï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½å¾—æ‰‹åŠ¨å»æ“ä½œï¼Œæ•ˆç‡ä¼šå¤§å¤§çš„é™ä½ï¼Œè¿™ä¸ªæ—¶å€™å°±å‡ºç°äº†è‡ªåŠ¨åŒ–ç¼–è¯‘å·¥å…·ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç¼–è¯‘å·¥å…·ä¸­ï¼Œç‚¹å‡»ç¼–è¯‘æŒ‰é’®ï¼Œç¼–è¯‘å®Œæˆåï¼Œæ— éœ€å…¶ä»–æ‰‹åŠ¨æ“ä½œï¼Œç¨‹åºå°±å¯ä»¥ç›´æ¥è¿è¡Œäº†ï¼Œè‡ªåŠ¨åŒ–ç¼–è¯‘å·¥å…·å°±æ˜¯æœ€æ—©çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ã€‚é‚£ä¹ˆéšç€ä¸šåŠ¡åŠŸèƒ½çš„ä¸æ–­æ‰©å±•ï¼Œæˆ‘ä»¬çš„äº§å“éœ€è¦åŠ å…¥å¤šåª’ä½“èµ„æºï¼Œéœ€è¦æ‰“ä¸åŒçš„æ¸ é“åŒ…å‘å¸ƒåˆ°ä¸åŒçš„æ¸ é“ï¼Œé‚£å°±å¿…é¡»ä¾é è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œè¦èƒ½æ”¯æŒå¹³å°ã€éœ€æ±‚ç­‰æ–¹é¢çš„å·®å¼‚ã€èƒ½æ·»åŠ è‡ªå®šä¹‰ä»»åŠ¡ã€ä¸“é—¨çš„ç”¨æ¥æ‰“åŒ…ç”Ÿæˆæœ€ç»ˆäº§å“çš„ä¸€ä¸ªç¨‹åºã€å·¥å…·ï¼Œè¿™ä¸ªå°±æ˜¯è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ã€‚è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·æœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€æ®µä»£ç ç¨‹åºã€‚è¿™å°±æ˜¯è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·çš„ä¸€ä¸ªå‘å±•å†ç¨‹ï¼Œè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¸æ–­çš„å‘å±•å’Œä¼˜åŒ–</p><h3 id="2ã€Gradle-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2ã€Gradle-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2ã€Gradle æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2ã€Gradle æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ç†è§£äº†è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œé‚£ä¹ˆç†è§£ Gradle å°±æ¯”è¾ƒç®€å•äº†ï¼Œè¿˜æ˜¯å¼•ç”¨å®˜æ–¹çš„é‚£ä¸€æ®µè¯ï¼š</p><p><strong>Gradle æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œä¸“æ³¨äºçµæ´»æ€§å’Œæ€§èƒ½ã€‚Gradle æ„å»ºè„šæœ¬æ˜¯ä½¿ç”¨ Groovy æˆ– Kotlin DSL ç¼–å†™çš„ã€‚</strong></p><p>Gradle æ˜¯ Android çš„é»˜è®¤æ„å»ºå·¥å…·ï¼ŒAndroid é¡¹ç›®è¿™ä¹ˆå¤šä¸œè¥¿ï¼Œæ—¢æœ‰æˆ‘ä»¬è‡ªå·±å†™çš„ javaã€kotlinã€C++ã€Dart ä»£ç ï¼Œä¹Ÿæœ‰ç³»ç»Ÿè‡ªå·±çš„ javaã€Cï¼ŒC++ ä»£ç ï¼Œè¿˜æœ‰å¼•å…¥çš„ç¬¬ä¸‰æ–¹ä»£ç ï¼Œè¿˜æœ‰å¤šåª’ä½“èµ„æºï¼Œè¿™ä¹ˆå¤šä»£ç ã€èµ„æºæ‰“åŒ…æˆ APK æ–‡ä»¶è‚¯å®šè¦æœ‰ä¸€ä¸ªè§„èŒƒï¼Œå¹²è¿™ä¸ªæ´»çš„å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ gradle äº†ï¼Œæ€»è€Œè¨€ä¹‹ï¼ŒGradleå°±æ˜¯ä¸€ä¸ªå¸®æˆ‘ä»¬æ‰“åŒ… APK çš„å·¥å…·</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/249405f870924185987c118985a4cc69~tplv-k3u1fbpfcp-zoom-1.image" alt="gradle"></p><h3 id="3ã€ä»€ä¹ˆæ˜¯DSLï¼Ÿ"><a href="#3ã€ä»€ä¹ˆæ˜¯DSLï¼Ÿ" class="headerlink" title="3ã€ä»€ä¹ˆæ˜¯DSLï¼Ÿ"></a>3ã€ä»€ä¹ˆæ˜¯DSLï¼Ÿ</h3><p>DSLè‹±æ–‡å…¨ç§°ï¼š<strong>domain specific language</strong>ï¼Œä¸­æ–‡ç¿»è¯‘å³é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œä¾‹å¦‚ï¼šHTMLï¼ŒXMLç­‰ DSL è¯­è¨€</p><p><strong>ç‰¹ç‚¹</strong></p><ul><li>è§£å†³ç‰¹å®šé¢†åŸŸçš„ä¸“æœ‰é—®é¢˜</li><li>å®ƒä¸ç³»ç»Ÿç¼–ç¨‹è¯­è¨€èµ°çš„æ˜¯ä¸¤ä¸ªæç«¯ï¼Œç³»ç»Ÿç¼–ç¨‹è¯­è¨€æ˜¯å¸Œæœ›è§£å†³æ‰€æœ‰çš„é—®é¢˜ï¼Œæ¯”å¦‚ Java è¯­è¨€å¸Œæœ›èƒ½åš Android å¼€å‘ï¼Œåˆå¸Œæœ›èƒ½åšåå°å¼€å‘ï¼Œå®ƒå…·æœ‰æ¨ªå‘æ‰©å±•çš„ç‰¹æ€§ã€‚è€Œ DSL å…·æœ‰çºµå‘æ·±å…¥è§£å†³ç‰¹å®šé¢†åŸŸä¸“æœ‰é—®é¢˜çš„ç‰¹æ€§ã€‚</li></ul><p>æ€»çš„æ¥è¯´ï¼ŒDSL çš„<strong>æ ¸å¿ƒæ€æƒ³</strong>å°±æ˜¯ï¼šâ€œæ±‚ä¸“ä¸æ±‚å…¨ï¼Œè§£å†³ç‰¹å®šé¢†åŸŸçš„é—®é¢˜â€ã€‚</p><h3 id="4ã€ä»€ä¹ˆæ˜¯-Groovyï¼Ÿ"><a href="#4ã€ä»€ä¹ˆæ˜¯-Groovyï¼Ÿ" class="headerlink" title="4ã€ä»€ä¹ˆæ˜¯ Groovyï¼Ÿ"></a>4ã€ä»€ä¹ˆæ˜¯ Groovyï¼Ÿ</h3><p><strong>Groovy æ˜¯åŸºäº JVM çš„è„šæœ¬è¯­è¨€ï¼Œå®ƒæ˜¯åŸºäºJavaæ‰©å±•çš„åŠ¨æ€è¯­è¨€</strong></p><p>åŸºäº JVM çš„è¯­è¨€æœ‰å¾ˆå¤šç§ï¼Œå¦‚ï¼šGroovyï¼ŒKotlinï¼ŒJavaï¼ŒScalaç­‰ç­‰ï¼Œä»–ä»¬éƒ½æ‹¥æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹æ€§ï¼šæœ€ç»ˆéƒ½ä¼šç¼–è¯‘ç”Ÿæˆ Java å­—èŠ‚ç æ–‡ä»¶å¹¶åœ¨ JVM ä¸Šè¿è¡Œã€‚</p><p>å› ä¸º Groovy å°±æ˜¯å¯¹ Java çš„æ‰©å±•ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å­¦ä¹  Java çš„æ–¹å¼å»å­¦ä¹  Groovy ã€‚ å­¦ä¹ æˆæœ¬ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒä½çš„ï¼Œå³ä½¿å¼€å‘è¿‡ç¨‹ä¸­å¿˜è®° Groovy è¯­æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨ Java è¯­æ³•ç»§ç»­ç¼–ç </p><h3 id="5ã€Gradle-å’Œ-Groovy-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#5ã€Gradle-å’Œ-Groovy-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="5ã€Gradle å’Œ Groovy æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>5ã€Gradle å’Œ Groovy æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>Gradle æ˜¯åŸºäº Groovy çš„ä¸€ç§è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼Œæ˜¯è¿è¡Œåœ¨JVMä¸Šçš„ä¸€ä¸ªç¨‹åºï¼ŒGroovyæ˜¯åŸºäºJVMçš„ä¸€ç§è¯­è¨€ï¼ŒGradle å’Œ Groovy çš„å…³ç³»å°±åƒ Android å’Œ Java çš„å…³ç³»ä¸€æ ·</p><h3 id="6ã€é™æ€ç¼–ç¨‹è¯­è¨€å’ŒåŠ¨æ€ç¼–ç¨‹è¯­è¨€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#6ã€é™æ€ç¼–ç¨‹è¯­è¨€å’ŒåŠ¨æ€ç¼–ç¨‹è¯­è¨€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="6ã€é™æ€ç¼–ç¨‹è¯­è¨€å’ŒåŠ¨æ€ç¼–ç¨‹è¯­è¨€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>6ã€é™æ€ç¼–ç¨‹è¯­è¨€å’ŒåŠ¨æ€ç¼–ç¨‹è¯­è¨€æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>é™æ€ç¼–ç¨‹è¯­è¨€æ˜¯åœ¨ç¼–è¯‘æœŸå°±è¦ç¡®å®šå˜é‡çš„æ•°æ®ç±»å‹ï¼Œè€ŒåŠ¨æ€ç¼–ç¨‹è¯­è¨€åˆ™æ˜¯åœ¨è¿è¡ŒæœŸç¡®å®šå˜é‡çš„æ•°æ®ç±»å‹ã€‚å°±åƒé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ä¸€æ ·ï¼Œä¸€ä¸ªå¼ºè°ƒçš„æ˜¯ç¼–è¯‘æœŸï¼Œä¸€ä¸ªå¼ºè°ƒçš„æ˜¯è¿è¡ŒæœŸï¼Œå¸¸è§çš„é™æ€ç¼–ç¨‹è¯­è¨€æœ‰Javaï¼ŒKotlinç­‰ç­‰ï¼ŒåŠ¨æ€ç¼–ç¨‹è¯­è¨€æœ‰Groovyï¼ŒPythonç­‰è¯­è¨€ã€‚</p><h2 id="äºŒã€Groovy-å¼€å‘ç¯å¢ƒæ­å»ºä¸å·¥ç¨‹åˆ›å»º"><a href="#äºŒã€Groovy-å¼€å‘ç¯å¢ƒæ­å»ºä¸å·¥ç¨‹åˆ›å»º" class="headerlink" title="äºŒã€Groovy å¼€å‘ç¯å¢ƒæ­å»ºä¸å·¥ç¨‹åˆ›å»º"></a>äºŒã€Groovy å¼€å‘ç¯å¢ƒæ­å»ºä¸å·¥ç¨‹åˆ›å»º</h2><h3 id="1ã€åˆ°å®˜ç½‘ä¸‹è½½JDKå®‰è£…-å¹¶é…ç½®å¥½-JDK-ç¯å¢ƒ"><a href="#1ã€åˆ°å®˜ç½‘ä¸‹è½½JDKå®‰è£…-å¹¶é…ç½®å¥½-JDK-ç¯å¢ƒ" class="headerlink" title="1ã€åˆ°å®˜ç½‘ä¸‹è½½JDKå®‰è£…,å¹¶é…ç½®å¥½ JDK ç¯å¢ƒ"></a>1ã€åˆ°å®˜ç½‘ä¸‹è½½JDKå®‰è£…,å¹¶é…ç½®å¥½ JDK ç¯å¢ƒ</h3><ul><li><a href="https://www.oracle.com/hk/java/technologies/javase-downloads.html">JDKä¸‹è½½</a></li><li><a href="https://juejin.cn/post/6844903895504797710">JDKç¯å¢ƒå˜é‡æ­å»º</a></li></ul><h3 id="2ã€åˆ°å®˜ç½‘ä¸‹è½½å¥½-Groovy-SDKï¼Œå¹¶è§£å‹åˆ°åˆé€‚çš„ä½ç½®"><a href="#2ã€åˆ°å®˜ç½‘ä¸‹è½½å¥½-Groovy-SDKï¼Œå¹¶è§£å‹åˆ°åˆé€‚çš„ä½ç½®" class="headerlink" title="2ã€åˆ°å®˜ç½‘ä¸‹è½½å¥½ Groovy SDKï¼Œå¹¶è§£å‹åˆ°åˆé€‚çš„ä½ç½®"></a>2ã€åˆ°å®˜ç½‘ä¸‹è½½å¥½ Groovy SDKï¼Œå¹¶è§£å‹åˆ°åˆé€‚çš„ä½ç½®</h3><ul><li><a href="https://groovy.apache.org/download.html">Groovy SDK ä¸‹è½½é“¾æ¥</a></li></ul><h3 id="3ã€é…ç½®-Groovy-ç¯å¢ƒå˜é‡"><a href="#3ã€é…ç½®-Groovy-ç¯å¢ƒå˜é‡" class="headerlink" title="3ã€é…ç½® Groovy ç¯å¢ƒå˜é‡"></a>3ã€é…ç½® Groovy ç¯å¢ƒå˜é‡</h3><ul><li><a href="https://www.jianshu.com/p/b5f4b33c7c24">Groovy ç¯å¢ƒå˜é‡</a></li></ul><h3 id="4ã€åˆ°å®˜ç½‘ä¸‹è½½-IntelliJ-IDEA-å¼€å‘å·¥å…·å¹¶å®‰è£…"><a href="#4ã€åˆ°å®˜ç½‘ä¸‹è½½-IntelliJ-IDEA-å¼€å‘å·¥å…·å¹¶å®‰è£…" class="headerlink" title="4ã€åˆ°å®˜ç½‘ä¸‹è½½ IntelliJ IDEA å¼€å‘å·¥å…·å¹¶å®‰è£…"></a>4ã€åˆ°å®˜ç½‘ä¸‹è½½ IntelliJ IDEA å¼€å‘å·¥å…·å¹¶å®‰è£…</h3><ul><li><a href="https://www.jetbrains.com/idea/">IntelliJ IDEA å¼€å‘å·¥å…·ä¸‹è½½</a></li></ul><h3 id="5ã€åˆ›å»º-Groovy-å·¥ç¨‹å³å¯"><a href="#5ã€åˆ›å»º-Groovy-å·¥ç¨‹å³å¯" class="headerlink" title="5ã€åˆ›å»º Groovy å·¥ç¨‹å³å¯"></a>5ã€åˆ›å»º Groovy å·¥ç¨‹å³å¯</h3><p>å®Œæˆäº†ä¸Šè¿°4ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å¼€å§‹åˆ›å»ºä¸€ä¸ª Groovy å·¥ç¨‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5212e2c5be0b40d1948d0e4d0c4dd58a~tplv-k3u1fbpfcp-watermark.image" alt="image-20210314155550728 (1).png"></p><p>æŒ‰ç…§ä¸Šè¿°å›¾ç‰‡ä¸­æ­¥éª¤å³å¯å®Œæˆä¸€ä¸ª Groovy å·¥ç¨‹åˆ›å»ºï¼Œä¸‹é¢å°±å¯ä»¥ä½¿ç”¨ IntelliJ IDEA è¿™ä¸ªå·¥å…·æ¥å­¦ä¹  Groovy äº†ï¼Œæˆ‘ä¸‹é¢æ‰€æœ‰ä»£ç éƒ½æ˜¯åœ¨ IntelliJ IDEA ä¸Šè·‘çš„</p><p><strong>å°æŠ€å·§ï¼š</strong> ä½œä¸º Android å¼€å‘è€…ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ AndroidStudio è¿›è¡Œå¼€å‘çš„ï¼Œä½†æ˜¯ AndroidStudio å¯¹äº Groovy æ”¯æŒä¸æ˜¯å¾ˆå‹å¥½ï¼Œå„ç§æ²¡æœ‰æç¤ºï¼Œæ¶‰åŠåˆ°é—­åŒ…ï¼Œä½ ä¹Ÿä¸çŸ¥é“é—­åŒ…çš„å‚æ•°æ˜¯å•¥ï¼Ÿå› æ­¤è¿™ä¸ªæ—¶å€™ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ IntelliJ IDEA å…ˆå¼„å¥½ï¼Œåœ¨å¤åˆ¶è¿‡å»ï¼ŒIntelliJ IDEA å¯¹Groovy çš„æ”¯æŒè¿˜æ˜¯å¾ˆå‹å¥½çš„</p><h2 id="ä¸‰ã€Groovy-åŸºç¡€è¯­æ³•"><a href="#ä¸‰ã€Groovy-åŸºç¡€è¯­æ³•" class="headerlink" title="ä¸‰ã€Groovy åŸºç¡€è¯­æ³•"></a>ä¸‰ã€Groovy åŸºç¡€è¯­æ³•</h2><p>å†æ¬¡å¼ºè°ƒ Groovy æ˜¯åŸºäº java æ‰©å±•çš„åŠ¨æ€è¯­è¨€ï¼Œç›´æ¥å†™ java ä»£ç æ˜¯æ²¡é—®é¢˜çš„ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼ŒGroovy çš„ä¼˜åŠ¿åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p><p>åœ¨äº Groovy æä¾›äº†æ›´åŠ çµæ´»ç®€å•çš„è¯­æ³•ï¼Œå¤§é‡çš„è¯­æ³•ç³–ä»¥åŠé—­åŒ…ç‰¹æ€§å¯ä»¥è®©ä½ ç”¨æ›´å°‘çš„ä»£ç æ¥å®ç°å’Œ Java åŒæ ·çš„åŠŸèƒ½ã€‚æ¯”å¦‚è§£æxmlæ–‡ä»¶ï¼ŒGroovy å°±éå¸¸æ–¹ä¾¿ï¼Œåªéœ€è¦å‡ è¡Œä»£ç å°±èƒ½æå®šï¼Œè€Œå¦‚æœç”¨ Java åˆ™éœ€è¦å‡ åè¡Œä»£ç ã€‚</p><h3 id="1ã€æ”¯æŒåŠ¨æ€ç±»å‹ï¼Œä½¿ç”¨-def-å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå˜é‡"><a href="#1ã€æ”¯æŒåŠ¨æ€ç±»å‹ï¼Œä½¿ç”¨-def-å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå˜é‡" class="headerlink" title="1ã€æ”¯æŒåŠ¨æ€ç±»å‹ï¼Œä½¿ç”¨ def å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå˜é‡"></a>1ã€æ”¯æŒåŠ¨æ€ç±»å‹ï¼Œä½¿ç”¨ def å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå˜é‡</h3><p>åœ¨ Groovy ä¸­å¯ä»¥ä½¿ç”¨ def å…³é”®å­—å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå½“ç„¶ Java é‡Œé¢å®šä¹‰æ•°æ®ç±»å‹çš„æ–¹å¼ï¼Œåœ¨ Groovy ä¸­éƒ½èƒ½ç”¨</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//Java ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šè¿™ä¹ˆå®šä¹‰</span><br><span class="hljs-type">int</span> age = <span class="hljs-number">16</span><br>String name = <span class="hljs-string">&quot;erdai&quot;</span><br><br><span class="hljs-comment">//Groovy ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ï¼Œåœ¨å˜é‡èµ‹å€¼åï¼ŒGroovy ç¼–è¯‘å™¨ä¼šæ¨æ–­å‡ºå˜é‡çš„å®é™…ç±»å‹</span><br><span class="hljs-keyword">def</span> age = <span class="hljs-number">16</span><br><span class="hljs-keyword">def</span> name = <span class="hljs-string">&#x27;erdai&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="2ã€ä¸ç”¨å†™-å·"><a href="#2ã€ä¸ç”¨å†™-å·" class="headerlink" title="2ã€ä¸ç”¨å†™ ; å·"></a>2ã€ä¸ç”¨å†™ ; å·</h3><p>ç°åœ¨æ¯”è¾ƒæ–°çš„è¯­è¨€éƒ½ä¸ç”¨å†™ï¼Œå¦‚ Kotlin</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">def</span> age = <span class="hljs-number">16</span><br><span class="hljs-keyword">def</span> name = <span class="hljs-string">&#x27;erdai&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="3ã€æ²¡æœ‰åŸºæœ¬æ•°æ®ç±»å‹äº†ï¼Œå…¨æ˜¯å¼•ç”¨ç±»å‹"><a href="#3ã€æ²¡æœ‰åŸºæœ¬æ•°æ®ç±»å‹äº†ï¼Œå…¨æ˜¯å¼•ç”¨ç±»å‹" class="headerlink" title="3ã€æ²¡æœ‰åŸºæœ¬æ•°æ®ç±»å‹äº†ï¼Œå…¨æ˜¯å¼•ç”¨ç±»å‹"></a>3ã€æ²¡æœ‰åŸºæœ¬æ•°æ®ç±»å‹äº†ï¼Œå…¨æ˜¯å¼•ç”¨ç±»å‹</h3><p>ä¸Šé¢è¯´åˆ°ï¼Œå®šä¹‰ä¸€ä¸ªå˜é‡ä½¿ç”¨ def å…³é”®å­—ï¼Œä½†æ˜¯ Groovy æ˜¯åŸºäº Java æ‰©å±•çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Java é‡Œé¢çš„ç±»å‹ï¼Œå¦‚ Java ä¸­8å¤§åŸºæœ¬ç±»å‹ï¼šbyte , short , int , long , float , double ï¼Œcharï¼Œboolean</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs gas">//å®šä¹‰8å¤§åŸºæœ¬ç±»å‹<br>byte mByte = 1<br>short mShort = 2<br>int mInt = 3<br>long mLong = 4<br>float mFloat = 5<br>double mDouble = 6<br>char mChar = &#x27;a&#x27;<br>boolean mBoolean = true<br>//å¯¹ç±»å‹è¿›è¡Œæ‰“å°<br>println(mByte.class)<br>println(mShort.class)<br>println(mInt.class)<br>println(mLong.class)<br>println(mFloat.class)<br>println(mDouble.class)<br>println(mChar.class)<br>println(mBoolean.class)<br><br>//æ‰“å°ç»“æœå¦‚ä¸‹:<br>class java.lang.Byte<br>class java.lang.Short<br>class java.lang.Integer<br>class java.lang.Long<br>class java.lang.Float<br>class java.lang.Double<br>class java.lang.Character<br>class java.lang.Boolean<br></code></pre></td></tr></table></figure><p>å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š<strong>Groovyä¸­æ²¡æœ‰åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå…¨æ˜¯å¼•ç”¨ç±»å‹ï¼Œå³ä½¿å®šä¹‰äº†åŸºç¡€ç±»å‹ï¼Œä¹Ÿä¼šè¢«è½¬æ¢æˆå¯¹åº”çš„åŒ…è£…ç±»</strong></p><h3 id="4ã€æ–¹æ³•å˜åŒ–"><a href="#4ã€æ–¹æ³•å˜åŒ–" class="headerlink" title="4ã€æ–¹æ³•å˜åŒ–"></a>4ã€æ–¹æ³•å˜åŒ–</h3><p>1ã€ä½¿ç”¨ def å…³é”®å­—å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•ä¸éœ€è¦æŒ‡å®šè¿”å›å€¼ç±»å‹ï¼Œå‚æ•°ç±»å‹ï¼Œæ–¹æ³•ä½“å†…çš„æœ€åä¸€è¡Œä¼šè‡ªåŠ¨ä½œä¸ºè¿”å›å€¼ï¼Œè€Œä¸éœ€è¦returnå…³é”®å­—</p><p>2ã€æ–¹æ³•è°ƒç”¨å¯ä»¥ä¸å†™ () ï¼Œæœ€å¥½è¿˜æ˜¯åŠ ä¸Š () çš„å¥½ï¼Œä¸ç„¶å¯è¯»æ€§ä¸å¥½</p><p>3ã€å®šä¹‰æ–¹æ³•æ—¶ï¼Œå¦‚æœå‚æ•°æ²¡æœ‰è¿”å›å€¼ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥ defï¼Œä½¿ç”¨ void å³å¯</p><p>4ã€å®é™…ä¸Šä¸ç®¡æœ‰æ²¡æœ‰è¿”å›å€¼ï¼ŒGroovy ä¸­è¿”å›çš„éƒ½æ˜¯ Object ç±»å‹</p><p>5ã€ç±»çš„æ„é€ æ–¹æ³•ï¼Œé¿å…æ·»åŠ  def å…³é”®å­—</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">def</span> sum(a,b)&#123;<br>    a + b<br>&#125;<br><span class="hljs-keyword">def</span> sum = sum(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>) <span class="hljs-comment">//è¿˜å¯ä»¥å†™æˆè¿™æ ·ï¼Œä½†æ˜¯å¯è¯»æ€§ä¸å¥½ def sum = sum 1,2 </span><br>println(sum)<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">3</span><br><br><span class="hljs-comment">//å¦‚æœæ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</span><br><span class="hljs-type">void</span> doSomething(param1, param2) &#123;<br>  <br>&#125;<br><br><span class="hljs-comment">//ç±»çš„æ„é€ æ–¹æ³•ï¼Œé¿å…æ·»åŠ  def å…³é”®å­—</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;<br>    MyClass() &#123;<br>      <br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5ã€å­—ç¬¦ä¸²å˜åŒ–"><a href="#5ã€å­—ç¬¦ä¸²å˜åŒ–" class="headerlink" title="5ã€å­—ç¬¦ä¸²å˜åŒ–"></a>5ã€å­—ç¬¦ä¸²å˜åŒ–</h3><p>åœ¨ Groovy ä¸­æœ‰ä¸‰ç§å¸¸ç”¨çš„å­—ç¬¦ä¸²å®šä¹‰æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>è¿™é‡Œå…ˆè§£é‡Šä¸€ä¸‹å¯æ‰©å±•å­—ç¬¦ä¸²çš„å«ä¹‰ï¼Œå¯æ‰©å±•å­—ç¬¦ä¸²å°±æ˜¯<strong>å­—ç¬¦ä¸²é‡Œé¢å¯ä»¥å¼•ç”¨å˜é‡ï¼Œè¡¨è¾¾å¼ç­‰ç­‰</strong></p><p>1 ã€å•å¼•å· â€˜â€™ å®šä¹‰çš„å­—ç¬¦ä¸²ä¸ºä¸å¯æ‰©å±•å­—ç¬¦ä¸²</p><p>2 ã€åŒå¼•å· â€œâ€ å®šä¹‰çš„å­—ç¬¦ä¸²ä¸ºå¯æ‰©å±•å­—ç¬¦ä¸²ï¼Œå¯æ‰©å±•å­—ç¬¦ä¸²é‡Œé¢å¯ä»¥ä½¿ç”¨ ${} å¼•ç”¨å˜é‡å€¼ï¼Œå½“ {} é‡Œé¢åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œéè¡¨è¾¾å¼æ—¶ï¼Œ{}ä¹Ÿå¯ä»¥å»æ‰</p><p>3 ã€ä¸‰å¼•å· â€˜â€™â€™ â€˜â€™â€™ å®šä¹‰çš„å­—ç¬¦ä¸²ä¸ºè¾“å‡ºå¸¦æ ¼å¼çš„ä¸å¯æ‰©å±•å­—ç¬¦ä¸²</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">def</span> age = <span class="hljs-number">16</span><br><span class="hljs-keyword">def</span> name = <span class="hljs-string">&#x27;erdai&#x27;</span><br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªä¸å¯æ‰©å±•å­—ç¬¦ä¸²ï¼Œå’Œæˆ‘é—¨åœ¨Javaä¸­ä½¿ç”¨å·®ä¸å¤š</span><br><span class="hljs-keyword">def</span> str1 = <span class="hljs-string">&#x27;hello &#x27;</span> + name<br><span class="hljs-comment">//å®šä¹‰å¯æ‰©å±•å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²é‡Œé¢å¯ä»¥å¼•ç”¨å˜é‡å€¼ï¼Œå½“ &#123;&#125; é‡Œé¢åªæœ‰ä¸€ä¸ªå˜é‡æ—¶ï¼Œ&#123;&#125;ä¹Ÿå¯ä»¥å»æ‰</span><br><span class="hljs-keyword">def</span> str2 = <span class="hljs-string">&quot;hello $name $&#123;name + age&#125;&quot;</span><br><span class="hljs-comment">//å®šä¹‰å¸¦è¾“å‡ºæ ¼å¼çš„ä¸å¯æ‰©å±•å­—ç¬¦ä¸² ä½¿ç”¨ \ å­—ç¬¦æ¥åˆ†è¡Œ</span><br><span class="hljs-keyword">def</span> str3 = <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">\</span><br><span class="hljs-string">hello</span><br><span class="hljs-string">name</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment">//æ‰“å°ç±»å‹å’Œå€¼ ä¸‹é¢ä»£ç æˆ‘çœç•¥äº† println æ–¹æ³•çš„ï¼ˆï¼‰ï¼Œä¸Šé¢æœ‰è®²åˆ°è¿™ç§è¯­æ³•ä¹Ÿæ˜¯å…è®¸çš„</span><br>println <span class="hljs-string">&#x27;str1ç±»å‹: &#x27;</span> + str1.<span class="hljs-keyword">class</span><br><span class="hljs-title class_">println</span> <span class="hljs-string">&#x27;str1è¾“å‡ºå€¼: &#x27;</span> + str1<br>println <span class="hljs-string">&#x27;str2ç±»å‹: &#x27;</span> + str2.<span class="hljs-keyword">class</span><br><span class="hljs-title class_">println</span> <span class="hljs-string">&#x27;str2è¾“å‡ºå€¼: &#x27;</span> + str2<br>println <span class="hljs-string">&#x27;str3ç±»å‹: &#x27;</span> + str3.<span class="hljs-keyword">class</span><br><span class="hljs-title class_">println</span> <span class="hljs-string">&#x27;str3è¾“å‡ºå€¼: &#x27;</span> + str3<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>str1ç±»å‹: <span class="hljs-keyword">class</span> <span class="hljs-title class_">java</span>.lang.String<br>str1è¾“å‡ºå€¼: hello erdai<br>str2ç±»å‹: <span class="hljs-keyword">class</span> <span class="hljs-title class_">org</span>.codehaus.groovy.runtime.GStringImpl<br>str2è¾“å‡ºå€¼: hello erdai erdai16<br>str3ç±»å‹: <span class="hljs-keyword">class</span> <span class="hljs-title class_">java</span>.lang.String<br>str3è¾“å‡ºå€¼: <br>hello<br>name<br></code></pre></td></tr></table></figure><p>ä»ä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œstr2 æ˜¯ GStringImpl ç±»å‹çš„ï¼Œè€Œ str1 å’Œ str3 æ˜¯ String ç±»å‹çš„ï¼Œé‚£ä¹ˆè¿™é‡Œæˆ‘å°±ä¼šæœ‰ä¸ªç–‘é—®ï¼Œè¿™ä¸¤ç§ç±»å‹åœ¨ç›¸äº’èµ‹å€¼çš„æƒ…å†µä¸‹æ˜¯å¦éœ€è¦å¼ºè½¬å‘¢ï¼Ÿæˆ‘ä»¬åšä¸ªå®éªŒåœ¨æµ‹è¯•ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ª String ç±»å‹çš„å˜é‡æ¥æ”¶ GStringImpl ç±»å‹çš„å˜é‡ï¼Œå¹¶æ²¡æœ‰å¼ºè½¬</span><br>String str4 = str2<br>println <span class="hljs-string">&#x27;str4ç±»å‹: &#x27;</span> + str4.<span class="hljs-keyword">class</span><br><span class="hljs-title class_">println</span> <span class="hljs-string">&#x27;str4è¾“å‡ºå€¼: &#x27;</span> + str4<br><br><span class="hljs-comment">//æ‰“å°ç±»å‹å’Œå€¼</span><br>str4ç±»å‹: <span class="hljs-keyword">class</span> <span class="hljs-title class_">java</span>.lang.String<br>str4è¾“å‡ºå€¼: hello erdai erdai16<br></code></pre></td></tr></table></figure><p>å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼š<strong>ç¼–ç çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦ç‰¹åˆ«å…³æ³¨ String å’Œ GString çš„åŒºåˆ«ï¼Œç¼–è¯‘å™¨ä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨è½¬æ¢ç±»å‹</strong>ã€‚</p><h3 id="6-ä¸ç”¨å†™-get-å’Œ-set-æ–¹æ³•"><a href="#6-ä¸ç”¨å†™-get-å’Œ-set-æ–¹æ³•" class="headerlink" title="6. ä¸ç”¨å†™ get å’Œ set æ–¹æ³•"></a>6. ä¸ç”¨å†™ get å’Œ set æ–¹æ³•</h3><p>1ã€åœ¨æˆ‘ä»¬åˆ›å»ºå±æ€§çš„æ—¶å€™ï¼ŒGroovyä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åˆ›å»º get å’Œ set æ–¹æ³•</p><p>2ã€å½“æˆ‘ä»¬åªå®šä¹‰äº†ä¸€ä¸ªå±æ€§çš„ get æ–¹æ³•ï¼Œè€Œæ²¡æœ‰å®šä¹‰è¿™ä¸ªå±æ€§ï¼Œé»˜è®¤è¿™ä¸ªå±æ€§åªè¯»</p><p>3ã€æˆ‘ä»¬åœ¨ä½¿â½¤å¯¹è±¡ object.field æ¥è·å–å€¼æˆ–è€…ä½¿ç”¨ object.field &#x3D; value æ¥èµ‹å€¼çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼šè‡ªåŠ¨è½¬è€Œè°ƒâ½¤ object.getField() å’Œ object.setField(value) æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬ä¸æƒ³è°ƒç”¨è¿™ä¸ªç‰¹æ®Šçš„ get æ–¹æ³•æ—¶åˆ™å¯ä»¥ä½¿ç”¨ .@ ç›´æ¥åŸŸè®¿é—®æ“ä½œç¬¦è®¿é—®å±æ€§æœ¬èº«</p><p>æˆ‘ä»¬æ¥æ¨¡æ‹Ÿ1ï¼Œ2ï¼Œ3è¿™ä¸‰ç§æƒ…å†µ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æƒ…å†µ1ï¼šåœ¨æˆ‘ä»¬åˆ›å»ºå±æ€§çš„æ—¶å€™ï¼ŒGroovyä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨åˆ›å»º get å’Œ set æ–¹æ³•</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span>&#123;<br>    def name<br>    def age<br>&#125;<br><br><span class="hljs-type">def</span> <span class="hljs-variable">people</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">People</span>()<br>people.name = <span class="hljs-string">&#x27;erdai&#x27;</span><br>people.age = <span class="hljs-number">19</span><br>println <span class="hljs-string">&quot;å§“å: $people.name å¹´é¾„: $people.age&quot;</span><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>å§“å: erdai å¹´é¾„: <span class="hljs-number">19</span><br>  <br><span class="hljs-comment">//æƒ…å†µ2 å½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå±æ€§çš„ get æ–¹æ³•ï¼Œè€Œæ²¡æœ‰å®šä¹‰è¿™ä¸ªå±æ€§ï¼Œé»˜è®¤è¿™ä¸ªå±æ€§åªè¯»</span><br><span class="hljs-comment">//æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹Peopleç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span>&#123;<br>    def name<br>    def <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-number">12</span><br>    &#125;<br>&#125;<br><br><span class="hljs-type">def</span> <span class="hljs-variable">people</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">People</span>()<br>people.name = <span class="hljs-string">&#x27;erdai&#x27;</span><br>people.age = <span class="hljs-number">19</span><br>println <span class="hljs-string">&quot;å§“å: $people.name å¹´é¾„: $people.age&quot;</span><br><span class="hljs-comment">//è¿è¡Œä¸€ä¸‹ä»£ç  æ‰“å°ç»“æœæŠ¥é”™äº†ï¼Œå¦‚ä¸‹ï¼š</span><br>Caught: groovy.lang.ReadOnlyPropertyException: Cannot set readonly property: age <span class="hljs-keyword">for</span> class: variable.People<br><span class="hljs-comment">//å¤§æ¦‚é”™è¯¯æ„æ€å°±æ˜¯æˆ‘ä»¬ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåªè¯»çš„å±æ€§</span><br>  <br><span class="hljs-comment">//æƒ…å†µ3: å¦‚æœæˆ‘ä»¬ä¸æƒ³è°ƒç”¨è¿™ä¸ªç‰¹æ®Šçš„ get æ–¹æ³•æ—¶åˆ™å¯ä»¥ä½¿ç”¨ .@ ç›´æ¥åŸŸè®¿é—®æ“ä½œç¬¦è®¿é—®å±æ€§æœ¬èº«</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span>&#123;<br>    def name<br>    def age<br>    <br>    def <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-string">&quot;My name is $name&quot;</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//è¿™é‡Œä½¿ç”¨äº†å‘½åçš„å‚æ•°åˆå§‹åŒ–å’Œé»˜è®¤çš„æ„é€ å™¨åˆ›å»ºpeopleå¯¹è±¡ï¼Œåé¢ä¼šè®²åˆ°</span><br><span class="hljs-type">def</span> <span class="hljs-variable">people</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">People</span>(name: <span class="hljs-string">&#x27;erdai666&#x27;</span>)<br>people.age = <span class="hljs-number">19</span><br><span class="hljs-type">def</span> <span class="hljs-variable">myName</span> <span class="hljs-operator">=</span> people.<span class="hljs-meta">@name</span><br><br><span class="hljs-comment">//æ‰“å°å€¼</span><br>println myName<br>println <span class="hljs-string">&quot;å§“å: $people.name å¹´é¾„: $people.age&quot;</span><br>  <br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>erdai666<br>å§“å: My name is erdai666 å¹´é¾„: <span class="hljs-number">19</span><br><span class="hljs-comment">//çœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿä½¿ç”¨ people.name åˆ™ä¼šå»è°ƒç”¨è¿™ä¸ªå±æ€§çš„getæ–¹æ³•ï¼Œè€Œ people.@name åˆ™ä¼šè®¿é—®è¿™ä¸ªå±æ€§æœ¬èº«</span><br></code></pre></td></tr></table></figure><h3 id="7ã€Class-æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œæ‰€æœ‰çš„-Class-ç±»å‹å¯ä»¥çœç•¥-Class"><a href="#7ã€Class-æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œæ‰€æœ‰çš„-Class-ç±»å‹å¯ä»¥çœç•¥-Class" class="headerlink" title="7ã€Class æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œæ‰€æœ‰çš„ Class ç±»å‹å¯ä»¥çœç•¥ .Class"></a>7ã€Class æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œæ‰€æœ‰çš„ Class ç±»å‹å¯ä»¥çœç•¥ .Class</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªTestç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>&#123; <br><br>&#125;<br><br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæµ‹è¯•classçš„æ–¹æ³•ï¼Œä»å‰é¢çš„è¯­æ³•æˆ‘ä»¬çŸ¥é“ï¼Œæ–¹æ³•çš„å‚æ•°ç±»å‹æ˜¯å¯ä»¥çœç•¥çš„</span><br><span class="hljs-keyword">def</span> testClass(myClass)&#123;<br>    <br>&#125;<br><br><span class="hljs-comment">//æµ‹è¯•</span><br>testClass(Test.<span class="hljs-keyword">class</span>)<br>testClass(Test)<br></code></pre></td></tr></table></figure><h3 id="8ã€-x3D-x3D-å’Œ-equals"><a href="#8ã€-x3D-x3D-å’Œ-equals" class="headerlink" title="8ã€&#x3D;&#x3D; å’Œ equals"></a>8ã€&#x3D;&#x3D; å’Œ equals</h3><p>åœ¨ Groovy ä¸­ï¼Œ&#x3D;&#x3D; å°±ç›¸å½“äº Java çš„ equalsï¼Œå¦‚æœéœ€è¦æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªï¼Œéœ€è¦ä½¿ç”¨ .is()</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span>&#123;<br>    <span class="hljs-keyword">def</span> name<br>    <span class="hljs-keyword">def</span> age<br>&#125;<br><br><span class="hljs-keyword">def</span> people1 = <span class="hljs-keyword">new</span> People(<span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;erdai666&#x27;</span>)<br><span class="hljs-keyword">def</span> people2 = <span class="hljs-keyword">new</span> People(<span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;erdai666&#x27;</span>)<br><br>println(<span class="hljs-string">&quot;people1.name == people2.name is: &quot;</span> + (people1.name == people2.name))<br>println(<span class="hljs-string">&quot;people1 is people2 is: &quot;</span> + people1.is(people2))<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>people1.name == people2.name <span class="hljs-attr">is:</span> <span class="hljs-literal">true</span><br>people1 is people2 <span class="hljs-attr">is:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="9ã€ä½¿ç”¨-assert-æ¥è®¾ç½®æ–­è¨€ï¼Œå½“æ–­è¨€çš„æ¡ä»¶ä¸º-false-æ—¶ï¼Œç¨‹åºå°†ä¼šæŠ›å‡ºå¼‚å¸¸"><a href="#9ã€ä½¿ç”¨-assert-æ¥è®¾ç½®æ–­è¨€ï¼Œå½“æ–­è¨€çš„æ¡ä»¶ä¸º-false-æ—¶ï¼Œç¨‹åºå°†ä¼šæŠ›å‡ºå¼‚å¸¸" class="headerlink" title="9ã€ä½¿ç”¨ assert æ¥è®¾ç½®æ–­è¨€ï¼Œå½“æ–­è¨€çš„æ¡ä»¶ä¸º false æ—¶ï¼Œç¨‹åºå°†ä¼šæŠ›å‡ºå¼‚å¸¸"></a>9ã€ä½¿ç”¨ assert æ¥è®¾ç½®æ–­è¨€ï¼Œå½“æ–­è¨€çš„æ¡ä»¶ä¸º false æ—¶ï¼Œç¨‹åºå°†ä¼šæŠ›å‡ºå¼‚å¸¸</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">assert</span>  <span class="hljs-number">2</span> ** <span class="hljs-number">4</span> == <span class="hljs-number">15</span><br><span class="hljs-comment">//è¿è¡Œç¨‹åºï¼ŒæŠ¥é”™äº†ï¼Œç»“æœå¦‚ä¸‹ï¼š</span><br><span class="hljs-attr">Caught:</span> Assertion <span class="hljs-attr">failed:</span> <br><span class="hljs-keyword">assert</span>  <span class="hljs-number">2</span> ** <span class="hljs-number">4</span> == <span class="hljs-number">15</span><br>          |    |<br>          <span class="hljs-number">16</span>   <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="10ã€æ”¯æŒ-æ¬¡æ–¹è¿ç®—ç¬¦"><a href="#10ã€æ”¯æŒ-æ¬¡æ–¹è¿ç®—ç¬¦" class="headerlink" title="10ã€æ”¯æŒ ** æ¬¡æ–¹è¿ç®—ç¬¦"></a>10ã€æ”¯æŒ ** æ¬¡æ–¹è¿ç®—ç¬¦</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">assert</span>  <span class="hljs-number">2</span> ** <span class="hljs-number">4</span> == <span class="hljs-number">16</span><br></code></pre></td></tr></table></figure><h3 id="11ã€ç®€æ´çš„ä¸‰å…ƒè¡¨è¾¾å¼"><a href="#11ã€ç®€æ´çš„ä¸‰å…ƒè¡¨è¾¾å¼" class="headerlink" title="11ã€ç®€æ´çš„ä¸‰å…ƒè¡¨è¾¾å¼"></a>11ã€ç®€æ´çš„ä¸‰å…ƒè¡¨è¾¾å¼</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åœ¨javaä¸­ï¼Œæˆ‘ä»¬ä¼šè¿™ä¹ˆå†™</span><br>String str = obj != <span class="hljs-literal">null</span> ? obj : <span class="hljs-string">&quot;&quot;</span><br><br><span class="hljs-comment">//åœ¨Groovyä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼Œ?: æ“ä½œç¬¦è¡¨ç¤ºå¦‚æœå·¦è¾¹ç»“æœä¸ä¸ºç©ºåˆ™å–å·¦è¾¹çš„å€¼ï¼Œå¦åˆ™å–å³è¾¹çš„å€¼</span><br>String str = obj ?: <span class="hljs-string">&quot;&quot;</span><br></code></pre></td></tr></table></figure><h3 id="12ã€ç®€æ´çš„éç©ºåˆ¤æ–­"><a href="#12ã€ç®€æ´çš„éç©ºåˆ¤æ–­" class="headerlink" title="12ã€ç®€æ´çš„éç©ºåˆ¤æ–­"></a>12ã€ç®€æ´çš„éç©ºåˆ¤æ–­</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åœ¨javaä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™ä¹ˆå†™</span><br><span class="hljs-keyword">if</span>(obj != <span class="hljs-literal">null</span>)&#123;<br>    <span class="hljs-keyword">if</span>(obj.group != <span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-keyword">if</span>(obj.group.artifact != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-comment">//do something</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//åœ¨Groovyä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ ?. æ“ä½œç¬¦è¡¨ç¤ºå¦‚æœå½“å‰è°ƒç”¨å¯¹è±¡ä¸ºç©ºå°±ä¸æ‰§è¡Œäº†</span><br>obj?.group?.artifact<br><br></code></pre></td></tr></table></figure><h3 id="13ã€å¼ºå¤§çš„-Switch"><a href="#13ã€å¼ºå¤§çš„-Switch" class="headerlink" title="13ã€å¼ºå¤§çš„ Switch"></a>13ã€å¼ºå¤§çš„ Switch</h3><p>åœ¨ Groovy ä¸­ï¼Œswitch æ–¹æ³•å˜å¾—æ›´åŠ çµæ´»ï¼Œå¼ºå¤§ï¼Œå¯ä»¥åŒæ—¶æ”¯æŒæ›´å¤šçš„å‚æ•°ç±»å‹ï¼Œæ¯”åœ¨ Java ä¸­å¢å¼ºäº†å¾ˆå¤š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">def</span> result = <span class="hljs-string">&#x27;erdai666&#x27;</span><br><span class="hljs-keyword">switch</span> (result)&#123;<br>    <span class="hljs-keyword">case</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;erdai666&#x27;</span>]:<br>        println <span class="hljs-string">&quot;åŒ¹é…åˆ°äº†result&quot;</span><br>        <span class="hljs-keyword">break</span><br>    <span class="hljs-symbol">default:</span><br>        println <span class="hljs-string">&#x27;default&#x27;</span><br>        <span class="hljs-keyword">break</span><br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>åŒ¹é…åˆ°äº†result<br></code></pre></td></tr></table></figure><h3 id="14ã€åˆ¤æ–­æ˜¯å¦ä¸º-null-å’Œ-éè¿ç®—ç¬¦"><a href="#14ã€åˆ¤æ–­æ˜¯å¦ä¸º-null-å’Œ-éè¿ç®—ç¬¦" class="headerlink" title="14ã€åˆ¤æ–­æ˜¯å¦ä¸º null å’Œ éè¿ç®—ç¬¦"></a>14ã€åˆ¤æ–­æ˜¯å¦ä¸º null å’Œ éè¿ç®—ç¬¦</h3><p>åœ¨ Groovy ä¸­ï¼Œæ‰€æœ‰ç±»å‹éƒ½èƒ½è½¬æˆå¸ƒå°”å€¼ï¼Œæ¯”å¦‚ null å°±ç›¸å½“äº0æˆ–è€…ç›¸å½“äº<code>false</code>ï¼Œå…¶ä»–åˆ™ç›¸å½“äº<code>true</code></p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬ä¼šè¿™ä¹ˆç”¨</span><br><span class="hljs-keyword">if</span> (name != <span class="hljs-literal">null</span> &amp;&amp; name.length &gt; <span class="hljs-number">0</span>) &#123;<br>  <br>&#125;<br><br><span class="hljs-comment">//åœ¨ Groovy ä¸­ï¼Œå¯ä»¥è¿™ä¹ˆç”¨ï¼Œå¦‚æœnameä¸º null æˆ– 0 åˆ™è¿”å› falseï¼Œå¦åˆ™è¿”å›true</span><br><span class="hljs-keyword">if</span>(name)&#123;<br>  <br>&#125;<br><br><span class="hljs-comment">//éè¿ç®—ç¬¦ erdai è¿™ä¸ªå­—ç¬¦ä¸²ä¸ºé null ï¼Œå› æ­¤ä¸ºtrueï¼Œè€Œ !erdai åˆ™ä¸ºfalse</span><br><span class="hljs-keyword">assert</span> (!<span class="hljs-string">&#x27;erdai&#x27;</span>) = <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h3 id="15ã€å¯ä»¥ä½¿ç”¨-Number-ç±»å»æ›¿ä»£-floatã€double-ç­‰ç±»å‹ï¼Œçœå»è€ƒè™‘ç²¾åº¦çš„éº»çƒ¦"><a href="#15ã€å¯ä»¥ä½¿ç”¨-Number-ç±»å»æ›¿ä»£-floatã€double-ç­‰ç±»å‹ï¼Œçœå»è€ƒè™‘ç²¾åº¦çš„éº»çƒ¦" class="headerlink" title="15ã€å¯ä»¥ä½¿ç”¨ Number ç±»å»æ›¿ä»£ floatã€double ç­‰ç±»å‹ï¼Œçœå»è€ƒè™‘ç²¾åº¦çš„éº»çƒ¦"></a>15ã€å¯ä»¥ä½¿ç”¨ Number ç±»å»æ›¿ä»£ floatã€double ç­‰ç±»å‹ï¼Œçœå»è€ƒè™‘ç²¾åº¦çš„éº»çƒ¦</h3><h3 id="16ã€é»˜è®¤æ˜¯-public-æƒé™"><a href="#16ã€é»˜è®¤æ˜¯-public-æƒé™" class="headerlink" title="16ã€é»˜è®¤æ˜¯ public æƒé™"></a>16ã€é»˜è®¤æ˜¯ public æƒé™</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒGroovy çš„ class å’Œ æ–¹æ³•éƒ½æ˜¯ public æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœç•¥ public å…³é”®å­—ï¼Œé™¤éæˆ‘ä»¬æƒ³ä½¿ç”¨ private ä¿®é¥°ç¬¦</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Server</span> &#123; <br>   String toString() &#123; <span class="hljs-string">&quot;a server&quot;</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="17ã€ä½¿ç”¨å‘½åçš„å‚æ•°åˆå§‹åŒ–å’Œé»˜è®¤çš„æ„é€ å™¨"><a href="#17ã€ä½¿ç”¨å‘½åçš„å‚æ•°åˆå§‹åŒ–å’Œé»˜è®¤çš„æ„é€ å™¨" class="headerlink" title="17ã€ä½¿ç”¨å‘½åçš„å‚æ•°åˆå§‹åŒ–å’Œé»˜è®¤çš„æ„é€ å™¨"></a>17ã€ä½¿ç”¨å‘½åçš„å‚æ•°åˆå§‹åŒ–å’Œé»˜è®¤çš„æ„é€ å™¨</h3><p>Groovyä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥åœ¨æ„é€ æ–¹æ³•ä¸­é€šè¿‡ key value çš„å½¢å¼ç»™å±æ€§èµ‹å€¼ï¼Œè€Œä¸éœ€è¦å»å†™æ„é€ æ–¹æ³•ï¼Œè¯´çš„æœ‰ç‚¹æŠ½è±¡ï¼Œä¸Šä»£ç æ„Ÿå—ä¸€ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªpeople</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span>&#123;<br>    <span class="hljs-keyword">def</span> name<br>    <span class="hljs-keyword">def</span> age<br>&#125;<br><br><span class="hljs-comment">//æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼å»å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œæ³¨æ„æˆ‘ä»¬Peopleç±»é‡Œé¢æ²¡æœ‰å†™ä»»ä½•ä¸€ä¸ªæ„é€ æ–¹æ³•å“¦</span><br><span class="hljs-keyword">def</span> people1 = <span class="hljs-keyword">new</span> People()<br><span class="hljs-keyword">def</span> people1 = <span class="hljs-keyword">new</span> People(<span class="hljs-attr">age:</span> <span class="hljs-number">15</span>)<br><span class="hljs-keyword">def</span> people2 = <span class="hljs-keyword">new</span> People(<span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;erdai&#x27;</span>)<br><span class="hljs-keyword">def</span> people3 = <span class="hljs-keyword">new</span> People(<span class="hljs-attr">age:</span> <span class="hljs-number">15</span>,<span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;erdai&#x27;</span>)<br></code></pre></td></tr></table></figure><h3 id="18ã€ä½¿ç”¨-with-å‡½æ•°æ“ä½œåŒä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå±æ€§å’Œæ–¹æ³•"><a href="#18ã€ä½¿ç”¨-with-å‡½æ•°æ“ä½œåŒä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå±æ€§å’Œæ–¹æ³•" class="headerlink" title="18ã€ä½¿ç”¨ with å‡½æ•°æ“ä½œåŒä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå±æ€§å’Œæ–¹æ³•"></a>18ã€ä½¿ç”¨ with å‡½æ•°æ“ä½œåŒä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå±æ€§å’Œæ–¹æ³•</h3><p>with å‡½æ•°æ¥æ”¶ä¸€ä¸ªé—­åŒ…ï¼Œé—­åŒ…ä¸‹é¢ä¼šè®²ï¼Œé—­åŒ…çš„å‚æ•°å°±æ˜¯å½“å‰è°ƒç”¨çš„å¯¹è±¡</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">class</span> <span class="hljs-title class_">People</span>&#123;<br>    <span class="hljs-keyword">def</span> name<br>    <span class="hljs-keyword">def</span> age<br>    <br>    <span class="hljs-type">void</span> running()&#123;<br>        println <span class="hljs-string">&#x27;è·‘æ­¥&#x27;</span><br>    &#125;<br>&#125;<br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ª people å¯¹è±¡</span><br><span class="hljs-keyword">def</span> people = <span class="hljs-keyword">new</span> People()<br><span class="hljs-comment">//è°ƒç”¨ with å‡½æ•° é—­åŒ…å‚æ•°å³ä¸ºpeopeo å¦‚æœé—­åŒ…ä¸å†™å‚æ•°ï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ª it å‚æ•°</span><br>people.with&#123;<br>    name = <span class="hljs-string">&quot;erdai&quot;</span><br>    age = <span class="hljs-number">19</span><br>    println <span class="hljs-string">&quot;$name $age&quot;</span><br>    running()<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>erdai <span class="hljs-number">19</span><br>è·‘æ­¥<br></code></pre></td></tr></table></figure><h3 id="19ã€å¼‚å¸¸æ•è·"><a href="#19ã€å¼‚å¸¸æ•è·" class="headerlink" title="19ã€å¼‚å¸¸æ•è·"></a>19ã€å¼‚å¸¸æ•è·</h3><p>å¦‚æœä½ å®åœ¨ä¸æƒ³å…³å¿ƒ try å—é‡ŒæŠ›å‡ºä½•ç§å¼‚å¸¸ï¼Œä½ å¯ä»¥ç®€å•çš„æ•è·æ‰€æœ‰å¼‚å¸¸ï¼Œå¹¶ä¸”å¯ä»¥çœç•¥å¼‚å¸¸ç±»å‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åœ¨ java ä¸­æˆ‘ä»¬ä¼šè¿™æ ·å†™</span><br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>    <span class="hljs-comment">// do something</span><br>&#125;<br><br><span class="hljs-comment">//åœ¨ Groovy ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™</span><br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>&#125; <span class="hljs-keyword">catch</span> (any) &#123;<br>    <span class="hljs-comment">// do something</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ Groovy çš„å†™æ³•å…¶å®å°±æ˜¯çœç•¥äº†å‚æ•°ç±»å‹ï¼Œå®é™…ä¸Š any çš„å‚æ•°ç±»å‹ä¹Ÿæ˜¯ Exceptionï¼Œ å¹¶ä¸åŒ…æ‹¬ Throwable ï¼Œå¦‚æœä½ æƒ³æ•è·æ‰€æœ‰çš„å¼‚å¸¸ï¼Œä½ å¯ä»¥æ˜ç¡®æ•è·å¼‚å¸¸çš„å‚æ•°ç±»å‹</p><h2 id="å››ã€Groovy-é—­åŒ…"><a href="#å››ã€Groovy-é—­åŒ…" class="headerlink" title="å››ã€Groovy é—­åŒ…"></a>å››ã€Groovy é—­åŒ…</h2><p>åœ¨ Groovy ä¸­ï¼Œé—­åŒ…éå¸¸çš„é‡è¦ï¼Œå› æ­¤å•ç‹¬ç”¨ä¸€ä¸ªæ¨¡å—æ¥è®²</p><h3 id="1ã€é—­åŒ…å®šä¹‰"><a href="#1ã€é—­åŒ…å®šä¹‰" class="headerlink" title="1ã€é—­åŒ…å®šä¹‰"></a>1ã€é—­åŒ…å®šä¹‰</h3><p>å¼•ç”¨ Groovy å®˜æ–¹å¯¹é—­åŒ…çš„å®šä¹‰ï¼šA closure in Groovy is an open, anonymous, block of code that can take arguments, return a value and be assigned to a variable. ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼š<strong>Groovy ä¸­çš„é—­åŒ…æ˜¯ä¸€ä¸ªå¼€æ”¾çš„ã€åŒ¿åçš„ä»£ç å—ï¼Œå®ƒå¯ä»¥æ¥å—å‚æ•°ã€è¿”å›å€¼å¹¶å°†å€¼èµ‹ç»™å˜é‡ã€‚</strong> é€šä¿—çš„è®²ï¼Œé—­åŒ…å¯ä»¥ä½œä¸ºæ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå˜é‡è€Œå­˜åœ¨ï¼Œé—­åŒ…æœ¬è´¨ä¸Šå°±æ˜¯ä¸€æ®µä»£ç å—ï¼Œä¸‹é¢æˆ‘ä»¬å°±ç”±æµ…å…¥æ·±çš„æ¥å­¦ä¹ é—­åŒ…</p><h3 id="2ã€é—­åŒ…å£°æ˜"><a href="#2ã€é—­åŒ…å£°æ˜" class="headerlink" title="2ã€é—­åŒ…å£°æ˜"></a>2ã€é—­åŒ…å£°æ˜</h3><p>1ã€é—­åŒ…åŸºæœ¬çš„è¯­æ³•ç»“æ„ï¼šå¤–é¢ä¸€å¯¹å¤§æ‹¬å·ï¼Œæ¥ç€æ˜¯ç”³æ˜å‚æ•°ï¼Œå‚æ•°ç±»å‹å¯çœç•¥ï¼Œåœ¨æ˜¯ä¸€ä¸ª -&gt; ç®­å¤´å·ï¼Œæœ€åå°±æ˜¯é—­åŒ…ä½“é‡Œé¢çš„å†…å®¹</p><p>2ã€é—­åŒ…ä¹Ÿå¯ä»¥ä¸å®šä¹‰å‚æ•°ï¼Œå¦‚æœé—­åŒ…æ²¡å®šä¹‰å‚æ•°çš„è¯ï¼Œåˆ™éšå«æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°åå­—å« it</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//1</span><br>&#123; params -&gt;<br>   <span class="hljs-comment">//do something</span><br>&#125;<br><br><span class="hljs-comment">//2</span><br>&#123; <br>   <span class="hljs-comment">//do something</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3ã€é—­åŒ…è°ƒç”¨"><a href="#3ã€é—­åŒ…è°ƒç”¨" class="headerlink" title="3ã€é—­åŒ…è°ƒç”¨"></a>3ã€é—­åŒ…è°ƒç”¨</h3><p>1ã€é—­åŒ…å¯ä»¥é€šè¿‡ .call æ–¹æ³•æ¥è°ƒç”¨</p><p>2ã€é—­åŒ…å¯ä»¥ç›´æ¥ç”¨æ‹¬å·+å‚æ•°æ¥è°ƒç”¨</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªé—­åŒ…èµ‹å€¼ç»™ closure å˜é‡</span><br><span class="hljs-keyword">def</span> closure = &#123; params1,params2 -&gt;<br>    params1 + params2<br>&#125;<br><br><span class="hljs-comment">//é—­åŒ…è°ƒç”¨æ–¹å¼1: é—­åŒ…å¯ä»¥é€šè¿‡ .call æ–¹æ³•æ¥è°ƒç”¨</span><br><span class="hljs-keyword">def</span> result1 = closure(<span class="hljs-string">&#x27;erdai &#x27;</span>,<span class="hljs-string">&#x27;666&#x27;</span>)<br><span class="hljs-comment">//é—­åŒ…è°ƒç”¨æ–¹å¼2: é—­åŒ…å¯ä»¥ç›´æ¥ç”¨æ‹¬å·+å‚æ•°æ¥è°ƒç”¨</span><br><span class="hljs-keyword">def</span> result2 = closure.call(<span class="hljs-string">&#x27;erdai &#x27;</span>,<span class="hljs-string">&#x27;777&#x27;</span>)<br><span class="hljs-comment">//æ‰“å°å€¼</span><br>println result1<br>println result2<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>erdai <span class="hljs-number">666</span><br>erdai <span class="hljs-number">777</span><br><br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ— å‚é—­åŒ…</span><br><span class="hljs-keyword">def</span> closure1 = &#123;<br>    println(<span class="hljs-string">&#x27;æ— å®šä¹‰å‚æ•°é—­åŒ…&#x27;</span>)<br>&#125;<br>closure1() <span class="hljs-comment">//æˆ–è€…è°ƒç”¨ closure1.call()</span><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ— å®šä¹‰å‚æ•°é—­åŒ…<br></code></pre></td></tr></table></figure><h3 id="4ã€é—­åŒ…è¿›é˜¶"><a href="#4ã€é—­åŒ…è¿›é˜¶" class="headerlink" title="4ã€é—­åŒ…è¿›é˜¶"></a>4ã€é—­åŒ…è¿›é˜¶</h3><h4 id="1ï¼‰ã€é—­åŒ…ä¸­çš„å…³é”®å˜é‡"><a href="#1ï¼‰ã€é—­åŒ…ä¸­çš„å…³é”®å˜é‡" class="headerlink" title="1ï¼‰ã€é—­åŒ…ä¸­çš„å…³é”®å˜é‡"></a>1ï¼‰ã€é—­åŒ…ä¸­çš„å…³é”®å˜é‡</h4><p>æ¯ä¸ªé—­åŒ…ä¸­éƒ½å«æœ‰ <strong>thisã€owner å’Œ delegate</strong> è¿™ä¸‰ä¸ªå†…ç½®å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸‰ä¸ªä¸‰ä¸ªå†…ç½®å¯¹è±¡æœ‰å•¥åŒºåˆ«å‘¢ï¼Ÿæˆ‘ä»¬ç”¨ä»£ç å»éªŒè¯ä¸€ä¸‹</p><p><strong>æ³¨æ„</strong>ï¼š</p><p><strong>1ã€getThisObject() æ–¹æ³• å’Œ thisObject å±æ€§ç­‰åŒäº this</strong></p><p><strong>2ã€getOwner() æ–¹æ³• ç­‰åŒäº owner</strong></p><p><strong>3ã€getDelegate() æ–¹æ³• ç­‰åŒäº delegate</strong></p><p>è¿™äº›å»çœ‹é—­åŒ…çš„æºç ä½ å°±ä¼šæœ‰æ·±åˆ»çš„ä½“ä¼š</p><p>1ã€æˆ‘ä»¬åœ¨ GroovyGrammar.groovy è¿™ä¸ªè„šæœ¬ç±»ä¸­å®šä¹‰ä¸€ä¸ªé—­åŒ…æ‰“å°è¿™ä¸‰è€…çš„å€¼çœ‹ä¸€ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªé—­åŒ…</span><br><span class="hljs-keyword">def</span> outerClosure = &#123;<br>    println <span class="hljs-string">&quot;this: &quot;</span> + <span class="hljs-variable language_">this</span><br>    println <span class="hljs-string">&quot;owner: &quot;</span> + owner<br>    println <span class="hljs-string">&quot;delegate: &quot;</span> + delegate<br>&#125;<br><span class="hljs-comment">//è°ƒç”¨é—­åŒ…</span><br>outerClosure.call()<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-attr">this:</span> variable.GroovyGrammar@<span class="hljs-number">39</span>dcf4b0<br><span class="hljs-attr">owner:</span> variable.GroovyGrammar@<span class="hljs-number">39</span>dcf4b0<br><span class="hljs-attr">delegate:</span> variable.GroovyGrammar@<span class="hljs-number">39</span>dcf4b0<br><span class="hljs-comment">//è¯æ˜å½“å‰ä¸‰è€…éƒ½æŒ‡å‘äº†GroovyGrammarè¿™ä¸ªè„šæœ¬ç±»å¯¹è±¡</span><br></code></pre></td></tr></table></figure><p>2ã€æˆ‘ä»¬åœ¨è¿™ä¸ª GroovyGrammar.groovy è¿™ä¸ªè„šæœ¬ç±»ä¸­å®šä¹‰ä¸€ä¸ªç±»ï¼Œç±»ä¸­å®šä¹‰ä¸€ä¸ªé—­åŒ…ï¼Œæ‰“å°çœ‹ä¸‹ç»“æœï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ª OuterClass ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">OuterClass</span> &#123;<br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªé—­åŒ…</span><br>    <span class="hljs-keyword">def</span> outerClosure = &#123;<br>        println <span class="hljs-string">&quot;this: &quot;</span> + <span class="hljs-variable language_">this</span><br>        println <span class="hljs-string">&quot;owner: &quot;</span> + owner<br>        println <span class="hljs-string">&quot;delegate: &quot;</span> + delegate<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">def</span> outerClass = <span class="hljs-keyword">new</span> OuterClass()<br>outerClass.outerClosure.call()<br><br><span class="hljs-comment">//æ‰“å°ç»“æœå¦‚ä¸‹ï¼š</span><br><span class="hljs-attr">this:</span> variable.OuterClass@<span class="hljs-number">1992</span>eaf4<br><span class="hljs-attr">owner:</span> variable.OuterClass@<span class="hljs-number">1992</span>eaf4<br><span class="hljs-attr">delegate:</span> variable.OuterClass@<span class="hljs-number">1992</span>eaf4<br><span class="hljs-comment">//ç»“æœè¯æ˜è¿™ä¸‰è€…éƒ½æŒ‡å‘äº†å½“å‰ OuterClass ç±»å¯¹è±¡</span><br></code></pre></td></tr></table></figure><p>3ã€æˆ‘ä»¬åœ¨ GroovyGrammar.groovy è¿™ä¸ªè„šæœ¬ç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªé—­åŒ…ï¼Œé—­åŒ…ä¸­åœ¨å®šä¹‰ä¸€ä¸ªé—­åŒ…ï¼Œæ‰“å°çœ‹ä¸‹ç»“æœï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">def</span> outerClosure = &#123;<br>    <span class="hljs-keyword">def</span> innerClosure = &#123;<br>        println <span class="hljs-string">&quot;this: &quot;</span> + <span class="hljs-variable language_">this</span><br>        println <span class="hljs-string">&quot;owner: &quot;</span> + owner<br>        println <span class="hljs-string">&quot;delegate: &quot;</span> + delegate<br>    &#125;<br>    innerClosure.call()<br>  <br>&#125;<br>println outerClosure<br>outerClosure.call()<br><br><span class="hljs-comment">//æ‰“å°ç»“æœå¦‚ä¸‹</span><br>variable.GroovyGrammar$_run_closure4@<span class="hljs-number">64</span>beebb7<br><span class="hljs-attr">this:</span> variable.GroovyGrammar@<span class="hljs-number">5</span>b58ed3c<br><span class="hljs-attr">owner:</span> variable.GroovyGrammar$_run_closure4@<span class="hljs-number">64</span>beebb7<br><span class="hljs-attr">delegate:</span> variable.GroovyGrammar$_run_closure4@<span class="hljs-number">64</span>beebb7<br><span class="hljs-comment">//ç»“æœè¯æ˜ this æŒ‡å‘äº†å½“å‰GroovyGrammarè¿™ä¸ªè„šæœ¬ç±»å¯¹è±¡ owner å’Œ delegate éƒ½æŒ‡å‘äº† outerClosure é—­åŒ…å¯¹è±¡</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¢³ç†ä¸€ä¸‹ä¸Šé¢çš„ä¸‰ç§æƒ…å†µ: </p><p>1ã€é—­åŒ…å®šä¹‰åœ¨GroovyGrammar.groovy è¿™ä¸ªè„šæœ¬ç±»ä¸­ this owner delegate å°±æŒ‡å‘è¿™ä¸ªè„šæœ¬ç±»å¯¹è±¡</p><p>2ã€æˆ‘åœ¨è¿™ä¸ªè„šæœ¬ç±»ä¸­åˆ›å»ºäº†ä¸€ä¸ª OuterClass ç±»ï¼Œå¹¶åœ¨ä»–é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªé—­åŒ…ï¼Œé‚£ä¹ˆæ­¤æ—¶ this owner delegate å°±æŒ‡å‘äº† OuterClass è¿™ä¸ªç±»å¯¹è±¡</p><p>3ã€æˆ‘åœ¨ GroovyGrammar.groovy è¿™ä¸ªè„šæœ¬ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªé—­åŒ…ï¼Œé—­åŒ…ä¸­åˆå®šä¹‰äº†ä¸€ä¸ªé—­åŒ…ï¼Œthis æŒ‡å‘äº†å½“å‰GroovyGrammarè¿™ä¸ªè„šæœ¬ç±»å¯¹è±¡ï¼Œ owner å’Œ delegate éƒ½æŒ‡å‘äº† outerClosure é—­åŒ…å¯¹è±¡</p><p>å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç»“è®ºï¼š</p><p><strong>1ã€this æ°¸è¿œæŒ‡å‘å®šä¹‰è¯¥é—­åŒ…æœ€è¿‘çš„ç±»å¯¹è±¡ï¼Œå°±è¿‘åŸåˆ™ï¼Œå®šä¹‰é—­åŒ…æ—¶ï¼Œå“ªä¸ªç±»ç¦»çš„æœ€è¿‘å°±æŒ‡å‘å“ªä¸ªï¼Œæˆ‘è¿™é‡Œçš„ç¦»å¾—è¿‘æ˜¯æŒ‡å®šä¹‰é—­åŒ…çš„è¿™ä¸ªç±»ï¼ŒåŒ…å«å†…éƒ¨ç±»</strong></p><p><strong>2ã€owner æ°¸è¿œæŒ‡å‘å®šä¹‰è¯¥é—­åŒ…çš„ç±»å¯¹è±¡æˆ–è€…é—­åŒ…å¯¹è±¡ï¼Œé¡¾åæ€ä¹‰ï¼Œé—­åŒ…åªèƒ½å®šä¹‰åœ¨ç±»ä¸­æˆ–è€…é—­åŒ…ä¸­</strong></p><p><strong>3ã€delegate å’Œ owner æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åœ¨é—­åŒ…çš„æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œowner ä¼šæŠŠè‡ªå·±çš„å€¼èµ‹ç»™ delegateï¼Œä½†åŒæ—¶ delegate ä¹Ÿå¯ä»¥èµ‹å…¶ä»–å€¼</strong></p><p><strong>æ³¨æ„ï¼šåœ¨æˆ‘ä»¬ä½¿ç”¨ this , owner , å’Œ delegate çš„æ—¶å€™ï¼Œ this å’Œ owner é»˜è®¤æ˜¯åªè¯»çš„ï¼Œæˆ‘ä»¬å¤–éƒ¨ä¿®æ”¹ä¸äº†å®ƒï¼Œè¿™ç‚¹åœ¨æºç ä¸­ä¹Ÿæœ‰ä½“ç°ï¼Œä½†æ˜¯å¯ä»¥å¯¹ delegate è¿›è¡Œæ“ä½œ</strong></p><h4 id="2ï¼‰ã€é—­åŒ…å§”æ‰˜ç­–ç•¥"><a href="#2ï¼‰ã€é—­åŒ…å§”æ‰˜ç­–ç•¥" class="headerlink" title="2ï¼‰ã€é—­åŒ…å§”æ‰˜ç­–ç•¥"></a>2ï¼‰ã€é—­åŒ…å§”æ‰˜ç­–ç•¥</h4><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥å¯¹ä¿®æ”¹é—­åŒ…çš„ delegate è¿›è¡Œå®æ“ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªé¦™è•‰ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Banana</span>&#123;<br>    <span class="hljs-keyword">def</span> name<br>&#125;<br><br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªæ©˜å­ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Orange</span>&#123;<br>    <span class="hljs-keyword">def</span> name<br>&#125;<br><br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªé¦™è•‰å¯¹è±¡</span><br><span class="hljs-keyword">def</span> banana = <span class="hljs-keyword">new</span> Orange(<span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;é¦™è•‰&#x27;</span>)<br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ©˜å­å¯¹è±¡</span><br><span class="hljs-keyword">def</span> orange = <span class="hljs-keyword">new</span> Orange(<span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;æ©˜å­&#x27;</span>)<br><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªé—­åŒ…å¯¹è±¡</span><br><span class="hljs-keyword">def</span> closure = &#123;<br>    <span class="hljs-comment">//æ‰“å°å€¼</span><br>    println delegate.name<br>&#125;<br><span class="hljs-comment">//è°ƒç”¨é—­åŒ…</span><br>closure.call()<br><br><span class="hljs-comment">//è¿è¡Œä¸€ä¸‹ï¼Œå‘ç°ç»“æœæŠ¥é”™äº†ï¼Œå¦‚ä¸‹</span><br><span class="hljs-attr">Caught:</span> groovy.lang.<span class="hljs-attr">MissingPropertyException:</span> No such <span class="hljs-attr">property:</span> name <span class="hljs-keyword">for</span> <span class="hljs-attr">class:</span> variable.GroovyGrammar<br><span class="hljs-comment">//å¤§è‡´æ„æ€å°±æ˜¯GroovyGrammarè¿™ä¸ªè„šæœ¬ç±»å¯¹è±¡æ²¡æœ‰è¿™ä¸ª name å¯¹è±¡</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥åˆ†æä¸‹æŠ¥é”™çš„åŸå› åŸå› ï¼Œåˆ†æä¹‹å‰æˆ‘ä»¬è¦æ˜ç™½ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š</p><p><strong>é—­åŒ…çš„é»˜è®¤å§”æ‰˜ç­–ç•¥æ˜¯ OWNER_FIRSTï¼Œä¹Ÿå°±æ˜¯é—­åŒ…ä¼šå…ˆä» owner ä¸Šå¯»æ‰¾å±æ€§æˆ–æ–¹æ³•ï¼Œæ‰¾ä¸åˆ°åˆ™åœ¨ delegate ä¸Šå¯»æ‰¾</strong></p><p>1ã€closure è¿™ä¸ªé—­åŒ…æ˜¯ç”Ÿæ˜åœ¨ GroovyGrammar è¿™ä¸ªè„šæœ¬ç±»å½“ä¸­</p><p>2ã€æ ¹æ®æˆ‘ä»¬ä¹‹å‰å­¦çš„çŸ¥è¯†ï¼Œåœ¨ä¸æ”¹å˜ delegate çš„æƒ…å†µä¸‹ delegate å’Œ owner æ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¼šæŒ‡å‘ GroovyGrammar è¿™ä¸ªè„šæœ¬ç±»å¯¹è±¡</p><p>3ã€GroovyGrammar è¿™ä¸ªè„šæœ¬ç±»å¯¹è±¡ï¼Œæ ¹æ®é—­åŒ…é»˜è®¤å§”æ‰˜ç­–ç•¥ï¼Œæ‰¾ä¸åˆ° name è¿™ä¸ªå±æ€§</p><p>å› æ­¤æŠ¥é”™äº†ï¼ŒçŸ¥é“äº†æŠ¥é”™åŸå› ï¼Œé‚£æˆ‘ä»¬å°±ä¿®æ”¹ä¸€ä¸‹é—­åŒ…çš„ delegate , è¿˜æ˜¯ä¸Šé¢é‚£æ®µä»£ç ï¼Œæ·»åŠ å¦‚ä¸‹è¿™å¥ä»£ç ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//ä¿®æ”¹é—­åŒ…çš„delegate</span><br>closure.delegate = orange<br><span class="hljs-comment">//æˆ‘ä»¬åœ¨è¿è¡Œä¸€ä¸‹ï¼Œæ‰“å°ç»“æœ:</span><br>æ©˜å­<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶é—­åŒ…çš„ delegate æŒ‡å‘äº† orange ï¼Œå› æ­¤ä¼šæ‰“å° orange è¿™ä¸ªå¯¹è±¡çš„ name ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŠŠ closure çš„ delegate æ”¹ä¸º bananaï¼Œè‚¯å®šå°±ä¼šæ‰“å°é¦™è•‰äº†</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//ä¿®æ”¹é—­åŒ…çš„delegate</span><br>closure.delegate = banana<br><span class="hljs-comment">//æˆ‘ä»¬åœ¨è¿è¡Œä¸€ä¸‹ï¼Œæ‰“å°ç»“æœ:</span><br>é¦™è•‰<br></code></pre></td></tr></table></figure><h4 id="3ï¼‰ã€æ·±å…¥é—­åŒ…å§”æ‰˜ç­–ç•¥"><a href="#3ï¼‰ã€æ·±å…¥é—­åŒ…å§”æ‰˜ç­–ç•¥" class="headerlink" title="3ï¼‰ã€æ·±å…¥é—­åŒ…å§”æ‰˜ç­–ç•¥"></a>3ï¼‰ã€æ·±å…¥é—­åŒ…å§”æ‰˜ç­–ç•¥</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ª ClosureDepth ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ClosureDepth</span>&#123;<br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå˜é‡ str1 èµ‹å€¼ä¸º erdai666</span><br>    <span class="hljs-keyword">def</span> str1 = <span class="hljs-string">&#x27;erdai666&#x27;</span><br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªé—­åŒ…</span><br>    <span class="hljs-keyword">def</span> outerClosure = &#123;<br>      <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå˜é‡ str2 èµ‹å€¼ä¸º erdai777</span><br>        <span class="hljs-keyword">def</span> str2 = <span class="hljs-string">&#x27;erdai777&#x27;</span><br>      <span class="hljs-comment">//æ‰“å°str1 åˆ†æ1</span><br>        println str1<br><br>      <span class="hljs-comment">//é—­åŒ…ä¸­åœ¨å®šä¹‰ä¸€ä¸ªé—­åŒ…</span><br>        <span class="hljs-keyword">def</span> innerClosure = &#123;<br>            <span class="hljs-comment">//åˆ†æ2</span><br>            println str1<br>            println str2<br>        &#125;<br>        <span class="hljs-comment">//è°ƒç”¨å†…éƒ¨è¿™ä¸ªé—­åŒ…</span><br>        innerClosure.call()<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//åˆ›å»º ClosureDepth å¯¹è±¡</span><br><span class="hljs-keyword">def</span> closureDepth = <span class="hljs-keyword">new</span> ClosureDepth()<br><span class="hljs-comment">//è°ƒç”¨å¤–éƒ¨é—­åŒ…</span><br>closureDepth.outerClosure.call()<br><span class="hljs-comment">//è¿è¡Œç¨‹åºï¼Œæ‰“å°ç»“æœå¦‚ä¸‹</span><br>erdai666<br>erdai666<br>erdai777<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æ³¨é‡Šå†™çš„å¾ˆæ¸…æ¥šï¼Œç°åœ¨æˆ‘ä»¬æ¥é‡ç‚¹åˆ†æä¸‹åˆ†æ1å’Œåˆ†æ2å¤„çš„æ‰“å°å€¼ï¼š</p><p>åˆ†æ1ï¼š</p><p>åˆ†æ1å¤„æ‰“å°äº† str1 , å®ƒå¤„äº outerClosure è¿™ä¸ªé—­åŒ…ä¸­ï¼Œæ­¤æ—¶ outerClosure è¿™ä¸ªé—­åŒ…çš„ owner , delegate éƒ½æŒ‡å‘äº† ClosureDepth è¿™ä¸ªç±»å¯¹è±¡ï¼Œå› æ­¤ ClosureDepth è¿™ä¸ªç±»å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•æˆ‘ä»¬å°±éƒ½èƒ½è°ƒç”¨åˆ°ï¼Œå› æ­¤åˆ†æ1å¤„ä¼šæ‰“å° erdai666</p><p>åˆ†æ2ï¼š</p><p>åˆ†æ2å¤„æ‰“å°äº† str1å’Œ str2ï¼Œå®ƒå¤„äº innerClosure è¿™ä¸ªé—­åŒ…ä¸­ï¼Œæ­¤æ—¶ innerClosure è¿™ä¸ªé—­åŒ…çš„ owner å’Œ delegate ä¼šæŒ‡å‘ outerClosure è¿™ä¸ªé—­åŒ…å¯¹è±¡ï¼Œæˆ‘ä»¬ä¼šå‘ç° outerClosure æœ‰ str2 è¿™ä¸ªå±æ€§ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ str1 è¿™ä¸ªå±æ€§ï¼Œå› æ­¤ outerClosure è¿™ä¸ªé—­åŒ…ä¼šå‘å®ƒçš„ owner å»å¯»æ‰¾ï¼Œå› æ­¤ä¼šæ‰¾åˆ° ClosureDepth è¿™ä¸ªç±»å¯¹è±¡çš„ str1 å±æ€§ï¼Œå› æ­¤æ‰“å°çš„ str1 æ˜¯ClosureDepth è¿™ä¸ªç±»å¯¹è±¡ä¸­çš„å±æ€§ï¼Œæ‰“å°çš„ str2 æ˜¯outerClosure è¿™ä¸ªé—­åŒ…ä¸­çš„å±æ€§ï¼Œæ‰€ä»¥åˆ†æ2å¤„çš„æ‰“å°ç»“æœåˆ†åˆ«æ˜¯ erdai666 erdai777</p><p>ä¸Šé¢çš„ä¾‹å­ä¸­æ²¡æœ‰æ˜¾å¼çš„ç»™ delegate è®¾ç½®ä¸€ä¸ªæ¥æ”¶è€…ï¼Œä½†æ˜¯æ— è®ºå“ªå±‚é—­åŒ…éƒ½èƒ½æˆåŠŸè®¿é—®åˆ° str1ã€str2 å€¼ï¼Œè¿™æ˜¯å› ä¸ºé»˜è®¤çš„è§£æå§”æ‰˜ç­–ç•¥åœ¨å‘æŒ¥ä½œç”¨ï¼ŒGroovy é—­åŒ…çš„å§”æ‰˜ç­–ç•¥æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><ol><li><strong>OWNER_FIRST</strong>ï¼šé»˜è®¤ç­–ç•¥ï¼Œé¦–å…ˆä» owner ä¸Šå¯»æ‰¾å±æ€§æˆ–æ–¹æ³•ï¼Œæ‰¾ä¸åˆ°åˆ™åœ¨ delegate ä¸Šå¯»æ‰¾</li><li><strong>DELEGATE_FIRST</strong>ï¼šå’Œä¸Šé¢ç›¸åï¼Œé¦–å…ˆä» delegate ä¸Šå¯»æ‰¾å±æ€§æˆ–è€…æ–¹æ³•ï¼Œæ‰¾ä¸åˆ°åˆ™åœ¨ owner ä¸Šå¯»æ‰¾</li><li><strong>OWNER_ONLY</strong>ï¼šåªåœ¨ owner ä¸Šå¯»æ‰¾ï¼Œdelegate è¢«å¿½ç•¥</li><li><strong>DELEGATE_ONLY</strong>ï¼šå’Œä¸Šé¢ç›¸åï¼Œåªåœ¨ delegate ä¸Šå¯»æ‰¾ï¼Œowner è¢«å¿½ç•¥</li><li><strong>TO_SELF</strong>ï¼šé«˜çº§é€‰é¡¹ï¼Œè®©å¼€å‘è€…è‡ªå®šä¹‰ç­–ç•¥ï¼Œå¿…é¡»è¦è‡ªå®šä¹‰å®ç°ä¸€ä¸ª Closure ç±»ï¼Œä¸€èˆ¬æˆ‘ä»¬è¿™ç§ç©å®¶ç”¨ä¸åˆ°</li></ol><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥ä¿®æ”¹ä¸€ä¸‹é—­åŒ…çš„å§”æ‰˜ç­–ç•¥ï¼ŒåŠ æ·±ç†è§£ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">class</span> <span class="hljs-title class_">People1</span>&#123;<br>    <span class="hljs-keyword">def</span> name = <span class="hljs-string">&#x27;æˆ‘æ˜¯People1&#x27;</span><br><br>    <span class="hljs-keyword">def</span> action()&#123;<br>        println <span class="hljs-string">&#x27;åƒé¥­&#x27;</span><br>    &#125;<br><br>    <span class="hljs-keyword">def</span> closure = &#123;<br>        println name<br>        action()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">People2</span>&#123;<br>    <span class="hljs-keyword">def</span> name = <span class="hljs-string">&#x27;æˆ‘æ˜¯People2&#x27;</span><br><br>    <span class="hljs-keyword">def</span> action()&#123;<br>        println <span class="hljs-string">&#x27;ç¡è§‰&#x27;</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">def</span> people1 = <span class="hljs-keyword">new</span> People1()<br><span class="hljs-keyword">def</span> people2 = <span class="hljs-keyword">new</span> People2()<br>people1.closure.delegate = people2<br>people1.closure.call()<br><span class="hljs-comment">//è¿è¡Œä¸‹ç¨‹åºï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š</span><br>æˆ‘æ˜¯People1<br>åƒé¥­<br></code></pre></td></tr></table></figure><p>what? è¿™æ˜¯å•¥æƒ…å†µï¼Œæˆ‘ä¸æ˜¯ä¿®æ”¹äº† delegate ä¸º people2 äº†ï¼Œæ€ä¹ˆæ‰“å°ç»“æœè¿˜æ˜¯ people1 çš„ï¼Ÿé‚£æ˜¯å› ä¸ºæˆ‘ä»¬å¿½ç•¥äº†ä¸€ä¸ªç‚¹ï¼Œæ²¡æœ‰ä¿®æ”¹é—­åŒ…å§”æ‰˜ç­–ç•¥ï¼Œä»–é»˜è®¤æ˜¯ OWNER_FIRST ï¼Œå› æ­¤æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å°±å¥½äº†ï¼Œè¿˜æ˜¯ä¸Šé¢è¿™æ®µä»£ç ï¼Œæ·»åŠ ä¸€å¥ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs groovy">people1.closure.resolveStrategy = Closure.DELEGATE_FIRST<br><span class="hljs-comment">//è¿è¡Œä¸‹ç¨‹åºï¼Œæ‰“å°ç»“æœå¦‚ä¸‹ï¼š</span><br>æˆ‘æ˜¯People2<br>ç¡è§‰<br></code></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œç›¸ä¿¡ä½ å¯¹é—­åŒ…äº†è§£çš„å·®ä¸å¤šäº†ï¼Œä¸‹é¢æˆ‘ä»¬åœ¨çœ‹ä¸‹é—­åŒ…çš„æºç å°±å®Œç¾äº†</p><h4 id="4ï¼‰ã€é—­åŒ…-Closure-ç±»æºç "><a href="#4ï¼‰ã€é—­åŒ…-Closure-ç±»æºç " class="headerlink" title="4ï¼‰ã€é—­åŒ… Closure ç±»æºç "></a>4ï¼‰ã€é—­åŒ… Closure ç±»æºç </h4><p>ä»…è´´å‡ºå…³é”®æºç </p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Closure</span>&lt;V&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GroovyObjectSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Cloneable</span>, Runnable, GroovyCallable&lt;V&gt;, Serializable &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç†Ÿæ‚‰çš„ä¸€å †é—­åŒ…å§”æ‰˜ä»£ç†ç­–ç•¥</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> OWNER_FIRST = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> DELEGATE_FIRST = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> OWNER_ONLY = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> DELEGATE_ONLY = <span class="hljs-number">3</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> TO_SELF = <span class="hljs-number">4</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é—­åŒ…å¯¹åº”çš„ä¸‰ä¸ªå§”æ‰˜å¯¹è±¡ thisObject å¯¹åº”çš„å°±æ˜¯ this å±æ€§ï¼Œéƒ½æ˜¯ç”¨ private ä¿®é¥°çš„ï¼Œå¤–ç•Œè®¿é—®ä¸åˆ°</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Object delegate;<br>    <span class="hljs-keyword">private</span> Object owner;<br>    <span class="hljs-keyword">private</span> Object thisObject;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é—­åŒ…å§”æ‰˜ç­–ç•¥</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> resolveStrategy;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åœ¨é—­åŒ…çš„æ„é€ æ–¹æ³•ä¸­ï¼š</span><br><span class="hljs-comment">     * 1ã€å°† resolveStrategy èµ‹å€¼ä¸º0ï¼Œä¹Ÿæ˜¯å°±é»˜è®¤å§”æ‰˜ç­–ç•¥OWNER_FIRST</span><br><span class="hljs-comment">     * 2ã€thisObject ï¼Œowner ï¼Œdelegateéƒ½ä¼šè¢«èµ‹å€¼ï¼Œdelegate èµ‹çš„æ˜¯ ownerçš„å€¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> Closure(Object owner, Object thisObject) &#123;<br>        <span class="hljs-variable language_">this</span>.resolveStrategy = <span class="hljs-number">0</span>;<br>        <span class="hljs-variable language_">this</span>.owner = owner;<br>        <span class="hljs-variable language_">this</span>.delegate = owner;<br>        <span class="hljs-variable language_">this</span>.thisObject = thisObject;<br>        CachedClosureClass cachedClass = (CachedClosureClass)ReflectionCache.getCachedClass(<span class="hljs-variable language_">this</span>.getClass());<br>        <span class="hljs-variable language_">this</span>.parameterTypes = cachedClass.getParameterTypes();<br>        <span class="hljs-variable language_">this</span>.maximumNumberOfParameters = cachedClass.getMaximumNumberOfParameters();<br>    &#125;<br>  <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * thisObject åªæä¾›äº† get æ–¹æ³•ï¼Œä¸” thisObject æ˜¯ç”¨ private ä¿®é¥°çš„ï¼Œå› æ­¤ thisObject å³ this åªè¯»</span><br><span class="hljs-comment">     */</span><br>  <span class="hljs-keyword">public</span> Object getThisObject() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.thisObject;<br>    &#125;<br>  <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * owner åªæä¾›äº† get æ–¹æ³•ï¼Œä¸” owner æ˜¯ç”¨ private ä¿®é¥°çš„ï¼Œå› æ­¤ owner åªè¯»</span><br><span class="hljs-comment">     */</span><br>  <span class="hljs-keyword">public</span> Object getOwner() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.owner;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * delegate æä¾›äº† get å’Œ set æ–¹æ³•ï¼Œå› æ­¤ delegate å¯è¯»å†™</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> Object getDelegate() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.delegate;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">void</span> setDelegate(Object delegate) &#123;<br>        <span class="hljs-variable language_">this</span>.delegate = delegate;<br>    &#125;<br>  <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç†Ÿæ‚‰çš„å§”æ‰˜ç­–ç•¥è®¾ç½®</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">void</span> setResolveStrategy(<span class="hljs-type">int</span> resolveStrategy) &#123;<br>        <span class="hljs-variable language_">this</span>.resolveStrategy = resolveStrategy;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> getResolveStrategy() &#123;<br>        <span class="hljs-keyword">return</span> resolveStrategy;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œé—­åŒ…ç›¸å…³çš„çŸ¥è¯†ç‚¹å°±éƒ½è®²å®Œäº†ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œé‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼š<strong>æˆ‘ä»¬ä½¿ç”¨é—­åŒ…çš„æ—¶å€™ï¼Œå¦‚ä½•å»ç¡®å®šé—­åŒ…çš„å‚æ•°å‘¢ï¼Ÿ</strong>ï¼Œè¿™ä¸ªçœŸçš„å¾ˆè›‹ç–¼ï¼Œä½œä¸º Android å¼€å‘è€…ï¼Œåœ¨ä½¿ç”¨ AndroidStudio è¿›è¡Œ Gradle è„šæœ¬ç¼–å†™çš„æ—¶å€™ï¼ŒçœŸçš„æ˜¯éå¸¸ä¸å‹å¥½ï¼Œä¸Šé¢æˆ‘è®²äº†å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå°æŠ€å·§å»è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µæ˜¯åœ¨ä½ çŸ¥é“è¦ä½¿ç”¨ä¸€ä¸ª Api çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ä½ çŸ¥é“ Map çš„ each æ–¹æ³•å¯ä»¥éå†ï¼Œä½†æ˜¯ä½ ä¸çŸ¥é“å‚æ•°ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥å»ä½¿ç”¨ã€‚é‚£å¦‚æœä½ è¿ Api éƒ½ä¸çŸ¥é“ï¼Œé‚£å°±æ›´åŠ ä¸çŸ¥é“é—­åŒ…çš„å‚æ•°äº†ï¼Œå› æ­¤è¦è§£å†³è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±å¿…é¡»å»æŸ¥é˜… Groovy å®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="http://link.zhihu.com/?target=http://www.groovy-lang.org/api.html">http://www.groovy-lang.org/api.html</a></p><p><a href="http://link.zhihu.com/?target=http://docs.groovy-lang.org/latest/html/groovy-jdk/index-all.html">http://docs.groovy-lang.org/latest/html/groovy-jdk/index-all.html</a></p><h2 id="äº”ã€Groovyæ•°æ®ç»“æ„"><a href="#äº”ã€Groovyæ•°æ®ç»“æ„" class="headerlink" title="äº”ã€Groovyæ•°æ®ç»“æ„"></a>äº”ã€Groovyæ•°æ®ç»“æ„</h2><p>é€šè¿‡è¿™ä¸ªæ¨¡å—çš„å­¦ä¹ ï¼Œæˆ‘ä¼šç»“åˆå…·ä½“çš„ä¾‹å­æ¥è¯´æ˜å¦‚ä½•æŸ¥é˜…æ–‡æ¡£æ¥ç¡®å®šé—­åŒ…ä¸­çš„å‚æ•°ï¼Œåœ¨è®² Map çš„æ—¶å€™æˆ‘ä¼šè®²åˆ°</p><p>Groovy å¸¸ç”¨çš„æ•°æ®ç»“æ„æœ‰å¦‚ä¸‹ å››ç§ï¼š</p><ul><li>1ï¼‰ã€æ•°ç»„</li><li>2ï¼‰ã€List</li><li>3ï¼‰ã€Map</li><li>4ï¼‰ã€Range</li></ul><h3 id="1ã€æ•°ç»„"><a href="#1ã€æ•°ç»„" class="headerlink" title="1ã€æ•°ç»„"></a>1ã€æ•°ç»„</h3><p>åœ¨ Groovy ä¸­ä½¿ç”¨ [ ] è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª List é›†åˆï¼Œå¦‚æœè¦å®šä¹‰ Array æ•°ç»„ï¼Œæˆ‘ä»¬å°±å¿…é¡»å¼ºåˆ¶æŒ‡å®šä¸ºä¸€ä¸ªæ•°ç»„çš„ç±»å‹</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šè¿™æ ·å»å®šä¹‰ä¸€ä¸ªæ•°ç»„</span><br>String[] javaArray = [<span class="hljs-string">&quot;Java&quot;</span>, <span class="hljs-string">&quot;Groovy&quot;</span>, <span class="hljs-string">&quot;Android&quot;</span>]<br><br><span class="hljs-comment">//åœ¨ Groovy ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šä½¿ç”¨ as å…³é”®å­—å®šä¹‰æ•°ç»„</span><br><span class="hljs-keyword">def</span> groovyArray = [<span class="hljs-string">&quot;Java&quot;</span>, <span class="hljs-string">&quot;Groovy&quot;</span>, <span class="hljs-string">&quot;Android&quot;</span>] <span class="hljs-keyword">as</span> String[]<br></code></pre></td></tr></table></figure><h3 id="2ã€List"><a href="#2ã€List" class="headerlink" title="2ã€List"></a>2ã€List</h3><h4 id="1ï¼‰ã€åˆ—è¡¨é›†åˆå®šä¹‰"><a href="#1ï¼‰ã€åˆ—è¡¨é›†åˆå®šä¹‰" class="headerlink" title="1ï¼‰ã€åˆ—è¡¨é›†åˆå®šä¹‰"></a>1ï¼‰ã€åˆ—è¡¨é›†åˆå®šä¹‰</h4><p>1ã€List å³åˆ—è¡¨é›†åˆï¼Œå¯¹åº” Java ä¸­çš„ List æ¥å£ï¼Œä¸€èˆ¬ç”¨ ArrayList ä½œä¸ºçœŸæ­£çš„å®ç°ç±»</p><p>2ã€å®šä¹‰ä¸€ä¸ªåˆ—è¡¨é›†åˆçš„æ–¹å¼æœ‰ç‚¹åƒ Java ä¸­å®šä¹‰æ•°ç»„ä¸€æ ·</p><p>3ã€é›†åˆå…ƒç´ å¯ä»¥æ¥æ”¶ä»»æ„çš„æ•°æ®ç±»å‹</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//åœ¨ Groovy ä¸­å®šä¹‰çš„é›†åˆé»˜è®¤å°±æ˜¯å¯¹åº”äº Java ä¸­ ArrayList é›†åˆ</span><br><span class="hljs-keyword">def</span> list1 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br><span class="hljs-comment">//æ‰“å° list ç±»å‹</span><br>print list1.<span class="hljs-keyword">class</span><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">java</span>.util.ArrayList<br><br><span class="hljs-comment">//é›†åˆå…ƒç´ å¯ä»¥æ¥æ”¶ä»»æ„çš„æ•°æ®ç±»å‹</span><br><span class="hljs-keyword">def</span> list2 = [<span class="hljs-string">&#x27;erdai666&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">true</span>]<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘æƒ³å®šä¹‰ä¸€ä¸ª LinkedList é›†åˆï¼Œè¦æ€ä¹ˆåšå‘¢ï¼Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>1ã€é€šè¿‡ Java çš„å¼ºç±»å‹æ–¹å¼å»å®šä¹‰</p><p>2ã€é€šè¿‡ as å…³é”®å­—æ¥æŒ‡å®š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//æ–¹å¼1ï¼šé€šè¿‡ Java çš„å¼ºç±»å‹æ–¹å¼å»å®šä¹‰</span><br>LinkedList list3 = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]<br><br><span class="hljs-comment">//æ–¹å¼2ï¼šé€šè¿‡ as å…³é”®å­—æ¥æŒ‡å®š</span><br><span class="hljs-keyword">def</span> list4 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>] <span class="hljs-keyword">as</span> LinkedList<br></code></pre></td></tr></table></figure><h4 id="2ï¼‰ã€åˆ—è¡¨é›†åˆå¢åˆ æ”¹æŸ¥"><a href="#2ï¼‰ã€åˆ—è¡¨é›†åˆå¢åˆ æ”¹æŸ¥" class="headerlink" title="2ï¼‰ã€åˆ—è¡¨é›†åˆå¢åˆ æ”¹æŸ¥"></a>2ï¼‰ã€åˆ—è¡¨é›†åˆå¢åˆ æ”¹æŸ¥</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">def</span> list = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br><span class="hljs-comment">//-------------------------- å¢åŠ å…ƒç´  ---------------------------------</span><br><span class="hljs-comment">//æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼</span><br>list.add(<span class="hljs-number">20</span>)<br>list.leftShift(<span class="hljs-number">20</span>)<br>list &lt;&lt; <span class="hljs-number">20</span><br><br><span class="hljs-comment">//-------------------------- åˆ é™¤å…ƒç´  ---------------------------------</span><br><span class="hljs-comment">//æ ¹æ®ä¸‹æ ‡ç§»é™¤å…ƒç´ </span><br>list.remove(<span class="hljs-number">0</span>)<br><br><span class="hljs-comment">//-------------------------- ä¿®æ”¹å…ƒç´  ---------------------------------</span><br><span class="hljs-comment">//æ ¹æ®ä¸‹æ ‡ä¿®æ”¹å…ƒç´ </span><br>list[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span><br><br><span class="hljs-comment">//-------------------------- æŸ¥è¯¢å…ƒç´  ---------------------------------</span><br><span class="hljs-comment">//è°ƒç”¨é—­åŒ…çš„ find æ–¹æ³•ï¼Œæ–¹æ³•ä¸­æ¥æ”¶ä¸€ä¸ªé—­åŒ…ï¼Œé—­åŒ…çš„å‚æ•°å°±æ˜¯ list ä¸­çš„å…ƒç´ </span><br>list.find &#123;<br>    println it<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ—è¡¨é›†åˆ Api æŒºå¤šçš„ï¼Œå¯¹äºä¸€äº›å…¶ä»–Apiï¼Œä½¿ç”¨åˆ°çš„æ—¶å€™è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£å°±å¥½äº†ï¼Œæˆ‘ä¼šåœ¨ä¸‹é¢è®² Map çš„æ—¶å€™æ¼”ç¤ºæŸ¥é˜… Api æ–‡æ¡£ç¡®å®šé—­åŒ…çš„å‚æ•°</p><h3 id="3ã€Map"><a href="#3ã€Map" class="headerlink" title="3ã€Map"></a>3ã€Map</h3><h4 id="1ï¼‰ã€å®šä¹‰"><a href="#1ï¼‰ã€å®šä¹‰" class="headerlink" title="1ï¼‰ã€å®šä¹‰"></a>1ï¼‰ã€å®šä¹‰</h4><p>1ã€Map è¡¨ç¤ºé”®-å€¼è¡¨ï¼Œå…¶åº•å±‚å¯¹åº” Java ä¸­çš„ LinkedHashMap</p><p>2ã€Map å˜é‡ç”±[:]å®šä¹‰ï¼Œå†’å·å·¦è¾¹æ˜¯ keyï¼Œå³è¾¹æ˜¯ Valueã€‚key å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œvalue å¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡</p><p>3ã€Map çš„ key å¯ä»¥ç”¨ â€˜â€™ æˆ– â€œâ€ æˆ– â€˜â€™â€™ â€˜â€™â€™åŒ…èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨å¼•å·åŒ…èµ·æ¥</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-keyword">def</span> map = [<span class="hljs-attr">a:</span> <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">&quot;c&quot;</span> : <span class="hljs-string">&quot;Groovy&quot;</span>, <span class="hljs-string">&#x27;&#x27;&#x27;d&#x27;&#x27;&#x27;</span> : <span class="hljs-string">&#x27;&#x27;&#x27;ddd&#x27;&#x27;&#x27;</span>]<br></code></pre></td></tr></table></figure><h4 id="2ï¼‰ã€Map-å¸¸ç”¨æ“ä½œ"><a href="#2ï¼‰ã€Map-å¸¸ç”¨æ“ä½œ" class="headerlink" title="2ï¼‰ã€Map å¸¸ç”¨æ“ä½œ"></a>2ï¼‰ã€Map å¸¸ç”¨æ“ä½œ</h4><p>è¿™é‡Œåˆ—ä¸¾ä¸€äº› Map çš„å¸¸ç”¨æ“ä½œï¼Œä¸€äº›å…¶ä»–çš„ Api ä½¿ç”¨åˆ°çš„æ—¶å€™è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£å°±å¥½äº†</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//---------------------------- Map ä¸­å…ƒç´ è®¿é—®æ“ä½œ ----------------</span><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æœ‰å¦‚ä¸‹ä¸‰ç§æ–¹å¼ï¼š</span><br><span class="hljs-comment"> * 1ã€map.key</span><br><span class="hljs-comment"> * 2ã€map[key]</span><br><span class="hljs-comment"> * 3ã€map.get(ket)</span><br><span class="hljs-comment"> */</span><br>println map.a<br>println map[<span class="hljs-string">&#x27;b&#x27;</span>]<br>println map.get(<span class="hljs-string">&#x27;c&#x27;</span>)<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span><br><span class="hljs-literal">true</span><br>Groovy<br><br><span class="hljs-comment">//---------------------------- Map ä¸­æ·»åŠ å’Œä¿®æ”¹å…ƒç´  -------------------</span><br><span class="hljs-comment">//å¦‚æœå½“å‰ key åœ¨ map ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ è¯¥å…ƒç´ ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¿®æ”¹è¯¥å…ƒç´ </span><br>map.put(<span class="hljs-string">&#x27;key&#x27;</span>,<span class="hljs-string">&#x27;value&#x27;</span>)<br>map[<span class="hljs-string">&#x27;key&#x27;</span>] = <span class="hljs-string">&quot;value&quot;</span><br></code></pre></td></tr></table></figure><h4 id="3ï¼‰ã€Map-éå†ï¼Œæ¼”ç¤ºæŸ¥é˜…å®˜æ–¹æ–‡æ¡£"><a href="#3ï¼‰ã€Map-éå†ï¼Œæ¼”ç¤ºæŸ¥é˜…å®˜æ–¹æ–‡æ¡£" class="headerlink" title="3ï¼‰ã€Map éå†ï¼Œæ¼”ç¤ºæŸ¥é˜…å®˜æ–¹æ–‡æ¡£"></a>3ï¼‰ã€Map éå†ï¼Œæ¼”ç¤ºæŸ¥é˜…å®˜æ–¹æ–‡æ¡£</h4><p>ç°åœ¨æˆ‘è¦å»éå† map ä¸­çš„å…ƒç´ ï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“å®ƒçš„ Api æ˜¯å•¥ï¼Œé‚£è¿™ä¸ªæ—¶å€™å°±è¦å»æŸ¥å®˜æ–¹ Api æ–‡æ¡£äº†ï¼š</p><p><a href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/Map.html">http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/Map.html</a></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4464fad1d3cc40ab976f7be47d3817e4~tplv-k3u1fbpfcp-zoom-1.image" alt="each"></p><p>æˆ‘ä»¬æŸ¥åˆ° Map æœ‰ each å’Œ eachWithIndex è¿™ä¸¤ä¸ª Api å¯ä»¥å»æ‰§è¡Œéå†æ“ä½œï¼Œæ¥ç€ç‚¹è¿›å»çœ‹ä¸€çœ¼</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e387d37247c04f09873546c4199e8297~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210312113131770"></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6055f46014fc48b0a0f2193db6d9e92b~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210312113208713"></p><p>é€šè¿‡å®˜æ–¹æ–‡æ¡£æˆ‘ä»¬å¯ä»¥å‘ç°: <strong>each å’Œ eachWithIndex çš„é—­åŒ…å‚æ•°è¿˜æ˜¯ä¸ç¡®å®šçš„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ each æ–¹æ³•ï¼Œå¦‚æœä¼ é€’ç»™é—­åŒ…æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå®ƒå°±æŠŠ entry ä½œä¸ºå‚æ•°ï¼Œå¦‚æœæˆ‘ä»¬ä¼ é€’ç»™é—­åŒ…æ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå®ƒå°±æŠŠ key å’Œ value ä½œä¸ºå‚æ•°ï¼ŒeachWithIndex æ¯” each å¤šäº†ä¸ª index ä¸‹æ ‡è€Œå·².</strong></p><p>é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å°±ä½¿ç”¨ä»¥ä¸‹è¿™ä¸¤ä¸ª Api ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//ä¸‹é¢ä¸ºäº†æ‰“å°è¾“å‡ºçš„æ ¼å¼æ¸…æ™°ï¼Œåšäº†ä¸€äº›é¢å¤–çš„æ“ä½œ</span><br><span class="hljs-keyword">def</span> map = [<span class="hljs-attr">a:</span> <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">&quot;c&quot;</span> : <span class="hljs-string">&quot;Groovy&quot;</span>, <span class="hljs-string">&#x27;&#x27;&#x27;d&#x27;&#x27;&#x27;</span> : <span class="hljs-string">&#x27;&#x27;&#x27;ddd&#x27;&#x27;&#x27;</span>]<br><br>map.each &#123;<br>    print <span class="hljs-string">&quot;$it.key $it.value \t&quot;</span><br>&#125;<br>println()<br><br>map.each &#123;key,value -&gt;<br>    print <span class="hljs-string">&quot;$key $value \t&quot;</span><br>&#125;<br>println()<br><br>map.eachWithIndex &#123;entry,index -&gt;<br>    print <span class="hljs-string">&quot;$entry.key $entry.value $index \t&quot;</span><br>&#125;<br>println()<br><br>map.eachWithIndex &#123; key,value,index -&gt;<br>    print <span class="hljs-string">&quot;$key $value $index \t&quot;</span><br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>a <span class="hljs-number">1</span> b <span class="hljs-literal">true</span> c Groovy d ddd <br>a <span class="hljs-number">1</span> b <span class="hljs-literal">true</span> c Groovy d ddd <br>a <span class="hljs-number">1</span> <span class="hljs-number">0</span> b <span class="hljs-literal">true</span> <span class="hljs-number">1</span> c Groovy <span class="hljs-number">2</span> d ddd <span class="hljs-number">3</span> <br>a <span class="hljs-number">1</span> <span class="hljs-number">0</span> b <span class="hljs-literal">true</span> <span class="hljs-number">1</span> c Groovy <span class="hljs-number">2</span> d ddd <span class="hljs-number">3</span> <br></code></pre></td></tr></table></figure><h3 id="4ã€Range"><a href="#4ã€Range" class="headerlink" title="4ã€Range"></a>4ã€Range</h3><p>Range è¡¨ç¤ºèŒƒå›´ï¼Œå®ƒå…¶å®æ˜¯ <strong>List çš„ä¸€ç§æ‹“å±•ã€‚å…¶ç”± begin å€¼ + ä¸¤ä¸ªç‚¹ + end å€¼è¡¨ç¤ºã€‚å¦‚æœä¸æƒ³åŒ…å«æœ€åä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ begin å€¼ + ä¸¤ä¸ªç‚¹ + &lt; + end è¡¨ç¤ºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ aRange.from ä¸ aRange.to æ¥è·å¯¹åº”çš„è¾¹ç•Œå…ƒç´ </strong>ï¼Œå®é™…æ“ä½œæ„Ÿå—ä¸€ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªä¸¤ç«¯éƒ½æ˜¯é—­åŒºé—´çš„èŒƒå›´</span><br><span class="hljs-keyword">def</span> range = <span class="hljs-number">1.</span><span class="hljs-number">.10</span><br>range.each &#123;<br>    print it + <span class="hljs-string">&quot; &quot;</span><br>&#125;<br><span class="hljs-comment">//æ‰“å°å€¼</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span> <span class="hljs-number">10</span><br><br><span class="hljs-comment">//å¦‚æœä¸æƒ³åŒ…å«æœ€åä¸€ä¸ªå…ƒç´ </span><br><span class="hljs-keyword">def</span> range1 = <span class="hljs-number">1.</span>.&lt;<span class="hljs-number">10</span><br>range1.each &#123;<br>    print it + <span class="hljs-string">&quot; &quot;</span><br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span><br><br><span class="hljs-comment">//æ‰“å°å¤´å°¾è¾¹ç•Œå…ƒç´ </span><br>println <span class="hljs-string">&quot;$range1.from $range1.to&quot;</span><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span> <span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><h2 id="å…­ã€Groovy-æ–‡ä»¶å¤„ç†"><a href="#å…­ã€Groovy-æ–‡ä»¶å¤„ç†" class="headerlink" title="å…­ã€Groovy æ–‡ä»¶å¤„ç†"></a>å…­ã€Groovy æ–‡ä»¶å¤„ç†</h2><h3 id="1ã€IO"><a href="#1ã€IO" class="headerlink" title="1ã€IO"></a>1ã€IO</h3><p>ä¸€äº› IO å¸¸ç”¨çš„ Api æ“ä½œï¼Œæˆ‘ä»¬ç›´æ¥ä¸Šä»£ç çœ‹æ•ˆæœï¼Œä»£ç ä¼šå†™ä¸Šæ¸…æ™°çš„æ³¨é‡Šï¼š</p><p>å‡†å¤‡å·¥ä½œï¼šæˆ‘åœ¨å½“å‰è„šæœ¬æ–‡ä»¶çš„åŒçº§ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª testFile.txt æ–‡ä»¶ï¼Œé‡Œé¢éšä¾¿å…ˆå†™å…¥ä¸€äº›å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0faeb77e2cc4e6eb42d3810dadf6d82~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210312144116084"></p><p>ä¸‹é¢æˆ‘ä»¬å¼€å§‹æ¥æ“ä½œè¿™ä¸ªæ–‡ä»¶ï¼Œä¸ºäº†é—­åŒ…çš„å¯è¯»æ€§ï¼Œæˆ‘ä¼šåœ¨é—­åŒ…ä¸ŠåŠ ä¸Šç±»å‹å’Œå‚æ•°ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//-------------------------------1ã€æ–‡ä»¶å®šä½ --------------------------------</span><br><span class="hljs-keyword">def</span> file = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&#x27;testFile.txt&#x27;</span>)<br><br><span class="hljs-comment">//-----------------------2ã€ä½¿ç”¨ eachLine Api æ¯æ¬¡è¯»å–ä¸€è¡Œ, é—­åŒ…å‚æ•°æ˜¯æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸²------------</span><br>file.eachLine &#123; String line -&gt;<br>    println line<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>erdai666<br>erdai777<br>erdai888<br><br><span class="hljs-comment">//------------------------3ã€è·å–è¾“å…¥æµ,è¾“å‡ºæµè¯»æ–‡ä»¶å’Œå†™æ–‡ä»¶---------------------------------</span><br><span class="hljs-comment">//è·å–è¾“å…¥æµè¯»å–æ–‡ä»¶çš„æ¯ä¸€è¡Œ</span><br><span class="hljs-comment">//1</span><br>file.withInputStream &#123; InputStream inputStream -&gt;<br>    inputStream.eachLine &#123; String it -&gt;<br>        println it<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//2</span><br>file.withReader &#123; BufferedReader it -&gt;<br>    it.readLines().each &#123; String it -&gt;<br>        println it<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>erdai666<br>erdai777<br>erdai888<br><br><span class="hljs-comment">//è·å–è¾“å‡ºæµå°†å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ ä¸‹é¢è¿™ä¸¤ç§æ–¹å¼å†™å…¥çš„æ–‡ä»¶å†…å®¹ä¼šæŠŠä¹‹å‰çš„å†…å®¹ç»™è¦†ç›–</span><br><span class="hljs-comment">//1</span><br>file.withOutputStream &#123; OutputStream outputStream -&gt;<br>    outputStream.write(<span class="hljs-string">&quot;erdai999&quot;</span>.getBytes())<br>&#125;<br><br><span class="hljs-comment">//2</span><br>file.withWriter &#123; BufferedWriter it -&gt;<br>    it.write(<span class="hljs-string">&#x27;erdai999&#x27;</span>)<br>&#125;<br><br><span class="hljs-comment">//------------------------4ã€é€šè¿‡è¾“å…¥è¾“å‡ºæµå®ç°æ–‡ä»¶æ‹·è´åŠŸèƒ½---------------------------------</span><br><span class="hljs-comment">//1ã€é€šè¿‡ withOutputStream withInputStream å®ç°æ–‡ä»¶æ‹·è´</span><br><span class="hljs-keyword">def</span> targetFile = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&#x27;testFile1.txt&#x27;</span>)<br>targetFile.withOutputStream &#123; OutputStream outputStream -&gt;<br>    file.withInputStream &#123; InputStream inputStream -&gt;<br>        outputStream &lt;&lt; inputStream<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//2ã€é€šè¿‡ withReaderã€withWriter å®ç°æ–‡ä»¶æ‹·è´</span><br>targetFile.withWriter &#123;BufferedWriter bufferedWriter -&gt;<br>    file.withReader &#123;BufferedReader bufferedReader -&gt;<br>        bufferedReader.eachLine &#123;String line -&gt;<br>            bufferedWriter.write(line + <span class="hljs-string">&quot;\r\n&quot;</span>)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2ã€XML-æ–‡ä»¶æ“ä½œ"><a href="#2ã€XML-æ–‡ä»¶æ“ä½œ" class="headerlink" title="2ã€XML æ–‡ä»¶æ“ä½œ"></a>2ã€XML æ–‡ä»¶æ“ä½œ</h3><h4 id="1ï¼‰ã€è§£æ-XML-æ–‡ä»¶"><a href="#1ï¼‰ã€è§£æ-XML-æ–‡ä»¶" class="headerlink" title="1ï¼‰ã€è§£æ XML æ–‡ä»¶"></a>1ï¼‰ã€è§£æ XML æ–‡ä»¶</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå¸¦æ ¼å¼çš„ xml å­—ç¬¦ä¸²</span><br><span class="hljs-keyword">def</span> xml = <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    &lt;response&gt;</span><br><span class="hljs-string">        &lt;value&gt;</span><br><span class="hljs-string">            &lt;books id=&quot;1&quot; classification=&quot;android&quot;&gt;</span><br><span class="hljs-string">                &lt;book available=&quot;14&quot; id=&quot;2&quot;&gt;</span><br><span class="hljs-string">                   &lt;title&gt;ç¬¬ä¸€è¡Œä»£ç &lt;/title&gt;</span><br><span class="hljs-string">                   &lt;author id=&quot;2&quot;&gt;éƒ­éœ–&lt;/author&gt;</span><br><span class="hljs-string">               &lt;/book&gt;</span><br><span class="hljs-string">               &lt;book available=&quot;13&quot; id=&quot;3&quot;&gt;</span><br><span class="hljs-string">                   &lt;title&gt;Androidå¼€å‘è‰ºæœ¯æ¢ç´¢&lt;/title&gt;</span><br><span class="hljs-string">                   &lt;author id=&quot;3&quot;&gt;ä»»ç‰åˆš&lt;/author&gt;</span><br><span class="hljs-string">               &lt;/book&gt;</span><br><span class="hljs-string">           &lt;/books&gt;</span><br><span class="hljs-string">       &lt;/value&gt;</span><br><span class="hljs-string">    &lt;/response&gt;</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-comment">//åˆ›å»º XmlSlurper ç±»å¯¹è±¡ï¼Œè§£æ XML æ–‡ä»¶ä¸»è¦å€ŸåŠ© XmlSlurper è¿™ä¸ªç±»</span><br><span class="hljs-keyword">def</span> xmlSlurper = <span class="hljs-keyword">new</span> XmlSlurper()<br><span class="hljs-comment">//è§£æ mxl è¿”å› response æ ¹ç»“ç‚¹å¯¹è±¡</span><br><span class="hljs-keyword">def</span> response = xmlSlurper.parseText(xml)<br><span class="hljs-comment">//æ‰“å°ä¸€äº›ç»“æœ</span><br>println response.value.books[<span class="hljs-number">0</span>].book[<span class="hljs-number">0</span>].title.text()<br>println response.value.books[<span class="hljs-number">0</span>].book[<span class="hljs-number">0</span>].author.text()<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>ç¬¬ä¸€è¡Œä»£ç <br>éƒ­éœ–<br><br><span class="hljs-comment">//1ã€ä½¿ç”¨è¿­ä»£å™¨è§£æ</span><br>response.value.books.each&#123; books -&gt;<br>    books.book.each&#123; book -&gt;<br>        println book.title<br>        println book.author <br>    &#125;<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>ç¬¬ä¸€è¡Œä»£ç <br>éƒ­éœ–<br>Androidå¼€å‘è‰ºæœ¯æ¢ç´¢<br>ä»»ç‰åˆš<br><br><span class="hljs-comment">//2ã€æ·±åº¦éå† XML æ•°æ®</span><br><span class="hljs-keyword">def</span> str1 = response.depthFirst().findAll &#123; book -&gt;<br>    <span class="hljs-keyword">return</span> book.author == <span class="hljs-string">&#x27;éƒ­éœ–&#x27;</span><br>&#125;<br>println str1<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>[ç¬¬ä¸€è¡Œä»£ç éƒ­éœ–]<br><br><span class="hljs-comment">//3ã€å¹¿åº¦éå† XML æ•°æ®</span><br><span class="hljs-keyword">def</span> str2 = response.value.books.children().findAll&#123; node -&gt;<br>    node.name() == <span class="hljs-string">&#x27;book&#x27;</span> &amp;&amp; node.<span class="hljs-meta">@id</span> == <span class="hljs-string">&#x27;2&#x27;</span><br>&#125;.collect &#123; node -&gt;<br>    <span class="hljs-string">&quot;$node.title $node.author&quot;</span><br>&#125;<br>println str2<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>[ç¬¬ä¸€è¡Œä»£ç  éƒ­éœ–]<br></code></pre></td></tr></table></figure><h4 id="2-ã€ç”Ÿæˆ-XML-æ–‡ä»¶"><a href="#2-ã€ç”Ÿæˆ-XML-æ–‡ä»¶" class="headerlink" title="2)ã€ç”Ÿæˆ XML æ–‡ä»¶"></a>2)ã€ç”Ÿæˆ XML æ–‡ä»¶</h4><p>ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨ XmlSlurper è¿™ä¸ªç±»è§£æäº† XMLï¼Œç°åœ¨æˆ‘ä»¬å€ŸåŠ© MarkupBuilder æ¥ç”Ÿæˆ XML ,ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * &lt;response&gt;</span><br><span class="hljs-comment"> *      &lt;value&gt;</span><br><span class="hljs-comment"> *          &lt;books id=&quot;1&quot; classification=&quot;android&quot;&gt;</span><br><span class="hljs-comment"> *              &lt;book available=&quot;14&quot; id=&quot;2&quot;&gt;</span><br><span class="hljs-comment"> *                 &lt;title&gt;ç¬¬ä¸€è¡Œä»£ç &lt;/title&gt;</span><br><span class="hljs-comment"> *                 &lt;author id=&quot;2&quot;&gt;éƒ­éœ–&lt;/author&gt;</span><br><span class="hljs-comment"> *             &lt;/book&gt;</span><br><span class="hljs-comment"> *             &lt;book available=&quot;13&quot; id=&quot;3&quot;&gt;</span><br><span class="hljs-comment"> *                 &lt;title&gt;Androidå¼€å‘è‰ºæœ¯æ¢ç´¢&lt;/title&gt;</span><br><span class="hljs-comment"> *                 &lt;author id=&quot;3&quot;&gt;ä»»ç‰åˆš&lt;/author&gt;</span><br><span class="hljs-comment"> *             &lt;/book&gt;</span><br><span class="hljs-comment"> *         &lt;/books&gt;</span><br><span class="hljs-comment"> *     &lt;/value&gt;</span><br><span class="hljs-comment"> * &lt;/response&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-comment">//æ–¹å¼1ï¼šé€šè¿‡ä¸‹é¢è¿™ç§æ–¹å¼ å°±å¯ä»¥å®ç°ä¸Šé¢çš„æ•ˆæœï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æœ‰ä¸ªå¼Šç«¯ï¼Œæ•°æ®éƒ½æ˜¯å†™æ­»çš„</span><br><span class="hljs-keyword">def</span> sw = <span class="hljs-keyword">new</span> StringWriter()<br><span class="hljs-keyword">def</span> xmlBuilder = <span class="hljs-keyword">new</span> MarkupBuilder(sw)<br>xmlBuilder.response&#123;<br>    value&#123;<br>        books(<span class="hljs-attr">id:</span> <span class="hljs-string">&#x27;1&#x27;</span>,<span class="hljs-attr">classification:</span> <span class="hljs-string">&#x27;android&#x27;</span>)&#123;<br>            book(<span class="hljs-attr">available:</span> <span class="hljs-string">&#x27;14&#x27;</span>,<span class="hljs-attr">id:</span> <span class="hljs-string">&#x27;2&#x27;</span>)&#123;<br>                title(<span class="hljs-string">&#x27;ç¬¬ä¸€è¡Œä»£ç &#x27;</span>)<br>                author(<span class="hljs-attr">id:</span> <span class="hljs-string">&#x27;2&#x27;</span> ,<span class="hljs-string">&#x27;éƒ­éœ–&#x27;</span>)<br>            &#125;<br>            book(<span class="hljs-attr">available:</span> <span class="hljs-string">&#x27;13&#x27;</span>,<span class="hljs-attr">id:</span> <span class="hljs-string">&#x27;3&#x27;</span>)&#123;<br>                title(<span class="hljs-string">&#x27;Androidå¼€å‘è‰ºæœ¯æ¢ç´¢&#x27;</span>)<br>                author(<span class="hljs-attr">id:</span> <span class="hljs-string">&#x27;3&#x27;</span> ,<span class="hljs-string">&#x27;ä»»ç‰åˆš&#x27;</span>)<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br>println sw<br><br><span class="hljs-comment">//æ–¹å¼2ï¼šå°† XML æ•°æ®å¯¹åº”åˆ›å»ºç›¸åº”çš„æ•°æ®æ¨¡å‹ï¼Œå°±åƒæˆ‘ä»¬è§£æ Json åˆ›å»ºç›¸åº”çš„æ•°æ®æ¨¡å‹æ˜¯ä¸€æ ·çš„</span><br><span class="hljs-comment">//åˆ›å»º XML å¯¹åº”æ•°æ®æ¨¡å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Response</span> &#123;<br>    <br>    <span class="hljs-keyword">def</span> value = <span class="hljs-keyword">new</span> Value()<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Value</span> &#123;<br><br>        <span class="hljs-keyword">def</span> books = <span class="hljs-keyword">new</span> Books(<span class="hljs-attr">id:</span> <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-attr">classification:</span> <span class="hljs-string">&#x27;android&#x27;</span>)<br><br>        <span class="hljs-keyword">class</span> <span class="hljs-title class_">Books</span> &#123;<br>            <span class="hljs-keyword">def</span> id<br>            <span class="hljs-keyword">def</span> classification<br>            <span class="hljs-keyword">def</span> book = [<span class="hljs-keyword">new</span> Book(<span class="hljs-attr">available:</span> <span class="hljs-string">&#x27;14&#x27;</span>, <span class="hljs-attr">id:</span> <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-attr">title:</span> <span class="hljs-string">&#x27;ç¬¬ä¸€è¡Œä»£ç &#x27;</span>, <span class="hljs-attr">authorId:</span> <span class="hljs-number">2</span>, <span class="hljs-attr">author:</span> <span class="hljs-string">&#x27;éƒ­éœ–&#x27;</span>),<br>               <span class="hljs-keyword">new</span> Book(<span class="hljs-attr">available:</span> <span class="hljs-string">&#x27;13&#x27;</span>, <span class="hljs-attr">id:</span> <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-attr">title:</span> <span class="hljs-string">&#x27;Androidå¼€å‘è‰ºæœ¯æ¢ç´¢&#x27;</span>, <span class="hljs-attr">authorId:</span> <span class="hljs-number">3</span>, <span class="hljs-attr">author:</span> <span class="hljs-string">&#x27;ä»»ç‰åˆš&#x27;</span>)]<br><br>            <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> &#123;<br>                <span class="hljs-keyword">def</span> available<br>                <span class="hljs-keyword">def</span> id<br>                <span class="hljs-keyword">def</span> title<br>                <span class="hljs-keyword">def</span> authorId<br>                <span class="hljs-keyword">def</span> author<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//åˆ›å»º response å¯¹è±¡</span><br><span class="hljs-keyword">def</span> response = <span class="hljs-keyword">new</span> Response()<br><span class="hljs-comment">//æ„å»º XML </span><br>xmlBuilder.response&#123;<br>    value&#123;<br>        books(<span class="hljs-attr">id:</span> response.value.books.id,<span class="hljs-attr">classification:</span> response.value.books.classification)&#123;<br>            response.value.books.book.each&#123;<br>                <span class="hljs-keyword">def</span> book1 = it<br>                book(<span class="hljs-attr">available:</span> it.available,<span class="hljs-attr">id:</span> it.id)&#123;<br>                    title(book1.title)<br>                    author(<span class="hljs-attr">authorId:</span> book1.authorId,book1.author)<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br>println sw<br></code></pre></td></tr></table></figure><h3 id="3ã€Json-è§£æ"><a href="#3ã€Json-è§£æ" class="headerlink" title="3ã€Json è§£æ"></a>3ã€Json è§£æ</h3><p>Jsonè§£æä¸»è¦æ˜¯é€šè¿‡ JsonSlurper è¿™ä¸ªç±»å®ç°çš„ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨å†™æ’ä»¶çš„æ—¶å€™å°±ä¸éœ€è¦é¢å¤–å¼•å…¥ç¬¬ä¸‰æ–¹çš„ Json è§£æåº“äº†ï¼Œå…¶ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs groovy"><span class="hljs-comment">//å‘é€è¯·æ±‚è·å–æœåŠ¡å™¨å“åº”çš„æ•°æ®</span><br><span class="hljs-keyword">def</span> response = getNetWorkData(<span class="hljs-string">&quot;https://www.wanandroid.com/banner/json&quot;</span>)<br>println response.data[<span class="hljs-number">0</span>].desc<br>println response.data[<span class="hljs-number">0</span>].imagePath<br><br><span class="hljs-keyword">def</span> getNetWorkData(String url)&#123;<br>    <span class="hljs-keyword">def</span> connect = <span class="hljs-keyword">new</span> URL(url).openConnection()<br>    connect.setRequestMethod(<span class="hljs-string">&quot;GET&quot;</span>)<br>    <span class="hljs-comment">//è¿™ä¸ªä¼šé˜»å¡çº¿ç¨‹ åœ¨Androidä¸­ä¸èƒ½è¿™æ ·æ“ä½œ ä½†æ˜¯åœ¨æ¡Œé¢ç¨‹åºæ˜¯å¯ä»¥çš„</span><br>    connect.connect()<br>    <span class="hljs-keyword">def</span> response = connect.content.text<br><br>    <span class="hljs-comment">//jsonè½¬å®ä½“å¯¹è±¡</span><br>    <span class="hljs-keyword">def</span> jsonSlurper = <span class="hljs-keyword">new</span> JsonSlurper()<br>    jsonSlurper.parseText(response)<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ‰”ç‰©çº¿<br><span class="hljs-attr">https:</span><span class="hljs-comment">//wanandroid.com/blogimgs/8a0131ac-05b7-4b6c-a8d0-f438678834ba.png</span><br></code></pre></td></tr></table></figure><h2 id="7ã€æ€»ç»“"><a href="#7ã€æ€»ç»“" class="headerlink" title="7ã€æ€»ç»“"></a>7ã€æ€»ç»“</h2><p>åœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ä»‹ç»äº†ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><p>1ã€ä¸€äº›å…³äº Gradle ï¼ŒGroovy çš„é—®é¢˜</p><p>2ã€æ­å»º Groovy å¼€å‘ç¯å¢ƒï¼Œåˆ›å»ºä¸€ä¸ª Groovy å·¥ç¨‹</p><p>3ã€è®²è§£äº† Groovy çš„ä¸€äº›åŸºç¡€è¯­æ³•</p><p>4ã€å¯¹é—­åŒ…è¿›è¡Œäº†æ·±å…¥çš„è®²è§£</p><p>5ã€è®²è§£äº† Groovy ä¸­çš„æ•°æ®ç»“æ„å’Œå¸¸ç”¨ Api ä½¿ç”¨ï¼Œå¹¶ä»¥ Map ä¸¾ä¾‹ï¼ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£å»ç¡®å®š Api çš„ä½¿ç”¨å’Œé—­åŒ…çš„å‚æ•°</p><p>6ã€è®²è§£äº† Groovy æ–‡ä»¶ç›¸å…³çš„å¤„ç†</p><p>å­¦ä¹ äº† Groovy ï¼Œå¯¹äºæˆ‘ä»¬åç»­è‡ªå®šä¹‰ Gradle æ’ä»¶è¿ˆå‡ºäº†å…³é”®çš„ä¸€æ­¥ã€‚å…¶æ¬¡å¦‚æœä½ å­¦ä¹ è¿‡ Kotlin ï¼Œä½ ä¼šå‘ç°ï¼Œå®ƒä»¬çš„è¯­æ³•éå¸¸çš„ç±»ä¼¼ï¼Œå› æ­¤å¯¹äºåç»­å­¦ä¹  Kotlin æˆ‘ä»¬ä¹Ÿå¯ä»¥å¿«é€Ÿå»ä¸Šæ‰‹ã€‚</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://juejin.cn/post/6844904128594853902#heading-87">æ·±åº¦æ¢ç´¢ Gradle è‡ªåŠ¨åŒ–æ„å»ºæŠ€æœ¯ï¼ˆäºŒã€Groovy ç­‘åŸºç¯‡</a></p><p><a href="https://juejin.cn/post/6888977881679495175#heading-0">Gradle çˆ¬å‘æŒ‡å— â€“ æ¦‚å¿µåˆè§£ã€Grovvy è¯­æ³•ã€å¸¸è§ API</a></p><p><a href="https://yanbober.blog.csdn.net/article/details/109560923">Groovy æœ¬è´¨åˆæ¢åŠé—­åŒ…ç‰¹æ€§åŸç†æ€»ç»“</a></p><p><a href="https://blog.csdn.net/singwhatiwanna/article/details/76084580">Gradleä»å…¥é—¨åˆ°å®æˆ˜ - GroovyåŸºç¡€</a></p><p><a href="https://coding.imooc.com/class/206.html#Anchor">æ…•è¯¾ç½‘ä¹‹Gradle3.0è‡ªåŠ¨åŒ–é¡¹ç›®æ„å»ºæŠ€æœ¯ç²¾è®²+å®æˆ˜</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>Gradle</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Gradle</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android APT ç³»åˆ— ï¼ˆå››ï¼‰ï¼šAPT å®æˆ˜åº”ç”¨</title>
    <link href="/2022/10/10/Android%20APT%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AAPT%20%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8/"/>
    <url>/2022/10/10/Android%20APT%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AAPT%20%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101948272.jpeg" alt="lesly-juarez-uR7DBrAa4HE-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹ APT æŠ€æœ¯è¿›è¡Œäº†è®²è§£ï¼Œè¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6978500975770206239">Android APT ç³»åˆ— ï¼ˆä¸‰ï¼‰ï¼šAPT æŠ€æœ¯æ¢ç©¶</a>ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨ APT æŠ€æœ¯æ¥è¿›è¡Œå®æˆ˜åº”ç”¨ã€‚</p><p><a href="https://github.com/sweetying520/AptDemo">Github Demo åœ°å€</a> , å¤§å®¶å¯ä»¥çœ‹ Demo è·Ÿéšæˆ‘çš„æ€è·¯ä¸€èµ·åˆ†æ</p><h2 id="å›é¡¾"><a href="#å›é¡¾" class="headerlink" title="å›é¡¾"></a>å›é¡¾</h2><p>åœ¨æœ¬ç³»åˆ—çš„å¼€ç¯‡ï¼Œæˆ‘è®²äº†åœ¨é¡¹ç›®å®è·µè¿‡ç¨‹ä¸­åšçš„ä¸€ä¸ªå¸ƒå±€ä¼˜åŒ–ï¼ŒAndroid ä¸­å°‘é‡çš„ç³»ç»Ÿæ§ä»¶æ˜¯é€šè¿‡ <code>new</code> çš„æ–¹å¼åˆ›å»ºå‡ºæ¥çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ§ä»¶å¦‚ <code>androidx.appcompat.widget</code> ä¸‹çš„æ§ä»¶ï¼Œè‡ªå®šä¹‰æ§ä»¶ï¼Œç¬¬ä¸‰æ–¹æ§ä»¶ç­‰ç­‰ï¼Œéƒ½æ˜¯é€šè¿‡åå°„åˆ›å»ºçš„ã€‚å¤§é‡çš„åå°„åˆ›å»ºå¤šå¤šå°‘å°‘ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å»è§£å†³åå°„åˆ›å»ºçš„é—®é¢˜ï¼Œæˆ‘çš„è§£å†³æ€è·¯æ˜¯ï¼š</p><blockquote><p>1ã€é€šè¿‡ç¼–å†™ Android æ’ä»¶è·å– Xml å¸ƒå±€ä¸­çš„æ‰€æœ‰æ§ä»¶ </p><p>2ã€æ‹¿åˆ°æ§ä»¶åï¼Œé€šè¿‡ APT ç”Ÿæˆç”¨ <code>new</code> çš„æ–¹å¼åˆ›å»º View çš„ç±» </p><p>3ã€æœ€åé€šè¿‡åå°„è·å–å½“å‰ç±»å¹¶åœ¨åŸºç±»é‡Œé¢å®Œæˆæ›¿æ¢</p></blockquote><h2 id="ä¸€ã€å‡†å¤‡-Android-æ’ä»¶ç”Ÿæˆçš„æ–‡ä»¶"><a href="#ä¸€ã€å‡†å¤‡-Android-æ’ä»¶ç”Ÿæˆçš„æ–‡ä»¶" class="headerlink" title="ä¸€ã€å‡†å¤‡ Android æ’ä»¶ç”Ÿæˆçš„æ–‡ä»¶"></a>ä¸€ã€å‡†å¤‡ Android æ’ä»¶ç”Ÿæˆçš„æ–‡ä»¶</h2><p>å…¶ä¸­ 1 çš„å…·ä½“æµç¨‹æ˜¯ï¼šé€šè¿‡ Android æ’ä»¶è·å–æ‰€æœ‰ Xml å¸ƒå±€ä¸­çš„æ§ä»¶åç§°ï¼Œå¹¶å†™å…¥åˆ°ä¸€ä¸ª<code>.txt</code>æ–‡ä»¶ä¸­ï¼Œå›  Gradle ç³»åˆ—è¿˜æ²¡è®²ï¼Œè¿™é‡Œæˆ‘ä»¬å‡è®¾æ‰€æœ‰çš„æ§ä»¶åç§°å·²ç»å†™å…¥åˆ°<code>.txt</code>æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d18efb79eeed4538b4ac115e272c36f5~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210629191446005"></p><p>ä¸Šè¿°æ–‡ä»¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><p>1ã€ä¸€äº›ä¸å¸¦ <code>.</code> çš„ç³»ç»Ÿæ§ä»¶ï¼Œå¦‚ TextViewï¼ŒImageView ã€‚ç³»ç»Ÿä¼šé»˜è®¤ç»™æˆ‘ä»¬é€šè¿‡ <code>new</code> çš„æ–¹å¼å»åˆ›å»ºï¼Œä¸”æ›¿æ¢ä¸ºäº†<code>androidx.appcompat.widget</code>åŒ…ä¸‹çš„æ§ä»¶ï¼Œä¾‹å¦‚ï¼šTextView -&gt; AppCompatTextView ï¼ŒImageView -&gt; AppCompatImageView </p><p>2ã€å¸¦ <code>.</code> çš„æ§ä»¶ã€‚å¯èƒ½ä¸º <code>androidx.appcompat.widget</code> ä¸‹çš„æ§ä»¶ï¼Œè‡ªå®šä¹‰æ§ä»¶ï¼Œç¬¬ä¸‰æ–¹æ§ä»¶ç­‰ç­‰ï¼Œè¿™äº›æ§ä»¶å¦‚æœæˆ‘ä»¬ä¸åšå¤„ç†ï¼Œç³»ç»Ÿä¼šé€šè¿‡åå°„å»åˆ›å»ºã€‚å› æ­¤æˆ‘ä»¬ä¸»è¦æ˜¯é’ˆå¯¹è¿™äº›æ§ä»¶å»åšå¤„ç†</p><p><strong>æ³¨æ„</strong>ï¼šæˆ‘è¿™é‡Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ª <code>all_view_name.txt</code> çš„æ–‡ä»¶ï¼Œç„¶åæ”¾å…¥äº†ä¸€äº› View çš„åç§°ï¼Œè¿™é‡Œåªæ˜¯æ–¹ä¾¿æˆ‘ä»¬æ¼”ç¤ºã€‚å®é™…ä¸Šç”¨ Android æ’ä»¶å»ç”Ÿæˆçš„æ–‡ä»¶æˆ‘ä»¬ä¸€èˆ¬ä¼šæŒ‡å®šæ”¾åœ¨ app çš„ <code>/build</code>ç›®å½•ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ clean çš„æ—¶å€™å°±èƒ½é¡ºå¸¦æŠŠå®ƒç»™å¹²æ‰</p><p>ç°åœ¨ 1 å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥ 2 å’Œ 3 å°±å›åˆ°äº†æˆ‘ä»¬ç†Ÿæ‚‰çš„ APT æµç¨‹ï¼Œæˆ‘ä»¬éœ€è¦è¯»å–è¯¥æ–‡ä»¶ï¼Œé€šè¿‡ APT ç”Ÿæˆç›¸åº”çš„ç±»ï¼Œæœ€åä½¿ç”¨è¿™ä¸ªç±»çš„åŠŸèƒ½å°± OK äº†ï¼Œè¿˜ä¸ç†Ÿæ‚‰ APT çš„ï¼Œå…ˆå»å­¦ä¹ ä¸€æ³¢ <a href="https://juejin.cn/post/6978500975770206239">ä¼ é€é—¨</a> </p><p>è¿˜æ˜¯åŸºäºä¸Šç¯‡æ–‡ç« çš„å·¥ç¨‹è¿›è¡Œå®æ“ï¼Œä¸ºäº†æ–¹ä¾¿åç»­æµç¨‹çš„è®²è§£ï¼Œæˆ‘è¿˜æ˜¯è´´å‡ºä¸Šç¯‡æ–‡ç« çš„å·¥ç¨‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9ab51732570425eaf4c8ddebe921875~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210627182425586"></p><h2 id="äºŒã€apt-annotation-æ³¨è§£ç¼–å†™"><a href="#äºŒã€apt-annotation-æ³¨è§£ç¼–å†™" class="headerlink" title="äºŒã€apt-annotation æ³¨è§£ç¼–å†™"></a>äºŒã€apt-annotation æ³¨è§£ç¼–å†™</h2><p>ç¼–å†™æ³¨è§£ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.CLASS)</span><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> ViewCreator &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€è§„å®šç”Ÿæˆçš„ç±»æ¨¡ç‰ˆï¼Œä¸ºåç»­è‡ªåŠ¨ç”Ÿæˆä»£ç åšå‡†å¤‡"><a href="#ä¸‰ã€è§„å®šç”Ÿæˆçš„ç±»æ¨¡ç‰ˆï¼Œä¸ºåç»­è‡ªåŠ¨ç”Ÿæˆä»£ç åšå‡†å¤‡" class="headerlink" title="ä¸‰ã€è§„å®šç”Ÿæˆçš„ç±»æ¨¡ç‰ˆï¼Œä¸ºåç»­è‡ªåŠ¨ç”Ÿæˆä»£ç åšå‡†å¤‡"></a>ä¸‰ã€è§„å®šç”Ÿæˆçš„ç±»æ¨¡ç‰ˆï¼Œä¸ºåç»­è‡ªåŠ¨ç”Ÿæˆä»£ç åšå‡†å¤‡</h2><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šè¿™ä¹ˆåšï¼š</p><p>1ã€å°†éœ€è¦ç”Ÿæˆçš„ç±»æ–‡ä»¶å®ç°æŸä¸ªå®šä¹‰å¥½çš„æ¥å£ï¼Œé€šè¿‡æ¥å£ä»£ç†æ¥ä½¿ç”¨</p><p>2ã€è§„å®šç”Ÿæˆçš„ Java ç±»æ¨¡ç‰ˆï¼Œæ ¹æ®æ¨¡ç‰ˆå»è¿›è¡Œç”Ÿæˆä»£ç é€»è¾‘çš„ç¼–å†™</p><h3 id="1ã€å°†éœ€è¦ç”Ÿæˆçš„ç±»æ–‡ä»¶å®ç°æŸä¸ªå®šä¹‰å¥½çš„æ¥å£ï¼Œé€šè¿‡æ¥å£ä»£ç†æ¥ä½¿ç”¨"><a href="#1ã€å°†éœ€è¦ç”Ÿæˆçš„ç±»æ–‡ä»¶å®ç°æŸä¸ªå®šä¹‰å¥½çš„æ¥å£ï¼Œé€šè¿‡æ¥å£ä»£ç†æ¥ä½¿ç”¨" class="headerlink" title="1ã€å°†éœ€è¦ç”Ÿæˆçš„ç±»æ–‡ä»¶å®ç°æŸä¸ªå®šä¹‰å¥½çš„æ¥å£ï¼Œé€šè¿‡æ¥å£ä»£ç†æ¥ä½¿ç”¨"></a>1ã€å°†éœ€è¦ç”Ÿæˆçš„ç±»æ–‡ä»¶å®ç°æŸä¸ªå®šä¹‰å¥½çš„æ¥å£ï¼Œé€šè¿‡æ¥å£ä»£ç†æ¥ä½¿ç”¨</h3><p>å…³äºæ¥å£ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šæ”¾åˆ° <code>apt-api</code> è¿™ä¸ª Module ä¸­</p><h3 id="2ã€è§„å®šç”Ÿæˆçš„-Java-ç±»æ¨¡ç‰ˆï¼Œæ ¹æ®æ¨¡ç‰ˆå»è¿›è¡Œç”Ÿæˆä»£ç é€»è¾‘çš„ç¼–å†™"><a href="#2ã€è§„å®šç”Ÿæˆçš„-Java-ç±»æ¨¡ç‰ˆï¼Œæ ¹æ®æ¨¡ç‰ˆå»è¿›è¡Œç”Ÿæˆä»£ç é€»è¾‘çš„ç¼–å†™" class="headerlink" title="2ã€è§„å®šç”Ÿæˆçš„ Java ç±»æ¨¡ç‰ˆï¼Œæ ¹æ®æ¨¡ç‰ˆå»è¿›è¡Œç”Ÿæˆä»£ç é€»è¾‘çš„ç¼–å†™"></a>2ã€è§„å®šç”Ÿæˆçš„ Java ç±»æ¨¡ç‰ˆï¼Œæ ¹æ®æ¨¡ç‰ˆå»è¿›è¡Œç”Ÿæˆä»£ç é€»è¾‘çš„ç¼–å†™</h3><p>å‡è®¾æˆ‘ä»¬éœ€è¦ç”Ÿæˆçš„ Java ç±»æ¨¡ç‰ˆå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.dream.aptdemo;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewCreatorImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IMyViewCreator</span> &#123;<br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> View <span class="hljs-title function_">createView</span><span class="hljs-params">(String name, Context context, AttributeSet attr)</span> &#123;<br>    <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">switch</span>(name) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;androidx.core.widget.NestedScrollView&quot;</span>:<br>      view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedScrollView</span>(context,attr);<br>      <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;androidx.constraintlayout.widget.ConstraintLayout&quot;</span>:<br>      view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConstraintLayout</span>(context,attr);<br>      <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;androidx.appcompat.widget.ButtonBarLayout&quot;</span>:<br>      view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ButtonBarLayout</span>(context,attr);<br>      <span class="hljs-keyword">break</span>;<br>        <span class="hljs-comment">//...</span><br>      <span class="hljs-keyword">default</span>:<br>      <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> view;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œè‡ªåŠ¨ç”Ÿæˆä»£ç é€»è¾‘çš„ç¼–å†™äº†</p><h2 id="å››ã€apt-processor-è‡ªåŠ¨ç”Ÿæˆä»£ç "><a href="#å››ã€apt-processor-è‡ªåŠ¨ç”Ÿæˆä»£ç " class="headerlink" title="å››ã€apt-processor è‡ªåŠ¨ç”Ÿæˆä»£ç "></a>å››ã€apt-processor è‡ªåŠ¨ç”Ÿæˆä»£ç </h2><p>è¿™é‡Œä½ å°±å¯¹ç€ä¸Šé¢ç»™å‡ºçš„ä»£ç æ¨¡ç‰ˆï¼Œé€šè¿‡ javapoet æ¡†æ¶ç¼–å†™ç›¸åº”çš„ä»£ç ç”Ÿæˆé€»è¾‘å³å¯ï¼Œå¯¹ <code>javapoet</code> ä¸ç†Ÿçš„èµ¶ç´§å»å­¦ä¹ ä¸€æ³¢ <a href="https://github.com/square/javapoet">ä¼ é€é—¨</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AutoService(Processor.class)</span><br><span class="hljs-meta">@SupportedAnnotationTypes(&quot;com.dream.apt_annotation.ViewCreator&quot;)</span><br><span class="hljs-meta">@SupportedSourceVersion(SourceVersion.RELEASE_8)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewCreatorProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> &#123;<br><br>    <span class="hljs-comment">/**æ–‡ä»¶ç”Ÿæˆå™¨*/</span><br>    <span class="hljs-keyword">private</span> Filer mFiler;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ProcessingEnvironment processingEnv)</span> &#123;<br>        <span class="hljs-built_in">super</span>.init(processingEnv);<br>        mFiler = processingEnv.getFiler();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">process</span><span class="hljs-params">(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv)</span> &#123;<br>        <span class="hljs-comment">//ä»æ–‡ä»¶ä¸­è¯»å–æ§ä»¶åç§°ï¼Œå¹¶è½¬æ¢æˆå¯¹åº”çš„é›†åˆ</span><br>        Set&lt;String&gt; mViewNameSet = readViewNameFromFile();<br>        <span class="hljs-comment">//å¦‚æœè·å–çš„æ§ä»¶åç§°é›†åˆä¸ºç©ºï¼Œåˆ™ç»ˆæ­¢æµç¨‹</span><br>        <span class="hljs-keyword">if</span>(mViewNameSet == <span class="hljs-literal">null</span> || mViewNameSet.isEmpty())&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>      <br>        <span class="hljs-comment">//è·å–ä½¿ç”¨äº†æ³¨è§£çš„å…ƒç´ </span><br>        Set&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Element</span>&gt; elementsAnnotatedWith = roundEnv.getElementsAnnotatedWith(ViewCreator.class);<br>        <span class="hljs-keyword">for</span> (Element element : elementsAnnotatedWith) &#123;<br>            System.out.println(<span class="hljs-string">&quot;Hello &quot;</span> + element.getSimpleName() + <span class="hljs-string">&quot;, æ¬¢è¿ä½¿ç”¨ APT&quot;</span>);<br>            startGenerateCode(mViewNameSet);<br>            <span class="hljs-comment">//å¦‚æœæœ‰å¤šä¸ªåœ°æ–¹æ ‡æ³¨äº†æ³¨è§£ï¼Œæˆ‘ä»¬åªè¯»å–ç¬¬ä¸€æ¬¡çš„å°±è¡Œäº†</span><br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¼€å§‹æ‰§è¡Œç”Ÿæˆä»£ç çš„é€»è¾‘</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> mViewNameSet æ§ä»¶åç§°é›†åˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startGenerateCode</span><span class="hljs-params">(Set&lt;String&gt; mViewNameSet)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å¼€å§‹ç”Ÿæˆ Java ç±»...&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;a few moment later...&quot;</span>);<br>        <span class="hljs-comment">//=================================== æ„å»ºæ–¹æ³• start ======================================</span><br>        <span class="hljs-comment">//1ã€æ„å»ºæ–¹æ³•ï¼šæ–¹æ³•åï¼Œæ³¨è§£ï¼Œä¿®é¥°ç¬¦ï¼Œè¿”å›å€¼ï¼Œå‚æ•°</span><br><br>        <span class="hljs-type">ClassName</span> <span class="hljs-variable">viewType</span> <span class="hljs-operator">=</span> ClassName.get(<span class="hljs-string">&quot;android.view&quot;</span>,<span class="hljs-string">&quot;View&quot;</span>);<br>        MethodSpec.<span class="hljs-type">Builder</span> <span class="hljs-variable">methodBuilder</span> <span class="hljs-operator">=</span> MethodSpec<br>                <span class="hljs-comment">//æ–¹æ³•å</span><br>                .methodBuilder(<span class="hljs-string">&quot;createView&quot;</span>)<br>                <span class="hljs-comment">//æ³¨è§£</span><br>                .addAnnotation(Override.class)<br>                <span class="hljs-comment">//ä¿®é¥°ç¬¦</span><br>                .addModifiers(Modifier.PUBLIC)<br>                <span class="hljs-comment">//è¿”å›å€¼</span><br>                .returns(viewType)<br>                <span class="hljs-comment">//ç¬¬ä¸€ä¸ªå‚æ•°</span><br>                .addParameter(String.class,<span class="hljs-string">&quot;name&quot;</span>)<br>                <span class="hljs-comment">//ç¬¬äºŒä¸ªå‚æ•°</span><br>                .addParameter(ClassName.get(<span class="hljs-string">&quot;android.content&quot;</span>,<span class="hljs-string">&quot;Context&quot;</span>),<span class="hljs-string">&quot;context&quot;</span>)<br>                <span class="hljs-comment">//ç¬¬ä¸‰ä¸ªå‚æ•°</span><br>                .addParameter(ClassName.get(<span class="hljs-string">&quot;android.util&quot;</span>,<span class="hljs-string">&quot;AttributeSet&quot;</span>),<span class="hljs-string">&quot;attr&quot;</span>);<br><br>        <span class="hljs-comment">//2ã€æ„å»ºæ–¹æ³•ä½“</span><br>        methodBuilder.addStatement(<span class="hljs-string">&quot;$T view = null&quot;</span>,viewType);<br>        methodBuilder.beginControlFlow(<span class="hljs-string">&quot;switch(name)&quot;</span>);<br>        <span class="hljs-comment">//å¾ªç¯éå†æ§ä»¶åç§°é›†åˆ</span><br>        <span class="hljs-keyword">for</span> (String viewName : mViewNameSet) &#123;<br>            <span class="hljs-comment">//é’ˆå¯¹åŒ…å« . çš„æ§ä»¶åç§°è¿›è¡Œå¤„ç†</span><br>            <span class="hljs-keyword">if</span>(viewName.contains(<span class="hljs-string">&quot;.&quot;</span>))&#123;<br>                <span class="hljs-comment">//åˆ†ç¦»åŒ…åå’Œæ§ä»¶åï¼Œå¦‚ï¼šandroidx.constraintlayout.widget.ConstraintLayout</span><br>                <span class="hljs-comment">//packageNameï¼šandroidx.constraintlayout.widget</span><br>                <span class="hljs-comment">//simpleViewNameï¼šConstraintLayout</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">packageName</span> <span class="hljs-operator">=</span> viewName.substring(<span class="hljs-number">0</span>,viewName.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>));<br>                <span class="hljs-type">String</span> <span class="hljs-variable">simpleViewName</span> <span class="hljs-operator">=</span> viewName.substring(viewName.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>) + <span class="hljs-number">1</span>);<br>                <span class="hljs-type">ClassName</span> <span class="hljs-variable">returnType</span> <span class="hljs-operator">=</span> ClassName.get(packageName, simpleViewName);<br><br>                methodBuilder.addCode(<span class="hljs-string">&quot;case $S:\n&quot;</span>,viewName);<br>                methodBuilder.addStatement(<span class="hljs-string">&quot;\tview = new $T(context,attr)&quot;</span>, returnType);<br>                methodBuilder.addStatement(<span class="hljs-string">&quot;\tbreak&quot;</span>);<br>            &#125;<br>        &#125;<br>        methodBuilder.addCode(<span class="hljs-string">&quot;default:\n&quot;</span>);<br>        methodBuilder.addStatement(<span class="hljs-string">&quot;\tbreak&quot;</span>);<br>        methodBuilder.endControlFlow();<br>        methodBuilder.addStatement(<span class="hljs-string">&quot;return view&quot;</span>);<br><br>        <span class="hljs-type">MethodSpec</span> <span class="hljs-variable">createView</span> <span class="hljs-operator">=</span> methodBuilder.build();<br>        <span class="hljs-comment">//=================================== æ„å»ºæ–¹æ³• end ======================================</span><br><br>        <span class="hljs-comment">//=================================== æ„å»ºç±» start ======================================</span><br>        <span class="hljs-type">TypeSpec</span> <span class="hljs-variable">myViewCreatorImpl</span> <span class="hljs-operator">=</span> TypeSpec.classBuilder(<span class="hljs-string">&quot;MyViewCreatorImpl&quot;</span>)<br>                <span class="hljs-comment">//ç±»ä¿®é¥°ç¬¦</span><br>                .addModifiers(Modifier.PUBLIC)<br>                <span class="hljs-comment">//å®ç°æ¥å£</span><br>                .addSuperinterface(ClassName.get(<span class="hljs-string">&quot;com.dream.apt_api&quot;</span>, <span class="hljs-string">&quot;IMyViewCreator&quot;</span>))<br>                <span class="hljs-comment">//æ·»åŠ æ–¹æ³•</span><br>                .addMethod(createView)<br>                .build();<br>        <span class="hljs-comment">//=================================== æ„å»ºç±» end ========================================</span><br><br>        <span class="hljs-comment">//=================================== æŒ‡å®šåŒ…è·¯å¾„ï¼Œæ„å»ºæ–‡ä»¶ä½“ start =========================</span><br>        <span class="hljs-comment">//æŒ‡å®šç±»åŒ…è·¯å¾„</span><br>        <span class="hljs-type">JavaFile</span> <span class="hljs-variable">javaFile</span> <span class="hljs-operator">=</span> JavaFile.builder(<span class="hljs-string">&quot;com.dream.aptdemo&quot;</span>,myViewCreatorImpl).build();<br>        <span class="hljs-comment">//ç”Ÿæˆæ–‡ä»¶</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            javaFile.writeTo(mFiler);<br>            System.out.println(<span class="hljs-string">&quot;ç”ŸæˆæˆåŠŸ...&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>            System.out.println(<span class="hljs-string">&quot;ç”Ÿæˆå¤±è´¥...&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//=================================== æŒ‡å®šåŒ…è·¯å¾„ï¼Œæ„å»ºæ–‡ä»¶ä½“ end ============================</span><br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»æ–‡ä»¶ä¸­è¯»å–æ§ä»¶åç§°ï¼Œå¹¶è½¬æ¢æˆå¯¹åº”çš„é›†åˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Set&lt;String&gt; <span class="hljs-title function_">readViewNameFromFile</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//è·å–å­˜å‚¨æ§ä»¶åç§°çš„æ–‡ä»¶</span><br>            <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;/Users/zhouying/AndroidStudioProjects/AptDemo/all_view_name.txt&quot;</span>);<br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            config.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(file));<br>            <span class="hljs-comment">//è·å–æ§ä»¶åç§°é›†åˆ</span><br>            <span class="hljs-keyword">return</span> config.stringPropertyNames();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ç”Ÿæˆä»£ç çš„é€»è¾‘å†™äº†è¯¦ç»†çš„æ³¨é‡Šï¼Œä¸»è¦å°±æ˜¯å¯¹ <code>javapoet</code> æ¡†æ¶çš„ä¸€ä¸ªåº”ç”¨</p><p>ä»£ç ç”Ÿæˆå¥½äº†ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦æä¾›ç»™ä¸Šå±‚ä½¿ç”¨</p><h2 id="äº”ã€apt-api-ä¸šåŠ¡å°è£…ä¾›ä¸Šå±‚ä½¿ç”¨"><a href="#äº”ã€apt-api-ä¸šåŠ¡å°è£…ä¾›ä¸Šå±‚ä½¿ç”¨" class="headerlink" title="äº”ã€apt-api ä¸šåŠ¡å°è£…ä¾›ä¸Šå±‚ä½¿ç”¨"></a>äº”ã€apt-api ä¸šåŠ¡å°è£…ä¾›ä¸Šå±‚ä½¿ç”¨</h2><h3 id="1ã€å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œ-apt-api-å’Œ-apt-processor-éƒ½ä¼šä½¿ç”¨åˆ°"><a href="#1ã€å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œ-apt-api-å’Œ-apt-processor-éƒ½ä¼šä½¿ç”¨åˆ°" class="headerlink" title="1ã€å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œ apt-api å’Œ apt-processor éƒ½ä¼šä½¿ç”¨åˆ°"></a>1ã€å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œ <code>apt-api</code> å’Œ <code>apt-processor</code> éƒ½ä¼šä½¿ç”¨åˆ°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IMyViewCreator</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é€šè¿‡ new çš„æ–¹å¼åˆ›å»º View</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> name æ§ä»¶åç§°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> context ä¸Šä¸‹æ–‡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> attributeSet å±æ€§</span><br><span class="hljs-comment">     */</span><br>    View <span class="hljs-title function_">createView</span><span class="hljs-params">(String name, Context context, AttributeSet attributeSet)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2ã€åå°„è·å–ç”Ÿæˆçš„ç±»ï¼Œæä¾›ç›¸åº”çš„ä»£ç†ç±»ä¾›ä¸Šå±‚è°ƒç”¨"><a href="#2ã€åå°„è·å–ç”Ÿæˆçš„ç±»ï¼Œæä¾›ç›¸åº”çš„ä»£ç†ç±»ä¾›ä¸Šå±‚è°ƒç”¨" class="headerlink" title="2ã€åå°„è·å–ç”Ÿæˆçš„ç±»ï¼Œæä¾›ç›¸åº”çš„ä»£ç†ç±»ä¾›ä¸Šå±‚è°ƒç”¨"></a>2ã€åå°„è·å–ç”Ÿæˆçš„ç±»ï¼Œæä¾›ç›¸åº”çš„ä»£ç†ç±»ä¾›ä¸Šå±‚è°ƒç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewCreatorDelegate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IMyViewCreator</span>&#123;<br>    <br>    <span class="hljs-keyword">private</span> IMyViewCreator mIMyViewCreator;<br>    <br>    <span class="hljs-comment">//================================== å•ä¾‹ start =====================================</span><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">MyViewCreatorDelegate</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// é€šè¿‡åå°„æ‹¿åˆ° Apt ç”Ÿæˆçš„ç±»</span><br>            <span class="hljs-type">Class</span> <span class="hljs-variable">aClass</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.dream.aptdemo.MyViewCreatorImpl&quot;</span>);<br>            mIMyViewCreator = (IMyViewCreator) aClass.newInstance();<br>        &#125; <span class="hljs-keyword">catch</span> (Throwable t) &#123;<br>            t.printStackTrace();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> MyViewCreatorDelegate <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> Holder.MY_VIEW_CREATOR_DELEGATE;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Holder</span>&#123;<br>        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">MyViewCreatorDelegate</span> <span class="hljs-variable">MY_VIEW_CREATOR_DELEGATE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyViewCreatorDelegate</span>();<br>    &#125;<br>    <span class="hljs-comment">//================================== å•ä¾‹ end =======================================</span><br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é€šè¿‡ç”Ÿæˆçš„ç±»åˆ›å»º View</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> name æ§ä»¶åç§°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> context ä¸Šä¸‹æ–‡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> attributeSet å±æ€§</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> View</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> View <span class="hljs-title function_">createView</span><span class="hljs-params">(String name, Context context, AttributeSet attributeSet)</span> &#123;<br>        <span class="hljs-keyword">if</span>(mIMyViewCreator != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">return</span> mIMyViewCreator.createView(name, context, attributeSet);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œæˆ‘ä»¬å¸ƒå±€ä¼˜åŒ–æµç¨‹å·®ä¸å¤šå°±è¦ç»“æŸäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸Šå±‚è°ƒç”¨</p><h2 id="å…­ã€app-ä¸Šå±‚è°ƒç”¨"><a href="#å…­ã€app-ä¸Šå±‚è°ƒç”¨" class="headerlink" title="å…­ã€app ä¸Šå±‚è°ƒç”¨"></a>å…­ã€app ä¸Šå±‚è°ƒç”¨</h2><h3 id="1ã€åœ¨åˆ›å»ºçš„-MyApplication-ä¸Šæ·»åŠ æ³¨è§£"><a href="#1ã€åœ¨åˆ›å»ºçš„-MyApplication-ä¸Šæ·»åŠ æ³¨è§£" class="headerlink" title="1ã€åœ¨åˆ›å»ºçš„ MyApplication ä¸Šæ·»åŠ æ³¨è§£"></a>1ã€åœ¨åˆ›å»ºçš„ MyApplication ä¸Šæ·»åŠ æ³¨è§£</h3><p>å…³äºæ³¨è§£ä½ å¯ä»¥æ·»åŠ åœ¨å…¶ä»–åœ°æ–¹ï¼Œå› ä¸ºæˆ‘æ³¨è§£å¤„ç†å™¨é‡Œé¢åšäº†é€»è¾‘åˆ¤æ–­ï¼Œåªä¼šè¯»å–ç¬¬ä¸€æ¬¡çš„æ³¨è§£ã€‚ä¸ºäº†å¯¹åº”ï¼Œæˆ‘é€‰æ‹©æŠŠæ³¨è§£åŠ åˆ° MyApplication ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9465eb668782489b8915bce09f8c589d~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210629192519893"></p><h3 id="2ã€æœ€ååœ¨-MainActviity-ä¸­åŠ å…¥æ›¿æ¢-View-çš„é€»è¾‘"><a href="#2ã€æœ€ååœ¨-MainActviity-ä¸­åŠ å…¥æ›¿æ¢-View-çš„é€»è¾‘" class="headerlink" title="2ã€æœ€ååœ¨ MainActviity ä¸­åŠ å…¥æ›¿æ¢ View çš„é€»è¾‘"></a>2ã€æœ€ååœ¨ MainActviity ä¸­åŠ å…¥æ›¿æ¢ View çš„é€»è¾‘</h3><p>å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//...</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> &#123;<br><br>    <span class="hljs-comment">//...</span><br>    <span class="hljs-meta">@Nullable</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> View <span class="hljs-title function_">onCreateView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> String name, <span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-meta">@NonNull</span> AttributeSet attrs)</span> &#123;<br>        <span class="hljs-comment">//1ã€ä¼˜å…ˆä½¿ç”¨æˆ‘ä»¬ç”Ÿæˆçš„ç±»å»è¿›è¡Œ View çš„åˆ›å»º</span><br>        <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> MyViewCreatorDelegate.getInstance().createView(name, context, attrs);<br>        <span class="hljs-keyword">if</span> (view != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> view;<br>        &#125;<br>        <span class="hljs-comment">//2ã€ä¸€äº›ç³»ç»Ÿçš„ View ,åˆ™èµ°ç³»ç»Ÿçš„ä¸€ä¸ªåˆ›å»ºæµç¨‹</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.onCreateView(name, context, attrs);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šä¸€èˆ¬æˆ‘ä»¬ä¼šæŠŠæ›¿æ¢ View çš„é€»è¾‘æ”¾åˆ°åŸºç±»é‡Œé¢</p><h2 id="ä¸ƒã€æ•ˆæœéªŒè¯"><a href="#ä¸ƒã€æ•ˆæœéªŒè¯" class="headerlink" title="ä¸ƒã€æ•ˆæœéªŒè¯"></a>ä¸ƒã€æ•ˆæœéªŒè¯</h2><p>è¿è¡Œé¡¹ç›®</p><p>1ã€å…ˆçœ‹ä¸‹æˆ‘ä»¬æ‰“å°çš„æ—¥å¿—ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a7e9154f8ad4ba1827f9839acd15bf7~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210629195411055"></p><p>2ã€åœ¨çœ‹ä¸€çœ¼æˆ‘ä»¬ç”Ÿæˆçš„ Java ç±»æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/47cefa64ab494d6aa18ad8cafb0d28d3~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210629194711378"></p><p>3ã€æœ€å debug é¡¹ç›®è·Ÿä¸‹æµç¨‹ï¼Œå‘ç°å’Œæˆ‘ä»¬é¢„æœŸçš„ä¸€è‡´ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/123032d1ca3844f4959839bf46d66a80~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210629194101025"></p><p>è‡³æ­¤ï¼Œéœ€æ±‚å®Œç»“</p><h2 id="å…«ã€æ€»ç»“"><a href="#å…«ã€æ€»ç»“" class="headerlink" title="å…«ã€æ€»ç»“"></a>å…«ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€é€šè¿‡ APT è¯»å–æ–‡ä»¶è·å–æ‰€æœ‰çš„æ§ä»¶åç§°å¹¶ç”Ÿæˆ Java ç±»</p><p>2ã€é€šè¿‡æ¥å£ä»£ç†ï¼Œåˆç†çš„ä¸šåŠ¡å°è£…æä¾›ç»™ä¸Šå±‚è°ƒç”¨</p><p>3ã€åœ¨ä¸Šå±‚ Application é‡Œé¢è¿›è¡Œæ³¨è§£ï¼Œåœ¨ Activity ä¸­è¿›è¡Œ View æ§ä»¶çš„æ›¿æ¢</p><p>4ã€å®é™…å®Œæˆåçš„ä¸€ä¸ªæ•ˆæœéªŒè¯</p><p>å¥½äº†ï¼Œæœ¬ç³»åˆ—æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>APT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Android APT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android APT ç³»åˆ— ï¼ˆä¸‰ï¼‰ï¼šAPT æŠ€æœ¯æ¢ç©¶</title>
    <link href="/2022/10/10/Android%20APT%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AAPT%20%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%A9%B6/"/>
    <url>/2022/10/10/Android%20APT%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AAPT%20%E6%8A%80%E6%9C%AF%E6%8E%A2%E7%A9%B6/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101947271.jpeg" alt="luc-vlekken-9Y8A97opXQ4-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹æ³¨è§£è¿›è¡Œäº†è®²è§£ï¼Œè¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6978293956450713630">Android APT ç³»åˆ— ï¼ˆäºŒï¼‰ï¼šAPT ç­‘åŸºä¹‹æ³¨è§£</a>ã€‚è‡³æ­¤ï¼Œå…³äº Apt åŸºç¡€éƒ¨åˆ†æˆ‘ä»¬éƒ½è®²å®Œäº†ï¼Œæ¥ä¸‹æ¥å°±æ­£å¼è¿›å…¥ APT æŠ€æœ¯çš„å­¦ä¹ </p><p><a href="https://github.com/sweetying520/AptDemo">Github Demo åœ°å€</a> , å¤§å®¶å¯ä»¥çœ‹ Demo è·Ÿéšæˆ‘çš„æ€è·¯ä¸€èµ·åˆ†æ</p><h2 id="ä¸€ã€APT-ä»‹ç»"><a href="#ä¸€ã€APT-ä»‹ç»" class="headerlink" title="ä¸€ã€APT ä»‹ç»"></a>ä¸€ã€APT ä»‹ç»</h2><h3 id="1ï¼‰ã€ä»€ä¹ˆæ˜¯-APT"><a href="#1ï¼‰ã€ä»€ä¹ˆæ˜¯-APT" class="headerlink" title="1ï¼‰ã€ä»€ä¹ˆæ˜¯ APT ?"></a>1ï¼‰ã€ä»€ä¹ˆæ˜¯ APT ?</h3><p>APT å…¨ç§° <code>Annotation Processing Tool</code>ï¼Œç¿»è¯‘è¿‡æ¥å³æ³¨è§£å¤„ç†å™¨ã€‚å¼•ç”¨å®˜æ–¹ä¸€æ®µå¯¹ APT çš„ä»‹ç»ï¼š<strong>APT æ˜¯ä¸€ç§å¤„ç†æ³¨é‡Šçš„å·¥å…·, å®ƒå¯¹æºä»£ç æ–‡ä»¶è¿›è¡Œæ£€æµ‹æ‰¾å‡ºå…¶ä¸­çš„æ³¨è§£ï¼Œå¹¶ä½¿ç”¨æ³¨è§£è¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚</strong></p><h3 id="2ï¼‰ã€APT-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#2ï¼‰ã€APT-æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="2ï¼‰ã€APT æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>2ï¼‰ã€APT æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>APT èƒ½åœ¨ç¼–è¯‘æœŸæ ¹æ®ç¼–è¯‘é˜¶æ®µæ³¨è§£ï¼Œç»™æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼Œç®€åŒ–ä½¿ç”¨ã€‚å¾ˆå¤šæµè¡Œæ¡†æ¶éƒ½ä½¿ç”¨åˆ°äº† APT æŠ€æœ¯ï¼Œå¦‚ ButterKnifeï¼ŒRetrofitï¼ŒArouterï¼ŒEventBus ç­‰ç­‰</p><h2 id="äºŒã€APT-å·¥ç¨‹"><a href="#äºŒã€APT-å·¥ç¨‹" class="headerlink" title="äºŒã€APT å·¥ç¨‹"></a>äºŒã€APT å·¥ç¨‹</h2><h3 id="1ï¼‰ã€APT-å·¥ç¨‹åˆ›å»º"><a href="#1ï¼‰ã€APT-å·¥ç¨‹åˆ›å»º" class="headerlink" title="1ï¼‰ã€APT å·¥ç¨‹åˆ›å»º"></a>1ï¼‰ã€APT å·¥ç¨‹åˆ›å»º</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒAPT å¤§è‡´çš„çš„ä¸€ä¸ªå®ç°è¿‡ç¨‹ï¼š</p><p>1ã€åˆ›å»ºä¸€ä¸ª <code>Java Module</code> ï¼Œç”¨æ¥ç¼–å†™æ³¨è§£</p><p>2ã€åˆ›å»ºä¸€ä¸ª <code>Java Module</code> ï¼Œç”¨æ¥è¯»å–æ³¨è§£ä¿¡æ¯ï¼Œå¹¶æ ¹æ®æŒ‡å®šè§„åˆ™ï¼Œç”Ÿæˆç›¸åº”çš„ç±»æ–‡ä»¶</p><p>3ã€åˆ›å»ºä¸€ä¸ª <code>Android Module</code> ï¼Œé€šè¿‡åå°„è·å–ç”Ÿæˆçš„ç±»ï¼Œè¿›è¡Œåˆç†çš„å°è£…ï¼Œæä¾›ç»™ä¸Šå±‚è°ƒç”¨</p><p>å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4415046ff7434044bc7959dd77d21358~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210627182425586"></p><p>è¿™æ˜¯æˆ‘çš„ APT å·¥ç¨‹ï¼Œå…³äº Module åç§°å¯ä»¥ä»»æ„å–ï¼ŒæŒ‰ç…§æˆ‘ä¸Šé¢è¯´çš„è§„åˆ™å»è¿›è¡Œå°±å¥½äº†</p><h3 id="2ï¼‰ã€Module-ä¾èµ–"><a href="#2ï¼‰ã€Module-ä¾èµ–" class="headerlink" title="2ï¼‰ã€Module ä¾èµ–"></a>2ï¼‰ã€Module ä¾èµ–</h3><p>å·¥ç¨‹åˆ›å»ºå¥½åï¼Œæˆ‘ä»¬å°±éœ€è¦ç†æ¸…æ¥šå„ä¸ª Module ä¹‹é—´çš„ä¸€ä¸ªä¾èµ–å…³ç³»ï¼š</p><p>1ã€å› ä¸º <code>apt-processor</code> è¦è¯»å– <code>apt-annotation</code> çš„æ³¨è§£ï¼Œæ‰€ä»¥ <code>apt-processor</code> éœ€è¦ä¾èµ– <code>apt-annotation</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//apt-processor çš„ build.gradle æ–‡ä»¶</span><br>dependencies &#123;<br>    implementation <span class="hljs-title function_">project</span><span class="hljs-params">(path: <span class="hljs-string">&#x27;:apt-annotation&#x27;</span>)</span><br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€app ä½œä¸ºè°ƒç”¨å±‚ï¼Œä»¥ä¸Š 3 ä¸ª Module éƒ½éœ€è¦è¿›è¡Œä¾èµ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//app çš„ build.gradle æ–‡ä»¶</span><br>dependencies &#123;<br>    <span class="hljs-comment">//...</span><br>    implementation <span class="hljs-title function_">project</span><span class="hljs-params">(path: <span class="hljs-string">&#x27;:apt-api&#x27;</span>)</span><br>    implementation <span class="hljs-title function_">project</span><span class="hljs-params">(path: <span class="hljs-string">&#x27;:apt-annotation&#x27;</span>)</span><br>    annotationProcessor <span class="hljs-title function_">project</span><span class="hljs-params">(path: <span class="hljs-string">&#x27;:apt-processor&#x27;</span>)</span><br>&#125;<br></code></pre></td></tr></table></figure><p>APT å·¥ç¨‹é…ç½®å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹å„ä¸ª Module è¿›è¡Œä¸€ä¸ªå…·ä½“ä»£ç çš„ç¼–å†™äº†</p><h2 id="ä¸‰ã€apt-annotation-æ³¨è§£ç¼–å†™"><a href="#ä¸‰ã€apt-annotation-æ³¨è§£ç¼–å†™" class="headerlink" title="ä¸‰ã€apt-annotation æ³¨è§£ç¼–å†™"></a>ä¸‰ã€apt-annotation æ³¨è§£ç¼–å†™</h2><p>è¿™ä¸ª Module çš„å¤„ç†ç›¸å¯¹æ¥è¯´å¾ˆç®€å•ï¼Œå°±æ˜¯ç¼–å†™ç›¸åº”çš„è‡ªå®šä¹‰æ³¨è§£å°±å¥½äº†ï¼Œæˆ‘ç¼–å†™çš„å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span><br><span class="hljs-meta">@Target(&#123;ElementType.TYPE,ElementType.METHOD&#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> AptAnnotation &#123;<br>    String <span class="hljs-title function_">desc</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å››ã€apt-processor-è‡ªåŠ¨ç”Ÿæˆä»£ç "><a href="#å››ã€apt-processor-è‡ªåŠ¨ç”Ÿæˆä»£ç " class="headerlink" title="å››ã€apt-processor è‡ªåŠ¨ç”Ÿæˆä»£ç "></a>å››ã€apt-processor è‡ªåŠ¨ç”Ÿæˆä»£ç </h2><p>è¿™ä¸ª Module ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬æŠŠå®ƒåˆ†ä¸ºä»¥ä¸‹ 3 ä¸ªæ­¥éª¤ï¼š</p><p>1ã€æ³¨è§£å¤„ç†å™¨å£°æ˜</p><p>2ã€æ³¨è§£å¤„ç†å™¨æ³¨å†Œ</p><p>3ã€æ³¨è§£å¤„ç†å™¨ç”Ÿæˆç±»æ–‡ä»¶</p><h3 id="1ï¼‰ã€æ³¨è§£å¤„ç†å™¨å£°æ˜"><a href="#1ï¼‰ã€æ³¨è§£å¤„ç†å™¨å£°æ˜" class="headerlink" title="1ï¼‰ã€æ³¨è§£å¤„ç†å™¨å£°æ˜"></a>1ï¼‰ã€æ³¨è§£å¤„ç†å™¨å£°æ˜</h3><h4 id="1ã€æ–°å»ºä¸€ä¸ªç±»ï¼Œç±»åæŒ‰ç…§è‡ªå·±çš„å–œå¥½å–ï¼Œç»§æ‰¿-javax-annotation-processing-è¿™ä¸ªåŒ…ä¸‹çš„-AbstractProcessor-ç±»å¹¶å®ç°å…¶æŠ½è±¡æ–¹æ³•"><a href="#1ã€æ–°å»ºä¸€ä¸ªç±»ï¼Œç±»åæŒ‰ç…§è‡ªå·±çš„å–œå¥½å–ï¼Œç»§æ‰¿-javax-annotation-processing-è¿™ä¸ªåŒ…ä¸‹çš„-AbstractProcessor-ç±»å¹¶å®ç°å…¶æŠ½è±¡æ–¹æ³•" class="headerlink" title="1ã€æ–°å»ºä¸€ä¸ªç±»ï¼Œç±»åæŒ‰ç…§è‡ªå·±çš„å–œå¥½å–ï¼Œç»§æ‰¿ javax.annotation.processing è¿™ä¸ªåŒ…ä¸‹çš„ AbstractProcessor ç±»å¹¶å®ç°å…¶æŠ½è±¡æ–¹æ³•"></a>1ã€æ–°å»ºä¸€ä¸ªç±»ï¼Œç±»åæŒ‰ç…§è‡ªå·±çš„å–œå¥½å–ï¼Œç»§æ‰¿ <code>javax.annotation.processing</code> è¿™ä¸ªåŒ…ä¸‹çš„ AbstractProcessor ç±»å¹¶å®ç°å…¶æŠ½è±¡æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AptAnnotationProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> &#123;<br>  <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¼–å†™ç”Ÿæˆ Java ç±»çš„ç›¸å…³é€»è¾‘</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> set              æ”¯æŒå¤„ç†çš„æ³¨è§£é›†åˆ</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> roundEnvironment é€šè¿‡è¯¥å¯¹è±¡æŸ¥æ‰¾æŒ‡å®šæ³¨è§£ä¸‹çš„èŠ‚ç‚¹ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> true: è¡¨ç¤ºæ³¨è§£å·²å¤„ç†ï¼Œåç»­æ³¨è§£å¤„ç†å™¨æ— éœ€å†å¤„ç†å®ƒä»¬ï¼›false: è¡¨ç¤ºæ³¨è§£æœªå¤„ç†ï¼Œå¯èƒ½è¦æ±‚åç»­æ³¨è§£å¤„ç†å™¨å¤„ç†</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">process</span><span class="hljs-params">(Set&lt;? extends TypeElement&gt; set, RoundEnvironment roundEnvironment)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡ç‚¹çœ‹ä¸‹ç¬¬ä¸€ä¸ªå‚æ•°ä¸­çš„ TypeElement ï¼Œè¿™ä¸ªå°±æ¶‰åŠåˆ° Element çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ç®€å•çš„ä»‹ç»ä¸€ä¸‹ï¼š</p><p><strong>Element ä»‹ç»</strong></p><p>å®é™…ä¸Šï¼ŒJava æºæ–‡ä»¶æ˜¯ä¸€ç§ç»“æ„ä½“è¯­è¨€ï¼Œæºä»£ç çš„æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½å¯¹åº”äº†ä¸€ä¸ªç‰¹å®šç±»å‹çš„ Element ï¼Œä¾‹å¦‚åŒ…ï¼Œç±»ï¼Œå­—æ®µï¼Œæ–¹æ³•ç­‰ç­‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.dream;         <span class="hljs-comment">// PackageElementï¼šåŒ…å…ƒç´ </span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>&lt;T&gt; &#123;     <span class="hljs-comment">// TypeElementï¼šç±»å…ƒç´ ; å…¶ä¸­ &lt;T&gt; å±äº TypeParameterElement æ³›å‹å…ƒç´ </span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> x;         <span class="hljs-comment">// VariableElementï¼šå˜é‡ã€æšä¸¾ã€æ–¹æ³•å‚æ•°å…ƒç´ </span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Main</span><span class="hljs-params">()</span> &#123;        <span class="hljs-comment">// ExecuteableElementï¼šæ„é€ å‡½æ•°ã€æ–¹æ³•å…ƒç´ </span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Java çš„ Element æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Element</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">javax</span>.lang.model.AnnotatedConstruct &#123;<br>    <span class="hljs-comment">// è·å–å…ƒç´ çš„ç±»å‹ï¼Œå®é™…çš„å¯¹è±¡ç±»å‹</span><br>    TypeMirror <span class="hljs-title function_">asType</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">// è·å–Elementçš„ç±»å‹ï¼Œåˆ¤æ–­æ˜¯å“ªç§Element</span><br>    ElementKind <span class="hljs-title function_">getKind</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">// è·å–ä¿®é¥°ç¬¦ï¼Œå¦‚public static finalç­‰å…³é”®å­—</span><br>    Set&lt;Modifier&gt; <span class="hljs-title function_">getModifiers</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">// è·å–ç±»å</span><br>    Name <span class="hljs-title function_">getSimpleName</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">// è¿”å›åŒ…å«è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä¸getEnclosedElements()æ–¹æ³•ç›¸å</span><br>    Element <span class="hljs-title function_">getEnclosingElement</span><span class="hljs-params">()</span>;<br>    <span class="hljs-comment">// è¿”å›è¯¥èŠ‚ç‚¹ä¸‹ç›´æ¥åŒ…å«çš„å­èŠ‚ç‚¹ï¼Œä¾‹å¦‚åŒ…èŠ‚ç‚¹ä¸‹åŒ…å«çš„ç±»èŠ‚ç‚¹</span><br>    List&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Element</span>&gt; getEnclosedElements();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object obj)</span>;<br>  <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span>;<br>  <br>    <span class="hljs-meta">@Override</span><br>    List&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnnotationMirror</span>&gt; getAnnotationMirrors();<br>  <br>    <span class="hljs-comment">//è·å–æ³¨è§£</span><br>    <span class="hljs-meta">@Override</span><br>    &lt;A <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Annotation</span>&gt; A <span class="hljs-title function_">getAnnotation</span><span class="hljs-params">(Class&lt;A&gt; annotationType)</span>;<br>  <br>    &lt;R, P&gt; R <span class="hljs-title function_">accept</span><span class="hljs-params">(ElementVisitor&lt;R, P&gt; v, P p)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Element è·å–å¦‚ä¸Šä¸€äº›ä¿¡æ¯ï¼ˆå†™äº†æ³¨é‡Šçš„éƒ½æ˜¯ä¸€äº›å¸¸ç”¨çš„ï¼‰</p><p>ç”± Element è¡ç”Ÿå‡ºæ¥çš„æ‰©å±•ç±»å…±æœ‰ 5 ç§ï¼š</p><p>1ã€PackageElement è¡¨ç¤ºä¸€ä¸ªåŒ…ç¨‹åºå…ƒç´ </p><p>2ã€TypeElement è¡¨ç¤ºä¸€ä¸ªç±»æˆ–è€…æ¥å£ç¨‹åºå…ƒç´ </p><p>3ã€TypeParameterElement è¡¨ç¤ºä¸€ä¸ªæ³›å‹å…ƒç´ </p><p>4ã€VariableElement è¡¨ç¤ºä¸€ä¸ªå­—æ®µã€enum å¸¸é‡ã€æ–¹æ³•æˆ–è€…æ„é€ æ–¹æ³•çš„å‚æ•°ã€å±€éƒ¨å˜é‡æˆ–å¼‚å¸¸å‚æ•°</p><p>5ã€ExecuteableElement è¡¨ç¤ºæŸä¸ªç±»æˆ–è€…æ¥å£çš„æ–¹æ³•ã€æ„é€ æ–¹æ³•æˆ–åˆå§‹åŒ–ç¨‹åºï¼ˆé™æ€æˆ–è€…å®ä¾‹ï¼‰</p><p>å¯ä»¥å‘ç°ï¼ŒElement æœ‰æ—¶ä¼šä»£è¡¨å¤šç§å…ƒç´ ï¼Œä¾‹å¦‚ TypeElement ä»£è¡¨ç±»æˆ–æ¥å£ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ element.getKind() æ¥åŒºåˆ†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">Set&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Element</span>&gt; elements = roundEnvironment.getElementsAnnotatedWith(AptAnnotation.class);<br><span class="hljs-keyword">for</span> (Element element : elements) &#123;<br>    <span class="hljs-keyword">if</span> (element.getKind() == ElementKind.CLASS) &#123;<br>        <span class="hljs-comment">// å¦‚æœå…ƒç´ æ˜¯ç±»</span><br><br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (element.getKind() == ElementKind.INTERFACE) &#123;<br>        <span class="hljs-comment">// å¦‚æœå…ƒç´ æ˜¯æ¥å£</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ElementKind æ˜¯ä¸€ä¸ªæšä¸¾ç±»ï¼Œå®ƒçš„å–å€¼æœ‰å¾ˆå¤šï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">PACKAGE<span class="hljs-comment">//è¡¨ç¤ºåŒ…</span><br>ENUM <span class="hljs-comment">//è¡¨ç¤ºæšä¸¾</span><br>CLASS <span class="hljs-comment">//è¡¨ç¤ºç±»</span><br>ANNOTATION_TYPE<span class="hljs-comment">//è¡¨ç¤ºæ³¨è§£</span><br>INTERFACE <span class="hljs-comment">//è¡¨ç¤ºæ¥å£</span><br>ENUM_CONSTANT <span class="hljs-comment">//è¡¨ç¤ºæšä¸¾å¸¸é‡</span><br>FIELD <span class="hljs-comment">//è¡¨ç¤ºå­—æ®µ</span><br>PARAMETER <span class="hljs-comment">//è¡¨ç¤ºå‚æ•°</span><br>LOCAL_VARIABLE <span class="hljs-comment">//è¡¨ç¤ºæœ¬åœ°å˜é‡</span><br>EXCEPTION_PARAMETER <span class="hljs-comment">//è¡¨ç¤ºå¼‚å¸¸å‚æ•°</span><br>METHOD <span class="hljs-comment">//è¡¨ç¤ºæ–¹æ³•</span><br>CONSTRUCTOR <span class="hljs-comment">//è¡¨ç¤ºæ„é€ å‡½æ•°</span><br>OTHER <span class="hljs-comment">//è¡¨ç¤ºå…¶ä»–</span><br></code></pre></td></tr></table></figure><p>å…³äº Element å°±ä»‹ç»åˆ°è¿™ï¼Œæˆ‘ä»¬æ¥ç€å¾€ä¸‹çœ‹</p><h4 id="2ã€é‡å†™æ–¹æ³•è§£è¯»"><a href="#2ã€é‡å†™æ–¹æ³•è§£è¯»" class="headerlink" title="2ã€é‡å†™æ–¹æ³•è§£è¯»"></a>2ã€é‡å†™æ–¹æ³•è§£è¯»</h4><p>é™¤äº†å¿…é¡»å®ç°çš„è¿™ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡å†™å…¶ä»– 4 ä¸ªå¸¸ç”¨çš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AptAnnotationProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> &#123;<br>    <span class="hljs-comment">//...</span><br>  <br>    <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * èŠ‚ç‚¹å·¥å…·ç±»ï¼ˆç±»ã€å‡½æ•°ã€å±æ€§éƒ½æ˜¯èŠ‚ç‚¹ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Elements mElementUtils;<br><br>    <span class="hljs-comment">/** </span><br><span class="hljs-comment">     * ç±»ä¿¡æ¯å·¥å…·ç±»</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Types mTypeUtils;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ–‡ä»¶ç”Ÿæˆå™¨</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Filer mFiler;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ—¥å¿—ä¿¡æ¯æ‰“å°å™¨</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Messager mMessager;<br>  <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œ</span><br><span class="hljs-comment">     * </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> processingEnvironment è¿™ä¸ªå‚æ•°æä¾›äº†è‹¥å¹²å·¥å…·ç±»ï¼Œä¾›ç¼–å†™ç”Ÿæˆ Java ç±»æ—¶æ‰€ä½¿ç”¨</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ProcessingEnvironment processingEnv)</span> &#123;<br>        <span class="hljs-built_in">super</span>.init(processingEnv);<br>        mElementUtils = processingEnv.getElementUtils();<br>        mTypeUtils = processingEnv.getTypeUtils();<br>        mFiler = processingEnv.getFiler();<br>        mMessager = processingEnv.getMessager();<br>    &#125;<br>  <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¥æ”¶å¤–æ¥ä¼ å…¥çš„å‚æ•°ï¼Œæœ€å¸¸ç”¨çš„å½¢å¼å°±æ˜¯åœ¨ build.gradle è„šæœ¬æ–‡ä»¶é‡Œçš„ javaCompileOptions çš„é…ç½®</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> å±æ€§çš„ Key é›†åˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Set&lt;String&gt; <span class="hljs-title function_">getSupportedOptions</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getSupportedOptions();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å½“å‰æ³¨è§£å¤„ç†å™¨æ”¯æŒçš„æ³¨è§£é›†åˆï¼Œå¦‚æœæ”¯æŒï¼Œå°±ä¼šè°ƒç”¨ process æ–¹æ³•</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ”¯æŒçš„æ³¨è§£é›†åˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Set&lt;String&gt; <span class="hljs-title function_">getSupportedAnnotationTypes</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getSupportedAnnotationTypes();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¼–è¯‘å½“å‰æ³¨è§£å¤„ç†å™¨çš„ JDK ç‰ˆæœ¬</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> JDK ç‰ˆæœ¬</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> SourceVersion <span class="hljs-title function_">getSupportedSourceVersion</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getSupportedSourceVersion();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š<code>getSupportedAnnotationTypes()</code>ã€<code>getSupportedSourceVersion()</code>å’Œ<code>getSupportedOptions()</code> è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡‡ç”¨æ³¨è§£çš„æ–¹å¼è¿›è¡Œæä¾›ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SupportedOptions(&quot;MODULE_NAME&quot;)</span><br><span class="hljs-meta">@SupportedAnnotationTypes(&quot;com.dream.apt_annotation.AptAnnotation&quot;)</span><br><span class="hljs-meta">@SupportedSourceVersion(SourceVersion.RELEASE_8)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AptAnnotationProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> &#123;<br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€æ³¨è§£å¤„ç†å™¨æ³¨å†Œ"><a href="#2ï¼‰ã€æ³¨è§£å¤„ç†å™¨æ³¨å†Œ" class="headerlink" title="2ï¼‰ã€æ³¨è§£å¤„ç†å™¨æ³¨å†Œ"></a>2ï¼‰ã€æ³¨è§£å¤„ç†å™¨æ³¨å†Œ</h3><p>æ³¨è§£å¤„ç†å™¨å£°æ˜å¥½äº†ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å°±è¦æ³¨å†Œå®ƒï¼Œå…¶ä¸­æ³¨å†Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>1ã€æ‰‹åŠ¨æ³¨å†Œ</p><p>2ã€è‡ªåŠ¨æ³¨å†Œ</p><p>æ‰‹åŠ¨æ³¨å†Œæ¯”è¾ƒç¹çå›ºå®šä¸”å®¹æ˜“å‡ºé”™ï¼Œä¸æ¨èä½¿ç”¨ï¼Œè¿™é‡Œå°±ä¸è®²äº†ã€‚æˆ‘ä»¬ä¸»è¦çœ‹ä¸‹è‡ªåŠ¨æ³¨å†Œ</p><h4 id="è‡ªåŠ¨æ³¨å†Œ"><a href="#è‡ªåŠ¨æ³¨å†Œ" class="headerlink" title="è‡ªåŠ¨æ³¨å†Œ"></a>è‡ªåŠ¨æ³¨å†Œ</h4><p>1ã€é¦–å…ˆæˆ‘ä»¬è¦åœ¨ <code>apt-processor</code>è¿™ä¸ª Module ä¸‹çš„ build.gradle æ–‡ä»¶å¯¼å…¥å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">implementation <span class="hljs-string">&#x27;com.google.auto.service:auto-service:1.0-rc6&#x27;</span><br>annotationProcessor <span class="hljs-string">&#x27;com.google.auto.service:auto-service:1.0-rc6&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šè¿™ä¸¤å¥å¿…é¡»éƒ½è¦åŠ ï¼Œå¦åˆ™æ³¨å†Œä¸æˆåŠŸï¼Œæˆ‘ä¹‹å‰è¸©å‘äº†</p><p>2ã€åœ¨æ³¨è§£å¤„ç†å™¨ä¸ŠåŠ ä¸Š <code>@AutoService(Processor.class)</code> å³å¯å®Œæˆæ³¨å†Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AutoService(Processor.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AptAnnotationProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> &#123;<br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3ï¼‰ã€æ³¨è§£å¤„ç†å™¨ç”Ÿæˆç±»æ–‡ä»¶"><a href="#3ï¼‰ã€æ³¨è§£å¤„ç†å™¨ç”Ÿæˆç±»æ–‡ä»¶" class="headerlink" title="3ï¼‰ã€æ³¨è§£å¤„ç†å™¨ç”Ÿæˆç±»æ–‡ä»¶"></a>3ï¼‰ã€æ³¨è§£å¤„ç†å™¨ç”Ÿæˆç±»æ–‡ä»¶</h3><p>æ³¨å†Œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ­£å¼ç¼–å†™ç”Ÿæˆ Java ç±»æ–‡ä»¶çš„ä»£ç äº†ï¼Œå…¶ä¸­ç”Ÿæˆä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>1ã€å¸¸è§„çš„å†™æ–‡ä»¶æ–¹å¼</p><p>2ã€é€šè¿‡ javapoet æ¡†æ¶æ¥ç¼–å†™</p><p>1 çš„æ–¹å¼æ¯”è¾ƒæ­»æ¿ï¼Œéœ€è¦æŠŠæ¯ä¸€ä¸ªå­—æ¯éƒ½å†™ä¸Šï¼Œä¸æ¨èä½¿ç”¨ï¼Œè¿™é‡Œå°±ä¸è®²äº†ã€‚æˆ‘ä»¬ä¸»è¦çœ‹ä¸‹é€šè¿‡ javapoet è¿™ä¸ªæ¡†æ¶ç”Ÿæˆ Java ç±»æ–‡ä»¶</p><h4 id="javapoet-æ–¹å¼"><a href="#javapoet-æ–¹å¼" class="headerlink" title="javapoet æ–¹å¼"></a>javapoet æ–¹å¼</h4><p>è¿™ç§æ–¹å¼æ›´åŠ ç¬¦åˆé¢å‘å¯¹è±¡ç¼–ç çš„ä¸€ä¸ªé£æ ¼ï¼Œå¯¹ javapoet è¿˜ä¸ç†Ÿçš„æœ‹å‹ï¼Œå¯ä»¥å» github ä¸Šå­¦ä¹ ä¸€æ³¢ <a href="https://github.com/square/javapoet">ä¼ é€é—¨</a>ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹å®ƒå¸¸ç”¨çš„ä¸€äº›ç±»ï¼š</p><blockquote><p>TypeSpecï¼šç”¨äºç”Ÿæˆç±»ã€æ¥å£ã€æšä¸¾å¯¹è±¡çš„ç±»</p><p>MethodSpecï¼šç”¨äºç”Ÿæˆæ–¹æ³•å¯¹è±¡çš„ç±»</p><p>ParameterSpecï¼šç”¨äºç”Ÿæˆå‚æ•°å¯¹è±¡çš„ç±»</p><p>AnnotationSpecï¼šç”¨äºç”Ÿæˆæ³¨è§£å¯¹è±¡çš„ç±»</p><p>FieldSpecï¼šç”¨äºé…ç½®ç”Ÿæˆæˆå‘˜å˜é‡çš„ç±»</p><p>ClassNameï¼šé€šè¿‡åŒ…åå’Œç±»åç”Ÿæˆçš„å¯¹è±¡ï¼Œåœ¨JavaPoetä¸­ç›¸å½“äºä¸ºå…¶æŒ‡å®š Class</p><p>ParameterizedTypeNameï¼šé€šè¿‡ MainClass å’Œ IncludeClass ç”ŸæˆåŒ…å«æ³›å‹çš„ Class</p><p>JavaFileï¼šæ§åˆ¶ç”Ÿæˆçš„ Java æ–‡ä»¶çš„è¾“å‡ºçš„ç±»</p></blockquote><h5 id="1ã€å¯¼å…¥-javapoet-æ¡†æ¶ä¾èµ–"><a href="#1ã€å¯¼å…¥-javapoet-æ¡†æ¶ä¾èµ–" class="headerlink" title="1ã€å¯¼å…¥ javapoet æ¡†æ¶ä¾èµ–"></a>1ã€å¯¼å…¥ javapoet æ¡†æ¶ä¾èµ–</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">implementation <span class="hljs-string">&#x27;com.squareup:javapoet:1.13.0&#x27;</span><br></code></pre></td></tr></table></figure><h5 id="2ã€æŒ‰ç…§æŒ‡å®šä»£ç æ¨¡ç‰ˆç”Ÿæˆ-Java-ç±»æ–‡ä»¶"><a href="#2ã€æŒ‰ç…§æŒ‡å®šä»£ç æ¨¡ç‰ˆç”Ÿæˆ-Java-ç±»æ–‡ä»¶" class="headerlink" title="2ã€æŒ‰ç…§æŒ‡å®šä»£ç æ¨¡ç‰ˆç”Ÿæˆ Java ç±»æ–‡ä»¶"></a>2ã€æŒ‰ç…§æŒ‡å®šä»£ç æ¨¡ç‰ˆç”Ÿæˆ Java ç±»æ–‡ä»¶</h5><p>ä¾‹å¦‚ï¼Œæˆ‘åœ¨ app çš„ build.gradle ä¸‹è¿›è¡Œäº†å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs groovy">android &#123;<br>    <span class="hljs-comment">//...</span><br>    defaultConfig &#123;<br>        <span class="hljs-comment">//...</span><br>        javaCompileOptions &#123;<br>            annotationProcessorOptions &#123;<br>                arguments = [<span class="hljs-attr">MODULE_NAME:</span> project.getName()]<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨ MainActivity ä¸‹é¢è¿›è¡Œäº†å¦‚ä¸‹æ³¨è§£ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0fcccf3c6fe64a88bb00488bb1cb9308~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210627212604288"></p><p>æˆ‘å¸Œæœ›ç”Ÿæˆçš„ä»£ç å¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cd59cb4022624f7c9c171fa22441dd99~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210627220320906"></p><p>ç°åœ¨æˆ‘ä»¬æ¥å®æ“ä¸€ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AutoService(Processor.class)</span><br><span class="hljs-meta">@SupportedOptions(&quot;MODULE_NAME&quot;)</span><br><span class="hljs-meta">@SupportedAnnotationTypes(&quot;com.dream.apt_annotation.AptAnnotation&quot;)</span><br><span class="hljs-meta">@SupportedSourceVersion(SourceVersion.RELEASE_8)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AptAnnotationProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractProcessor</span> &#123;<br><br>    <span class="hljs-comment">//æ–‡ä»¶ç”Ÿæˆå™¨</span><br>    Filer filer;<br>    <span class="hljs-comment">//æ¨¡å—å</span><br>    <span class="hljs-keyword">private</span> String mModuleName;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ProcessingEnvironment processingEnvironment)</span> &#123;<br>        <span class="hljs-built_in">super</span>.init(processingEnvironment);<br>      <span class="hljs-comment">//åˆå§‹åŒ–æ–‡ä»¶ç”Ÿæˆå™¨</span><br>        filer = processingEnvironment.getFiler();<br>      <span class="hljs-comment">//é€šè¿‡ key è·å– build.gradle ä¸­å¯¹åº”çš„ value</span><br>        mModuleName = processingEnv.getOptions().get(<span class="hljs-string">&quot;MODULE_NAME&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">process</span><span class="hljs-params">(Set&lt;? extends TypeElement&gt; set, RoundEnvironment roundEnvironment)</span> &#123;<br>        <span class="hljs-keyword">if</span> (set == <span class="hljs-literal">null</span> || set.isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br><br>      <span class="hljs-comment">//è·å–å½“å‰æ³¨è§£ä¸‹çš„èŠ‚ç‚¹ä¿¡æ¯</span><br>        Set&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Element</span>&gt; rootElements = roundEnvironment.getElementsAnnotatedWith(AptAnnotation.class);<br><br>        <span class="hljs-comment">// æ„å»º test å‡½æ•°</span><br>        MethodSpec.<span class="hljs-type">Builder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> MethodSpec.methodBuilder(<span class="hljs-string">&quot;test&quot;</span>)<br>                .addModifiers(Modifier.PUBLIC) <span class="hljs-comment">// æŒ‡å®šæ–¹æ³•ä¿®é¥°ç¬¦</span><br>                .returns(<span class="hljs-keyword">void</span>.class) <span class="hljs-comment">// æŒ‡å®šè¿”å›ç±»å‹</span><br>                .addParameter(String.class, <span class="hljs-string">&quot;param&quot;</span>); <span class="hljs-comment">// æ·»åŠ å‚æ•°</span><br>        builder.addStatement(<span class="hljs-string">&quot;$T.out.println($S)&quot;</span>, System.class, <span class="hljs-string">&quot;æ¨¡å—: &quot;</span> + mModuleName);<br><br>        <span class="hljs-keyword">if</span> (rootElements != <span class="hljs-literal">null</span> &amp;&amp; !rootElements.isEmpty()) &#123;<br>            <span class="hljs-keyword">for</span> (Element element : rootElements) &#123;<br>              <span class="hljs-comment">//å½“å‰èŠ‚ç‚¹åç§°</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">elementName</span> <span class="hljs-operator">=</span> element.getSimpleName().toString();<br>              <span class="hljs-comment">//å½“å‰èŠ‚ç‚¹ä¸‹æ³¨è§£çš„å±æ€§</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">desc</span> <span class="hljs-operator">=</span> element.getAnnotation(AptAnnotation.class).desc();<br>                <span class="hljs-comment">// æ„å»ºæ–¹æ³•ä½“</span><br>                builder.addStatement(<span class="hljs-string">&quot;$T.out.println($S)&quot;</span>, System.class, <br>                                     <span class="hljs-string">&quot;èŠ‚ç‚¹: &quot;</span> + elementName + <span class="hljs-string">&quot;  &quot;</span> + <span class="hljs-string">&quot;æè¿°: &quot;</span> + desc);<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">MethodSpec</span> <span class="hljs-variable">main</span> <span class="hljs-operator">=</span>builder.build();<br><br>        <span class="hljs-comment">// æ„å»º HelloWorld ç±»</span><br>        <span class="hljs-type">TypeSpec</span> <span class="hljs-variable">helloWorld</span> <span class="hljs-operator">=</span> TypeSpec.classBuilder(<span class="hljs-string">&quot;HelloWorld&quot;</span>)<br>                .addModifiers(Modifier.PUBLIC) <span class="hljs-comment">// æŒ‡å®šç±»ä¿®é¥°ç¬¦</span><br>                .addMethod(main) <span class="hljs-comment">// æ·»åŠ æ–¹æ³•</span><br>                .build();<br><br>        <span class="hljs-comment">// æŒ‡å®šåŒ…è·¯å¾„ï¼Œæ„å»ºæ–‡ä»¶ä½“</span><br>        <span class="hljs-type">JavaFile</span> <span class="hljs-variable">javaFile</span> <span class="hljs-operator">=</span> JavaFile.builder(<span class="hljs-string">&quot;com.dream.aptdemo&quot;</span>, helloWorld).build();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// åˆ›å»ºæ–‡ä»¶</span><br>            javaFile.writeTo(filer);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»è¿‡ä¸Šé¢è¿™äº›æ­¥éª¤ï¼Œæˆ‘ä»¬è¿è¡Œ App å°±èƒ½ç”Ÿæˆä¸Šé¢æˆªå›¾çš„ä»£ç äº†ï¼Œç°åœ¨è¿˜å·®æœ€åä¸€æ­¥ï¼Œå¯¹ç”Ÿæˆçš„ä»£ç è¿›è¡Œä½¿ç”¨</p><p><strong>æ³¨æ„</strong>ï¼šä¸åŒç‰ˆæœ¬çš„ Gradle ç”Ÿæˆçš„ç±»æ–‡ä»¶ä½ç½®å¯èƒ½ä¸ä¸€æ ·ï¼Œæˆ‘çš„ Gradle ç‰ˆæœ¬æ˜¯ 6.7.1ï¼Œç”Ÿæˆçš„ç±»æ–‡ä»¶åœ¨å¦‚ä¸‹ä½ç½®ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d51e6dd32ab4042a4d5905122b6ef43~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210627221836736"></p><p>ä¸€äº›ä½ç‰ˆæœ¬çš„ Gradle ç”Ÿæˆçš„ç±»æ–‡ä»¶åœ¨ <code>/build/generated/source</code> è¿™ä¸ªç›®å½•ä¸‹</p><h2 id="äº”ã€apt-api-è°ƒç”¨ç”Ÿæˆä»£ç å®Œæˆä¸šåŠ¡åŠŸèƒ½"><a href="#äº”ã€apt-api-è°ƒç”¨ç”Ÿæˆä»£ç å®Œæˆä¸šåŠ¡åŠŸèƒ½" class="headerlink" title="äº”ã€apt-api è°ƒç”¨ç”Ÿæˆä»£ç å®Œæˆä¸šåŠ¡åŠŸèƒ½"></a>äº”ã€apt-api è°ƒç”¨ç”Ÿæˆä»£ç å®Œæˆä¸šåŠ¡åŠŸèƒ½</h2><p>è¿™ä¸ª Module çš„æ“ä½œç›¸å¯¹æ¥è¯´ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯é€šè¿‡åå°„è·å–åˆ°ç”Ÿæˆçš„ç±»ï¼Œè¿›è¡Œç›¸åº”çš„å°è£…ä½¿ç”¨å³å¯ï¼Œæˆ‘çš„ç¼–å†™å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAptApi</span> &#123;<br><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Class</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.dream.aptdemo.HelloWorld&quot;</span>);<br>            <span class="hljs-type">Constructor</span> <span class="hljs-variable">declaredConstructor</span> <span class="hljs-operator">=</span> c.getDeclaredConstructor();<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> declaredConstructor.newInstance();<br>            <span class="hljs-type">Method</span> <span class="hljs-variable">test</span> <span class="hljs-operator">=</span> c.getDeclaredMethod(<span class="hljs-string">&quot;test&quot;</span>, String.class);<br>            test.invoke(o, <span class="hljs-string">&quot;&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ç€æˆ‘ä»¬åœ¨ MainActivity çš„ oncreate æ–¹æ³•é‡Œé¢è¿›è¡Œè°ƒç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AptAnnotation(desc = &quot;æˆ‘æ˜¯ MainActivity ä¸Šé¢çš„æ³¨è§£&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> &#123;<br>  <br>    <span class="hljs-meta">@AptAnnotation(desc = &quot;æˆ‘æ˜¯ onCreate ä¸Šé¢çš„æ³¨è§£&quot;)</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.activity_main);<br>        MyAptApi.init();<br>    &#125;<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ¨¡å—: app<br>èŠ‚ç‚¹: MainActivity  æè¿°: æˆ‘æ˜¯ MainActivity ä¸Šé¢çš„æ³¨è§£<br>èŠ‚ç‚¹: onCreate  æè¿°: æˆ‘æ˜¯ onCreate ä¸Šé¢çš„æ³¨è§£<br></code></pre></td></tr></table></figure><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€APT å·¥ç¨‹æ‰€éœ€åˆ›å»ºçš„ä¸åŒç§ç±»çš„ Module åŠ Module ä¹‹é—´çš„ä¾èµ–å…³ç³»</p><p>2ã€Java æºæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ç§ç»“æ„ä½“è¯­è¨€ï¼Œæºä»£ç çš„æ¯ä¸€ä¸ªéƒ¨åˆ†éƒ½å¯¹åº”äº†ä¸€ä¸ªç‰¹å®šç±»å‹çš„ Element</p><p>3ã€é‡‡ç”¨ auto-service å¯¹æ³¨è§£å¤„ç†å™¨è¿›è¡Œè‡ªåŠ¨æ³¨å†Œ</p><p>4ã€é‡‡ç”¨ javapoet æ¡†æ¶ç¼–å†™æ‰€éœ€ç”Ÿæˆçš„ Java ç±»æ–‡ä»¶</p><p>5ã€é€šè¿‡åå°„åŠé€‚å½“çš„å°è£…ï¼Œå°†ç”Ÿæˆçš„ç±»çš„åŠŸèƒ½æä¾›ç»™ä¸Šå±‚è°ƒç”¨</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®²æˆ‘æ˜¯å¦‚ä½•åº”ç”¨ APT æŠ€æœ¯å®ç°åå°„åˆ›å»º View çš„ä¸€ä¸ªæ›¿æ¢ï¼Œæ•¬è¯·æœŸå¾…å§ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://juejin.cn/post/6963873016220663844#comment">Androidæ³¨è§£å¤„ç†å™¨APTæŠ€æœ¯æ¢ç©¶</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>APT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Android APT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android APT ç³»åˆ— ï¼ˆäºŒï¼‰ï¼šAPT ç­‘åŸºä¹‹æ³¨è§£</title>
    <link href="/2022/10/10/Android%20APT%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAPT%20%E7%AD%91%E5%9F%BA%E4%B9%8B%E6%B3%A8%E8%A7%A3/"/>
    <url>/2022/10/10/Android%20APT%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9AAPT%20%E7%AD%91%E5%9F%BA%E4%B9%8B%E6%B3%A8%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101947909.jpeg" alt="morning-4411421_1920"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹åå°„ä¸€äº›å¸¸ç”¨çš„çŸ¥è¯†è¿›è¡Œäº†è®²è§£ï¼Œè¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/6977679823132950536">Android APT ç³»åˆ— ï¼ˆä¸€ï¼‰ï¼šAPT ç­‘åŸºä¹‹åå°„</a>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹ Java æ³¨è§£</p><p><a href="https://github.com/sweetying520/AptDemo">Github Demo åœ°å€</a> , å¤§å®¶å¯ä»¥çœ‹ Demo è·Ÿéšæˆ‘çš„æ€è·¯ä¸€èµ·åˆ†æ</p><h2 id="ä¸€ã€æ³¨è§£ä»‹ç»"><a href="#ä¸€ã€æ³¨è§£ä»‹ç»" class="headerlink" title="ä¸€ã€æ³¨è§£ä»‹ç»"></a>ä¸€ã€æ³¨è§£ä»‹ç»</h2><h3 id="1ï¼‰ã€ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ"><a href="#1ï¼‰ã€ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ" class="headerlink" title="1ï¼‰ã€ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ"></a>1ï¼‰ã€ä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ</h3><p>è¦è§£é‡Šæ³¨è§£æˆ‘ä»¬é¦–å…ˆè¦æ˜ç™½ä»€ä¹ˆæ˜¯å…ƒæ•°æ®ï¼š<strong>å…ƒæ•°æ®å°±æ˜¯ä¸ºå…¶ä»–æ•°æ®æä¾›ä¿¡æ¯çš„æ•°æ®</strong></p><p>é‚£ä¹ˆè¿˜æ˜¯å¼•å…¥å®˜æ–¹ä¸€æ®µå¯¹æ³¨è§£çš„è§£é‡Šï¼š<strong>æ³¨è§£ç”¨äºä¸ºä»£ç æä¾›å…ƒæ•°æ®ã€‚ä½œä¸ºå…ƒæ•°æ®ï¼Œæ³¨è§£ä¸ç›´æ¥å½±å“ä½ çš„ä»£ç æ‰§è¡Œï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ç±»å‹çš„æ³¨è§£å®é™…ä¸Šå¯ä»¥ç”¨äºè¿™ä¸€ç›®çš„ã€‚Java æ³¨è§£æ˜¯ä» JDK 1.5 å¼€å§‹æ·»åŠ åˆ° Java çš„ã€‚</strong></p><p>ç®€å•çš„ç†è§£ï¼š<strong>æ³¨è§£å°±æ˜¯é™„åŠ åˆ°ä»£ç ä¸Šçš„ä¸€ç§é¢å¤–è¡¥å……ä¿¡æ¯</strong></p><h3 id="2ï¼‰ã€æ³¨è§£æœ‰å“ªäº›ä½œç”¨ï¼Ÿ"><a href="#2ï¼‰ã€æ³¨è§£æœ‰å“ªäº›ä½œç”¨ï¼Ÿ" class="headerlink" title="2ï¼‰ã€æ³¨è§£æœ‰å“ªäº›ä½œç”¨ï¼Ÿ"></a>2ï¼‰ã€æ³¨è§£æœ‰å“ªäº›ä½œç”¨ï¼Ÿ</h3><p><strong>æºç é˜¶æ®µæ³¨è§£</strong>ï¼š ç¼–è¯‘å™¨å¯åˆ©ç”¨è¯¥é˜¶æ®µæ³¨è§£æ£€æµ‹é”™è¯¯ï¼Œæç¤ºè­¦å‘Šä¿¡æ¯ï¼Œæ‰“å°æ—¥å¿—ç­‰</p><p><strong>ç¼–è¯‘é˜¶æ®µæ³¨è§£</strong>ï¼šåˆ©ç”¨æ³¨è§£ä¿¡æ¯è‡ªåŠ¨ç”Ÿæˆä»£ç ã€æ–‡æ¡£æˆ–è€…åšå…¶å®ƒç›¸åº”çš„è‡ªåŠ¨å¤„ç†</p><p><strong>è¿è¡Œé˜¶æ®µæ³¨è§£</strong>ï¼š å¯é€šè¿‡åå°„è·å–æ³¨è§£ä¿¡æ¯ï¼Œåšç›¸åº”æ“ä½œ</p><h3 id="3ï¼‰ã€å¦‚ä½•è‡ªå®šä¹‰å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Ÿ"><a href="#3ï¼‰ã€å¦‚ä½•è‡ªå®šä¹‰å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Ÿ" class="headerlink" title="3ï¼‰ã€å¦‚ä½•è‡ªå®šä¹‰å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Ÿ"></a>3ï¼‰ã€å¦‚ä½•è‡ªå®šä¹‰å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Ÿ</h3><p>ä½¿ç”¨ <code>@interface</code> + æ³¨è§£åç§°è¿™ç§è¯­æ³•ç»“æ„å°±èƒ½å®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@interface</span> TestAnnotation&#123;<br>  <br>&#125;<br></code></pre></td></tr></table></figure><p>é€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€äº›å…ƒæ³¨è§£æ¥ä¿®é¥°è‡ªå®šä¹‰æ³¨è§£</p><h2 id="äºŒã€å…ƒæ³¨è§£"><a href="#äºŒã€å…ƒæ³¨è§£" class="headerlink" title="äºŒã€å…ƒæ³¨è§£"></a>äºŒã€å…ƒæ³¨è§£</h2><p>äº†è§£äº†ä¹‹å‰çš„å…ƒæ•°æ®ï¼Œ<strong>å…ƒæ³¨è§£å°±æ˜¯ä¸ºæ³¨è§£æä¾›æ³¨è§£çš„æ³¨è§£</strong> ğŸ˜‚ï¼Œè¿™å¥è¯å¯èƒ½æœ‰ç‚¹ç»•ï¼Œåæ­£ä½ æ¸…æ¥šå…ƒæ³¨è§£æ˜¯ç»™æ³¨è§£ç”¨çš„å°±è¡Œäº†</p><p>JDK ç»™æˆ‘ä»¬æä¾›çš„å…ƒæ³¨è§£æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š</p><p>1ã€@Target</p><p>2ã€@Retention</p><p>3ã€@Inherited</p><p>4ã€@Documented</p><p>5ã€@Repeatable</p><h3 id="1ï¼‰ã€-Target"><a href="#1ï¼‰ã€-Target" class="headerlink" title="1ï¼‰ã€@Target"></a>1ï¼‰ã€@Target</h3><p>@Target è¡¨ç¤ºè¿™ä¸ªæ³¨è§£èƒ½æ”¾åœ¨ä»€ä¹ˆä½ç½®ä¸Šï¼Œå…·ä½“é€‰æ‹©çš„ä½ç½®åˆ—è¡¨å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">ElementType.ANNOTATION_TYPE <span class="hljs-comment">//èƒ½ä¿®é¥°æ³¨è§£</span><br>ElementType.CONSTRUCTOR <span class="hljs-comment">//èƒ½ä¿®é¥°æ„é€ å™¨</span><br>ElementType.FIELD <span class="hljs-comment">//èƒ½ä¿®é¥°æˆå‘˜å˜é‡</span><br>ElementType.LOCAL_VARIABLE <span class="hljs-comment">//èƒ½ä¿®é¥°å±€éƒ¨å˜é‡</span><br>ElementType.METHOD <span class="hljs-comment">//èƒ½ä¿®é¥°æ–¹æ³•</span><br>ElementType.PACKAGE <span class="hljs-comment">//èƒ½ä¿®é¥°åŒ…å </span><br>ElementType.PARAMETER <span class="hljs-comment">//èƒ½ä¿®é¥°å‚æ•°</span><br>ElementType.TYPE <span class="hljs-comment">//èƒ½ä¿®é¥°ç±»ã€æ¥å£æˆ–æšä¸¾ç±»å‹</span><br>ElementType.TYPE_PARAMETER <span class="hljs-comment">//èƒ½ä¿®é¥°æ³›å‹ï¼Œå¦‚æ³›å‹æ–¹æ³•ã€æ³›å‹ç±»ã€æ³›å‹æ¥å£ ï¼ˆjdk1.8åŠ å…¥ï¼‰</span><br>ElementType.TYPE_USE <span class="hljs-comment">//èƒ½ä¿®é¥°ç±»å‹ å¯ç”¨äºä»»æ„ç±»å‹é™¤äº† class ï¼ˆjdk1.8åŠ å…¥ï¼‰</span><br>  <br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@interface</span> TestAnnotation&#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹æ— é™åˆ¶</p><h3 id="2ï¼‰ã€-Retention"><a href="#2ï¼‰ã€-Retention" class="headerlink" title="2ï¼‰ã€@Retention"></a>2ï¼‰ã€@Retention</h3><p>@Retention è¡¨ç¤ºæ³¨è§£çš„çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯é€‰çš„å€¼æœ‰ 3 ä¸ªï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java">RetentionPolicy.SOURCE <span class="hljs-comment">//è¡¨ç¤ºæ³¨è§£åªåœ¨æºç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘æˆ class ä¹‹åï¼Œå°±æ²¡äº†</span><br>  <br>RetentionPolicy.CLASS <span class="hljs-comment">//è¡¨ç¤ºæ³¨è§£åœ¨ java æºæ–‡ä»¶ç¼–ç¨‹æˆ .class æ–‡ä»¶åï¼Œä¾ç„¶å­˜åœ¨ï¼Œä½†æ˜¯è¿è¡Œèµ·æ¥åå°±æ²¡äº†</span><br>  <br>RetentionPolicy.RUNTIME <span class="hljs-comment">//è¡¨ç¤ºæ³¨è§£åœ¨è¿è¡Œèµ·æ¥åä¾ç„¶å­˜åœ¨ï¼Œç¨‹åºå¯ä»¥é€šè¿‡åå°„è·å–è¿™äº›ä¿¡æ¯</span><br>  <br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@interface</span> TestAnnotation&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ä¸º <code>RetentionPolicy.CLASS</code></p><h3 id="3ï¼‰ã€-Inherited"><a href="#3ï¼‰ã€-Inherited" class="headerlink" title="3ï¼‰ã€@Inherited"></a>3ï¼‰ã€@Inherited</h3><p>@Inherited è¡¨ç¤ºè¯¥æ³¨è§£å¯è¢«ç»§æ‰¿ï¼Œå³å½“ä¸€ä¸ªå­ç±»ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œè¯¥çˆ¶ç±»æ·»åŠ çš„æ³¨è§£æœ‰è¢« @Inherited ä¿®é¥°ï¼Œé‚£ä¹ˆå­ç±»å°±å¯ä»¥è·å–åˆ°è¯¥æ³¨è§£ï¼Œå¦åˆ™è·å–ä¸åˆ°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@interface</span> TestAnnotation&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ä¸ºä¸å¯ç»§æ‰¿</p><h3 id="4ï¼‰ã€-Documented"><a href="#4ï¼‰ã€-Documented" class="headerlink" title="4ï¼‰ã€@Documented"></a>4ï¼‰ã€@Documented</h3><p>@Documented  è¡¨ç¤ºè¯¥æ³¨è§£åœ¨é€šè¿‡ <code>javadoc</code> å‘½ä»¤ç”Ÿæˆ Api æ–‡æ¡£åï¼Œä¼šå‡ºç°è¯¥æ³¨è§£çš„æ³¨é‡Šè¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@interface</span> TestAnnotation&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ä¸ºä¸å‡ºç°</p><h3 id="5ï¼‰ã€-Repeatable"><a href="#5ï¼‰ã€-Repeatable" class="headerlink" title="5ï¼‰ã€@Repeatable"></a>5ï¼‰ã€@Repeatable</h3><p>@Repeatable æ˜¯ JDK 1.8 æ–°å¢çš„å…ƒæ³¨è§£ï¼Œå®ƒè¡¨ç¤ºæ³¨è§£åœ¨åŒä¸€ä¸ªä½ç½®èƒ½å‡ºç°å¤šæ¬¡ï¼Œè¿™ä¸ªæ³¨è§£æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®é™…ä¾‹å­ç†è§£ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ¸¸æˆç©å®¶æ³¨è§£</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@interface</span> GamePlayer&#123;<br>    Game[] value();<br>&#125;<br><br><span class="hljs-comment">//æ¸¸æˆæ³¨è§£</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Repeatable(GamePlayer.class)</span><br><span class="hljs-meta">@interface</span> Game&#123;<br>    String <span class="hljs-title function_">gameName</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-meta">@Game(gameName = &quot;CF&quot;)</span><br><span class="hljs-meta">@Game(gameName = &quot;LOL&quot;)</span><br><span class="hljs-meta">@Game(gameName = &quot;DNF&quot;)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GameTest</span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ä¸å¯é‡å¤</p><p><strong>ç»éªŒ</strong>ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å¤šä¸ªå…ƒæ³¨è§£ç»„åˆæ¥ä¿®é¥°è‡ªå®šä¹‰æ³¨è§£</p><h2 id="ä¸‰ã€æ³¨è§£å±æ€§"><a href="#ä¸‰ã€æ³¨è§£å±æ€§" class="headerlink" title="ä¸‰ã€æ³¨è§£å±æ€§"></a>ä¸‰ã€æ³¨è§£å±æ€§</h2><h3 id="1ï¼‰ã€æ³¨è§£å±æ€§ç±»å‹"><a href="#1ï¼‰ã€æ³¨è§£å±æ€§ç±»å‹" class="headerlink" title="1ï¼‰ã€æ³¨è§£å±æ€§ç±»å‹"></a>1ï¼‰ã€æ³¨è§£å±æ€§ç±»å‹</h3><p>æ³¨è§£å±æ€§ç±»å‹å¯ä»¥ä¸ºä»¥ä¸‹çš„ä¸€äº›ç±»å‹ï¼š</p><p>1ã€åŸºæœ¬æ•°æ®ç±»å‹</p><p>2ã€String</p><p>3ã€æšä¸¾ç±»å‹</p><p>4ã€æ³¨è§£ç±»å‹</p><p>5ã€Class ç±»å‹</p><p>6ã€ä»¥ä¸Šç±»å‹çš„ä¸€ç»´æ•°ç»„ç±»å‹</p><h3 id="2ï¼‰ã€å®šä¹‰æ³¨è§£å±æ€§"><a href="#2ï¼‰ã€å®šä¹‰æ³¨è§£å±æ€§" class="headerlink" title="2ï¼‰ã€å®šä¹‰æ³¨è§£å±æ€§"></a>2ï¼‰ã€å®šä¹‰æ³¨è§£å±æ€§</h3><p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€äº›æ³¨è§£å±æ€§ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@interface</span> TestAnnotation&#123;<br>    <span class="hljs-comment">//è¿™å°±æ˜¯æ³¨è§£å±æ€§çš„è¯­æ³•ç»“æ„</span><br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå±æ€§å¹¶ç»™äº†é»˜è®¤å€¼</span><br>    String <span class="hljs-title function_">name</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;erdai&quot;</span>;<br>  <br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå±æ€§æœªç»™é»˜è®¤å€¼</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">age</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯èƒ½ä½ ä¼šæœ‰äº›ç–‘é—®ï¼šè¿™éš¾é“ä¸æ˜¯åœ¨å®šä¹‰æ–¹æ³•å—ï¼Ÿè¿˜å¯ä»¥ç»™é»˜è®¤å€¼ï¼Ÿ</p><p>è¿™äº›ç–‘é—®å…ˆç•™ç€ï¼Œæˆ‘ä»¬ç»§ç»­åˆ†æ</p><p>è‡ªå®šä¹‰æ³¨è§£é»˜è®¤éƒ½ä¼šç»§æ‰¿ Annotation ï¼ŒAnnotation æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Annotation</span> &#123;<br>   <br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object obj)</span>;<br><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span>;<br>  <br>    String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span>;<br>    <br>    Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Annotation</span>&gt; annotationType();<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ¥å£ä¸­å¯ä»¥å®šä¹‰å±æ€§å’Œæ–¹æ³•ï¼Œé‚£ä¹ˆä½œä¸ºè‡ªå®šä¹‰æ³¨è§£ï¼Œæ˜¯å¦ä¹Ÿå¯ä»¥å®šä¹‰å‘¢ï¼Ÿ</p><p>å¯ä»¥ï¼Œæ¥å£ä¸­çš„å±æ€§é»˜è®¤éƒ½æ˜¯ç”¨<code>public static final</code> ä¿®é¥°çš„ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå¯¹äºè‡ªå®šä¹‰æ³¨è§£æ¥è¯´ï¼Œè¿™ç‚¹æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚è€Œæ¥å£ä¸­çš„æ–¹æ³•å…¶å®å°±ç›¸å½“äºè‡ªå®šä¹‰æ³¨è§£çš„å±æ€§ï¼Œåªä¸è¿‡è‡ªå®šä¹‰æ³¨è§£è¿˜å¯ä»¥ç»™é»˜è®¤å€¼ã€‚å› æ­¤æˆ‘ä»¬åœ¨å­¦ä¹ è‡ªå®šä¹‰æ³¨è§£å±æ€§æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠå®ƒå½“ä½œä¸€ä¸ªæ–°çŸ¥è¯†ï¼ŒåŠ ä¸Šæˆ‘åˆšæ‰å¯¹æ¥å£çš„åˆ†æå¯¹æ¯”ï¼Œä½ ä¸Šé¢çš„é‚£äº›ç–‘é—®ä¾¿å¯ä»¥è¿åˆƒè€Œè§£äº†</p><h3 id="3ï¼‰ã€æ³¨è§£å±æ€§ä½¿ç”¨"><a href="#3ï¼‰ã€æ³¨è§£å±æ€§ä½¿ç”¨" class="headerlink" title="3ï¼‰ã€æ³¨è§£å±æ€§ä½¿ç”¨"></a>3ï¼‰ã€æ³¨è§£å±æ€§ä½¿ç”¨</h3><p>1ã€åœ¨ä½¿ç”¨æ³¨è§£çš„åé¢æ¥ä¸Šä¸€å¯¹æ‹¬å·ï¼Œæ‹¬å·é‡Œé¢ä½¿ç”¨ <code>å±æ€§å = value</code> çš„æ ¼å¼ï¼Œå¤šä¸ªå±æ€§ä¹‹é—´ä¸­é—´ç”¨ <code>,</code>éš”å¼€</p><p>2ã€æœªç»™é»˜è®¤å€¼çš„å±æ€§å¿…é¡»è¿›è¡Œèµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥çº¢</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å•ä¸ªå±æ€§</span><br><span class="hljs-meta">@TestAnnotation(age = 18)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>&#123;<br>    <br>&#125;<br><br><span class="hljs-comment">//å¤šä¸ªå±æ€§</span><br><span class="hljs-meta">@TestAnnotation(age = 18,name = &quot;erdai666&quot;)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>&#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4ï¼‰ã€æ³¨è§£å±æ€§è·å–"><a href="#4ï¼‰ã€æ³¨è§£å±æ€§è·å–" class="headerlink" title="4ï¼‰ã€æ³¨è§£å±æ€§è·å–"></a>4ï¼‰ã€æ³¨è§£å±æ€§è·å–</h3><p>æ³¨è§£å±æ€§çš„è·å–å¯ä»¥å‚è€ƒæˆ‘çš„ä¸Šä¸€ç¯‡æ–‡ç«  <a href="https://juejin.cn/post/6977679823132950536">ä¼ é€é—¨</a> ï¼Œä¸Šç¯‡æ–‡ç« æˆ‘ä»¬è®²çš„æ˜¯é€šè¿‡ç±»å¯¹è±¡è·å–æ³¨è§£ï¼Œå’±ä»¬è¡¥å……ç‚¹ä¸Šç¯‡æ–‡ç« æ²¡è®²åˆ°çš„</p><p>1ã€æˆ‘ä»¬åœ¨è·å–å±æ€§çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆåˆ¤æ–­ä¸€ä¸‹æ˜¯å¦å­˜åœ¨è¯¥æ³¨è§£ï¼Œå¢å¼ºä»£ç çš„å¥å£®æ€§ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@TestAnnotation(age = 18,name = &quot;erdai666&quot;)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>&#123;<br><br>&#125;<br><br>Class&lt;Test&gt; testClass = Test.class;<br><span class="hljs-comment">//è·å–å½“å‰æ³¨è§£æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-type">boolean</span> <span class="hljs-variable">annotationPresent</span> <span class="hljs-operator">=</span> testClass.isAnnotationPresent(TestAnnotation.class);<br><span class="hljs-comment">//å¦‚æœå­˜åœ¨åˆ™è¿›å…¥æ¡ä»¶ä½“</span><br><span class="hljs-keyword">if</span>(annotationPresent)&#123;<br>    <span class="hljs-type">TestAnnotation</span> <span class="hljs-variable">declaredAnnotation</span> <span class="hljs-operator">=</span> testClass.getDeclaredAnnotation(TestAnnotation.class);<br>    System.out.println(declaredAnnotation.name());<br>    System.out.println(declaredAnnotation.age());<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€è·å–ç±»å±æ€§çš„æ³¨è§£å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(ElementType.FIELD)</span><br><span class="hljs-meta">@interface</span> TestField&#123;<br>    String <span class="hljs-title function_">filed</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>&#123;<br>    <span class="hljs-meta">@TestField(filed = &quot;æˆ‘æ˜¯å±æ€§&quot;)</span><br>    <span class="hljs-keyword">public</span> String test;<br>&#125;<br><br><span class="hljs-comment">//é€šè¿‡åå°„è·å–å±æ€§æ³¨è§£</span><br>Class&lt;Test&gt; testClass1 = Test.class;<br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-type">Field</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> testClass1.getDeclaredField(<span class="hljs-string">&quot;test&quot;</span>);<br>    <span class="hljs-keyword">if</span>(field.isAnnotationPresent(TestField.class))&#123;<br>        <span class="hljs-type">TestField</span> <span class="hljs-variable">fieldAnnotation</span> <span class="hljs-operator">=</span> field.getDeclaredAnnotation(TestField.class);<br>        System.out.println(fieldAnnotation.filed());<br>    &#125;<br>&#125; <span class="hljs-keyword">catch</span> (NoSuchFieldException e) &#123;<br>    e.printStackTrace();<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æˆ‘æ˜¯å±æ€§<br></code></pre></td></tr></table></figure><p>3ã€è·å–ç±»æ–¹æ³•çš„æ³¨è§£å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(ElementType.METHOD)</span><br><span class="hljs-meta">@interface</span> TestMethod&#123;<br>    String <span class="hljs-title function_">method</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>&#123;<br>    <span class="hljs-meta">@TestMethod(method = &quot;æˆ‘æ˜¯æ–¹æ³•&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>&#123;<br><br>    &#125;<br>&#125;<br><span class="hljs-comment">//é€šè¿‡åå°„è·å–æ–¹æ³•æ³¨è§£</span><br>Class&lt;Test&gt; testClass2 = Test.class;<br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> testClass2.getDeclaredMethod(<span class="hljs-string">&quot;test&quot;</span>);<br>    <span class="hljs-keyword">if</span>(method.isAnnotationPresent(TestMethod.class))&#123;<br>        <span class="hljs-type">TestMethod</span> <span class="hljs-variable">methodAnnotation</span> <span class="hljs-operator">=</span> method.getDeclaredAnnotation(TestMethod.class);<br>        System.out.println(methodAnnotation.method());<br>    &#125;<br>&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>    e.printStackTrace();<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æˆ‘æ˜¯æ–¹æ³•<br></code></pre></td></tr></table></figure><h2 id="å››ã€JDK-æä¾›çš„å†…ç½®æ³¨è§£"><a href="#å››ã€JDK-æä¾›çš„å†…ç½®æ³¨è§£" class="headerlink" title="å››ã€JDK æä¾›çš„å†…ç½®æ³¨è§£"></a>å››ã€JDK æä¾›çš„å†…ç½®æ³¨è§£</h2><p>JDK ç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šå†…ç½®çš„æ³¨è§£ï¼Œå…¶ä¸­å¸¸ç”¨çš„æœ‰ï¼š</p><p>)1ã€@Override</p><p>2ã€@Deprecated</p><p>3ã€@SuppressWarnings</p><p>4ã€@FunctionalInterface</p><h3 id="1ï¼‰ã€-Override"><a href="#1ï¼‰ã€-Override" class="headerlink" title="1ï¼‰ã€@Override"></a>1ï¼‰ã€@Override</h3><p>@Override ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºè¿™ä¸ªæ–¹æ³•é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œä¾‹å¦‚ <code>toString</code> æ–¹æ³• </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.toString();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€-Deprecated"><a href="#2ï¼‰ã€-Deprecated" class="headerlink" title="2ï¼‰ã€@Deprecated"></a>2ï¼‰ã€@Deprecated</h3><p>@Deprecated è¡¨ç¤ºè¿™ä¸ªæ–¹æ³•è¢«å¼ƒç”¨ï¼Œä¸å»ºè®®å¼€å‘è€…ä½¿ç”¨</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33397c95cde24591afca8a257d3901cd~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210626113644915" style="zoom:50%;" /><p>å¯ä»¥çœ‹åˆ°ç”¨ @Deprecated æ³¨è§£çš„æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ä¼šè¢«åˆ’æ‰</p><h3 id="3ï¼‰ã€-SuppressWarnings"><a href="#3ï¼‰ã€-SuppressWarnings" class="headerlink" title="3ï¼‰ã€@SuppressWarnings"></a>3ï¼‰ã€@SuppressWarnings</h3><p>@SuppressWarnings ç”¨äºå¿½ç•¥è­¦å‘Šä¿¡æ¯ï¼Œå¸¸è§çš„å–å€¼å¦‚ä¸‹ï¼š</p><ul><li>deprecationï¼šä½¿ç”¨äº†ä¸èµæˆä½¿ç”¨çš„ç±»æˆ–æ–¹æ³•æ—¶çš„è­¦å‘Šï¼ˆä½¿ç”¨ @Deprecated ä½¿å¾—ç¼–è¯‘å™¨äº§ç”Ÿçš„è­¦å‘Šï¼‰</li><li>uncheckedï¼šæ‰§è¡Œäº†æœªæ£€æŸ¥çš„è½¬æ¢æ—¶çš„è­¦å‘Šï¼Œä¾‹å¦‚å½“ä½¿ç”¨é›†åˆæ—¶æ²¡æœ‰ç”¨æ³›å‹ (Generics) æ¥æŒ‡å®šé›†åˆä¿å­˜çš„ç±»å‹; å…³é—­ç¼–è¯‘å™¨è­¦å‘Š</li><li>fallthroughï¼šå½“ Switch ç¨‹åºå—ç›´æ¥é€šå¾€ä¸‹ä¸€ç§æƒ…å†µè€Œæ²¡æœ‰ Break æ—¶çš„è­¦å‘Š</li><li>pathï¼šåœ¨ç±»è·¯å¾„ã€æºæ–‡ä»¶è·¯å¾„ç­‰ä¸­æœ‰ä¸å­˜åœ¨çš„è·¯å¾„æ—¶çš„è­¦å‘Š</li><li>serialï¼šå½“åœ¨å¯åºåˆ—åŒ–çš„ç±»ä¸Šç¼ºå°‘ serialVersionUID å®šä¹‰æ—¶çš„è­¦å‘Š</li><li>finallyï¼šä»»ä½• finally å­å¥ä¸èƒ½æ­£å¸¸å®Œæˆæ—¶çš„è­¦å‘Š</li><li>rawtypes æ³›å‹ç±»å‹æœªæŒ‡æ˜</li><li>unused å¼•ç”¨å®šä¹‰äº†ï¼Œä½†æ˜¯æ²¡æœ‰è¢«ä½¿ç”¨</li><li>allï¼šå…³äºä»¥ä¸Šæ‰€æœ‰æƒ…å†µçš„è­¦å‘Š</li></ul><p>ä»¥æ³›å‹ä¸¾ä¸ªä¾‹å­ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33a67f867a124bc184d4625d8a236b03~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210626114048630" style="zoom:50%;" /><p>å½“æˆ‘ä»¬åˆ›å»º List æœªæŒ‡å®šæ³›å‹æ—¶ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é»„æç¤ºæˆ‘ä»¬æœªæŒ‡æ˜æ³›å‹ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£äº†ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e5e7263b5a84905b6da544fde609e2d~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210626114241155" style="zoom:50%;" /><h3 id="4ï¼‰ã€-FunctionalInterface"><a href="#4ï¼‰ã€-FunctionalInterface" class="headerlink" title="4ï¼‰ã€@FunctionalInterface"></a>4ï¼‰ã€@FunctionalInterface</h3><p>@FunctionalInterface æ˜¯ JDK 1.8 æ–°å¢çš„æ³¨è§£ï¼Œç”¨äºçº¦å®šå‡½æ•°å¼æ¥å£ï¼Œ<strong>å‡½æ•°å¼æ¥å£å°±æ˜¯æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">testInterface</span>&#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testMethod</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œå½“ä½ æœ‰ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•æ—¶ï¼Œæ³¨è§£ä¼šæŠ¥çº¢æç¤ºä½ ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a0ab4a93e5dc4080a0bb5f6b52672cca~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210626114855416" style="zoom:50%;" /><h2 id="äº”ã€æ³¨è§£å®é™…åº”ç”¨åœºæ™¯"><a href="#äº”ã€æ³¨è§£å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="äº”ã€æ³¨è§£å®é™…åº”ç”¨åœºæ™¯"></a>äº”ã€æ³¨è§£å®é™…åº”ç”¨åœºæ™¯</h2><h3 id="1ï¼‰ã€ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä»£æ›¿æšä¸¾ç±»å‹"><a href="#1ï¼‰ã€ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä»£æ›¿æšä¸¾ç±»å‹" class="headerlink" title="1ï¼‰ã€ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä»£æ›¿æšä¸¾ç±»å‹"></a>1ï¼‰ã€ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£ä»£æ›¿æšä¸¾ç±»å‹</h3><p>ä¸»è¦é’ˆå¯¹æºç é˜¶æ®µæ³¨è§£</p><p>è¿™ä¸ªåœ¨æˆ‘ä»¬å®é™…å·¥ä½œä¸­ä¹ŸæŒºå¸¸ç”¨çš„ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¼€é”€å¤§ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£è¿›è¡Œæ›¿ä»£ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1ã€ä½¿ç”¨æšä¸¾</span><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">EnumFontType</span>&#123;<br>    ROBOTO_REGULAR,ROBOTO_MEDIUM,ROBOTO_BOLD<br>&#125;<br><span class="hljs-comment">//å®é™…è°ƒç”¨</span><br><span class="hljs-type">EnumFontType</span> <span class="hljs-variable">type1</span> <span class="hljs-operator">=</span> EnumFontType.ROBOTO_BOLD;<br><br><span class="hljs-comment">//================================ å®Œç¾çš„åˆ†å‰²çº¿ ==================================</span><br><span class="hljs-comment">//2ã€ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</span><br><span class="hljs-meta">@Target(&#123;ElementType.FIELD, ElementType.PARAMETER, ElementType.LOCAL_VARIABLE&#125;)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.SOURCE)</span><br><span class="hljs-meta">@IntDef(&#123;AnnotationFontType.ROBOTO_REGULAR,AnnotationFontType.ROBOTO_MEDIUM,AnnotationFontType.ROBOTO_BOLD&#125;)</span><br><span class="hljs-meta">@interface</span> AnnotationFontType&#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">ROBOTO_REGULAR</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">ROBOTO_MEDIUM</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">ROBOTO_BOLD</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;<br>&#125;<br><span class="hljs-comment">//å®é™…è°ƒç”¨</span><br><span class="hljs-meta">@AnnotationFontType</span> <span class="hljs-type">int</span> <span class="hljs-variable">type2</span> <span class="hljs-operator">=</span> AnnotationFontType.ROBOTO_MEDIUM;<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€æ³¨è§£å¤„ç†å™¨-APT"><a href="#2ï¼‰ã€æ³¨è§£å¤„ç†å™¨-APT" class="headerlink" title="2ï¼‰ã€æ³¨è§£å¤„ç†å™¨ (APT)"></a>2ï¼‰ã€æ³¨è§£å¤„ç†å™¨ (APT)</h3><p>ä¸»è¦é’ˆå¯¹ç¼–è¯‘é˜¶æ®µæ³¨è§£</p><p>å®é™…æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å®ƒï¼Œå› ä¸ºæˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›å¼€æºåº“å¦‚ ButterKnifeï¼ŒRetrofitï¼ŒArouterï¼ŒEventBus ç­‰ç­‰éƒ½ä½¿ç”¨åˆ°äº† APT æŠ€æœ¯ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™äº›è‘—åçš„å¼€æºåº“ï¼Œæ‰ä½¿å¾— APT æŠ€æœ¯è¶Šæ¥è¶Šç«ï¼Œåœ¨æœ¬ç³»åˆ—çš„ä¸‹ä¸€ç¯‡ä¸­ï¼Œæˆ‘ä¹Ÿä¼šè®²åˆ°ã€‚</p><h3 id="3ï¼‰ã€è¿è¡Œæ—¶æ³¨è§£å¤„ç†"><a href="#3ï¼‰ã€è¿è¡Œæ—¶æ³¨è§£å¤„ç†" class="headerlink" title="3ï¼‰ã€è¿è¡Œæ—¶æ³¨è§£å¤„ç†"></a>3ï¼‰ã€è¿è¡Œæ—¶æ³¨è§£å¤„ç†</h3><p>ä¸»è¦é’ˆå¯¹è¿è¡Œé˜¶æ®µæ³¨è§£</p><p>ä¸¾ä¸ªå®é™…çš„ä¾‹å­ï¼šä¾‹å¦‚æˆ‘ä»¬å¼€è½¦å»è‡ªåŠ©åŠ æ²¹æœºåŠ æ²¹ï¼Œè®¾å®šçš„ Money æ˜¯ 200ï¼Œå¦‚æœå°‘äº 200 åˆ™æç¤º <code>åŠ æ²¹ä¸­...</code>ï¼Œå¦åˆ™æç¤º <code>æ²¹å·²åŠ æ»¡</code>ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸æƒ…å†µï¼Œæç¤º <code>åŠ æ²¹å¤±è´¥</code></p><p>ç°åœ¨æˆ‘ä»¬é€šè¿‡æ³¨è§£æ¥å®ç°ä¸€ä¸‹å®ƒï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Target(ElementType.METHOD)</span><br><span class="hljs-meta">@interface</span> OilAnnotation&#123;<br>    <span class="hljs-type">double</span> <span class="hljs-title function_">maxOilMoney</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GasStation</span>&#123;<br><br>    <span class="hljs-meta">@OilAnnotation(maxOilMoney = 200)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addOil</span><span class="hljs-params">(<span class="hljs-type">double</span> money)</span>&#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">tips</span> <span class="hljs-operator">=</span> processOilAnnotation(money);<br>        System.out.println(tips);<br>    &#125;<br><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">processOilAnnotation</span><span class="hljs-params">(<span class="hljs-type">double</span> money)</span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            Class&lt;GasStation&gt; aClass = GasStation.class;<br>            <span class="hljs-comment">//è·å–å½“å‰æ–¹æ³•çš„æ³¨è§£</span><br>            <span class="hljs-type">Method</span> <span class="hljs-variable">addOilMethod</span> <span class="hljs-operator">=</span> aClass.getDeclaredMethod(<span class="hljs-string">&quot;addOil&quot;</span>, <span class="hljs-type">double</span>.class);<br>            <span class="hljs-comment">//è·å–æ–¹æ³•æ³¨è§£æ˜¯å¦å­˜åœ¨</span><br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">annotationPresent</span> <span class="hljs-operator">=</span> addOilMethod.isAnnotationPresent(OilAnnotation.class);<br>            <span class="hljs-keyword">if</span>(annotationPresent)&#123;<br>                <span class="hljs-type">OilAnnotation</span> <span class="hljs-variable">oilAnnotation</span> <span class="hljs-operator">=</span> addOilMethod.getDeclaredAnnotation(OilAnnotation.class);<br>                <span class="hljs-keyword">if</span>(money &gt;= oilAnnotation.maxOilMoney())&#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;æ²¹å·²åŠ æ»¡&quot;</span>;<br>                &#125;<span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;åŠ æ²¹ä¸­...&quot;</span>;<br>                &#125;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (NoSuchMethodException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;åŠ æ²¹å¤±è´¥&quot;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">GasStation</span>().addOil(<span class="hljs-number">100</span>);<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>åŠ æ²¹ä¸­...<br>  <br><span class="hljs-keyword">new</span> <span class="hljs-title class_">GasStation</span>().addOil(<span class="hljs-number">200</span>);<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ²¹å·²åŠ æ»¡<br></code></pre></td></tr></table></figure><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€è‡ªå®šä¹‰æ³¨è§£æ—¶ï¼Œå…ƒæ³¨è§£çš„ç»„åˆä½¿ç”¨</p><p>2ã€æ³¨è§£å±æ€§çš„å®šä¹‰ï¼Œä½¿ç”¨å’Œè·å–</p><p>3ã€ä¸€äº›å¸¸ç”¨çš„ JDK å†…ç½®æ³¨è§£</p><p>4ã€æ³¨è§£çš„å®é™…åº”ç”¨åŠè¿è¡Œé˜¶æ®µæ³¨è§£çš„ä¸€ä¸ªå®è·µ</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ­£å¼å¼€å§‹ APT æŠ€æœ¯çš„è®²è§£äº†ï¼Œæ•¬è¯·æœŸå¾…å§ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://juejin.cn/post/6844903833299058702">Java æ³¨è§£å®Œå…¨è§£æ</a></p><p><a href="https://www.jianshu.com/p/5871e1186840">ã€ŒJava è·¯çº¿ã€| æ³¨è§£ï¼ˆå« Kotlinï¼‰</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>APT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Android APT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android APT ç³»åˆ— ï¼ˆä¸€ï¼‰ï¼šAPT ç­‘åŸºä¹‹åå°„</title>
    <link href="/2022/10/10/Android%20APT%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AAPT%20%E7%AD%91%E5%9F%BA%E4%B9%8B%E5%8F%8D%E5%B0%84/"/>
    <url>/2022/10/10/Android%20APT%20%E7%B3%BB%E5%88%97%20%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9AAPT%20%E7%AD%91%E5%9F%BA%E4%B9%8B%E5%8F%8D%E5%B0%84/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101947233.jpeg" alt="amanda-phung-1w2xsyc2wwI-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>è¿™åˆæ˜¯ä¸€ä¸ªæ–°çš„ç³»åˆ—ï¼Œçµæ„Ÿæ¥æºäºæœ€è¿‘åšçš„ä¸€æ¬¡å¸ƒå±€ä¼˜åŒ–ï¼Œæˆ‘ä»¬çŸ¥é“ï¼šAndroid ä¸­å°‘é‡çš„ç³»ç»Ÿæ§ä»¶æ˜¯é€šè¿‡ <code>new</code> çš„æ–¹å¼åˆ›å»ºå‡ºæ¥çš„ï¼Œè€Œå¤§éƒ¨åˆ†æ§ä»¶å¦‚ <code>androidx.appcompat.widget</code> ä¸‹çš„æ§ä»¶ï¼Œè‡ªå®šä¹‰æ§ä»¶ï¼Œç¬¬ä¸‰æ–¹æ§ä»¶ç­‰ç­‰ï¼Œéƒ½æ˜¯é€šè¿‡åå°„åˆ›å»ºçš„ã€‚å¤§é‡çš„åå°„åˆ›å»ºå¤šå¤šå°‘å°‘ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å»è§£å†³åå°„åˆ›å»ºçš„é—®é¢˜ï¼Œæˆ‘çš„è§£å†³æ€è·¯æ˜¯ï¼š</p><blockquote><p>1ã€é€šè¿‡ç¼–å†™ Android æ’ä»¶è·å– Xml å¸ƒå±€ä¸­çš„æ‰€æœ‰æ§ä»¶ </p><p>2ã€æ‹¿åˆ°æ§ä»¶åï¼Œé€šè¿‡ APT ç”Ÿæˆç”¨ <code>new</code> çš„æ–¹å¼åˆ›å»º View çš„ç±» </p><p>3ã€æœ€åé€šè¿‡åå°„è·å–å½“å‰ç±»å¹¶åœ¨åŸºç±»é‡Œé¢å®Œæˆæ›¿æ¢</p></blockquote><p>ä¸€ä¸ªå°å°çš„å¸ƒå±€ä¼˜åŒ–ï¼Œæ¶‰åŠçš„ä¸œè¥¿è¿˜æŒºå¤šçš„ï¼ŒAndroid æ’ä»¶æˆ‘ä»¬åç»­åœ¨è®²ï¼Œè¯è¯´ Gradle ç³»åˆ—ç›®å‰åªæ›´äº†ä¸€ç¯‡ğŸ˜‚ï¼Œåˆ«æ€¥ï¼Œåé¢éƒ½ä¼šæœ‰çš„ã€‚æˆ‘ä»¬è¿™ä¸ªç³»åˆ—ä¸»è¦æ˜¯è®² APTï¼Œè€Œè®² APT ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆäº†è§£ä¸¤ä¸ªé‡ç‚¹çŸ¥è¯†ï¼š<strong>æ³¨è§£å’Œåå°„</strong></p><p>ä»Šå¤©å°±é‡ç‚¹æ¥ä»‹ç»ä¸‹åå°„</p><p><a href="https://github.com/sweetying520/AptDemo">Github Demo åœ°å€</a> , å¤§å®¶å¯ä»¥çœ‹ Demo è·Ÿéšæˆ‘çš„æ€è·¯ä¸€èµ·åˆ†æ</p><h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ</h2><p>ç®€å•æ¥è®²ï¼Œåå°„å°±æ˜¯ï¼š<strong>å·²çŸ¥ä¸€ä¸ªç±»ï¼Œå¯ä»¥è·å–è¿™ä¸ªç±»çš„æ‰€æœ‰ä¿¡æ¯</strong></p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ ¹æ®é¢å‘å¯¹è±¡å°è£…åŸåˆ™ï¼ŒJava å®ä½“ç±»çš„å±æ€§éƒ½æ˜¯ç§æœ‰çš„ï¼Œæˆ‘ä»¬ä¸èƒ½è·å–ç±»ä¸­çš„å±æ€§ã€‚ä½†æˆ‘ä»¬å¯ä»¥æ ¹æ®åå°„ï¼Œè·å–ç§æœ‰å˜é‡ã€æ–¹æ³•ã€æ„é€ æ–¹æ³•ï¼Œæ³¨è§£ï¼Œæ³›å‹ç­‰ç­‰ï¼Œéå¸¸çš„å¼ºå¤§</p><p><strong>æ³¨æ„</strong>ï¼šGoogle åœ¨ Android 9.0 åŠä¹‹åå¯¹åå°„åšäº†é™åˆ¶ï¼Œè¢«ä½¿ç”¨ <code>@hide</code> æ ‡è®°çš„å±æ€§å’Œæ–¹æ³•é€šè¿‡åå°„æ‹¿ä¸åˆ°</p><h2 id="äºŒã€åå°„ä½¿ç”¨"><a href="#äºŒã€åå°„ä½¿ç”¨" class="headerlink" title="äºŒã€åå°„ä½¿ç”¨"></a>äºŒã€åå°„ä½¿ç”¨</h2><p>ä¸‹é¢ç»™å‡ºä¸€æ®µå·²çŸ¥çš„ä»£ç ï¼Œæˆ‘ä»¬é€šè¿‡å®è·µæ¥å¯¹åå°„è¿›è¡Œè®²è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åŒ…è·¯å¾„</span><br><span class="hljs-keyword">package</span> com.dream.aptdemo;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰æ³¨è§£1</span><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@interface</span> CustomAnnotation1&#123;<br>  <br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰æ³¨è§£2</span><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@interface</span> CustomAnnotation2&#123;<br>  <br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰æ³¨è§£3</span><br><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@interface</span> CustomAnnotation3&#123;<br><br>&#125;<br><br><span class="hljs-comment">//æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ICar</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">combine</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">//è½¦</span><br><span class="hljs-meta">@CustomAnnotation3</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span>&lt;K,V&gt; &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">carDesign</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;è®¾è®¡ç¨¿&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">engine</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å‘åŠ¨æœº&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(<span class="hljs-type">long</span> kilometer)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Car run &quot;</span> + kilometer + <span class="hljs-string">&quot; km&quot;</span>);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//==============================ä¸Šé¢è¿™äº›éƒ½æ˜¯ä¸ºä¸‹é¢è¿™å°å¥”é©°æœåŠ¡çš„ğŸ˜‚===========================</span><br><span class="hljs-comment">//å¥”é©°</span><br><span class="hljs-meta">@CustomAnnotation1</span><br><span class="hljs-meta">@CustomAnnotation2</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Benz</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Car</span>&lt;String,Integer&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ICar</span> &#123;<br>  <br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">carName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;å¥”é©°&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">carColor</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ç™½è‰²&quot;</span>;<br>  <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Benz</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Benz</span><span class="hljs-params">(String carName)</span> &#123;<br>        <span class="hljs-built_in">this</span>.carName = carName;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Benz</span><span class="hljs-params">(String carName, String carColor)</span> &#123;<br>        <span class="hljs-built_in">this</span>.carName = carName;<br>        <span class="hljs-built_in">this</span>.carColor = carColor;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">combine</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ç»„è£…ä¸€å°å¥”é©°&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateMethod</span><span class="hljs-params">(String params)</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;æˆ‘æ˜¯ç§æœ‰æ–¹æ³•: &quot;</span> + params);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ‰€è®²åˆ°çš„éƒ½æ˜¯å…³äºåå°„ä¸€äº›å¸¸ç”¨çš„ Api</p><h2 id="ä¸‰ã€ç±»"><a href="#ä¸‰ã€ç±»" class="headerlink" title="ä¸‰ã€ç±»"></a>ä¸‰ã€ç±»</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ 3 ç§æ–¹å¼å»è·å–ç±»å¯¹è±¡ï¼š</p><h3 id="1ï¼‰ã€Benz-class-ï¼šç±»è·å–"><a href="#1ï¼‰ã€Benz-class-ï¼šç±»è·å–" class="headerlink" title="1ï¼‰ã€Benz.class ï¼šç±»è·å–"></a>1ï¼‰ã€<code>Benz.class</code> ï¼šç±»è·å–</h3><h3 id="2ï¼‰ã€benz-getClass-ï¼šå¯¹è±¡è·å–"><a href="#2ï¼‰ã€benz-getClass-ï¼šå¯¹è±¡è·å–" class="headerlink" title="2ï¼‰ã€benz.getClass ï¼šå¯¹è±¡è·å–"></a>2ï¼‰ã€<code>benz.getClass</code> ï¼šå¯¹è±¡è·å–</h3><h3 id="3ï¼‰ã€Class-forName-ï¼šé™æ€è·å–"><a href="#3ï¼‰ã€Class-forName-ï¼šé™æ€è·å–" class="headerlink" title="3ï¼‰ã€Class.forName ï¼šé™æ€è·å–"></a>3ï¼‰ã€<code>Class.forName</code> ï¼šé™æ€è·å–</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Benz</span> <span class="hljs-variable">benz</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Benz</span>();<br><span class="hljs-type">Class</span> <span class="hljs-variable">benzClass</span> <span class="hljs-operator">=</span> Benz.class;<br><span class="hljs-type">Class</span> <span class="hljs-variable">benzClass1</span> <span class="hljs-operator">=</span> benz.getClass();<br><span class="hljs-type">Class</span> <span class="hljs-variable">benzClass2</span> <span class="hljs-operator">=</span> Class.forName(<span class="hljs-string">&quot;com.dream.aptdemo.Benz&quot;</span>);<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š</p><p>1ã€åœ¨ä¸€ä¸ª JVM ä¸­ï¼Œä¸€ç§ç±»ï¼Œåªä¼šæœ‰ä¸€ä¸ªç±»å¯¹è±¡å­˜åœ¨ã€‚æ‰€ä»¥ä»¥ä¸Šä¸‰ç§æ–¹å¼å–å‡ºæ¥çš„ç±»å¯¹è±¡ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>2ã€æ— è®ºå“ªç§é€”å¾„è·å–ç±»å¯¹è±¡ï¼Œéƒ½ä¼šå¯¼è‡´é™æ€å±æ€§è¢«åˆå§‹åŒ–ï¼Œè€Œä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ï¼ˆé™¤äº†ç›´æ¥ä½¿ç”¨ <code>Benz.class</code> ç±»è·å–è¿™ç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼ä¸ä¼šå¯¼è‡´é™æ€å±æ€§è¢«åˆå§‹åŒ–ï¼‰</p><p><strong>ä¸‹é¢çš„æµç¨‹ä¼šç»å¸¸ä½¿ç”¨åˆ° benz å®ä¾‹å’Œ benzClass ç±»å¯¹è±¡</strong></p><h3 id="4ï¼‰ã€è·å–ç±»å"><a href="#4ï¼‰ã€è·å–ç±»å" class="headerlink" title="4ï¼‰ã€è·å–ç±»å"></a>4ï¼‰ã€è·å–ç±»å</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> benzClass.getSimpleName();<br>System.out.println(className);<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>Benz<br></code></pre></td></tr></table></figure><h3 id="5ï¼‰ã€è·å–ç±»è·¯å¾„"><a href="#5ï¼‰ã€è·å–ç±»è·¯å¾„" class="headerlink" title="5ï¼‰ã€è·å–ç±»è·¯å¾„"></a>5ï¼‰ã€è·å–ç±»è·¯å¾„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">classPath1</span> <span class="hljs-operator">=</span> benzClass.getName();<br><span class="hljs-type">String</span> <span class="hljs-variable">classPath2</span> <span class="hljs-operator">=</span> benzClass.getCanonicalName();<br>System.out.println(classPath1);<br>System.out.println(classPath2);<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>com.dream.aptdemo.Benz<br>com.dream.aptdemo.Benz<br></code></pre></td></tr></table></figure><p>è¿™é‡Œå¯èƒ½å¤§å®¶ä¼šæœ‰ä¸ªç–‘é—®ï¼š<code>benzClass.getName()</code> å’Œ <code>benzClass.getCanonicalName()</code> æœ‰å•¥åŒºåˆ«å—ï¼Ÿ</p><p>ä»ä¸Šé¢æ‰“å°ç»“æœæ¥çœ‹ï¼Œæ²¡å•¥åŒºåˆ«ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨ Benz è¿™ä¸ªé‡Œé¢åŠ ä¸ªå†…éƒ¨ç±»ï¼Œç„¶åè·å–å†…éƒ¨ç±»çš„è·¯å¾„ï¼Œä½ å°±ä¼šçœ‹åˆ°åŒºåˆ«äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//...</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Benz</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Car</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ICar</span> &#123;<br>    <span class="hljs-comment">//...</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClass</span>&#123;<br>        <br>    &#125;<br>&#125;<br><br>Class&lt;Benz.InnerClass&gt; innerClass = Benz.InnerClass.class;<br>System.out.println(innerClass.getName());<br>System.out.println(innerClass.getCanonicalName());<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>com.dream.aptdemo.Benz$InnerClass<br>com.dream.aptdemo.Benz.InnerClass<br></code></pre></td></tr></table></figure><p>çœ‹åˆ°åŒºåˆ«äº†å§ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç»“è®ºï¼š<strong>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>getCanonicalName</code>å’Œ <code>getName</code> è·å–åˆ°çš„éƒ½æ˜¯åŒ…å«è·¯å¾„çš„ç±»åã€‚ä½†å†…éƒ¨ç±»æœ‰ç‚¹ç‰¹æ®Šï¼ŒgetName è·å–çš„æ˜¯è·¯å¾„.ç±»å$å†…éƒ¨ç±»</strong></p><h3 id="6ï¼‰ã€è·å–çˆ¶ç±»å"><a href="#6ï¼‰ã€è·å–çˆ¶ç±»å" class="headerlink" title="6ï¼‰ã€è·å–çˆ¶ç±»å"></a>6ï¼‰ã€è·å–çˆ¶ç±»å</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">fatherClassName</span> <span class="hljs-operator">=</span> benzClass.getSuperclass().getSimpleName();<br>System.out.println(fatherClassName);<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>Car<br></code></pre></td></tr></table></figure><h3 id="7ï¼‰ã€è·å–æ¥å£"><a href="#7ï¼‰ã€è·å–æ¥å£" class="headerlink" title="7ï¼‰ã€è·å–æ¥å£"></a>7ï¼‰ã€è·å–æ¥å£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">Class[] interfaces = benzClass.getInterfaces();<br><span class="hljs-keyword">for</span> (Class anInterface : interfaces) &#123;<br>    System.out.println(anInterface.getName());<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>com.dream.aptdemo.ICar<br></code></pre></td></tr></table></figure><h3 id="8ï¼‰ã€åˆ›å»ºå®ä¾‹å¯¹è±¡"><a href="#8ï¼‰ã€åˆ›å»ºå®ä¾‹å¯¹è±¡" class="headerlink" title="8ï¼‰ã€åˆ›å»ºå®ä¾‹å¯¹è±¡"></a>8ï¼‰ã€åˆ›å»ºå®ä¾‹å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·å–æ„é€ æ–¹æ³•</span><br><span class="hljs-type">Constructor</span> <span class="hljs-variable">constructor</span> <span class="hljs-operator">=</span> benzClass.getDeclaredConstructor();<br><span class="hljs-comment">//åˆ›å»ºå®ä¾‹</span><br><span class="hljs-type">Benz</span> <span class="hljs-variable">myBenz</span> <span class="hljs-operator">=</span> (Benz) constructor.newInstance();<br><span class="hljs-comment">//ä¿®æ”¹å±æ€§</span><br>myBenz.carColor = <span class="hljs-string">&quot;é»‘è‰²&quot;</span>;<br>myBenz.combine();<br>System.out.println(myBenz.carColor);<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>ç»„è£…ä¸€å°å¥”é©°<br>é»‘è‰²<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šä¸‹é¢è¦è®²çš„å…³äºå¸¦ <code>Declare</code> çš„å±æ€§å’Œæ–¹æ³•å’Œä¸å¸¦<code>Declare</code> åŒºåˆ«ï¼š</p><p><strong>1ã€å¸¦  <code>Declare</code> çš„å±æ€§å’Œæ–¹æ³•è·å–çš„æ˜¯æœ¬ç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸åŒ…å«ç»§æ‰¿å¾—æ¥çš„</strong></p><p><strong>2ã€ä¸å¸¦  <code>Declare</code> çš„å±æ€§å’Œæ–¹æ³•è·å–çš„æ˜¯æ‰€æœ‰ <code>public</code> ä¿®é¥°çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒ…å«ç»§æ‰¿å¾—æ¥çš„</strong></p><p><strong>3ã€è®¿é—® <code>private</code> ä¿®é¥°çš„å±æ€§å’Œæ–¹æ³•ï¼Œéœ€è°ƒç”¨ <code>setAccessible</code> è®¾ç½®ä¸º true ï¼Œè¡¨ç¤ºå…è®¸æˆ‘ä»¬è®¿é—®ç§æœ‰å˜é‡</strong></p><h2 id="å››ã€å±æ€§"><a href="#å››ã€å±æ€§" class="headerlink" title="å››ã€å±æ€§"></a>å››ã€å±æ€§</h2><h3 id="1ï¼‰ã€è·å–å•ä¸ªå±æ€§"><a href="#1ï¼‰ã€è·å–å•ä¸ªå±æ€§" class="headerlink" title="1ï¼‰ã€è·å–å•ä¸ªå±æ€§"></a>1ï¼‰ã€è·å–å•ä¸ªå±æ€§</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Field</span> <span class="hljs-variable">carName</span> <span class="hljs-operator">=</span> benzClass.getDeclaredField(<span class="hljs-string">&quot;carName&quot;</span>);<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€è·å–å¤šä¸ªå±æ€§"><a href="#2ï¼‰ã€è·å–å¤šä¸ªå±æ€§" class="headerlink" title="2ï¼‰ã€è·å–å¤šä¸ªå±æ€§"></a>2ï¼‰ã€è·å–å¤šä¸ªå±æ€§</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·å–æœ¬ç±»å…¨éƒ¨å±æ€§</span><br>Field[] declaredFields = benzClass.getDeclaredFields();<br><span class="hljs-keyword">for</span> (Field declaredField : declaredFields) &#123;<br>    System.out.println(<span class="hljs-string">&quot;å±æ€§: &quot;</span> + declaredField.getName());<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>å±æ€§: carName<br>å±æ€§: carColor<br><br><span class="hljs-comment">//è·å–æœ¬ç±»åŠçˆ¶ç±»å…¨éƒ¨ public ä¿®é¥°çš„å±æ€§</span><br>Field[] fields = benzClass.getFields();<br><span class="hljs-keyword">for</span> (Field field : fields) &#123;<br>    System.out.println(<span class="hljs-string">&quot;å±æ€§: &quot;</span> + field.getName());<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>å±æ€§: carColor<br>å±æ€§: engine<br></code></pre></td></tr></table></figure><h3 id="3ï¼‰ã€è®¾ç½®å…è®¸è®¿é—®ç§æœ‰å˜é‡"><a href="#3ï¼‰ã€è®¾ç½®å…è®¸è®¿é—®ç§æœ‰å˜é‡" class="headerlink" title="3ï¼‰ã€è®¾ç½®å…è®¸è®¿é—®ç§æœ‰å˜é‡"></a>3ï¼‰ã€è®¾ç½®å…è®¸è®¿é—®ç§æœ‰å˜é‡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">carName.setAccessible(<span class="hljs-literal">true</span>);<br></code></pre></td></tr></table></figure><p>4ï¼‰ã€è·å–å±æ€§å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(carName.getName());<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>carName<br></code></pre></td></tr></table></figure><p>5ï¼‰ã€è·å–å˜é‡ç±»å‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(carName.getType().getName());<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>java.lang.String<br></code></pre></td></tr></table></figure><p>6ï¼‰ã€è·å–å¯¹è±¡ä¸­è¯¥å±æ€§çš„å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">System.out.println(carName.get(benz));<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>å¥”é©°<br></code></pre></td></tr></table></figure><p>7ï¼‰ã€ç»™å±æ€§è®¾ç½®å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">carName.set(benz,<span class="hljs-string">&quot;sweetying&quot;</span>);<br>System.out.println(carName.get(benz));<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>sweetying<br></code></pre></td></tr></table></figure><h2 id="äº”ã€æ–¹æ³•"><a href="#äº”ã€æ–¹æ³•" class="headerlink" title="äº”ã€æ–¹æ³•"></a>äº”ã€æ–¹æ³•</h2><h3 id="1ï¼‰ã€è·å–å•ä¸ªæ–¹æ³•"><a href="#1ï¼‰ã€è·å–å•ä¸ªæ–¹æ³•" class="headerlink" title="1ï¼‰ã€è·å–å•ä¸ªæ–¹æ³•"></a>1ï¼‰ã€è·å–å•ä¸ªæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·å– public æ–¹æ³•</span><br><span class="hljs-type">Method</span> <span class="hljs-variable">publicMethod</span> <span class="hljs-operator">=</span> benzClass.getMethod(<span class="hljs-string">&quot;combine&quot;</span>);<br><br><span class="hljs-comment">//è·å– private æ–¹æ³•</span><br><span class="hljs-type">Method</span> <span class="hljs-variable">privateMethod</span> <span class="hljs-operator">=</span> benzClass.getDeclaredMethod(<span class="hljs-string">&quot;privateMethod&quot;</span>,String.class);<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€è·å–å¤šä¸ªæ–¹æ³•"><a href="#2ï¼‰ã€è·å–å¤šä¸ªæ–¹æ³•" class="headerlink" title="2ï¼‰ã€è·å–å¤šä¸ªæ–¹æ³•"></a>2ï¼‰ã€è·å–å¤šä¸ªæ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·å–æœ¬ç±»å…¨éƒ¨æ–¹æ³•</span><br>Method[] declaredMethods = benzClass.getDeclaredMethods();<br><span class="hljs-keyword">for</span> (Method declaredMethod : declaredMethods) &#123;<br>    System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å: &quot;</span> + declaredMethod.getName());<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ–¹æ³•å: privateMethod<br>æ–¹æ³•å: combine<br><br><br><span class="hljs-comment">//è·å–æœ¬ç±»åŠçˆ¶ç±»å…¨éƒ¨ public ä¿®é¥°çš„æ–¹æ³•</span><br>Method[] methods = benzClass.getMethods();<br><span class="hljs-keyword">for</span> (Method method : methods) &#123;<br>    System.out.println(<span class="hljs-string">&quot;æ–¹æ³•å: &quot;</span> + method.getName());<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ å› ä¸ºæ‰€æœ‰ç±»é»˜è®¤ç»§æ‰¿ Object , æ‰€ä»¥æ‰“å°äº† Object çš„ä¸€äº›æ–¹æ³•</span><br>æ–¹æ³•å: combine<br>æ–¹æ³•å: run<br>æ–¹æ³•å: wait<br>æ–¹æ³•å: wait<br>æ–¹æ³•å: wait<br>æ–¹æ³•å: equals<br>æ–¹æ³•å: toString<br>æ–¹æ³•å: hashCode<br>æ–¹æ³•å: getClass<br>æ–¹æ³•å: notify<br>æ–¹æ³•å: notifyAll<br></code></pre></td></tr></table></figure><h3 id="3ï¼‰ã€æ–¹æ³•è°ƒç”¨"><a href="#3ï¼‰ã€æ–¹æ³•è°ƒç”¨" class="headerlink" title="3ï¼‰ã€æ–¹æ³•è°ƒç”¨"></a>3ï¼‰ã€æ–¹æ³•è°ƒç”¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Method</span> <span class="hljs-variable">privateMethod</span> <span class="hljs-operator">=</span> benzClass.getDeclaredMethod(<span class="hljs-string">&quot;privateMethod&quot;</span>,String.class);<br>privateMethod.setAccessible(<span class="hljs-literal">true</span>);<br>privateMethod.invoke(benz,<span class="hljs-string">&quot;æ¥æ”¶ä¼ å…¥çš„å‚æ•°&quot;</span>);<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æˆ‘æ˜¯ç§æœ‰æ–¹æ³•: æ¥æ”¶ä¼ å…¥çš„å‚æ•°<br></code></pre></td></tr></table></figure><h2 id="å…­ã€æ„é€ æ–¹æ³•"><a href="#å…­ã€æ„é€ æ–¹æ³•" class="headerlink" title="å…­ã€æ„é€ æ–¹æ³•"></a>å…­ã€æ„é€ æ–¹æ³•</h2><h3 id="1ï¼‰ã€è·å–å•ä¸ªæ„é€ æ–¹æ³•"><a href="#1ï¼‰ã€è·å–å•ä¸ªæ„é€ æ–¹æ³•" class="headerlink" title="1ï¼‰ã€è·å–å•ä¸ªæ„é€ æ–¹æ³•"></a>1ï¼‰ã€è·å–å•ä¸ªæ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·å–æœ¬ç±»å•ä¸ªæ„é€ æ–¹æ³•</span><br><span class="hljs-type">Constructor</span> <span class="hljs-variable">declaredConstructor</span> <span class="hljs-operator">=</span> benzClass.getDeclaredConstructor(String.class);<br><br><span class="hljs-comment">//è·å–æœ¬ç±»å•ä¸ª public ä¿®é¥°çš„æ„é€ æ–¹æ³•</span><br><span class="hljs-type">Constructor</span> <span class="hljs-variable">singleConstructor</span> <span class="hljs-operator">=</span> benzClass.getConstructor(String.class,String.class);<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€è·å–å¤šä¸ªæ„é€ æ–¹æ³•"><a href="#2ï¼‰ã€è·å–å¤šä¸ªæ„é€ æ–¹æ³•" class="headerlink" title="2ï¼‰ã€è·å–å¤šä¸ªæ„é€ æ–¹æ³•"></a>2ï¼‰ã€è·å–å¤šä¸ªæ„é€ æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·å–æœ¬ç±»å…¨éƒ¨æ„é€ æ–¹æ³•</span><br>Constructor[] declaredConstructors = benzClass.getDeclaredConstructors();<br><span class="hljs-keyword">for</span> (Constructor declaredConstructor1 : declaredConstructors) &#123;<br>    System.out.println(<span class="hljs-string">&quot;æ„é€ æ–¹æ³•: &quot;</span> + declaredConstructor1);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ„é€ æ–¹æ³•: <span class="hljs-keyword">public</span> com.dream.aptdemo.Benz()<br>æ„é€ æ–¹æ³•: <span class="hljs-keyword">public</span> com.dream.aptdemo.Benz(java.lang.String,java.lang.String)<br>æ„é€ æ–¹æ³•: <span class="hljs-keyword">private</span> com.dream.aptdemo.Benz(java.lang.String)<br><br><br><span class="hljs-comment">//è·å–å…¨éƒ¨ public æ„é€ æ–¹æ³•, ä¸åŒ…å«çˆ¶ç±»çš„æ„é€ æ–¹æ³•</span><br>Constructor[] constructors = benzClass.getConstructors();<br><span class="hljs-keyword">for</span> (Constructor constructor1 : constructors) &#123;<br>    System.out.println(<span class="hljs-string">&quot;æ„é€ æ–¹æ³•: &quot;</span> + constructor1);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ„é€ æ–¹æ³•: <span class="hljs-keyword">public</span> com.dream.aptdemo.Benz()<br>æ„é€ æ–¹æ³•: <span class="hljs-keyword">public</span> com.dream.aptdemo.Benz(java.lang.String,java.lang.String)<br></code></pre></td></tr></table></figure><h3 id="3ï¼‰ã€æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡"><a href="#3ï¼‰ã€æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡" class="headerlink" title="3ï¼‰ã€æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡"></a>3ï¼‰ã€æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä»¥ä¸Šé¢ declaredConstructor ä¸ºä¾‹</span><br>declaredConstructor.setAccessible(<span class="hljs-literal">true</span>);<br><span class="hljs-type">Benz</span> <span class="hljs-variable">declareBenz</span> <span class="hljs-operator">=</span> (Benz) declaredConstructor.newInstance(<span class="hljs-string">&quot;&quot;</span>);<br>System.out.println(declareBenz.carColor);<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>ç™½è‰²<br><br><span class="hljs-comment">//ä»¥ä¸Šé¢ singleConstructor ä¸ºä¾‹</span><br><span class="hljs-type">Benz</span> <span class="hljs-variable">singleBenz</span> <span class="hljs-operator">=</span> (Benz) singleConstructor.newInstance(<span class="hljs-string">&quot;å¥”é©° S &quot;</span>,<span class="hljs-string">&quot;é¦™æ§Ÿé‡‘&quot;</span>);<br>System.out.println(singleBenz.carColor);<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>é¦™æ§Ÿé‡‘<br></code></pre></td></tr></table></figure><h2 id="ä¸ƒã€æ³›å‹"><a href="#ä¸ƒã€æ³›å‹" class="headerlink" title="ä¸ƒã€æ³›å‹"></a>ä¸ƒã€æ³›å‹</h2><h3 id="1ï¼‰ã€è·å–çˆ¶ç±»çš„æ³›å‹"><a href="#1ï¼‰ã€è·å–çˆ¶ç±»çš„æ³›å‹" class="headerlink" title="1ï¼‰ã€è·å–çˆ¶ç±»çš„æ³›å‹"></a>1ï¼‰ã€è·å–çˆ¶ç±»çš„æ³›å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Type</span> <span class="hljs-variable">genericType</span> <span class="hljs-operator">=</span> benzClass.getGenericSuperclass();<br><span class="hljs-keyword">if</span> (genericType <span class="hljs-keyword">instanceof</span> ParameterizedType) &#123;<br>   Type[] actualType = ((ParameterizedType) genericType).getActualTypeArguments();<br>   <span class="hljs-keyword">for</span> (Type type : actualType) &#123;<br>       System.out.println(type.getTypeName());<br>   &#125;<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>java.lang.String<br>java.lang.Integer<br></code></pre></td></tr></table></figure><h2 id="å…«ã€æ³¨è§£"><a href="#å…«ã€æ³¨è§£" class="headerlink" title="å…«ã€æ³¨è§£"></a>å…«ã€æ³¨è§£</h2><h3 id="1ï¼‰ã€è·å–å•ä¸ªæ³¨è§£"><a href="#1ï¼‰ã€è·å–å•ä¸ªæ³¨è§£" class="headerlink" title="1ï¼‰ã€è·å–å•ä¸ªæ³¨è§£"></a>1ï¼‰ã€è·å–å•ä¸ªæ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·å–å•ä¸ªæœ¬ç±»æˆ–çˆ¶ç±»æ³¨è§£</span><br><span class="hljs-type">Annotation</span> <span class="hljs-variable">annotation1</span> <span class="hljs-operator">=</span> benzClass.getAnnotation(CustomAnnotation1.class);<br>System.out.println(annotation1.annotationType().getSimpleName());<br><span class="hljs-type">Annotation</span> <span class="hljs-variable">annotation3</span> <span class="hljs-operator">=</span> benzClass.getAnnotation(CustomAnnotation3.class);<br>System.out.println(annotation3.annotationType().getSimpleName());<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>CustomAnnotation1<br>CustomAnnotation3<br><br><span class="hljs-comment">//è·å–å•ä¸ªæœ¬ç±»æ³¨è§£</span><br><span class="hljs-type">Annotation</span> <span class="hljs-variable">declaredAnnotation1</span> <span class="hljs-operator">=</span> benzClass.getDeclaredAnnotation(CustomAnnotation2.class);<br>System.out.println(declaredAnnotation1.annotationType().getSimpleName());<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>CustomAnnotation2<br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€è·å–å…¨éƒ¨æ³¨è§£"><a href="#2ï¼‰ã€è·å–å…¨éƒ¨æ³¨è§£" class="headerlink" title="2ï¼‰ã€è·å–å…¨éƒ¨æ³¨è§£"></a>2ï¼‰ã€è·å–å…¨éƒ¨æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è·å–æœ¬ç±»å’Œçˆ¶ç±»çš„æ³¨è§£(çˆ¶ç±»çš„æ³¨è§£éœ€ç”¨ @Inherited è¡¨ç¤ºå¯è¢«ç»§æ‰¿)</span><br>Annotation[] annotations = benzClass.getAnnotations();<br><span class="hljs-keyword">for</span> (Annotation annotation : annotations) &#123;<br>    System.out.println(<span class="hljs-string">&quot;æ³¨è§£åç§°: &quot;</span> + annotation.annotationType().getSimpleName());<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ³¨è§£åç§°: CustomAnnotation3<br>æ³¨è§£åç§°: CustomAnnotation1<br>æ³¨è§£åç§°: CustomAnnotation2<br><br><span class="hljs-comment">//è·å–æœ¬ç±»çš„æ³¨è§£</span><br>Annotation[] declaredAnnotations = benzClass.getDeclaredAnnotations();<br><span class="hljs-keyword">for</span> (Annotation declaredAnnotation : declaredAnnotations) &#123;<br>    System.out.println(<span class="hljs-string">&quot;æ³¨è§£åç§°: &quot;</span> + declaredAnnotation.annotationType().getSimpleName());<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>æ³¨è§£åç§°: CustomAnnotation1<br>æ³¨è§£åç§°: CustomAnnotation2<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæˆ‘ä»¬æŠŠåå°„å¤§éƒ¨åˆ†çŸ¥è¯†ç‚¹éƒ½è®²å®Œäº†ï¼Œå¯ä»¥è¯´åå°„æ˜¯éå¸¸çš„å¼ºå¤§ï¼Œä½†æ˜¯å­¦ä¹ äº†ä¹‹åï¼Œä½ å¯èƒ½ä¼šä¸çŸ¥é“è¯¥å¦‚ä½•ä½¿ç”¨ï¼Œåè€Œè§‰å¾—è¿˜ä¸å¦‚ç›´æ¥è°ƒç”¨æ–¹æ³•æ¥çš„ç›´æ¥å’Œæ–¹ä¾¿ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡å®è·µæ¥æ„Ÿå—ä¸€ä¸‹ã€‚</p><h2 id="ä¹ã€åå°„å®è·µ"><a href="#ä¹ã€åå°„å®è·µ" class="headerlink" title="ä¹ã€åå°„å®è·µ"></a>ä¹ã€åå°„å®è·µ</h2><p>éœ€æ±‚å¤§æ¦‚å°±æ˜¯ï¼šé€šè¿‡åå°é…ç½®ä¸‹å‘ï¼Œå®Œæˆ App ä¸šåŠ¡åŠŸèƒ½çš„åˆ‡æ¢ã€‚å› ä¸ºåªæ˜¯æ¨¡æ‹Ÿï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä»¥é€šè¿‡è¯»å–æœ¬åœ°é…ç½®æ–‡ä»¶å®Œæˆ App ä¸šåŠ¡åŠŸèƒ½çš„åˆ‡æ¢ï¼š</p><p>1ï¼‰ã€é¦–å…ˆå‡†å¤‡ä¸¤ä¸ªä¸šåŠ¡ç±»ï¼Œå‡è®¾ä»–ä»¬çš„åŠŸèƒ½éƒ½å¾ˆå¤æ‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åŒ…å</span><br><span class="hljs-keyword">package</span> com.dream.aptdemo;<br><br><span class="hljs-comment">//ä¸šåŠ¡1</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Business1</span> &#123;<br> <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doBusiness1Function</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å¤æ‚ä¸šåŠ¡åŠŸèƒ½1&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//ä¸šåŠ¡2</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Business2</span> &#123;<br> <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doBusiness2Function</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;å¤æ‚ä¸šåŠ¡åŠŸèƒ½2&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ï¼‰ã€éåå°„æ–¹å¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>  <br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">//ä¸šåŠ¡åŠŸèƒ½1</span><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Business1</span>().doBusiness1Function();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å‡è®¾è¿™ä¸ªæ—¶å€™éœ€è¦ä»ç¬¬ä¸€ä¸ªä¸šåŠ¡åŠŸèƒ½åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªä¸šåŠ¡åŠŸèƒ½ï¼Œä½¿ç”¨éåå°„æ–¹å¼ï¼Œå¿…é¡»ä¿®æ”¹ä»£ç ï¼Œå¹¶ä¸”é‡æ–°ç¼–è¯‘è¿è¡Œï¼Œæ‰å¯ä»¥è¾¾åˆ°æ•ˆæœã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„å»é€šè¿‡è¯»å–é…ç½®ä»è€Œå®ŒæˆåŠŸèƒ½çš„åˆ‡æ¢ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦ä¿®æ”¹ä»£ç ä¸”ä»£ç å˜å¾—æ›´åŠ é€šç”¨</p><p>3ï¼‰ã€åå°„æ–¹å¼</p><p>1ã€é¦–å…ˆå‡†å¤‡ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4de69825228a40dbb491fc9b3f456922~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20210625180301557"></p><p>2ã€è¯»å–é…ç½®æ–‡ä»¶ï¼Œåå°„åˆ›å»ºå®ä¾‹å¹¶è°ƒç”¨æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>  <br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//è·å–æ–‡ä»¶</span><br>            <span class="hljs-type">File</span> <span class="hljs-variable">springConfigFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;/Users/zhouying/AndroidStudioProjects/AptDemo/config.txt&quot;</span>);<br>            <span class="hljs-comment">//è¯»å–é…ç½®</span><br>            Properties config= <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            config.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(springConfigFile));<br>            <span class="hljs-comment">//è·å–ç±»è·¯å¾„</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">classPath</span> <span class="hljs-operator">=</span> (String) config.get(<span class="hljs-string">&quot;class&quot;</span>);<br>            <span class="hljs-comment">//è·å–æ–¹æ³•å</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> (String) config.get(<span class="hljs-string">&quot;method&quot;</span>);<br><br>            <span class="hljs-comment">//åå°„åˆ›å»ºå®ä¾‹å¹¶è°ƒç”¨æ–¹æ³•</span><br>            <span class="hljs-type">Class</span> <span class="hljs-variable">aClass</span> <span class="hljs-operator">=</span> Class.forName(classPath);<br>            <span class="hljs-type">Constructor</span> <span class="hljs-variable">declaredConstructor</span> <span class="hljs-operator">=</span> aClass.getDeclaredConstructor();<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">o</span> <span class="hljs-operator">=</span> declaredConstructor.newInstance();<br>            <span class="hljs-type">Method</span> <span class="hljs-variable">declaredMethod</span> <span class="hljs-operator">=</span> aClass.getDeclaredMethod(methodName);<br>            declaredMethod.invoke(o);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3ã€å®Œæˆä¸Šé¢ä¸¤æ­¥åï¼Œåç»­æˆ‘ä»¬å°±åªéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶å°±èƒ½å®Œæˆ App ä¸šåŠ¡åŠŸèƒ½çš„åˆ‡æ¢äº†</p><h2 id="åã€æ€»ç»“"><a href="#åã€æ€»ç»“" class="headerlink" title="åã€æ€»ç»“"></a>åã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€åå°„å¸¸ç”¨ Api çš„ä½¿ç”¨ï¼Œæ³¨æ„åœ¨è®¿é—®ç§æœ‰å±æ€§å’Œæ–¹æ³•æ—¶ï¼Œè°ƒç”¨ <code>setAccessible</code> è®¾ç½®ä¸º true ï¼Œè¡¨ç¤ºå…è®¸æˆ‘ä»¬è®¿é—®ç§æœ‰å˜é‡</p><p>2ã€å®è·µé€šè¿‡åå°„å®Œæˆ App ä¸šåŠ¡åŠŸèƒ½çš„åˆ‡æ¢</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®²æ³¨è§£ï¼Œæ•¬è¯·æœŸå¾…å§</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://blog.csdn.net/qq_41464123/article/details/109248009?utm_source=app">Javaåå°„æœ‰å¤šå¼ºï¼Ÿ ä»–æ‹¥æœ‰è¿™äº”å¤§ç¥å¥‡åŠŸèƒ½ï¼</a></p><p><a href="https://how2j.cn/k/reflection/reflection-class/108.html">HOW2J åå°„éƒ¨åˆ†</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
      <category>APT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Android</tag>
      
      <tag>Android APT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutter ç³»åˆ—ï¼ˆå…«ï¼‰ï¼šFlutter ä¸ Android çš„ä½ æ¥æˆ‘å¾€</title>
    <link href="/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9AFlutter%20%E4%B8%8E%20Android%20%E7%9A%84%E4%BD%A0%E6%9D%A5%E6%88%91%E5%BE%80/"/>
    <url>/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9AFlutter%20%E4%B8%8E%20Android%20%E7%9A%84%E4%BD%A0%E6%9D%A5%E6%88%91%E5%BE%80/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101704046.jpeg" alt="rapeseed-6599950_1920"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† Flutter ä¸­çš„è·¯ç”±ï¼š</p><blockquote><p>1ã€åŸºæœ¬è·¯ç”±</p><p>2ã€å‘½åè·¯ç”±</p><p>3ã€è¿”å›ä¸Šä¸€çº§</p><p>4ã€æ›¿æ¢è·¯ç”±</p><p>5ã€è¿”å›åˆ°æ ¹è·¯ç”±</p></blockquote><p>ä»¥åŠé›†æˆ http åº“è¿›è¡Œ https è¯·æ±‚å®æˆ˜ã€‚</p><p>è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/7142650961868095524#heading-11">Flutter ç³»åˆ—ï¼ˆä¸ƒï¼‰ï¼šFlutter è·¯ç”±å’Œ HTTPS è¯·æ±‚å®æˆ˜</a>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ Flutter ä¸ Android åŸç”Ÿçš„äº¤äº’ä¸é€šä¿¡è¿›è¡Œä»‹ç»</p><p>æˆ‘åš Android åŸç”Ÿå¼€å‘æ—¶ï¼Œé€šå¸¸ä¼šä»¥ç»„ä»¶åŒ–çš„æ–¹å¼å»è¿›è¡Œï¼Œæ ¹æ®ä¸šåŠ¡åˆ’åˆ†ä¸åŒçš„ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å·¥ç¨‹ï¼Œå¯ä»¥è¿›è¡Œç‹¬ç«‹çš„è¿è¡Œå’Œè°ƒè¯•ï¼Œå½“éœ€è¦å‘ç‰ˆæ—¶ï¼Œæˆ‘ä»¬ä¼šå°†æ¯ä¸ªç»„ä»¶æ‰“æˆ aar åŒ…å¹¶ä¸Šä¼ åˆ° Maven ç§æœä»“åº“ï¼Œç„¶åæ•´åˆåˆ° App å£³å·¥ç¨‹ä¸­ï¼Œæœ€ç»ˆè¿›è¡Œæ‰“åŒ…ä¸Šçº¿ã€‚åœ¨è¿™ä¸ªå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»„ä»¶ä¹‹é—´æ˜¯éœ€è¦è¿›è¡Œé€šä¿¡çš„ï¼Œå¦‚æœéœ€è¦é€šä¿¡çš„ç»„ä»¶éƒ½æ˜¯ Android åŸç”Ÿå¼€å‘çš„ï¼Œé‚£ä¹ˆå¯ä»¥é€‰æ‹©ä¸€ä¸ªè·¯ç”±æ¡†æ¶è¿›è¡Œé€šä¿¡ï¼Œä¾‹å¦‚ï¼šArouterã€‚</p><p>ä½†æ˜¯æˆ‘ä»¬æœ‰äº›ä¸šåŠ¡ç»„ä»¶æ˜¯ä½¿ç”¨ Flutter å¼€å‘çš„ï¼Œå› æ­¤è¿™é‡Œå°±æ¶‰åŠåˆ° Flutter ä¸ Android åŸç”Ÿçš„é€šä¿¡ï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯å¦‚ä½•è¿›è¡Œé€šä¿¡çš„å‘¢ï¼Ÿä¸”å¬æˆ‘ç»†ç»†é“æ¥</p><h2 id="ä¸€ã€Android-å£³å·¥ç¨‹é›†æˆ-Flutter-ç»„ä»¶"><a href="#ä¸€ã€Android-å£³å·¥ç¨‹é›†æˆ-Flutter-ç»„ä»¶" class="headerlink" title="ä¸€ã€Android å£³å·¥ç¨‹é›†æˆ Flutter ç»„ä»¶"></a>ä¸€ã€Android å£³å·¥ç¨‹é›†æˆ Flutter ç»„ä»¶</h2><p>1ã€æ‰“å¼€ AndroidStudio ï¼Œåˆ›å»ºä¸€ä¸ª Android å·¥ç¨‹ AndroidAndFlutterInteractiveï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf366145424946f193676017f1a2bc42~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220918215022577" width="50%" /><p>2ã€æ¥ç€åœ¨åˆ›å»ºä¸€ä¸ª Flutter å·¥ç¨‹ fluttermoduleï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/63073b782a5e4716a0a0a8659673cc28~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220918215214876" width="50%" /><p>main.dart æ–‡ä»¶åˆå§‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() =&gt; runApp(<span class="hljs-keyword">const</span> MyApp());<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="hljs-keyword">super</span>(key: key);<br><br>  <span class="hljs-comment">// This widget is the root of your application.</span><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> MaterialApp(<br>      title: <span class="hljs-string">&#x27;Flutter Demo&#x27;</span>,<br>      theme: ThemeData(<br>        primarySwatch: Colors.blue,<br>      ),<br>      home: <span class="hljs-keyword">const</span> MyHomePage(title: <span class="hljs-string">&#x27;Flutter Demo Home Page&#x27;</span>),<br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-keyword">const</span> MyHomePage(&#123;Key? key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.title&#125;) : <span class="hljs-keyword">super</span>(key: key);<br><br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> title;<br><br>  <span class="hljs-meta">@override</span><br>  State&lt;MyHomePage&gt; createState() =&gt; _MyHomePageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyHomePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyHomePage</span>&gt; </span>&#123;<br>  <span class="hljs-built_in">int</span> _counter = <span class="hljs-number">0</span>;<br><br>  <span class="hljs-keyword">void</span> _incrementCounter() &#123;<br>    setState(() &#123;<br>      _counter++;<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>      appBar: AppBar(<br>        title: Text(widget.title),<br>      ),<br>      body: Center(<br>        child: Column(<br>          mainAxisAlignment: MainAxisAlignment.center,<br>          children: &lt;Widget&gt;[<br>            <span class="hljs-keyword">const</span> Text(<br>              <span class="hljs-string">&#x27;You have clicked the button this many times:&#x27;</span>,<br>            ),<br>            Text(<br>              <span class="hljs-string">&#x27;<span class="hljs-subst">$_counter</span>&#x27;</span>,<br>              style: Theme.of(context).textTheme.headline4,<br>            ),<br>          ],<br>        ),<br>      ),<br>      floatingActionButton: FloatingActionButton(<br>        onPressed: _incrementCounter,<br>        tooltip: <span class="hljs-string">&#x27;Increment&#x27;</span>,<br>        child: <span class="hljs-keyword">const</span> Icon(Icons.add),<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3ã€åœ¨ Flutter å·¥ç¨‹ä¸­æ‰§è¡Œ <code>flutter build aar</code> å‘½ä»¤æˆ–è€…ç›´æ¥ä½¿ç”¨ AndroidStudio ä¸Šçš„å¯è§†åŒ–æ“ä½œï¼š</p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d61a34bea63840d3a74083913adccf2a~tplv-k3u1fbpfcp-watermark.image?" alt="202209221609588.png" width="70%" /><p>æ‰§è¡Œå®Œåä¼šæœ‰å¦‚ä¸‹æç¤ºï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dart">Consuming the Module<br>  <span class="hljs-number">1.</span> Open &lt;host&gt;/app/build.gradle<br>  <span class="hljs-number">2.</span> Ensure you have the repositories configured, otherwise add them:<br><br>      <span class="hljs-built_in">String</span> storageUrl = System.env.FLUTTER_STORAGE_BASE_URL ?: <span class="hljs-string">&quot;https://storage.googleapis.com&quot;</span><br>      repositories &#123;<br>        maven &#123;<br>            url <span class="hljs-string">&#x27;/Users/zhouying/codeandnotes/Flutter/fluttermodule/build/host/outputs/repo&#x27;</span><br>        &#125;<br>        maven &#123;<br>            url <span class="hljs-string">&quot;<span class="hljs-subst">$storageUrl</span>/download.flutter.io&quot;</span><br>        &#125;<br>      &#125;<br><br>  <span class="hljs-number">3.</span> Make the host app depend <span class="hljs-keyword">on</span> the Flutter module:<br><br>    dependencies &#123;<br>      debugImplementation <span class="hljs-string">&#x27;com.example.fluttermodule:flutter_debug:1.0&#x27;</span><br>      profileImplementation <span class="hljs-string">&#x27;com.example.fluttermodule:flutter_profile:1.0&#x27;</span><br>      releaseImplementation <span class="hljs-string">&#x27;com.example.fluttermodule:flutter_release:1.0&#x27;</span><br>    &#125;<br><br><br>  <span class="hljs-number">4.</span> Add the `profile` build type:<br><br>    android &#123;<br>      buildTypes &#123;<br>        profile &#123;<br>          initWith debug<br>        &#125;<br>      &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><p>å¤§è‡´æ„æ€å°±æ˜¯åœ¨æˆ‘ä»¬åˆ›å»ºçš„ Android å·¥ç¨‹ä¸­é…ç½®ç”Ÿæˆçš„ Flutter aar çš„ä»“åº“åœ°å€ï¼Œç„¶åå¼•ç”¨è¿™ä¸ª aarï¼Œå¤§å®¶æŒ‰ç…§ä¸Šè¿°æ­¥éª¤é…ç½®å³å¯</p><p><strong>æ³¨æ„</strong>ï¼šä¸Šè¿°æ¼”ç¤ºç”Ÿæˆçš„ Flutter aar åªæ˜¯å­˜åœ¨æœ¬åœ°ï¼Œå®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šè‡ªå·±ç¼–å†™è„šæœ¬ç”Ÿæˆ aar å¹¶ä¸Šä¼ åˆ° Maven ç§æœä»“åº“</p><p>é…ç½®å®Œæˆåï¼ŒåŒæ­¥ä¸€ä¸‹é¡¹ç›®ï¼Œå¦‚æœæ²¡å•¥æŠ¥é”™ï¼Œæˆ‘ä»¬å°±ç®—æ˜¯æˆåŠŸé›†æˆäº† Flutter ç»„ä»¶</p><h2 id="äºŒã€Android-è°ƒèµ·-Flutter-é¡µé¢ï¼ˆFlutterActivityï¼‰"><a href="#äºŒã€Android-è°ƒèµ·-Flutter-é¡µé¢ï¼ˆFlutterActivityï¼‰" class="headerlink" title="äºŒã€Android è°ƒèµ· Flutter é¡µé¢ï¼ˆFlutterActivityï¼‰"></a>äºŒã€Android è°ƒèµ· Flutter é¡µé¢ï¼ˆFlutterActivityï¼‰</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å¯¹ Android å·¥ç¨‹è¿›è¡Œé…ç½®ï¼Œè®© Flutter é¡µé¢æ˜¾ç¤ºå‡ºæ¥</p><p>1ã€åœ¨ Android å·¥ç¨‹çš„ AndroidManifest.xml æ–‡ä»¶ä¸­æ·»åŠ  FlutterActivity</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dart">&lt;!--æ³¨å†ŒFlutterActivity--&gt;<br>&lt;activity<br>    android:name=<span class="hljs-string">&quot;io.flutter.embedding.android.FlutterActivity&quot;</span><br>    android:configChanges=<span class="hljs-string">&quot;orientation|keyboardHidden|screenSize&quot;</span><br>    android:hardwareAccelerated=<span class="hljs-string">&quot;true&quot;</span><br>    android:windowSoftInputMode=<span class="hljs-string">&quot;adjustResize&quot;</span> /&gt;<br></code></pre></td></tr></table></figure><p>2ã€ç¼–å†™ä¸€ä¸ª button è·³è½¬åˆ° Flutter é¡µé¢</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//1ã€activity_main.xml</span><br>&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;<br>&lt;LinearLayout xmlns:android=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span><br>    xmlns:tools=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span><br>    android:layout_width=<span class="hljs-string">&quot;match_parent&quot;</span><br>    android:layout_height=<span class="hljs-string">&quot;match_parent&quot;</span><br>    android:orientation=<span class="hljs-string">&quot;vertical&quot;</span><br>    tools:context=<span class="hljs-string">&quot;.MainActivity&quot;</span>&gt;<br><br>    &lt;Button<br>        android:layout_width=<span class="hljs-string">&quot;match_parent&quot;</span><br>        android:layout_height=<span class="hljs-string">&quot;wrap_content&quot;</span><br>        android:layout_marginHorizontal=<span class="hljs-string">&quot;20dp&quot;</span><br>        android:textAllCaps=<span class="hljs-string">&quot;false&quot;</span><br>        android:onClick=<span class="hljs-string">&quot;toFlutterActivity&quot;</span><br>        android:text=<span class="hljs-string">&quot;è·³è½¬ FlutterActivity&quot;</span><br>        tools:ignore=<span class="hljs-string">&quot;HardcodedText,UsingOnClickInXml&quot;</span> /&gt;<br><br>&lt;/LinearLayout&gt;<br><br><span class="hljs-comment">//2ã€MainActivity</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> : <span class="hljs-title">AppCompatActivity</span>() </span>&#123;<br>    <br>    <span class="hljs-meta">@SuppressLint</span>(<span class="hljs-string">&quot;SetTextI18n&quot;</span>)<br>    override fun onCreate(savedInstanceState: Bundle?) &#123;<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br>    &#125;<br><br>    <span class="hljs-comment">//è·³è½¬åˆ° FlutterActivity</span><br>    fun toFlutterActivity(view: View) &#123;<br>        val intent = FlutterActivity.createDefaultIntent(<span class="hljs-keyword">this</span>)<br>        startActivity(intent)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3ã€æ•ˆæœå±•ç¤ºï¼š</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/120d15e966e24a588e0a212d36ffbd7d~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker.gif" width="30%" /><p>ä¸Šè¿°æ•ˆæœå›¾è™½ç„¶è·³è¿‡å»äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç‚¹å‡» button æ—¶ä¸€ä¸ªæ˜æ˜¾çš„åœé¡¿æ„Ÿï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ï¼Œæ¥ä¸‹æ¥ä»‹ç»ä¸€ç§é¢„åˆå§‹åŒ– Flutter çš„æ–¹å¼</p><h3 id="2-1ã€Android-é¢„åˆå§‹åŒ–-Flutter-é¡µé¢è·³è½¬"><a href="#2-1ã€Android-é¢„åˆå§‹åŒ–-Flutter-é¡µé¢è·³è½¬" class="headerlink" title="2.1ã€Android é¢„åˆå§‹åŒ– Flutter é¡µé¢è·³è½¬"></a>2.1ã€Android é¢„åˆå§‹åŒ– Flutter é¡µé¢è·³è½¬</h3><p>æ ¸å¿ƒæ€æƒ³å°±æ˜¯ç¼“å­˜ FlutterEngineï¼Œç„¶åä»ç¼“å­˜ä¸­å–å‡º FlutterEngine è¿›è¡Œè·³è½¬</p><p>1ã€ä¿®æ”¹ MainActivity ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> : <span class="hljs-title">AppCompatActivity</span>() </span>&#123;<br><br>    companion object&#123;<br>        <span class="hljs-comment">//ç¼“å­˜ FlutterEngine çš„ key</span><br>        <span class="hljs-keyword">const</span> val FLUTTER_ENGINE_ID = <span class="hljs-string">&quot;default&quot;</span><br>    &#125;<br>    <span class="hljs-comment">//FlutterEngine</span><br>    private lateinit <span class="hljs-keyword">var</span> flutterEngine: FlutterEngine<br><br>    <span class="hljs-meta">@SuppressLint</span>(<span class="hljs-string">&quot;SetTextI18n&quot;</span>)<br>    override fun onCreate(savedInstanceState: Bundle?) &#123;<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_main)<br>        <span class="hljs-comment">//åˆå§‹åŒ– FlutterEngine</span><br>        flutterEngine = initFlutterEngine(FLUTTER_ENGINE_ID)<br>    &#125;<br><br>    <span class="hljs-comment">//è·³è½¬åˆ° FlutterActivity</span><br>    fun toFlutterActivity(view: View) &#123;<br>        val intent = FlutterActivity.withCachedEngine(FLUTTER_ENGINE_ID).build(<span class="hljs-keyword">this</span>)<br>        startActivity(intent)<br>    &#125;<br><br>    <span class="hljs-comment"><span class="language-markdown">/<span class="hljs-strong">**</span></span></span><br><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">     <span class="hljs-emphasis">* åˆå§‹åŒ– FlutterEngine</span></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">     *</span> ä¸€èˆ¬åœ¨è·³è½¬å‰è°ƒç”¨ï¼Œä»ç¼“å­˜ä¸­å–å‡º FlutterEngineï¼Œè¿™æ ·å¯ä»¥åŠ å¿«æˆ‘ä»¬é¡µé¢çš„ä¸€ä¸ªè·³è½¬</span></span></span><br><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">     <span class="hljs-emphasis">*/</span></span></span></span><br>    private fun initFlutterEngine(engineId: <span class="hljs-built_in">String</span>): FlutterEngine &#123;<br>        <span class="hljs-comment">//åˆ›å»º FlutterEngine</span><br>        val flutterEngine = FlutterEngine(<span class="hljs-keyword">this</span>)<br>        <span class="hljs-comment">//æŒ‡å®šè¦è·³è½¬çš„ Flutter é¡µé¢</span><br>        flutterEngine.navigationChannel.setInitialRoute(<span class="hljs-string">&quot;main&quot;</span>)<br>        flutterEngine.dartExecutor.executeDartEntrypoint(DartExecutor.DartEntrypoint.createDefault())<br>        <span class="hljs-comment">//ç¼“å­˜ FlutterEngine</span><br>        val flutterEngineCache = FlutterEngineCache.getInstance()<br>        flutterEngineCache.put(engineId,flutterEngine)<br>        <span class="hljs-keyword">return</span> flutterEngine<br>    &#125;<br><br>    override fun onDestroy() &#123;<br>        <span class="hljs-keyword">super</span>.onDestroy()<br>        <span class="hljs-comment"><span class="language-markdown"><span class="hljs-strong"><span class="hljs-emphasis">/*</span><span class="hljs-emphasis">*</span></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">         *</span> æ³¨æ„è¿™é‡Œä¸€å®šè¦é”€æ¯ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼</span></span></span><br><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">         <span class="hljs-emphasis">* å› ä¸º FlutterEngine æ¯”æ˜¾ç¤ºå®ƒçš„ FlutterActivity ç”Ÿå‘½å‘¨æœŸè¦é•¿</span></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">         *</span> å½“æˆ‘ä»¬é€€å‡º FlutterActivity æ—¶ï¼ŒFlutterEngine å¯èƒ½è¿˜ä¼šç»§ç»­æ‰§è¡Œä»£ç </span></span></span><br><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">         <span class="hljs-emphasis">* æ‰€ä»¥æˆ‘ä»¬åº”è¯¥åœ¨ FlutterActivity é€€å‡ºæ—¶è°ƒç”¨ flutterEngine.destroy åœæ­¢æ‰§è¡Œå¹¶é‡Šæ”¾èµ„æº</span></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">         *</span>/</span></span></span><br>        flutterEngine.destroy()<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€Flutter ç«¯ä¹Ÿè¦åšç›¸åº”çš„ä¿®æ”¹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> main() =&gt; runApp(getRouter(<span class="hljs-built_in">window</span>.defaultRouteName));<br><br><span class="hljs-comment">///<span class="language-markdown">æ¥æ”¶ Android è·³è½¬è¿‡æ¥çš„å¯åŠ¨è·¯ç”±å‚æ•°ï¼Œå¦‚æœåŒ¹é…ä¸Šäº†èµ°æ­£å¸¸æµç¨‹</span></span><br><span class="hljs-comment">///<span class="language-markdown">å¦‚æœæ²¡åŒ¹é…ä¸Šï¼Œåˆ™æç¤º page not found</span></span><br>Widget getRouter(<span class="hljs-built_in">String</span> routeName) &#123;<br>  <span class="hljs-keyword">switch</span>(routeName)&#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;main&quot;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> MyApp();<br>    <span class="hljs-keyword">default</span>:<br>      <span class="hljs-keyword">return</span> MaterialApp(<br>        home: Scaffold(<br>          appBar: AppBar(<br>            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&quot;Flutter Demo Home Page&quot;</span>),<br>          ),<br>          body: <span class="hljs-keyword">const</span> Center(<br>            child: Text(<br>              <span class="hljs-string">&quot;page not found&quot;</span>,<br>              style: TextStyle(<br>                fontSize: <span class="hljs-number">24</span>,<br>                color: Colors.red<br>              ),<br>            ),<br>          ),<br>        ),<br>      );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>3ã€å½“æˆ‘ä»¬ä¿®æ”¹ Flutter å·¥ç¨‹çš„ä»£ç åï¼Œé‡æ–°è¿è¡Œ Android é¡¹ç›®å¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦ï¼š</p><blockquote><p>1ã€åœ¨ Flutter å·¥ç¨‹é‡æ–°æ‰§è¡Œ <code>flutter build aar</code> å‘½ä»¤</p><p>2ã€å¾… Flutter å‘½ä»¤æ‰§è¡Œå®Œæˆï¼Œclean Android å·¥ç¨‹</p></blockquote><p>æ­¤æ—¶æˆ‘ä»¬è¿è¡Œ Android é¡¹ç›®ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ï¼š</p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e34d61c673024ce2bdc36f6c13602b0f~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker (1).gif" width="30%" /><p>å¯ä»¥çœ‹åˆ°ï¼Œé¡µé¢è·³è½¬å˜å¾—éå¸¸ä¸æ»‘</p><p>ç°åœ¨åªæ˜¯ç®€å•çš„è·³è½¬ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘æƒ³åœ¨è·³è½¬æ—¶ç»™ Flutter é¡µé¢ä¼ å€¼è¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p><h3 id="2-2ã€Android-ç»™-Flutter-é¡µé¢ä¼ å€¼"><a href="#2-2ã€Android-ç»™-Flutter-é¡µé¢ä¼ å€¼" class="headerlink" title="2.2ã€Android ç»™ Flutter é¡µé¢ä¼ å€¼"></a>2.2ã€Android ç»™ Flutter é¡µé¢ä¼ å€¼</h3><p>åˆ†æ 2.1 è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åœ¨ Android å·¥ç¨‹ä¸­è®¾ç½®äº†å¯åŠ¨è·¯ç”±ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">flutterEngine.navigationChannel.setInitialRoute(<span class="hljs-string">&quot;main&quot;</span>)<br></code></pre></td></tr></table></figure><p>ç„¶ååœ¨ Flutter ä¸­é€šè¿‡ <code>window.defaultRouteName</code> è·å–äº†è·¯ç”±</p><p>é‚£ä¹ˆæˆ‘æ˜¯å¦å¯ä»¥åœ¨å¯åŠ¨è·¯ç”±ä¸­å¤šæ·»åŠ ä¸€äº›æ•°æ®ï¼Œç„¶å Flutter è·å–åè¿›è¡Œè§£æå‘¢ï¼Ÿä¾‹å¦‚ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//1ã€æˆ‘åœ¨ Android ä¸­è¿™æ ·è®¾ç½®</span><br>flutterEngine.navigationChannel.setInitialRoute(<span class="hljs-string">&quot;main?&#123;\&quot;name\&quot;:\&quot;erdai\&quot;,\&quot;age\&quot;:18&#125;&quot;</span>)<br><br><span class="hljs-comment">//2ã€Flutter ä¸­è·å–è·¯ç”±å¹¶è¿›è¡Œè§£æ</span><br><span class="hljs-built_in">String</span> url = <span class="hljs-built_in">window</span>.defaultRouteName;<br><span class="hljs-comment">//è·å–è·¯ç”±åç§°</span><br><span class="hljs-built_in">String</span> routeName = url.substring(<span class="hljs-number">0</span>,url.indexOf(<span class="hljs-string">&quot;?&quot;</span>));<br><span class="hljs-comment">//è·å–å‚æ•°ï¼Œå°†å‚æ•°è§£æå¹¶è½¬æ¢æˆä¸€ä¸ª Map å¯¹è±¡</span><br><span class="hljs-built_in">String</span> paramsString = url.substring(url.indexOf(<span class="hljs-string">&quot;?&quot;</span>) + <span class="hljs-number">1</span>);<br><span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>,<span class="hljs-built_in">dynamic</span>&gt; paramsMap = json.decode(paramsString);<br><br></code></pre></td></tr></table></figure><p>å®é™…ä¸Šå°±æ˜¯è¿™ä¹ˆå¹²çš„ï¼Œæˆ‘ä»¬ä¿®æ”¹ Flutter ç«¯çš„ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> main()&#123;<br>  <span class="hljs-comment">//è·å– Android ä¼ è¿‡æ¥çš„è·¯ç”±</span><br>  <span class="hljs-built_in">String</span> url = <span class="hljs-built_in">window</span>.defaultRouteName;<br>  <span class="hljs-comment">//è§£æå¹¶è·å–è·¯ç”±åç§°</span><br>  <span class="hljs-built_in">String</span> routeName = url.substring(<span class="hljs-number">0</span>,url.indexOf(<span class="hljs-string">&quot;?&quot;</span>));<br>  <span class="hljs-comment">//è§£æå¹¶å°†å‚æ•°è½¬æ¢æˆä¸€ä¸ª Map å¯¹è±¡</span><br>  <span class="hljs-built_in">String</span> paramsString = url.substring(url.indexOf(<span class="hljs-string">&quot;?&quot;</span>) + <span class="hljs-number">1</span>);<br>  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>,<span class="hljs-built_in">dynamic</span>&gt; paramsMap = json.decode(paramsString);<br>  <span class="hljs-comment">//æ‰“å°å‚æ•°</span><br>  <span class="hljs-built_in">print</span>(paramsMap);<br>  runApp(getRouter(routeName));<br>&#125;<br><span class="hljs-comment">//...</span><br></code></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬å‘å¸ƒ aarï¼Œclean Android å·¥ç¨‹å¹¶é‡æ–°è¿è¡Œä¼šè¿›è¡Œå‚æ•°çš„æ‰“å°ï¼š</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6a1404b92feb4ad1b7c00c89964a619c~tplv-k3u1fbpfcp-watermark.image?" alt="202209221611327.png" width="70%" /><h2 id="ä¸‰ã€Android-åµŒå…¥-Flutter-é¡µé¢ï¼ˆFlutterFragmentï¼‰"><a href="#ä¸‰ã€Android-åµŒå…¥-Flutter-é¡µé¢ï¼ˆFlutterFragmentï¼‰" class="headerlink" title="ä¸‰ã€Android åµŒå…¥ Flutter é¡µé¢ï¼ˆFlutterFragmentï¼‰"></a>ä¸‰ã€Android åµŒå…¥ Flutter é¡µé¢ï¼ˆFlutterFragmentï¼‰</h2><p>ç±»æ¯” Android å¯åŠ¨ FlutterActivityï¼Œä¸»è¦æ˜¯é€šè¿‡ä¸¤ç§æ–¹å¼æ„å»º intent å¯¹è±¡ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//æ–¹å¼ä¸€</span><br><span class="hljs-keyword">var</span> intent: Intent = FlutterActivity.createDefaultIntent(<span class="hljs-keyword">this</span>)<br>  <br><span class="hljs-comment">//æ–¹å¼äºŒ</span><br><span class="hljs-keyword">var</span> intent = FlutterActivity<br>  .withCachedEngine(FLUTTER_ENGINE_ID)<br>  .build(<span class="hljs-keyword">this</span>)<br></code></pre></td></tr></table></figure><p>æ„å»º FlutterFragment ç±»ä¼¼ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//æ–¹å¼ä¸€</span><br><span class="hljs-keyword">var</span> flutterFragment: FlutterFragment = FlutterFragment.createDefault()<br>  <br><span class="hljs-comment">//æ–¹å¼äºŒ</span><br><span class="hljs-keyword">var</span> flutterFragment: FlutterFragment = FlutterFragment<br>     .withCachedEngine(FLUTTER_ENGINE_ID)<br>     .build()<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ Android ä»£ç  ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//1ã€æˆ‘ä»¬æ–°å»ºä¸€ä¸ª SecondActivity</span><br><span class="hljs-comment">//activity_second.xmlå†…å®¹ï¼šFrameLayout ç”¨äºæ‰¿è½½ FlutterFragment</span><br>&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;<br>&lt;FrameLayout <br>    xmlns:android=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span><br>    xmlns:tools=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span><br>    android:id=<span class="hljs-string">&quot;@+id/flFragmentContainer&quot;</span><br>    android:layout_width=<span class="hljs-string">&quot;match_parent&quot;</span><br>    android:layout_height=<span class="hljs-string">&quot;match_parent&quot;</span><br>    tools:context=<span class="hljs-string">&quot;.SecondActivity&quot;</span>/&gt;<br>      <br><span class="hljs-comment">//2ã€ä¿®æ”¹ SecondActivity</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecondActivity</span> : <span class="hljs-title">AppCompatActivity</span>() </span>&#123;<br>    companion object&#123;<br>        <span class="hljs-comment">//ç¼“å­˜ FlutterEngine çš„ key</span><br>        <span class="hljs-keyword">const</span> val FLUTTER_ENGINE_ID = <span class="hljs-string">&quot;default&quot;</span><br>    &#125;<br>    <span class="hljs-comment">//FlutterEngine</span><br>    private lateinit <span class="hljs-keyword">var</span> flutterEngine: FlutterEngine<br>    <span class="hljs-comment">//FlutterFragment</span><br>    private lateinit <span class="hljs-keyword">var</span> flutterFragment: FlutterFragment<br><br>    <span class="hljs-meta">@SuppressLint</span>(<span class="hljs-string">&quot;SetTextI18n&quot;</span>)<br>    override fun onCreate(savedInstanceState: Bundle?) &#123;<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_second)<br>        <span class="hljs-comment">//åˆå§‹åŒ– FlutterEngine</span><br>        flutterEngine = initFlutterEngine(FLUTTER_ENGINE_ID)<br><br>        <span class="hljs-comment">//åˆå§‹åŒ– FlutterFragment</span><br>        flutterFragment = FlutterFragment<br>            .withCachedEngine(FLUTTER_ENGINE_ID)<br>            .build()<br><br>        <span class="hljs-comment">//å°† FlutterFragment åµŒå…¥åˆ° SecondActivity ä¸­</span><br>        supportFragmentManager.beginTransaction().replace(R.id.flFragmentContainer,flutterFragment).commit()<br>    &#125;<br><br>    <span class="hljs-comment"><span class="language-markdown">/<span class="hljs-strong">**</span></span></span><br><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">     <span class="hljs-emphasis">* åˆå§‹åŒ– FlutterEngine</span></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">     *</span> ä¸Šè¿°ä»£ç ä¸€èˆ¬åœ¨è·³è½¬å‰è°ƒç”¨ï¼Œè¿™æ ·å¯ä»¥åŠ å¿«æˆ‘ä»¬é¡µé¢çš„ä¸€ä¸ªè·³è½¬</span></span></span><br><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">     <span class="hljs-emphasis">*/</span></span></span></span><br>    private fun initFlutterEngine(engineId: <span class="hljs-built_in">String</span>): FlutterEngine &#123;<br>        <span class="hljs-comment">//åˆ›å»º FlutterEngine</span><br>        val flutterEngine = FlutterEngine(<span class="hljs-keyword">this</span>)<br>        <span class="hljs-comment">//æŒ‡å®šè¦è·³è½¬çš„ Flutter é¡µé¢å¹¶æºå¸¦å‚æ•°</span><br>        flutterEngine.navigationChannel.setInitialRoute(<span class="hljs-string">&quot;main?&#123;\&quot;name\&quot;:\&quot;erdai\&quot;,\&quot;age\&quot;:18&#125;&quot;</span>)<br>        flutterEngine.dartExecutor.executeDartEntrypoint(DartExecutor.DartEntrypoint.createDefault())<br>        <span class="hljs-comment">//ç¼“å­˜ FlutterEngine</span><br>        val flutterEngineCache = FlutterEngineCache.getInstance()<br>        flutterEngineCache.put(engineId,flutterEngine)<br>        <span class="hljs-keyword">return</span> flutterEngine<br>    &#125;<br><br>    <span class="hljs-comment">//é‡å†™ä¸€äº›æ–¹æ³•ï¼Œç„¶åå°†å…¶è½¬å‘åˆ°äº† FlutterFragment ä¸­</span><br>    override fun onPostResume() &#123;<br>        <span class="hljs-keyword">super</span>.onPostResume()<br>        flutterFragment.onPostResume()<br>    &#125;<br><br>    override fun onNewIntent(intent: Intent) &#123;<br>        <span class="hljs-keyword">super</span>.onNewIntent(intent)<br>        flutterFragment.onNewIntent(intent)<br>    &#125;<br><br>    override fun onBackPressed() &#123;<br>        <span class="hljs-keyword">super</span>.onBackPressed()<br>        flutterFragment.onBackPressed()<br>    &#125;<br><br>    override fun onRequestPermissionsResult(<br>        requestCode: Int,<br>        permissions: Array&lt;out <span class="hljs-built_in">String</span>&gt;,<br>        grantResults: IntArray<br>    ) &#123;<br>        <span class="hljs-keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults)<br>        flutterFragment.onRequestPermissionsResult(requestCode,permissions,grantResults)<br>    &#125;<br><br>    override fun onUserLeaveHint() &#123;<br>        <span class="hljs-keyword">super</span>.onUserLeaveHint()<br>        flutterFragment.onUserLeaveHint()<br>    &#125;<br><br>    override fun onTrimMemory(level: Int) &#123;<br>        <span class="hljs-keyword">super</span>.onTrimMemory(level)<br>        flutterFragment.onTrimMemory(level)<br>    &#125;<br><br>    override fun onDestroy() &#123;<br>        <span class="hljs-keyword">super</span>.onDestroy()<br>        <span class="hljs-comment">//åœæ­¢ä»£ç æ‰§è¡Œå¹¶é‡Šæ”¾èµ„æº</span><br>        flutterEngine.destroy()<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//3ã€åœ¨ AndroidManifest æ–‡ä»¶ä¸­è®¾ç½® SecondActivity ä¸»é¢˜</span><br>&lt;activity<br>   android:name=<span class="hljs-string">&quot;.SecondActivity&quot;</span><br>   android:exported=<span class="hljs-string">&quot;false&quot;</span><br>   android:theme=<span class="hljs-string">&quot;@style/Theme.MaterialComponents.DayNight.NoActionBar&quot;</span>/&gt;<br><br><span class="hljs-comment">//4ã€ä¿®æ”¹ MainActivity è·³è½¬æŒ‰é’®è·³è½¬åˆ° SecondActivity</span><br>fun toSecondActivity(view: View) &#123;<br>    startActivity(Intent(<span class="hljs-keyword">this</span>,SecondActivity::<span class="hljs-keyword">class</span>.java))<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿° SecondActivity ä¸­æˆ‘ä»¬é‡å†™äº†å¾ˆå¤šæ–¹æ³•ï¼Œç„¶åå°†å…¶è½¬å‘åˆ°äº† FlutterFragment ä¸­ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å®ç° Flutter ä¸­æ‰€æœ‰é¢„æœŸçš„è¡Œä¸º</p><p>æ¥ä¸‹æ¥çœ‹ä¸‹æ•ˆæœï¼š</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22fcb0303f744a7984f2f2feff10f47a~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker2.gif" width="30%" /><h2 id="å››ã€Android-ä¸-Flutter-é€šä¿¡"><a href="#å››ã€Android-ä¸-Flutter-é€šä¿¡" class="headerlink" title="å››ã€Android ä¸ Flutter é€šä¿¡"></a>å››ã€Android ä¸ Flutter é€šä¿¡</h2><p>Flutter æä¾›äº†ä¸€å¥— PlatformChannel æœºåˆ¶ç”¨äº Flutter å’Œ Android çš„é€šä¿¡ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š</p><p>1ã€<strong>MethodChannel</strong>ï¼šä¸»è¦ç”¨äºä¼ é€’æ–¹æ³•è°ƒç”¨ï¼ŒFlutter å’Œ Nativeï¼ˆAndroidï¼‰ä¹‹é—´è¿›è¡Œæ–¹æ³•è°ƒç”¨æ—¶å¯ä»¥ä½¿ç”¨ï¼Œæ˜¯ä¸€ç§åŒå‘çš„é€šä¿¡æ–¹å¼</p><p>2ã€<strong>EventChannel</strong>ï¼šä¸»è¦ç”¨äºç”¨æˆ·æ•°æ®æµçš„é€šä¿¡ï¼Œå¦‚ï¼šæ‰‹æœºç”µé‡å˜åŒ–ï¼Œç½‘ç»œè¿æ¥å˜åŒ–ç­‰ã€‚è¿™ç§æ–¹å¼åªèƒ½  Nativeï¼ˆAndroidï¼‰å‘ Flutter å‘é€æ•°æ®ï¼Œæ˜¯ä¸€ç§å•å‘çš„é€šä¿¡æ–¹å¼</p><p>3ã€<strong>BaseicMessageChannel</strong>ï¼šä¸»è¦ç”¨äºä¼ é€’å„ç§ç±»å‹æ•°æ®ï¼Œå®ƒæ”¯æŒçš„ç±»å‹æœ‰å¾ˆå¤šï¼Œå¦‚ï¼šStringï¼ŒåŠç»“æ„åŒ–ä¿¡æ¯ç­‰ï¼Œæ˜¯ä¸€ç§åŒå‘çš„é€šä¿¡æ–¹å¼</p><h3 id="4-1ã€MethodChannel"><a href="#4-1ã€MethodChannel" class="headerlink" title="4.1ã€MethodChannel"></a>4.1ã€MethodChannel</h3><p>ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº† Android ç»™ Flutter é¡µé¢ä¼ å€¼ï¼Œä¸»è¦æ˜¯é€šè¿‡è¿™è¡Œä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">flutterEngine.navigationChannel.setInitialRoute(<span class="hljs-string">&quot;main?&#123;\&quot;name\&quot;:\&quot;erdai\&quot;,\&quot;age\&quot;:18&#125;&quot;</span>)<br></code></pre></td></tr></table></figure><p>ç‚¹å‡»æŸ¥çœ‹ navigationChannel çš„æºç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//NavigationChannel æºç </span><br>public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NavigationChannel</span> </span>&#123;<br>  private <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> TAG = <span class="hljs-string">&quot;NavigationChannel&quot;</span>;<br><br>  <span class="hljs-meta">@NonNull</span> public <span class="hljs-keyword">final</span> MethodChannel channel;<br><br>  public NavigationChannel(<span class="hljs-meta">@NonNull</span> DartExecutor dartExecutor) &#123;<br>    <span class="hljs-keyword">this</span>.channel = <span class="hljs-keyword">new</span> MethodChannel(dartExecutor, <span class="hljs-string">&quot;flutter/navigation&quot;</span>, JSONMethodCodec.INSTANCE);<br>    channel.setMethodCallHandler(defaultHandler);<br>  &#125;<br>  <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å‘ç°å®ƒå®é™…å°±æ˜¯å¯¹ MethodChannel åšäº†ä¸€å±‚å°è£…ï¼Œåº•å±‚æ˜¯é€šè¿‡ MethodChannel æ¥è¿›è¡Œé€šä¿¡</p><p>è¿™ç§æ–¹å¼åœ¨å¼€å‘ä¸­ç”¨çš„æ¯”è¾ƒå¤šï¼Œä½¿ç”¨ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡ä¾‹å­è¯´æ˜</p><p>ä¸‹é¢å®ç°è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼š<strong>é¦–å…ˆä» MainActivity è·³è½¬åˆ° SecondActivityï¼Œç„¶å SecondActivity æ¯éš”ä¸€ç§’ç»™ Flutter é¡µé¢å‘é€ä¸€ä¸ªæ•°å­—ï¼ŒFlutter æ¥æ”¶åˆ°æ•°å­—å¹¶æ˜¾ç¤ºåˆ°ä¸­é—´çš„ Text ä¸­ï¼Œå½“æ¥æ”¶åˆ°æ•°å­—ç­‰äº 5 ï¼Œé€šçŸ¥ SecondActivty finish</strong></p><p>å…ˆçœ‹ä¸€çœ¼å®ç°çš„æ•ˆæœï¼š</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5303863bc054b7aac3216a3ce715d50~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker (3).gif" width="30%" /><p>1ã€é¦–å…ˆæ¥çœ‹ Android ç«¯ä»£ç å®ç°ï¼ŒSecondActivity æ–°å¢çš„éƒ¨åˆ†ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecondActivity</span> : <span class="hljs-title">AppCompatActivity</span>() </span>&#123;<br>   <br>    <span class="hljs-comment">//...</span><br>    <span class="hljs-comment">//MethodChannel</span><br>    private lateinit <span class="hljs-keyword">var</span> methodChannel: MethodChannel<br>    <span class="hljs-comment">//å‘é€ç»™ Flutter çš„æ•°å­—</span><br>    private <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span><br><br>    <span class="hljs-meta">@SuppressLint</span>(<span class="hljs-string">&quot;SetTextI18n&quot;</span>)<br>    override fun onCreate(savedInstanceState: Bundle?) &#123;<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_second)<br>        <span class="hljs-comment">//...</span><br><span class="hljs-comment">//MethodChannelåˆå§‹åŒ–ï¼Œæ³¨æ„åé¢çš„å­—ç¬¦ä¸²å¿…é¡»ä¿æŒ Android å’Œ Flutter ä¸€è‡´</span><br>        methodChannel = MethodChannel(flutterEngine.dartExecutor,<span class="hljs-string">&quot;com.dream.interactive&quot;</span>)<br>       <span class="hljs-comment">//è®¾ç½® Flutter ä¼ ç»™æˆ‘ä»¬çš„æ–¹æ³•å›è°ƒ</span><br>        methodChannel.setMethodCallHandler &#123; call, result -&gt;<br>            <span class="hljs-keyword">if</span>(call.method == <span class="hljs-string">&quot;sendFinish&quot;</span>)&#123;<br>                finish()<br>            &#125;<br>        &#125;<br>      <span class="hljs-comment">//å¼€å¯å®šæ—¶å™¨ï¼Œæ¯éš”ä¸€ç§’ç»™ Flutter å‘é€ä¸€ä¸ªæ•°å­—</span><br>        startTimer()<br>    &#125;<br><br>    private fun startTimer() &#123;<br>        Timer().schedule(timerTask &#123;<br>            runOnUiThread &#123;<br>                val map = mapOf(<span class="hljs-string">&quot;count&quot;</span> to count++)<br>                methodChannel.invokeMethod(<span class="hljs-string">&quot;timer&quot;</span>, map)<br>            &#125;<br>        &#125;, <span class="hljs-number">0</span>, <span class="hljs-number">1000</span>)<br>    &#125;<br><br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€Flutter ç«¯ä»£ç å®ç°ï¼Œæ–°å¢éƒ¨åˆ†ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyHomePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyHomePage</span>&gt; </span>&#123;<br>  <span class="hljs-comment">//è®°å½•ä¼ é€’è¿‡æ¥çš„æ•°å­—</span><br>  <span class="hljs-built_in">int</span> _counter = <span class="hljs-number">0</span>;<br>  <span class="hljs-comment">//åˆå§‹åŒ– MethodChannelï¼Œå­—ç¬¦ä¸²å¿…é¡»ä¿æŒ Android å’Œ Flutter ä¸€è‡´</span><br>  <span class="hljs-keyword">final</span> _channel = <span class="hljs-keyword">const</span> MethodChannel(<span class="hljs-string">&quot;com.dream.interactive&quot;</span>);<br>  <span class="hljs-comment">//...</span><br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> initState() &#123;<br>    <span class="hljs-keyword">super</span>.initState();<br>    <span class="hljs-comment">//è®¾ç½®æ¥æ”¶ Android ä¼ é€’è¿‡æ¥çš„æ–¹æ³•å›è°ƒ</span><br>    _channel.setMethodCallHandler((call) <span class="hljs-keyword">async</span> &#123;<br>      <span class="hljs-built_in">String</span> method = call.method;<br>      <span class="hljs-keyword">switch</span>(method)&#123;<br>        <span class="hljs-comment">//å¦‚æœåŒ¹é…åˆ°äº† timer æ–¹æ³•</span><br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;timer&quot;</span>:<br>          <span class="hljs-comment">//æ¥æ”¶ä¼ é€’è¿‡æ¥çš„æ•°å­—å¹¶åˆ·æ–° UI</span><br>          setState(() &#123;<br>            _counter = call.arguments[<span class="hljs-string">&quot;count&quot;</span>];<br>          &#125;);<br>          <span class="hljs-comment">//å½“æ•°å­—ç­‰äº 5ï¼Œé€šçŸ¥ Android finish SecondActivity</span><br>          <span class="hljs-keyword">if</span>(_counter == <span class="hljs-number">5</span>)&#123;<br>            _channel.invokeMethod(<span class="hljs-string">&quot;sendFinish&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>          &#125;<br>          <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">default</span>:<br>          <span class="hljs-keyword">break</span>;<br>      &#125;<br>    &#125;);<br>  &#125;<br>  <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2ã€EventChannel"><a href="#4-2ã€EventChannel" class="headerlink" title="4.2ã€EventChannel"></a>4.2ã€EventChannel</h3><p><strong>æˆ‘ä»¬ä½¿ç”¨ EventChannel æ¨¡æ‹Ÿ Android å‘é€ä¸€ä¸ªå……ç”µä¿¡æ¯ç»™ Flutter ï¼ŒFlutter æ¥æ”¶ååœ¨ä¸­é—´çš„ Text å±•ç¤ºå‡ºæ¥</strong></p><p>1ã€ Android ç«¯ä»£ç å®ç°ï¼ŒSecondActivity æ–°å¢çš„éƒ¨åˆ†ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecondActivity</span> : <span class="hljs-title">AppCompatActivity</span>() </span>&#123;<br>   <br>    <span class="hljs-comment"><span class="language-markdown">/<span class="hljs-strong">**</span></span></span><br><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">     <span class="hljs-emphasis">* EventChannel äº‹ä»¶æ¥æ”¶å™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬ä¸»è¦é€šè¿‡å®ƒç»™ Flutter ä¼ é€’ event äº‹ä»¶</span></span></span></span><br><span class="hljs-emphasis"><span class="hljs-strong"><span class="language-markdown"><span class="hljs-comment">     *</span>/</span></span></span><br>    private lateinit <span class="hljs-keyword">var</span> eventSink: EventChannel.EventSink<br>    <span class="hljs-comment">//ç”µé‡ä¿¡æ¯</span><br>    private <span class="hljs-keyword">var</span> electricity = <span class="hljs-number">0</span><br><br>    <span class="hljs-meta">@SuppressLint</span>(<span class="hljs-string">&quot;SetTextI18n&quot;</span>)<br>    override fun onCreate(savedInstanceState: Bundle?) &#123;<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_second)<br>          <br>        <span class="hljs-comment">//åˆå§‹åŒ– EventChannelï¼Œæ³¨æ„åé¢çš„å­—ç¬¦ä¸²å¿…é¡»ä¿æŒ Android å’Œ Flutter ä¸€è‡´</span><br>        val eventChannel =  EventChannel(flutterEngine.dartExecutor,<span class="hljs-string">&quot;com.dream.eventchannel&quot;</span>)<br>        <span class="hljs-comment">//è®¾ç½®æ¥æ”¶ Flutter ä¼ é€’è¿‡æ¥çš„æ•°æ®æµå›è°ƒ</span><br>        eventChannel.setStreamHandler(object : EventChannel.StreamHandler &#123;<br>            <span class="hljs-comment">//å½“ Flutter ä¸ Android å»ºç«‹è¿æ¥åä¼šå›è°ƒæ­¤æ–¹æ³•</span><br>            override fun onListen(arguments: Any?, events: EventChannel.EventSink) &#123;<br>              <span class="hljs-comment">//æ‰“å° Flutter ä¼ è¿‡æ¥çš„å‚æ•°ï¼Œå»ºç«‹è¿æ¥æ—¶è¿”å›çš„å€¼ï¼Œä»…æ­¤ä¸€æ¬¡</span><br>                Log.d(<span class="hljs-string">&quot;erdai&quot;</span>, <span class="hljs-string">&quot;onListen: <span class="hljs-subst">$arguments</span>&quot;</span>)<br>                <span class="hljs-comment">//å¯¹ eventSink èµ‹å€¼</span><br>                eventSink = events<br>                <span class="hljs-comment">//å¼€å¯å®šæ—¶å™¨ï¼Œæ¯éš”ä¸€ç§’ç”µé‡å¢åŠ  20%</span><br>                startTimer()<br>            &#125;<br><br>            <span class="hljs-comment">//å½“ Flutter ä¸ Android æ–­å¼€è¿æ¥åä¼šå›è°ƒæ­¤æ–¹æ³•</span><br>            override fun onCancel(arguments: Any?) &#123;<br>                Log.d(<span class="hljs-string">&quot;erdai&quot;</span>, <span class="hljs-string">&quot;onCancel: æ–­å¼€è¿æ¥&quot;</span>)<br>            &#125;<br>        &#125;)<br>    &#125;<br><br>    <span class="hljs-comment">//å¼€å¯å®šæ—¶å™¨ï¼Œæ¯éš”ä¸€ç§’ç”µé‡å¢åŠ  20%</span><br>    private fun startTimer() &#123;<br>        Timer().schedule(timerTask &#123;<br>            runOnUiThread &#123;<br>              <span class="hljs-comment">//æ¯éš”ä¸€ç§’ç”µé‡ +20</span><br>                electricity += <span class="hljs-number">20</span><br>                <span class="hljs-comment">//å‘é€äº‹ä»¶ç»™ Flutter</span><br>                eventSink.success(<span class="hljs-string">&quot;ç”µé‡ï¼š<span class="hljs-subst">$electricity</span>%&quot;</span>)<br>                <span class="hljs-keyword">if</span>(electricity == <span class="hljs-number">100</span>)&#123;<br>                   <span class="hljs-comment">//å½“ç”µé‡ä¸º 100 ï¼Œå‘é€å®Œæˆäº‹ä»¶ç»™ Flutter</span><br>                   eventSink.endOfStream()<br>                &#125;<br>            &#125;<br>        &#125;, <span class="hljs-number">0</span>, <span class="hljs-number">1000</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€Flutter ç«¯ä»£ç å®ç°ï¼Œæ–°å¢éƒ¨åˆ†ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyHomePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyHomePage</span>&gt; </span>&#123;<br>  <span class="hljs-comment">//ç”µé‡ä¿¡æ¯</span><br>  <span class="hljs-built_in">dynamic</span> electricity;<br>  <span class="hljs-comment">//EventChannel æ³¨æ„åé¢çš„å­—ç¬¦ä¸²å¿…é¡»ä¿æŒ Android å’Œ Flutter ä¸€è‡´</span><br>  <span class="hljs-keyword">final</span> _eventChannel = <span class="hljs-keyword">const</span> EventChannel(<span class="hljs-string">&quot;com.dream.eventchannel&quot;</span>);<br>  <span class="hljs-comment">//è®¢é˜…æµä¿¡æ¯</span><br>  StreamSubscription? _streamSubscription;<br>  <br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> initState() &#123;<br>    <span class="hljs-keyword">super</span>.initState();<br>    <span class="hljs-comment">//åˆå§‹åŒ– StreamSubscription</span><br>    _streamSubscription = _eventChannel<br>        .receiveBroadcastStream([<span class="hljs-string">&quot;Helloï¼Œå»ºç«‹è¿æ¥å§&quot;</span>])<br>        .listen(_onData,onError: _onError,onDone: _onDone);<br>  &#125;<br><br>  <span class="hljs-comment">//æ¥æ”¶ Andorid å‘é€è¿‡æ¥çš„æ­£å¸¸äº‹ä»¶</span><br>  <span class="hljs-keyword">void</span> _onData(event)&#123;<br>    <span class="hljs-comment">//æ‰“å°</span><br>    <span class="hljs-built_in">print</span>(event);<br>    <span class="hljs-comment">//å¯¹ electricity èµ‹å€¼ï¼Œåˆ·æ–° UI</span><br>    setState(() &#123;<br>      electricity = event;<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-comment">//æ¥æ”¶ Andorid å‘é€è¿‡æ¥çš„ error äº‹ä»¶</span><br>  <span class="hljs-keyword">void</span> _onError(error)&#123;<br>    <span class="hljs-comment">//æ‰“å°</span><br>    <span class="hljs-built_in">print</span>(error);<br>  &#125;<br><br>  <span class="hljs-comment">//æ¥æ”¶ Android å‘é€è¿‡æ¥çš„å®Œæˆäº‹ä»¶</span><br>  <span class="hljs-keyword">void</span> _onDone()&#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;_onDone&#x27;</span>);<br>  &#125;<br><br>  <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> dispose() &#123;<br>    <span class="hljs-keyword">if</span>(_streamSubscription != <span class="hljs-keyword">null</span>)&#123;<br>      _streamSubscription?.cancel();<br>      _streamSubscription = <span class="hljs-keyword">null</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>      <span class="hljs-comment">//...</span><br>      body: Center(<br>        child: Column(<br>          mainAxisAlignment: MainAxisAlignment.center,<br>          children: &lt;Widget&gt;[<br>            <span class="hljs-comment">//...</span><br>            Text(<br>              <span class="hljs-string">&#x27;<span class="hljs-subst">$electricity</span>&#x27;</span>,<br>              style: Theme.of(context).textTheme.headline4,<br>            ),<br>          ],<br>        ),<br>      ),<br>      <span class="hljs-comment">//..</span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹æ•ˆæœå’Œ Log æ—¥å¿—ï¼š</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ea43f0988ec478a873e01c11d347917~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker (4).gif" width="30%" /><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d49e854843e46c7bd7ad58a846b21f5~tplv-k3u1fbpfcp-watermark.image?" alt="202209221613607.png" width="70%" /><h3 id="4-3ã€BaseicMessageChannel"><a href="#4-3ã€BaseicMessageChannel" class="headerlink" title="4.3ã€BaseicMessageChannel"></a>4.3ã€BaseicMessageChannel</h3><p><strong>æˆ‘ä»¬ä½¿ç”¨ BaseicMessageChannel å®ç°ä¸€æ®µ Andorid å’Œ Flutter çš„å¯¹è¯ï¼ŒFlutter æ”¶åˆ° Android çš„æ¶ˆæ¯ï¼Œåœ¨ä¸­é—´çš„ Text å±•ç¤ºå‡ºæ¥ï¼ŒAndroid æ”¶åˆ° Flutter çš„æ¶ˆæ¯ï¼Œä½¿ç”¨ Toast å±•ç¤ºå‡ºæ¥</strong> </p><p>1ã€ Android ç«¯ä»£ç å®ç°ï¼ŒSecondActivity æ–°å¢çš„éƒ¨åˆ†ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SecondActivity</span> : <span class="hljs-title">AppCompatActivity</span>() </span>&#123;<br>    <span class="hljs-comment">//...</span><br>    <span class="hljs-comment">//BasicMessageChannel</span><br>    private lateinit <span class="hljs-keyword">var</span> messageChannel: BasicMessageChannel&lt;<span class="hljs-built_in">String</span>&gt;<br>  <br>    <span class="hljs-meta">@SuppressLint</span>(<span class="hljs-string">&quot;SetTextI18n&quot;</span>)<br>    override fun onCreate(savedInstanceState: Bundle?) &#123;<br>        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)<br>        setContentView(R.layout.activity_second)<br>      <span class="hljs-comment">//...</span><br><br><span class="hljs-comment">//åˆå§‹åŒ– BasicMessageChannelï¼Œæ³¨æ„åé¢çš„å­—ç¬¦ä¸²å¿…é¡»ä¿æŒ Android å’Œ Flutter ä¸€è‡´</span><br>        messageChannel = <br>          BasicMessageChannel(flutterEngine.dartExecutor,<span class="hljs-string">&quot;com.dream.messagechannel&quot;</span>,StringCodec.INSTANCE)<br>        <span class="hljs-comment">//è®¾ç½®æ¥æ”¶ Flutter ä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯å›è°ƒ</span><br>        messageChannel.setMessageHandler &#123; replay: <span class="hljs-built_in">String?</span>, reply: BasicMessageChannel.Reply&lt;<span class="hljs-built_in">String</span>&gt; -&gt;<br>            <span class="hljs-comment">//æ‰“å° Flutter å‘è¿‡æ¥çš„æ¶ˆæ¯</span><br>            Log.d(<span class="hljs-string">&quot;erdai&quot;</span>, <span class="hljs-string">&quot;onCreate: <span class="hljs-subst">$replay</span>&quot;</span>)<br>            <span class="hljs-comment">//ä½¿ç”¨ Toast å±•ç¤ºå‡ºæ¥</span><br>            Toast.makeText(<span class="hljs-keyword">this</span>,replay,Toast.LENGTH_SHORT).<span class="hljs-keyword">show</span>()<br>            <span class="hljs-comment">//å›ä¼ æ¶ˆæ¯ç»™ Flutter</span><br>            reply.reply(<span class="hljs-string">&quot;æ¢§æ¡å±±&quot;</span>)<br>        &#125;<br>      <br>      <span class="hljs-comment">//å‘é€æ¶ˆæ¯ç»™ Flutter</span><br>        messageChannel.send(<span class="hljs-string">&quot;å‘¨æœ«å»çˆ¬å±±å—?&quot;</span>) &#123; replay: <span class="hljs-built_in">String?</span> -&gt;<br>            <span class="hljs-comment">//æ¥æ”¶ Flutter å›ä¼ çš„æ¶ˆæ¯</span><br>            <span class="hljs-comment">//æ‰“å° Flutter å›ä¼ çš„æ¶ˆæ¯</span><br>            Log.d(<span class="hljs-string">&quot;erdai&quot;</span>, <span class="hljs-string">&quot;onCreate: <span class="hljs-subst">$replay</span>&quot;</span>)<br>            <span class="hljs-comment">//ä½¿ç”¨ Toast å±•ç¤ºå‡ºæ¥</span><br>            Toast.makeText(<span class="hljs-keyword">this</span>,replay,Toast.LENGTH_SHORT).<span class="hljs-keyword">show</span>()<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€Flutter ç«¯ä»£ç å®ç°ï¼Œæ–°å¢éƒ¨åˆ†ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyHomePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyHomePage</span>&gt; </span>&#123;<br> <br>  <span class="hljs-comment">//è®°å½• Android ä¼ è¿‡æ¥çš„å€¼</span><br>  <span class="hljs-built_in">dynamic</span> _content;<br>  <span class="hljs-comment">//BasicMessageChannelï¼Œæ³¨æ„åé¢çš„å­—ç¬¦ä¸²å¿…é¡»ä¿æŒ Android å’Œ Flutter ä¸€è‡´</span><br>  <span class="hljs-keyword">final</span> _messageChannel = <span class="hljs-keyword">const</span> BasicMessageChannel(<span class="hljs-string">&quot;com.dream.messagechannel&quot;</span>, StringCodec());<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> initState() &#123;<br>    <span class="hljs-keyword">super</span>.initState();<br>    <span class="hljs-comment">//è®¾ç½®æ¥æ”¶ Android ä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯å›è°ƒ</span><br>    _messageChannel.setMessageHandler((message) =&gt;Future&lt;<span class="hljs-built_in">String</span>&gt;(()&#123;<br>      <span class="hljs-comment">//æ‰“å° Android å‘é€è¿‡æ¥çš„æ¶ˆæ¯</span><br>      <span class="hljs-built_in">print</span>(message);<br>      <span class="hljs-comment">//ç»™ _content èµ‹å€¼ï¼Œåˆ·æ–° UI</span><br>      setState(() &#123;<br>        _content = message;<br>      &#125;);<br>      <span class="hljs-comment">//å›ä¼ å€¼ç»™ Android</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å¥½å•Š&quot;</span>;<br>    &#125;));<br>    <br>    <span class="hljs-comment">//...</span><br>  &#125;<br>  <br>  <span class="hljs-comment">//ç‚¹å‡» FloatingActionButton çš„å“åº”æ–¹æ³•</span><br>  <span class="hljs-keyword">void</span> _incrementCounter() <span class="hljs-keyword">async</span>&#123;<br>    <span class="hljs-comment">//ç»™ Android å‘é€æ¶ˆæ¯ï¼Œå¹¶æ¥æ”¶ Android å›ä¼ çš„æ¶ˆæ¯</span><br>    <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> _messageChannel.send(<span class="hljs-string">&quot;å»çˆ¬å“ªåº§å±±?&quot;</span>);<br>    <span class="hljs-comment">//æ‰“å° Android å›ä¼ çš„æ¶ˆæ¯</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;<span class="hljs-subst">$result</span>&quot;</span>);<br>    <span class="hljs-comment">//ç»™ _content èµ‹å€¼ï¼Œåˆ·æ–° UI</span><br>    setState(() &#123;<br>      _content = result;<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>      appBar: AppBar(<br>        title: Text(widget.title),<br>      ),<br>      body: Center(<br>        child: Column(<br>          mainAxisAlignment: MainAxisAlignment.center,<br>          children: &lt;Widget&gt;[<br>            <span class="hljs-comment">//...</span><br>            Text(<br>              <span class="hljs-string">&#x27;<span class="hljs-subst">$_content</span>&#x27;</span>,<br>              style: Theme.of(context).textTheme.headline4,<br>            ),<br>          ],<br>        ),<br>      ),<br>      floatingActionButton: FloatingActionButton(<br>        onPressed: _incrementCounter,<br>        tooltip: <span class="hljs-string">&#x27;Increment&#x27;</span>,<br>        child: <span class="hljs-keyword">const</span> Icon(Icons.add),<br>      ), <br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>çœ‹ä¸‹æ•ˆæœå’Œ Log æ—¥å¿—ï¼š</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7da4428000554b0eac543f1530a0c3c2~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker (5).gif" width="30%" /><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d749ee7774ba41518b615972d6ac7004~tplv-k3u1fbpfcp-watermark.image" alt="202209221614000.png"></p><h3 id="4-4ã€é€šä¿¡åŸç†"><a href="#4-4ã€é€šä¿¡åŸç†" class="headerlink" title="4.4ã€é€šä¿¡åŸç†"></a>4.4ã€é€šä¿¡åŸç†</h3><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b581ad4490034520b24e1940f3311118~tplv-k3u1fbpfcp-watermark.image?" alt="202209221615654.png" width="100%" /><p>ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š</p><p>1ã€Android å’Œ Flutter éƒ½æ˜¯ä»¥ ByteBuffer ä¸ºè½½ä½“ï¼Œç„¶åé€šè¿‡ BinaryMessenger æ¥å‘é€å’Œæ¥æ”¶æ•°æ®</p><p>2ã€Android å’Œ Flutter éƒ½æ˜¯åŸºäº PlatformChannel æœºåˆ¶æ¥è¿›è¡Œé€šä¿¡çš„</p><p>ä¹‹æ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿå¦‚æ­¤ç®€å•çš„è¿›è¡Œé€šä¿¡ï¼Œå®åˆ™æ˜¯ç³»ç»Ÿç»™æˆ‘ä»¬åšäº†å¤§é‡çš„å°è£…ï¼šçº¿ç¨‹çš„åˆ‡æ¢ï¼Œæ•°æ®æ‹·è´ç­‰å¤æ‚æ“ä½œ</p><p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<strong>åœ¨ Android ä¾§ï¼ŒBinaryMessenger æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåœ¨ FlutterView ä¸­å®ç°äº†è¯¥æ¥å£ï¼Œåœ¨ BinaryMessenger çš„æ–¹æ³•ä¸­é€šè¿‡ JNI æ¥ä¸ç³»ç»Ÿåº•å±‚æ²Ÿé€šã€‚åœ¨ Flutter ä¾§ï¼ŒBinaryMessenger æ˜¯ä¸€ä¸ªç±»ï¼Œè¯¥ç±»çš„ä½œç”¨å°±æ˜¯ä¸ç±» window æ²Ÿé€šï¼Œè€Œç±» window æ‰çœŸæ­£ä¸ç³»ç»Ÿåº•å±‚æ²Ÿé€š</strong></p><h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†ï¼š</p><p>1ã€Android é›†æˆ Flutter </p><blockquote><p>ä¸»è¦å°±æ˜¯å°† Flutter ç«¯çš„ä»£ç æ‰“æˆ aar ï¼Œç„¶å Android å¼•ç”¨è¿™ä¸ª aar</p></blockquote><p>2ã€Android è°ƒèµ· Flutter é¡µé¢ï¼ˆFlutterActivityï¼ŒFlutterFragmentï¼‰ï¼Œå¹¶ç»™ Flutter é¡µé¢ä¼ å€¼</p><blockquote><p>ä¼ å€¼åº•å±‚ä½¿ç”¨çš„ MethodChannel</p></blockquote><p>3ã€Android ä¸ Flutter é€šä¿¡ï¼Œä¸»è¦ä½¿ç”¨åˆ°äº† Flutter çš„ PlatformChannel æœºåˆ¶ï¼Œå…¶å®ç°ä¸»è¦æœ‰ä¸‰ç§ç±»å‹ï¼š</p><blockquote><p>1ã€MethodChannelï¼šç”¨äº Flutter å’Œ Android ä¹‹é—´çš„æ–¹æ³•é€šä¿¡ï¼ŒåŒå‘çš„</p><p>2ã€EventChannelï¼šç”¨äº Flutter å’Œ Android ä¹‹é—´çš„æ•°æ®æµé€šä¿¡ï¼Œå•å‘çš„ï¼šAndroid -&gt; Flutter</p><p>3ã€BaseicMessageChannelï¼šç”¨äº Flutter å’Œ Android ä¹‹é—´çš„æ•°æ®é€šä¿¡ï¼ŒåŒå‘çš„</p></blockquote><p>4ã€ç®€å•çš„ä»‹ç»äº† Android ä¸ Flutter é€šä¿¡çš„åŸç†</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤</p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®²å¼€å‘ Flutter é¡¹ç›®çš„ä¸€ä¸ªæŠ€æœ¯é€‰å‹ï¼Œå°½è¯·æœŸå¾…å§ğŸº</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://juejin.cn/post/7054743801520193543">Android é›†æˆ Flutter | ä¸äº¤äº’</a></p><p><a href="https://juejin.cn/post/6844903873358856200#heading-7">ä¸€ç¯‡çœ‹æ‡‚Androidä¸Flutterä¹‹é—´çš„é€šä¿¡</a></p><blockquote><p><strong>ä½ çš„ç‚¹èµï¼Œè¯„è®ºï¼Œæ˜¯å¯¹æˆ‘å·¨å¤§çš„é¼“åŠ±ï¼</strong></p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„<strong>å…¬ä¼—å·ï¼š</strong>  <a href="https://link.juejin.cn/?target=http://m6z.cn/6jwi7b" title="http://m6z.cn/6jwi7b"><strong>sweetying</strong></a> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p><p>å¦‚æœ<strong>æœ‰é—®é¢˜</strong>ï¼Œå…¬ä¼—å·å†…æœ‰åŠ æˆ‘å¾®ä¿¡çš„å…¥å£ï¼Œåœ¨æŠ€æœ¯å­¦ä¹ ã€ä¸ªäººæˆé•¿çš„é“è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸€èµ·å‰è¿›ï¼</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Flutter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutter ç³»åˆ—ï¼ˆä¸ƒï¼‰ï¼šFlutter è·¯ç”±å’Œ HTTPS è¯·æ±‚å®æˆ˜</title>
    <link href="/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9AFlutter%20%E8%B7%AF%E7%94%B1%E5%92%8C%20HTTPS%20%E8%AF%B7%E6%B1%82%E5%AE%9E%E6%88%98/"/>
    <url>/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9AFlutter%20%E8%B7%AF%E7%94%B1%E5%92%8C%20HTTPS%20%E8%AF%B7%E6%B1%82%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101704446.jpeg" alt="sea-7352141_1920"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† Flutter ä¸­å¸¸ç”¨çš„è¡¨å• Widgetï¼šTextFieldï¼ŒCheckBoxï¼ŒRadioï¼ŒSwitchï¼ŒCheckboxListTileï¼ŒRadioListTileï¼ŒSwitchListTileï¼ŒSliderï¼Œæœ€åé€šè¿‡è¿™äº› Widget å®ç°äº†ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹ã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/7137457377959706654">Flutter ç³»åˆ—ï¼ˆå…­ï¼‰ï¼šFlutter å¸¸ç”¨è¡¨å• Widget</a>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ Flutter è·¯ç”±å’Œ HTTPS è¯·æ±‚å®æˆ˜è¿›è¡Œä»‹ç»</p><h2 id="ä¸€ã€Flutter-è·¯ç”±"><a href="#ä¸€ã€Flutter-è·¯ç”±" class="headerlink" title="ä¸€ã€Flutter è·¯ç”±"></a>ä¸€ã€Flutter è·¯ç”±</h2><p>1ï¼‰ã€Flutter ä¸­çš„è·¯ç”±ç®€å•ç†è§£å°±æ˜¯é¡µé¢è·³è½¬ã€‚Flutter é€šè¿‡ Navigator ç»„ä»¶ç®¡ç†è·¯ç”±å¯¼èˆªï¼Œå¹¶æä¾›äº†ç®¡ç†å †æ ˆçš„æ–¹æ³•ã€‚å¦‚ï¼šNavigator.pushï¼ŒNavigator.pop</p><p>2ï¼‰ã€Flutter ç»™æˆ‘ä»¬æä¾›äº†ä¸¤ç§é…ç½®è·¯ç”±è·³è½¬çš„æ–¹å¼ï¼š</p><blockquote><p>1ã€åŸºæœ¬è·¯ç”±</p><p>2ã€å‘½åè·¯ç”±</p></blockquote><h3 id="1-1ã€åŸºæœ¬è·¯ç”±"><a href="#1-1ã€åŸºæœ¬è·¯ç”±" class="headerlink" title="1.1ã€åŸºæœ¬è·¯ç”±"></a>1.1ã€åŸºæœ¬è·¯ç”±</h3><h4 id="1-1-1ã€åŸºæœ¬è·¯ç”±ä½¿ç”¨"><a href="#1-1-1ã€åŸºæœ¬è·¯ç”±ä½¿ç”¨" class="headerlink" title="1.1.1ã€åŸºæœ¬è·¯ç”±ä½¿ç”¨"></a>1.1.1ã€åŸºæœ¬è·¯ç”±ä½¿ç”¨</h4><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªé¡µé¢ï¼šHomePage.dartï¼ŒSearchPage.dartï¼Œå…ˆçœ‹ä¸€çœ¼å®ƒä»¬åˆå§‹çš„ä¸€ä¸ªä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//1ã€HomePage.dart</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutterapplication/route/Routes.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>      home: HomePage()<br>  ));<br>&#125;<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;HomePage&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>      ),<br>      body: Center(<br>        child: RaisedButton(<br>          child: Text(<span class="hljs-string">&quot;è·³è½¬åˆ° SearchPage&quot;</span>),<br>          <span class="hljs-comment">//æŒ‰é’®ç‚¹å‡»äº‹ä»¶</span><br>          onPressed: () &#123;<br>            <br>          &#125;,<br>        ),<br>      ), <br>    );<br>  &#125;<br>&#125;<br><br><br><span class="hljs-comment">//2ã€SearchPage.dart</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SearchPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-keyword">final</span> arguments;<br><br>  <span class="hljs-comment">//å¯é€‰å‚æ•° arguments</span><br>  SearchPage(&#123;<span class="hljs-keyword">this</span>.arguments&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>        appBar: AppBar(<br>            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;SearchPage&#x27;</span>)<br>        ),<br>        body: Center(<br>          child: Text(<span class="hljs-string">&quot;æœç´¢é¡µé¢å†…å®¹åŒºåŸŸï¼š<span class="hljs-subst">$arguments</span>&quot;</span>),<br>        )<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å¾ˆç®€å•ï¼Œç°åœ¨æˆ‘ä»¬æƒ³ä» HomePage è·³è½¬åˆ° SearchPageï¼Œéœ€è¦ä»¥ä¸‹ä¸¤æ­¥ï¼š</p><p>1ã€åœ¨ HomePage.dart ä¸­å¼•å…¥ SearchPage.dart </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//1ã€ç»å¯¹è·¯å¾„</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutterapplication/pages/SearchPage.dart&#x27;</span>;<br><span class="hljs-comment">//2ã€ç›¸å¯¹è·¯å¾„</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../SearchPage.dart&#x27;</span>;<br></code></pre></td></tr></table></figure><p><strong>Tips</strong>ï¼šæ—¥å¸¸å¼€å‘ä¸­å»ºè®®ç»Ÿä¸€ä½¿ç”¨ç»å¯¹è·¯å¾„</p><p>2ã€åœ¨ HomePage çš„ç‚¹å‡»äº‹ä»¶ä¸­é€šè¿‡å¦‚ä¸‹æ–¹æ³•è·³è½¬</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//æ–¹å¼ä¸€</span><br>Navigator.push(context, MaterialPageRoute(builder: (context)&#123;<br>  <span class="hljs-keyword">return</span> SearchPage();<br>&#125;));<br><br><span class="hljs-comment">//æ–¹å¼äºŒ</span><br>Navigator.of(context).push(<br>  MaterialPageRoute(builder: (context)&#123;<br>    <span class="hljs-keyword">return</span> SearchPage();<br>  &#125;)<br>);<br><br><span class="hljs-comment">//ä¸Šè¿°ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼Œå®é™…ä¸Šæ–¹å¼ä¸€æ˜¯å¯¹æ–¹å¼äºŒçš„å°è£…</span><br></code></pre></td></tr></table></figure><p>ç»è¿‡ä¸Šé¢ä¸¤æ­¥æˆ‘ä»¬å°±å¯ä»¥è·³è½¬åˆ° SearchPage é¡µé¢äº†</p><p>æ­¤æ—¶è¿˜åªæ˜¯ç®€å•çš„è·³è½¬ï¼Œå¦‚æœæˆ‘æƒ³å‘ SearchPage ä¼ å€¼å‘¢ï¼Ÿ</p><h4 id="1-1-2ã€åŸºæœ¬è·¯ç”±ä¼ å€¼"><a href="#1-1-2ã€åŸºæœ¬è·¯ç”±ä¼ å€¼" class="headerlink" title="1.1.2ã€åŸºæœ¬è·¯ç”±ä¼ å€¼"></a>1.1.2ã€åŸºæœ¬è·¯ç”±ä¼ å€¼</h4><p>å®åˆ™å°±æ˜¯åœ¨ SearchPage çš„æ„é€ æ–¹æ³•ä¸­å¢åŠ å®å‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart">Navigator.of(context).push(<br>  MaterialPageRoute(builder: (context)&#123;<br>    <span class="hljs-keyword">return</span> SearchPage(arguments: <span class="hljs-string">&quot;erdai666&quot;</span>);<br>  &#125;)<br>);<br></code></pre></td></tr></table></figure><p>è¿™ç§åŸºæœ¬è·¯ç”±çš„ä½¿ç”¨æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼š<strong>ä¸èƒ½è¿›è¡Œè·¯ç”±çš„ç»Ÿä¸€ç®¡ç†</strong>ã€‚å¦‚æœæˆ‘ä»¬æƒ³æŠŠè·¯ç”±ç»Ÿä¸€ç®¡ç†ï¼Œå°±éœ€è¦ä½¿ç”¨åˆ°å‘½åè·¯ç”±</p><h3 id="1-2ã€å‘½åè·¯ç”±"><a href="#1-2ã€å‘½åè·¯ç”±" class="headerlink" title="1.2ã€å‘½åè·¯ç”±"></a>1.2ã€å‘½åè·¯ç”±</h3><h4 id="1-2-1ã€å‘½åè·¯ç”±ä½¿ç”¨"><a href="#1-2-1ã€å‘½åè·¯ç”±ä½¿ç”¨" class="headerlink" title="1.2.1ã€å‘½åè·¯ç”±ä½¿ç”¨"></a>1.2.1ã€å‘½åè·¯ç”±ä½¿ç”¨</h4><p>å‘½åè·¯ç”±å°±æ˜¯ç»™æ¯ä¸ªé¡µé¢è®¾ç½®ä¸€ä¸ªå­—ç¬¦ä¸²åˆ«åï¼Œé€šå¸¸æ˜¯ä»¥ &#x2F; å¼€å¤´ï¼Œå¦‚ï¼šâ€&#x2F;searchPageâ€ã€‚è¿˜æ˜¯ä»¥ 1.1.1 çš„ä¾‹å­è¿›è¡Œä¸¾ä¾‹ï¼š</p><p>1ã€æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ª .dart æ–‡ä»¶è¿›è¡Œè·¯ç”±çš„ç»Ÿä¸€ç®¡ç†ï¼Œæˆ‘è¿™é‡Œå« Routes.dart ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-built_in">String</span> homePage = <span class="hljs-string">&quot;/&quot;</span>;<br><span class="hljs-built_in">String</span> searchPage = <span class="hljs-string">&quot;/searchPage&quot;</span>;<br><br><span class="hljs-keyword">final</span> routes = &#123;<br>  homePage: (context) =&gt; HomePage(),<br>  searchPage: (context) =&gt; SearchPage()<br>&#125;;<br><br><span class="hljs-comment">//ä¸‹é¢è¿™æ®µä»£ç æ˜¯å°†ä¸€ä¸ªåŒ¿åæ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡</span><br><span class="hljs-comment">//åŒ¿åæ–¹æ³•åšçš„äº‹æƒ…ï¼šå¤„ç†è·¯ç”±ä¼ å‚ï¼Œç”Ÿæˆ MaterialPageRoute è·¯ç”±å¯¹è±¡</span><br><span class="hljs-keyword">var</span> onGenerateRoute = (settings) &#123;<br>  <span class="hljs-built_in">Function?</span> pageContentBuilder = routes[settings.name];<br>  <span class="hljs-keyword">if</span> (pageContentBuilder != <span class="hljs-keyword">null</span>) &#123;<br>    <span class="hljs-keyword">if</span> (settings.arguments != <span class="hljs-keyword">null</span>) &#123;<br>      <span class="hljs-keyword">var</span> route = MaterialPageRoute(<br>          builder: (context) =&gt;<br>              pageContentBuilder(context, arguments: settings.arguments));<br>      <span class="hljs-keyword">return</span> route;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">var</span> route =<br>      MaterialPageRoute(builder: (context) =&gt; pageContentBuilder(context));<br>      <span class="hljs-keyword">return</span> route;<br>    &#125;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p><strong>Tips</strong>ï¼šé€šå¸¸æˆ‘ä»¬ä¼šä»¥ â€˜&#x2F;â€˜ è¡¨ç¤º App å¯åŠ¨é¡µçš„è·¯ç”±</p><p>2ã€åœ¨ HomePage.dart ä¸­æ–°å¢å¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//å¯¼åŒ…</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutterapplication/route/Routes.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>      <span class="hljs-comment">//app å¯åŠ¨è·¯ç”±é¡µé¢</span><br>      initialRoute: homePage,<br>      <span class="hljs-comment">//è·¯ç”±ç”Ÿæˆ</span><br>      onGenerateRoute: onGenerateRoute,<br>      <span class="hljs-comment">//...</span><br>  ));<br>&#125;<br></code></pre></td></tr></table></figure><p>3ã€åœ¨ HomePage çš„ç‚¹å‡»äº‹ä»¶ä¸­é€šè¿‡å¦‚ä¸‹æ–¹æ³•è·³è½¬</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//æ–¹å¼ä¸€</span><br>Navigator.pushNamed(context, searchPage);<br><br><span class="hljs-comment">//æ–¹å¼äºŒ</span><br>Navigator.of(context).pushNamed(searchPage);<br><br><span class="hljs-comment">//ä¸Šè¿°ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼Œå®é™…ä¸Šæ–¹å¼ä¸€æ˜¯å¯¹æ–¹å¼äºŒçš„å°è£…</span><br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å‘ç°ä¸€ä¸ªè§„å¾‹ï¼š<strong>Navigator æä¾›äº†ä¸¤ç§ Api è°ƒç”¨æ–¹å¼ï¼š<code>Navigator.api...</code> å’Œ <code>Navigator.of(context).api...</code>ï¼Œå‰è€…æ˜¯åè€…çš„ä¸€ä¸ªå°è£…</strong>ï¼Œåé¢æˆ‘ä»¬éƒ½ä»¥å‰è€…ä¸¾ä¾‹</p><h4 id="1-2-2ã€å‘½åè·¯ç”±ä¼ å€¼"><a href="#1-2-2ã€å‘½åè·¯ç”±ä¼ å€¼" class="headerlink" title="1.2.2ã€å‘½åè·¯ç”±ä¼ å€¼"></a>1.2.2ã€å‘½åè·¯ç”±ä¼ å€¼</h4><p>å®åˆ™å°±æ˜¯ç»™ SearchPage çš„æ„é€ æ–¹æ³•ä¼ å…¥å®å‚ï¼š</p><p>1ã€ä¿®æ”¹  Routes.dart ä¸­çš„è·¯ç”±è·³æŠ“</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//...</span><br><span class="hljs-keyword">final</span> routes = &#123;<br>  <span class="hljs-comment">//æ”¹åŠ¨ç‚¹ï¼šæ–°å¢ arguments å‘½åå‚æ•°ä¼ ç»™ SearchPage</span><br>  searchPage: (context,&#123;arguments&#125;) =&gt; SearchPage(arguments: arguments)<br>&#125;;<br></code></pre></td></tr></table></figure><p>2ã€ä¿®æ”¹ HomePage çš„ç‚¹å‡»äº‹ä»¶è·³è½¬æ–¹æ³•</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">Navigator.pushNamed(context, searchPage,arguments: <span class="hljs-string">&quot;erdai666&quot;</span>);<br></code></pre></td></tr></table></figure><p>æ•ˆæœå±•ç¤ºï¼š</p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b1faa83a0564f1484c55168cdd74ae6~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker.gif" width="30%" /><h3 id="1-3ã€è¿”å›ä¸Šä¸€çº§"><a href="#1-3ã€è¿”å›ä¸Šä¸€çº§" class="headerlink" title="1.3ã€è¿”å›ä¸Šä¸€çº§"></a>1.3ã€è¿”å›ä¸Šä¸€çº§</h3><p>ä¸Šè¿°æ•ˆæœå›¾ä¸­ï¼ŒSearchPage å·¦ä¸Šè§’ç™½è‰²çš„è¿”å›æŒ‰é’®æ˜¯ç³»ç»Ÿç»™æˆ‘ä»¬å®ç°çš„ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è‡ªå·±å®ç°è¿”å›ä¸Šä¸€çº§çš„æ•ˆæœï¼Œä½¿ç”¨å¦‚ä¸‹ Api å³å¯ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">Navigator.pop(context);<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬ç»™ SearchPage ä¸­é—´çš„å†…å®¹åŒºåŸŸæ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œè®©å®ƒè¿”å›ä¸Šä¸€çº§ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SearchPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-keyword">final</span> arguments;<br><br>  SearchPage(&#123;<span class="hljs-keyword">this</span>.arguments&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>        appBar: AppBar(<br>            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;SearchPage&#x27;</span>)<br>        ),<br>        body: Center(<br>          <span class="hljs-comment">//æ–°å¢éƒ¨åˆ†çš„ä»£ç </span><br>          child: InkWell(<br>            child: Text(<span class="hljs-string">&quot;æœç´¢é¡µé¢å†…å®¹åŒºåŸŸï¼š<span class="hljs-subst">$arguments</span>&quot;</span>),<br>            onTap: ()&#123;<br>              Navigator.pop(context);<br>            &#125;,<br>          ),<br>        )<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æˆ‘ä»¬ä½¿ç”¨åˆ°äº† InkWell Widgetï¼Œå®ƒçš„ä½œç”¨æ˜¯ç»™æ²¡æœ‰ç‚¹å‡»äº‹ä»¶çš„ Widget æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œçœ‹æ•ˆæœï¼š</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e7b86175f8c846238ea6a1b18c0b8d3b~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker (1).gif" width="30%" /><h3 id="1-4ã€æ›¿æ¢è·¯ç”±"><a href="#1-4ã€æ›¿æ¢è·¯ç”±" class="headerlink" title="1.4ã€æ›¿æ¢è·¯ç”±"></a>1.4ã€æ›¿æ¢è·¯ç”±</h3><p>1ï¼‰ã€å’Œ Android ä¸­å…ˆå¯åŠ¨ä¸€ä¸ª Activity ç„¶å finish ä¸Šä¸ª Activity ç±»ä¼¼ã€‚æ›¿æ¢è·¯ç”±å°±æ˜¯å¯åŠ¨ä¸€ä¸ªæ–°é¡µé¢ï¼Œç„¶åå°†æ–°é¡µé¢æ›¿æ¢ä¸Šä¸€ä¸ªé¡µé¢</p><p>2ï¼‰ã€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Navigator.pushReplacementNamed</code> è¿›è¡Œè·¯ç”±çš„æ›¿æ¢</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª LoginPage.dart çš„ç™»é™†é¡µï¼Œç„¶åä½¿ç”¨ LoginPage æ›¿æ¢ SearchPageï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ã€LoginPage ç¼–å†™</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>        appBar: AppBar(<br>            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;LoginPage&#x27;</span>)<br>        ),<br>        body: <span class="hljs-keyword">const</span> Center(<br>          child: Text(<span class="hljs-string">&quot;å»æ³¨å†Œ&quot;</span>),<br>        )<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€åœ¨ Routes.dart ä¸­æ–°å¢è·¯ç”±ä¿¡æ¯</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutterapplication/pages/LoginPage.dart&#x27;</span>;<br><br><span class="hljs-comment">//...</span><br><span class="hljs-built_in">String</span> loginPage = <span class="hljs-string">&quot;/loginPage&quot;</span>;<br><br><span class="hljs-keyword">final</span> routes = &#123;<br>  <span class="hljs-comment">//...</span><br>  loginPage: (context) =&gt; LoginPage()<br>&#125;;<br></code></pre></td></tr></table></figure><p>3ã€ä¿®æ”¹ SearchPage çš„ç‚¹å‡»äº‹ä»¶è·³è½¬æ–¹æ³•</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//...</span><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SearchPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-keyword">final</span> arguments;<br><br>  SearchPage(&#123;<span class="hljs-keyword">this</span>.arguments&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>        appBar: AppBar(<br>            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;SearchPage&#x27;</span>)<br>        ),<br>        body: Center(<br>          child: InkWell(<br>            child: Text(<span class="hljs-string">&quot;æœç´¢é¡µé¢å†…å®¹åŒºåŸŸï¼š<span class="hljs-subst">$arguments</span>&quot;</span>),<br>            onTap: ()&#123;<br>              <span class="hljs-comment">//è·¯ç”±æ›¿æ¢</span><br>              Navigator.pushReplacementNamed(context,loginPage);<br>            &#125;,<br>          ),<br>        )<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>4ã€æ•ˆæœå±•ç¤º</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da99b98353d949b08570cb1c0b3443ea~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker (2).gif" width="30%" /><p>æ•ˆæœå›¾ä¸­æˆ‘ä»¬ç‚¹å‡» LoginPage çš„è¿”å›æŒ‰é’®è¿”å›åˆ°äº† HomePage ï¼Œè¯æ˜ SearchPage è¢«æ›¿æ¢</p><h3 id="1-5ã€è¿”å›åˆ°æ ¹è·¯ç”±"><a href="#1-5ã€è¿”å›åˆ°æ ¹è·¯ç”±" class="headerlink" title="1.5ã€è¿”å›åˆ°æ ¹è·¯ç”±"></a>1.5ã€è¿”å›åˆ°æ ¹è·¯ç”±</h3><p>1ï¼‰ã€å’Œ Android ä¸­å¯åŠ¨ä¸€ä¸ª Activityï¼Œç„¶åå°†è¿™ä¸ª Activity ä¹‹ä¸Šçš„æ‰€æœ‰ Activity å¼¹å‡ºæ ˆç±»ä¼¼ã€‚è¿”å›æ ¹è·¯ç”±å°±æ˜¯å°†å½“å‰é¡µé¢ä¹‹ä¸Šçš„é¡µé¢å…¨éƒ¨ç§»é™¤æ‰</p><p>2ï¼‰ã€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Navigator.pushAndRemoveUtil</code> è¿”å›æ ¹è·¯ç”±</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª RegisterPage.dart çš„æ³¨å†Œé¡µï¼Œç„¶å Hompage -&gt; SearchPage -&gt; LoginPage -&gt; RegisterPage éƒ½ä½¿ç”¨ <code>Navigator.pushNamed</code> æ–¹å¼è·³è½¬ï¼ŒRegisterPage -&gt; Hompage ä½¿ç”¨ <code>Navigator.pushAndRemoveUtil</code> æ–¹å¼è·³è½¬ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>1ã€LoginPage ç¼–å†™</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutterapplication/HomePage.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Registerpage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>        appBar: AppBar(<br>            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;RegisterPage&#x27;</span>)<br>        ),<br>        body:  Center(<br>          child: InkWell(<br>            child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&quot;æ³¨å†ŒæˆåŠŸï¼Œå» HomePage&quot;</span>),<br>            onTap: ()&#123;<br>              <span class="hljs-comment">//é€šè¿‡è¿”å›æ ¹è·¯ç”±è·³è½¬åˆ° HomePage </span><br>              Navigator.pushAndRemoveUntil(<br>                  context,<br>                  MaterialPageRoute(builder: (context)&#123;<br>                    <span class="hljs-keyword">return</span> HomePage();<br>                  &#125;),<br>                  (route) =&gt; <span class="hljs-keyword">false</span>);<br>            &#125;,<br>          ),<br>        )<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>2ã€åœ¨ Routes.dart ä¸­æ–°å¢è·¯ç”±ä¿¡æ¯</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutterapplication/pages/RegisterPage.dart&#x27;</span>;<br><br><span class="hljs-comment">//...</span><br><span class="hljs-built_in">String</span> registerPage = <span class="hljs-string">&quot;/registerPage&quot;</span>;<br><br><span class="hljs-keyword">final</span> routes = &#123;<br>  <span class="hljs-comment">//...</span><br>  registerPage: (context) =&gt; RegisterPage()<br>&#125;;<br></code></pre></td></tr></table></figure><p>3ã€ä¿®æ”¹ Hompageï¼ŒSearchPageï¼ŒLoginPage çš„è·³è½¬æ–¹å¼ä¸º <code>Navigator.pushNamed</code></p><p>4ã€æ•ˆæœå±•ç¤º</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2c6bf6ff3eb4510bbd21d66cd4af71f~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker (3).gif" width="30%" /><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬ä» RegisterPage åˆ° HomePageï¼Œç„¶ååœ¨è¿”å›ï¼Œç›´æ¥é€€åˆ°äº†æ¡Œé¢ï¼Œè¯æ˜å…¶å®ƒé¡µé¢éƒ½è¢«ç§»é™¤äº†</p><h2 id="äºŒã€HTTPS-è¯·æ±‚å®æˆ˜"><a href="#äºŒã€HTTPS-è¯·æ±‚å®æˆ˜" class="headerlink" title="äºŒã€HTTPS è¯·æ±‚å®æˆ˜"></a>äºŒã€HTTPS è¯·æ±‚å®æˆ˜</h2><p>Flutter ä¸­å‘èµ·ç½‘ç»œè¯·æ±‚è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼š</p><blockquote><p> http </p><p> é“¾æ¥ï¼š<a href="https://pub.dev/packages/http">https://pub.dev/packages/http</a></p></blockquote><p>è¿™é‡Œéœ€è¦å¤§å®¶æŒæ¡ Dart å¼‚æ­¥ç¼–ç¨‹åŸºç¡€ï¼Œè¿˜ä¸æ˜ç™½çš„çœ‹æˆ‘<a href="https://juejin.cn/post/7130647339294785549#heading-80">Flutter ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šDart è¯­æ³•ç­‘åŸº</a>è¿™ç¯‡æ–‡ç« </p><p>åœ¨é¡¹ç›®çš„ pubspec.yaml é…ç½®æ–‡ä»¶æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart">dependencies:<br>  http: ^<span class="hljs-number">0.13</span><span class="hljs-number">.5</span><br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œç®€å•çš„ä»‹ç»ä¸‹ getï¼Œpost è¯·æ±‚ï¼Œè¿™é‡Œç‰¹åˆ«æ„Ÿè°¢ <a href="https://www.wanandroid.com/">WanAndroid</a> æä¾›çš„ Api</p><h3 id="2-1ã€get-è¯·æ±‚"><a href="#2-1ã€get-è¯·æ±‚" class="headerlink" title="2.1ã€get è¯·æ±‚"></a>2.1ã€get è¯·æ±‚</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//å¯¼å…¥ http å¹¶è®¾ç½®åˆ«å</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:http/http.dart&#x27;</span> <span class="hljs-keyword">as</span> http;<br><br><span class="hljs-comment">//ä½¿ç”¨ async æ ‡è®°ä¸ºå¼‚æ­¥</span><br><span class="hljs-keyword">void</span> _getData() <span class="hljs-keyword">async</span>&#123;<br>  <span class="hljs-comment">//æ„å»ºè¯·æ±‚ uri</span><br>  <span class="hljs-keyword">var</span> uri = <span class="hljs-built_in">Uri</span>.https(<span class="hljs-string">&quot;www.wanandroid.com&quot;</span>, <span class="hljs-string">&quot;/friend/json&quot;</span>);<br>  <span class="hljs-comment">//ä½¿ç”¨ http å‘èµ· get è¯·æ±‚ï¼Œç­‰å¾…è¿”å›ç»“æœè¿›è¡Œåç»­ä»£ç æ‰§è¡Œ</span><br>  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> http.<span class="hljs-keyword">get</span>(uri);<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;====&gt; <span class="hljs-subst">$&#123;result.statusCode&#125;</span>&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">void</span> main()&#123;<br>  _getData();<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>====&gt; <span class="hljs-number">200</span><br></code></pre></td></tr></table></figure><h3 id="2-2ã€post-è¯·æ±‚"><a href="#2-2ã€post-è¯·æ±‚" class="headerlink" title="2.2ã€post è¯·æ±‚"></a>2.2ã€post è¯·æ±‚</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//json è½¬æ¢</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;dart:convert&#x27;</span>;<br><span class="hljs-comment">//å¯¼å…¥ http å¹¶è®¾ç½®åˆ«å</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:http/http.dart&#x27;</span> <span class="hljs-keyword">as</span> http;<br><br><br><span class="hljs-comment">//ä½¿ç”¨ async æ ‡è®°ä¸ºå¼‚æ­¥</span><br><span class="hljs-keyword">void</span> _postData() <span class="hljs-keyword">async</span>&#123;<br>  <span class="hljs-comment">//æ„å»ºè¯·æ±‚ uri</span><br>  <span class="hljs-keyword">var</span> uri = <span class="hljs-built_in">Uri</span>.https(<span class="hljs-string">&quot;www.wanandroid.com&quot;</span>, <span class="hljs-string">&quot;/user/login&quot;</span>);<br>  <span class="hljs-comment">//ä½¿ç”¨ http å‘èµ· post è¯·æ±‚ï¼Œç­‰å¾…è¿”å›ç»“æœè¿›è¡Œåç»­ä»£ç æ‰§è¡Œ</span><br>  <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> http.post(uri,body: &#123;<span class="hljs-string">&quot;username&quot;</span>:<span class="hljs-string">&quot;è´¦å·&quot;</span>,<span class="hljs-string">&quot;password&quot;</span>:<span class="hljs-string">&quot;å¯†ç &quot;</span>&#125;);<br>  <span class="hljs-keyword">if</span> (result.statusCode == <span class="hljs-number">200</span>) &#123;<br>    <span class="hljs-comment">//å°† json è§£ææˆ map</span><br>    <span class="hljs-keyword">var</span> resultMap = json.decode(result.body) <span class="hljs-keyword">as</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>,<span class="hljs-built_in">dynamic</span>&gt;;<br>    <span class="hljs-comment">//æ‰“å° map é‡Œé¢çš„å±æ€§</span><br>    <span class="hljs-built_in">print</span>(resultMap[<span class="hljs-string">&quot;data&quot;</span>][<span class="hljs-string">&quot;nickname&quot;</span>]);<br>  &#125;<br>&#125;<br><br><br><span class="hljs-keyword">void</span> main()&#123;<br>  _postData();<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>sweetying<br></code></pre></td></tr></table></figure><h3 id="2-3ã€è¯·æ±‚æ¡ˆä¾‹å®æˆ˜"><a href="#2-3ã€è¯·æ±‚æ¡ˆä¾‹å®æˆ˜" class="headerlink" title="2.3ã€è¯·æ±‚æ¡ˆä¾‹å®æˆ˜"></a>2.3ã€è¯·æ±‚æ¡ˆä¾‹å®æˆ˜</h3><p>é¦–å…ˆçœ‹ä¸€çœ¼æˆ‘ä»¬è¦å®ç°çš„æ•ˆæœï¼š</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45f74a89d3914ba7bfb01a74833891ec~tplv-k3u1fbpfcp-watermark.image?" alt="ezgif.com-gif-maker (4).gif" width="30%" /><p>å®é™…ä¸Šå°±æ˜¯å°†æˆ‘ä»¬è¯·æ±‚çš„ç½‘ç»œæ•°æ®ä½¿ç”¨ ListView å±•ç¤ºå‡ºæ¥ï¼Œæ¯”è¾ƒç®€å•ï¼Œå¤§å®¶ä¸»è¦æŒæ¡æ€è·¯ï¼Œç›´æ¥ä¸Šä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//å¯¼åŒ…</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;dart:convert&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:http/http.dart&#x27;</span> <span class="hljs-keyword">as</span> http;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpPracticePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  _HttpPracticePageState createState() =&gt; _HttpPracticePageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_HttpPracticePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">HttpPracticePage</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">var</span> list = [];<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> initState() &#123;<br>    <span class="hljs-keyword">super</span>.initState();<br>    <span class="hljs-comment">//åŠ è½½ç½‘ç»œæ•°æ®</span><br>    _getData();<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> MaterialApp(<br>      home: Scaffold(<br>          appBar: AppBar(<br>            title: Text(<span class="hljs-string">&#x27;Http å®è·µé¡µé¢&#x27;</span>),<br>          ),<br>          <span class="hljs-comment">//å¦‚æœ list ä¸ºç©ºï¼Œå±•ç¤ºä¸ºç©ºç™½é¡µé¢ï¼Œä¸ä¸ºç©ºæ¸²æŸ“ ListView</span><br>          body: list.isNotEmpty<br>              ? ListView.builder(<br>              itemCount: list.length,<br>              itemBuilder: (context, index) &#123;<br>                  <span class="hljs-keyword">return</span> ListTile(<br>                      title: Text(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;list[index][<span class="hljs-string">&quot;name&quot;</span>]&#125;</span>&quot;</span>),<br>                      subtitle: Text(<span class="hljs-string">&quot;<span class="hljs-subst">$&#123;list[index][<span class="hljs-string">&quot;link&quot;</span>]&#125;</span>&quot;</span>));<br>                &#125;)<br>              : Text(<span class="hljs-string">&quot;&quot;</span>)),<br>    );<br>  &#125;<br><br>  <span class="hljs-comment">//ä½¿ç”¨ async æ ‡è®°ä¸ºå¼‚æ­¥</span><br>  <span class="hljs-keyword">void</span> _getData() <span class="hljs-keyword">async</span> &#123;<br>    <span class="hljs-comment">//æ„å»ºè¯·æ±‚ uri</span><br>    <span class="hljs-keyword">var</span> uri = <span class="hljs-built_in">Uri</span>.https(<span class="hljs-string">&quot;www.wanandroid.com&quot;</span>, <span class="hljs-string">&quot;/friend/json&quot;</span>);<br>    <span class="hljs-comment">//ä½¿ç”¨ http å‘èµ· get è¯·æ±‚ï¼Œç­‰å¾…è¿”å›ç»“æœè¿›è¡Œåç»­ä»£ç æ‰§è¡Œ</span><br>    <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> http.<span class="hljs-keyword">get</span>(uri);<br>    <span class="hljs-keyword">if</span> (result.statusCode == <span class="hljs-number">200</span>) &#123;<br>      <span class="hljs-comment">//å°† json è§£ææˆ map</span><br>      <span class="hljs-keyword">var</span> map = json.decode(result.body) <span class="hljs-keyword">as</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;;<br>      <span class="hljs-comment">//é€šçŸ¥ UI è¿›è¡Œåˆ·æ–°</span><br>      setState(() &#123;<br>        list = map[<span class="hljs-string">&quot;data&quot;</span>];<br>      &#125;);<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†ï¼š</p><p>1ã€Flutter ä¸­çš„è·¯ç”±ä½¿ç”¨ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯ä½¿ç”¨ä¸åŒçš„ Api</p><p>2ã€æ¨èä½¿ç”¨è·¯ç”±ç»Ÿä¸€ç®¡ç†ä»¥åŠå¯¼åŒ…çš„æ—¶å€™ä½¿ç”¨ç»å¯¹è·¯å¾„</p><p>3ã€ç®€å•çš„ä»‹ç»äº†ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ http è¿›è¡Œ getï¼Œpost è¯·æ±‚ï¼Œæœ€åè¿›è¡Œäº†ä¸€ä¸ªè¯·æ±‚æ¡ˆä¾‹çš„å®æˆ˜</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤</p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®² Flutter ä¸ Android çš„é€šä¿¡ï¼Œå°½è¯·æœŸå¾…å§ğŸº</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://www.bilibili.com/video/BV1S4411E7LY?p=19&vd_source=d0b24cb21c438ff4a9ac2e589eacb3d9">Flutter æ•™ç¨‹</a>ï¼šé€šä¿—æ˜“æ‡‚çš„ Flutter å…¥é—¨æ•™ç¨‹</p><blockquote><p><strong>ä½ çš„ç‚¹èµï¼Œè¯„è®ºï¼Œæ˜¯å¯¹æˆ‘å·¨å¤§çš„é¼“åŠ±ï¼</strong></p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„<strong>å…¬ä¼—å·ï¼š</strong>  <a href="https://link.juejin.cn/?target=http://m6z.cn/6jwi7b" title="http://m6z.cn/6jwi7b"><strong>sweetying</strong></a> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p><p>å¦‚æœ<strong>æœ‰é—®é¢˜</strong>ï¼Œå…¬ä¼—å·å†…æœ‰åŠ æˆ‘å¾®ä¿¡çš„å…¥å£ï¼Œåœ¨æŠ€æœ¯å­¦ä¹ ã€ä¸ªäººæˆé•¿çš„é“è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸€èµ·å‰è¿›ï¼</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Flutter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutter ç³»åˆ—ï¼ˆå…­ï¼‰ï¼šFlutter å¸¸ç”¨è¡¨å• Widget</title>
    <link href="/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9AFlutter%20%E5%B8%B8%E7%94%A8%E8%A1%A8%E5%8D%95%20Widget/"/>
    <url>/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E5%85%AD%EF%BC%89%EF%BC%9AFlutter%20%E5%B8%B8%E7%94%A8%E8%A1%A8%E5%8D%95%20Widget/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101705690.jpeg" alt="beach-1824855_1920"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† Flutter ä¸­å¸¸ç”¨çš„æŒ‰é’® Widgetï¼ŒFlutter 1.x å’Œ Flutter 2.x æŒ‰é’®çš„å˜åŒ–ï¼Œæœ€åé€šè¿‡ Flutter 1.x ç›¸å…³ Button + BottomNavigationBar + FloatingActionButton å®ç°äº†ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹ã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/7137082885571346463">Flutter ç³»åˆ—ï¼ˆäº”ï¼‰ï¼šFlutter å¸¸ç”¨æŒ‰é’® Widget</a>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ Flutter è¡¨å• Widget è¿›è¡Œå­¦ä¹ </p><p>Flutter ä¸­å¸¸è§çš„è¡¨å•æœ‰ï¼šTextFieldï¼ŒCheckBoxï¼ŒRadioï¼ŒSwitchï¼ŒCheckboxListTileï¼ŒRadioListTileï¼ŒSwitchListTileï¼ŒSlider ç­‰ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹è¿™äº›å¸¸ç”¨çš„ Widget</p><h2 id="ä¸€ã€Flutter-å¸¸ç”¨è¡¨å•-Widget-ä»‹ç»"><a href="#ä¸€ã€Flutter-å¸¸ç”¨è¡¨å•-Widget-ä»‹ç»" class="headerlink" title="ä¸€ã€Flutter å¸¸ç”¨è¡¨å• Widget ä»‹ç»"></a>ä¸€ã€Flutter å¸¸ç”¨è¡¨å• Widget ä»‹ç»</h2><h3 id="1-1ã€TextFiled-æ–‡æœ¬æ¡†"><a href="#1-1ã€TextFiled-æ–‡æœ¬æ¡†" class="headerlink" title="1.1ã€TextFiled æ–‡æœ¬æ¡†"></a>1.1ã€TextFiled æ–‡æœ¬æ¡†</h3><p>TextFiled æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„æ–‡æœ¬æ¡† Widgetï¼Œå…¶å¸¸ç”¨çš„å±æ€§æœ‰ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>maxLines</td><td>int</td><td>è®¾ç½®æ­¤å‚æ•°å¯ä»¥æŠŠæ–‡æœ¬æ¡†æ”¹ä¸ºå¤šè¡Œæ–‡æœ¬æ¡†</td></tr><tr><td>onChanged</td><td>ValueChanged<String></td><td>æ–‡æœ¬æ¡†æ”¹å˜æ—¶è§¦å‘çš„äº‹ä»¶</td></tr><tr><td>decoratioin</td><td>InputDecoration</td><td>è£…é¥°ï¼ŒInputDecoration å¸¸ç”¨å±æ€§ï¼š<br>hintTextï¼šé»˜è®¤æç¤ºæ–‡æ¡ˆ<br>borderï¼šæ–‡æœ¬æ¡†è¾¹æ¡†ï¼Œé…åˆ OutlineInputBorder ä½¿ç”¨<br>labelTextï¼šlabel çš„åç§°<br>labelStyleï¼šé…ç½® label çš„æ ·å¼</td></tr><tr><td>obscureText</td><td>bool</td><td>æ˜¯å¦æŠŠæ–‡æœ¬æ¡†æ”¹ä¸ºå¯†ç æ¡†</td></tr><tr><td>controller</td><td>TextEditingController</td><td>é…ç½®æ–‡æœ¬æ¡†é»˜è®¤æ˜¾ç¤ºçš„å†…å®¹</td></tr></tbody></table><p>è¿è¡Œä¸‹é¢ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Form Practice&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>      ),<br>      body: MyBodyPage(), <span class="hljs-comment">//è‡ªå®šä¹‰ body Wdiget</span><br>    )<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Padding(<br>      padding: EdgeInsets.all(<span class="hljs-number">20</span>),<br>      child: Column(<br>        children: [<br>          TextField( <span class="hljs-comment">//è´¦å·è¾“å…¥æ¡†</span><br>            maxLines: <span class="hljs-number">1</span>, <span class="hljs-comment">//æœ€å¤§æ˜¾ç¤ºä¸€è¡Œ</span><br>            decoration: InputDecoration(<br>                hintText: <span class="hljs-string">&quot;please input account&quot;</span>, <span class="hljs-comment">//é»˜è®¤æç¤ºæ–‡æ¡ˆ</span><br>                label: Text(<span class="hljs-string">&quot;Account&quot;</span>) <span class="hljs-comment">//æ–‡æœ¬æ¡†æ ‡ç­¾æç¤º</span><br>            ),<br>          ),<br>          SizedBox(height: <span class="hljs-number">20</span>),<br>          TextField(<span class="hljs-comment">//å¯†ç è¾“å…¥æ¡†</span><br>            maxLines: <span class="hljs-number">1</span>, <span class="hljs-comment">//æœ€å¤§æ˜¾ç¤ºä¸€è¡Œ</span><br>            obscureText: <span class="hljs-keyword">true</span>, <span class="hljs-comment">//è®¾ç½®æ–‡æœ¬è¾“å…¥ä¸ºå¯†æ–‡</span><br>            decoration: InputDecoration(<br>                hintText: <span class="hljs-string">&quot;please input password&quot;</span>, <span class="hljs-comment">//é»˜è®¤æç¤ºæ–‡æ¡ˆ</span><br>                label: Text(<span class="hljs-string">&quot;Password&quot;</span>) <span class="hljs-comment">//æ–‡æœ¬æ¡†æ ‡ç­¾æç¤º</span><br>            ),<br>          )<br>        ],<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02d56e52ecc84c8baebd9e8b1f3cc86c~tplv-k3u1fbpfcp-watermark.image?" alt="textfield.png" width="50%" /><h3 id="1-2ã€Checkboxï¼ŒCheckboxListTile-å¤é€‰æ¡†"><a href="#1-2ã€Checkboxï¼ŒCheckboxListTile-å¤é€‰æ¡†" class="headerlink" title="1.2ã€Checkboxï¼ŒCheckboxListTile å¤é€‰æ¡†"></a>1.2ã€Checkboxï¼ŒCheckboxListTile å¤é€‰æ¡†</h3><p>Checkbox æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„å¤é€‰æ¡† Widgetï¼Œå¸¸ç”¨å±æ€§æœ‰ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>bool</td><td>å¿…å¡«é¡¹ï¼Œtrueï¼šé€‰ä¸­ï¼Œfalseï¼šæœªé€‰ä¸­</td></tr><tr><td>onChanged</td><td>ValueChanged<bool></td><td>å¿…å¡«é¡¹ï¼Œæ”¹å˜æ—¶è§¦å‘çš„äº‹ä»¶</td></tr><tr><td>activeColor</td><td>Color</td><td>é€‰ä¸­çš„èƒŒæ™¯é¢œè‰²</td></tr><tr><td>checkColor</td><td>Color</td><td>é€‰ä¸­å¤é€‰æ¡†é‡Œé¢ç¬¦å·çš„é¢œè‰²</td></tr></tbody></table><p>CheckboxListTile æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„å¤é€‰æ¡†åˆ—è¡¨ Itemï¼Œå¸¸ç”¨å±æ€§æœ‰ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>bool</td><td>å¿…å¡«é¡¹ï¼Œtrueï¼šé€‰ä¸­ï¼Œfalseï¼šæœªé€‰ä¸­</td></tr><tr><td>onChanged</td><td>ValueChanged<bool></td><td>å¿…å¡«é¡¹ï¼Œæ”¹å˜æ—¶è§¦å‘çš„äº‹ä»¶</td></tr><tr><td>activeColor</td><td>Color</td><td>é€‰ä¸­çš„èƒŒæ™¯é¢œè‰²ï¼Œå¦‚æœ selected ä¸º true ï¼Œåˆ™ titleï¼Œsubtitleï¼Œsecondary ä¹Ÿä¼šå˜</td></tr><tr><td>checkColor</td><td>Color</td><td>é€‰ä¸­å¤é€‰æ¡†é‡Œé¢ç¬¦å·çš„é¢œè‰²</td></tr><tr><td>title</td><td>Widget</td><td>æ ‡é¢˜</td></tr><tr><td>subtitle</td><td>Widget</td><td>äºŒçº§æ ‡é¢˜</td></tr><tr><td>secondary</td><td>Widget</td><td>é…ç½®æ˜¾ç¤ºçš„å›¾æ ‡æˆ–å›¾ç‰‡</td></tr><tr><td>selected</td><td>bool</td><td>é€‰ä¸­æ—¶å…¶å®ƒå­ Widget é¢œè‰²æ˜¯å¦è·Ÿç€æ”¹å˜</td></tr></tbody></table><p>åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰ Wdiget éƒ½æ˜¯ç»§æ‰¿ StatelessWidgetï¼Œä½†è¡¨å•ç›¸å…³çš„ Widget éƒ½æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå› æ­¤éœ€è¦ç»§æ‰¿ StatefulWidget æ¥åŠ¨æ€å±•ç¤ºå®ƒçš„ä¸€ä¸ªçŠ¶æ€ï¼Œç»§æ‰¿ StatefulWidget çš„ä¸€ä¸ªæ ‡å‡†æ¨¡ç‰ˆå¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span></span>&#123;<br>  <span class="hljs-meta">@override</span><br>  State&lt;StatefulWidget&gt; createState() =&gt; _MyBodyPageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyBodyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyBodyPage</span>&gt;</span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> implement build</span><br>    <span class="hljs-keyword">throw</span> UnimplementedError();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ Checkboxï¼ŒCheckboxListTile æ¥å®è·µä¸€ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Form Practice&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>      ),<br>      body: MyBodyPage(), <span class="hljs-comment">//è‡ªå®šä¹‰ body Wdiget</span><br>    )<br>  ));<br>&#125;<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span></span>&#123;<br>  <span class="hljs-meta">@override</span><br>  State&lt;StatefulWidget&gt; createState() =&gt; _MyBodyPageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyBodyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyBodyPage</span>&gt; </span>&#123;<br><br>  <span class="hljs-comment">//è®°å½•ç¬¬ä¸€ä¸ªå¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€</span><br>  <span class="hljs-keyword">var</span> flag1 = <span class="hljs-keyword">false</span>;<br>  <span class="hljs-comment">//è®°å½•ç¬¬äºŒä¸ªå¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€</span><br>  <span class="hljs-keyword">var</span> flag2 = <span class="hljs-keyword">false</span>;<br>  <span class="hljs-comment">//è®°å½•ç¬¬ä¸‰ä¸ªå¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€</span><br>  <span class="hljs-keyword">var</span> flag3 = <span class="hljs-keyword">false</span>;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Column(<br>      mainAxisAlignment: MainAxisAlignment.center,<br>      children: [<br>        Checkbox( <span class="hljs-comment">//ç¬¬ä¸€ä¸ªå¤é€‰æ¡†</span><br>          value: flag1,<br>          onChanged: (value)&#123;<br>            setState(() &#123;<br>              flag1 = value??<span class="hljs-keyword">false</span>; <span class="hljs-comment">//æ›´æ–°å¤é€‰æ¡†çš„çŠ¶æ€</span><br>            &#125;);<br>          &#125;,<br>        ),<br>        Row(<br>          mainAxisAlignment: MainAxisAlignment.center,<br>          children: [<br>            Text(flag1 == <span class="hljs-keyword">true</span> ? <span class="hljs-string">&quot;é€‰ä¸­&quot;</span> : <span class="hljs-string">&quot;æœªé€‰ä¸­&quot;</span>)<br>          ],<br>        ),<br>        Divider(color: Colors.black),<br>        CheckboxListTile(value: flag2, onChanged: (value)&#123; <span class="hljs-comment">//ç¬¬äºŒä¸ªå¤é€‰æ¡†åˆ—è¡¨ item</span><br>          setState(() &#123;<br>            flag2 = value??<span class="hljs-keyword">false</span>; <span class="hljs-comment">//æ›´æ–°å¤é€‰æ¡†çš„çŠ¶æ€</span><br>          &#125;);<br>        &#125;,<br>          activeColor: Colors.green, <span class="hljs-comment">//é€‰ä¸­çš„èƒŒæ™¯é¢œè‰²ï¼Œå¦‚æœ selected ä¸º true ï¼Œåˆ™ titleï¼Œsubtitleï¼Œsecondary ä¹Ÿä¼šå˜</span><br>          checkColor: Colors.black, <span class="hljs-comment">//é€‰ä¸­å¤é€‰æ¡†é‡Œé¢ç¬¦å·çš„é¢œè‰²</span><br>          title: Text(<span class="hljs-string">&#x27;æ ‡é¢˜&#x27;</span>), <span class="hljs-comment">//å±•ç¤ºæ ‡é¢˜</span><br>          subtitle: Text(<span class="hljs-string">&quot;æè¿°&quot;</span>), <span class="hljs-comment">//å±•ç¤ºå‰¯æ ‡é¢˜</span><br>          selected: flag2, <span class="hljs-comment">//é€‰ä¸­æ—¶å…¶å®ƒå­ Widget é¢œè‰²è·Ÿç€æ”¹å˜</span><br>        ),<br><br>        Divider(color: Colors.black),<br><br>        CheckboxListTile(value: flag3, onChanged: (value)&#123; <span class="hljs-comment">//ç¬¬ä¸‰ä¸ªå¤é€‰æ¡†åˆ—è¡¨ item</span><br>          setState(() &#123;<br>            flag3 = value??<span class="hljs-keyword">false</span>; <span class="hljs-comment">//æ›´æ–°å¤é€‰æ¡†çš„çŠ¶æ€</span><br>          &#125;);<br>        &#125;,<br>          title: Text(<span class="hljs-string">&#x27;æ ‡é¢˜&#x27;</span>), <span class="hljs-comment">//å±•ç¤ºæ ‡é¢˜</span><br>          subtitle: Text(<span class="hljs-string">&quot;æè¿°&quot;</span>), <span class="hljs-comment">//å±•ç¤ºå‰¯æ ‡é¢˜</span><br>          secondary: Icon(Icons.home), <span class="hljs-comment">//å±•ç¤ºå›¾æ ‡</span><br>          selected: <span class="hljs-keyword">false</span>, <span class="hljs-comment">//é€‰ä¸­æ—¶å…¶å®ƒå­ Widget é¢œè‰²ä¸è·Ÿç€æ”¹å˜</span><br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/152787ffc53245e6952bdb94f269da08~tplv-k3u1fbpfcp-watermark.image?" alt="checkbox.gif" width="30%" /><h3 id="1-3ã€Radioï¼ŒRadioListTile-å•é€‰æ¡†"><a href="#1-3ã€Radioï¼ŒRadioListTile-å•é€‰æ¡†" class="headerlink" title="1.3ã€Radioï¼ŒRadioListTile å•é€‰æ¡†"></a>1.3ã€Radioï¼ŒRadioListTile å•é€‰æ¡†</h3><p>Radioï¼ŒRadioListTile æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„å•é€‰æ¡†å’Œå•é€‰æ¡†åˆ—è¡¨ Itemï¼Œå®ƒçš„å¸¸ç”¨å±æ€§å’Œ Checkboxï¼ŒCheckboxListTile éå¸¸ç±»ä¼¼ï¼ŒåŒºåˆ«å°±æ˜¯ï¼šRadioï¼ŒRadioListTile å¿…é¡»æä¾›ä¸€ä¸ª groupValue å±æ€§ç”¨äºè®°å½•å•é€‰æ¡†çš„åˆ†ç»„ï¼Œç›´æ¥ä¸Šä»£ç æ„Ÿå—ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Form Practice&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>      ),<br>      body: MyBodyPage(), <span class="hljs-comment">//è‡ªå®šä¹‰ body Wdiget</span><br>    )<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  State&lt;StatefulWidget&gt; createState() =&gt; _MyBodyPageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyBodyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyBodyPage</span>&gt; </span>&#123;<br>  <span class="hljs-comment">//æ€§åˆ«</span><br>  <span class="hljs-built_in">int</span> sex = <span class="hljs-number">1</span>;<br>  <span class="hljs-comment">//ç¬¬äºŒä¸ªå¤é€‰æ¡†çŠ¶æ€æ ‡è®°</span><br>  <span class="hljs-built_in">bool</span> flag = <span class="hljs-keyword">true</span>;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Column(<br>      mainAxisAlignment: MainAxisAlignment.center,<br>      children: [<br>        <span class="hljs-comment">//ç¬¬ä¸€ç»„å•é€‰æ¡†</span><br>        Row(<br>          mainAxisAlignment: MainAxisAlignment.center,<br>          children: [<br>            Text(<span class="hljs-string">&quot;ç”·&quot;</span>),<br>            Radio(<br>                value: <span class="hljs-number">1</span>,<br>                onChanged: (value) &#123;<br>                  setState(() &#123;<br>                    sex = value <span class="hljs-keyword">as</span> <span class="hljs-built_in">int</span>; <span class="hljs-comment">//æ›´æ–°çŠ¶æ€</span><br>                  &#125;);<br>                &#125;,<br>                groupValue: sex), <span class="hljs-comment">//groupValue ä¸º sex</span><br>            SizedBox(width: <span class="hljs-number">20</span>),<br>            Text(<span class="hljs-string">&quot;å¥³&quot;</span>),<br>            Radio(<br>                value: <span class="hljs-number">2</span>,<br>                onChanged: (value) &#123;<br>                  setState(() &#123;<br>                    sex = value <span class="hljs-keyword">as</span> <span class="hljs-built_in">int</span>; <span class="hljs-comment">//æ›´æ–°çŠ¶æ€</span><br>                  &#125;);<br>                &#125;,<br>                groupValue: sex) <span class="hljs-comment">//groupValue ä¸º sex</span><br>          ],<br>        ),<br>        SizedBox(height: <span class="hljs-number">20</span>),<br>        Divider(),<br>         <span class="hljs-comment">//ç¬¬äºŒç»„å•é€‰æ¡†</span><br>        RadioListTile(<br>          value: <span class="hljs-keyword">true</span>,<br>          onChanged: (value) &#123;<br>            setState(() &#123;<br>              flag = value <span class="hljs-keyword">as</span> <span class="hljs-built_in">bool</span>; <span class="hljs-comment">//æ›´æ–°çŠ¶æ€</span><br>            &#125;);<br>          &#125;,<br>          groupValue: flag, <span class="hljs-comment">//groupValue ä¸º flag</span><br>          title: Text(<span class="hljs-string">&quot;ä¸€çº§æ ‡é¢˜&quot;</span>), <span class="hljs-comment">//æ ‡é¢˜</span><br>          subtitle: Text(<span class="hljs-string">&quot;äºŒçº§æ ‡é¢˜&quot;</span>), <span class="hljs-comment">//å‰¯æ ‡é¢˜</span><br>          secondary: Icon(Icons.home), <span class="hljs-comment">//æ˜¾ç¤ºå›¾æ ‡</span><br>        ),<br>        RadioListTile(<br>          value: <span class="hljs-keyword">false</span>,<br>          onChanged: (value) &#123;<br>            setState(() &#123;<br>              flag = value <span class="hljs-keyword">as</span> <span class="hljs-built_in">bool</span>; <span class="hljs-comment">//æ›´æ–°çŠ¶æ€</span><br>            &#125;);<br>          &#125;,<br>          groupValue: flag, <span class="hljs-comment">//groupValue ä¸º flag</span><br>          title: Text(<span class="hljs-string">&quot;ä¸€çº§æ ‡é¢˜&quot;</span>), <span class="hljs-comment">//æ ‡é¢˜</span><br>          subtitle: Text(<span class="hljs-string">&quot;äºŒçº§æ ‡é¢˜&quot;</span>), <span class="hljs-comment">//å‰¯æ ‡é¢˜</span><br>          secondary: Image.network( <span class="hljs-comment">//æ˜¾ç¤ºå›¾ç‰‡</span><br>              <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>),<br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d902dab159d44c4b737255539be94e4~tplv-k3u1fbpfcp-watermark.image?" alt="radiobutton.gif" width="30%" /><h3 id="1-4ã€Switchï¼ŒSwitchListTile-å¼€å…³"><a href="#1-4ã€Switchï¼ŒSwitchListTile-å¼€å…³" class="headerlink" title="1.4ã€Switchï¼ŒSwitchListTile å¼€å…³"></a>1.4ã€Switchï¼ŒSwitchListTile å¼€å…³</h3><p>Switchï¼ŒSwitchListTile æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„å¼€å…³å’Œå¼€å…³åˆ—è¡¨ Itemï¼Œå¸¸ç”¨å±æ€§å’Œä¸Šé¢ä¸¤ä¸ªç±»ä¼¼ï¼Œæˆ‘ä»¬å¿«é€Ÿè¿‡ä¸€ä¸‹ï¼š</p><p>ä»£ç å®è·µï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Form Practice&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>      ),<br>      body: MyBodyPage(), <span class="hljs-comment">//è‡ªå®šä¹‰ body Wdiget</span><br>    )<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  State&lt;StatefulWidget&gt; createState() =&gt; _MyBodyPageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyBodyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyBodyPage</span>&gt; </span>&#123;<br>  <span class="hljs-comment">//å¼€å…³çš„çŠ¶æ€æ ‡è®°</span><br>  <span class="hljs-built_in">bool</span> flag = <span class="hljs-keyword">true</span>;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Column(<br>      children: [<br>        Switch( <span class="hljs-comment">//Switch</span><br>            value: flag,<br>            onChanged: (value) &#123;<br>              setState(() &#123;<br>                flag = value; <span class="hljs-comment">//æ›´æ–°çŠ¶æ€</span><br>              &#125;);<br>            &#125;),<br>        SizedBox(height: <span class="hljs-number">20</span>),<br>        SwitchListTile( <span class="hljs-comment">//SwitchListTile</span><br>            value: flag,<br>            onChanged: (value) &#123;<br>              setState(() &#123;<br>                flag = value; <span class="hljs-comment">//æ›´æ–°çŠ¶æ€</span><br>              &#125;);<br>            &#125;,<br>            title: Text(<span class="hljs-string">&quot;æ ‡é¢˜&quot;</span>), <span class="hljs-comment">//æ ‡é¢˜</span><br>            subtitle: Text(<span class="hljs-string">&quot;å‰¯æ ‡é¢˜&quot;</span>), <span class="hljs-comment">//å‰¯æ ‡é¢˜</span><br>            secondary: Image.network( <span class="hljs-comment">//æ˜¾ç¤ºå›¾ç‰‡</span><br>              <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>            ) <br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45fad04d96ec4c12a3b9f7ee67e04580~tplv-k3u1fbpfcp-watermark.image?" alt="switch.gif" width="30%" /><h3 id="1-5ã€Slider-è¿›åº¦æ¡"><a href="#1-5ã€Slider-è¿›åº¦æ¡" class="headerlink" title="1.5ã€Slider è¿›åº¦æ¡"></a>1.5ã€Slider è¿›åº¦æ¡</h3><p>Slider æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„è¿›åº¦æ¡ Widgetã€‚å…¶å¸¸ç”¨å±æ€§æœ‰ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>value</td><td>double</td><td>å¿…å¡«é¡¹ï¼Œå½“å‰ Slider æ»‘å—ä½ç½®çš„å€¼ï¼Œæ³¨æ„ä¸å¯ä»¥è¶…å‡º min å’Œ max çš„èŒƒå›´ï¼Œå¦åˆ™ä¼šæŠ¥é”™</td></tr><tr><td>onChanged</td><td>ValueChanged<double></td><td>å¿…å¡«é¡¹ï¼Œæ­£åœ¨æ»‘åŠ¨æˆ–è€…ç‚¹å‡»ï¼Œæœªæ¾æ‰‹</td></tr><tr><td>onChangeStart</td><td>ValueChanged<double></td><td>åˆšå¼€å§‹ç‚¹å‡»</td></tr><tr><td>onChangeEnd</td><td>ValueChanged<double></td><td>æ»‘åŠ¨æˆ–è€…ç‚¹å‡»ç»“æŸï¼Œå·²æ¾æ‰‹</td></tr><tr><td>min</td><td>double</td><td>æœ€å°å€¼ï¼Œé»˜è®¤ä¸º 0.0</td></tr><tr><td>max</td><td>double</td><td>æœ€å¤§å€¼ï¼Œé»˜è®¤ä¸º 1.0</td></tr><tr><td>activeColor</td><td>Color</td><td>æ»‘å—é¢œè‰²</td></tr><tr><td>inactiveColor</td><td>Color</td><td>è½¨é“é¢œè‰²</td></tr><tr><td>label</td><td>String</td><td>æ°”æ³¡æ–‡æœ¬</td></tr><tr><td>divisions</td><td>int</td><td>åˆ»åº¦ï¼Œå¦‚æ²¡æœ‰åˆ»åº¦ï¼Œlabel åˆ™ä¸ä¼šå±•ç¤º</td></tr></tbody></table><p>ä»£ç å®è·µï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Form Practice&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>      ),<br>      body: MyBodyPage(), <span class="hljs-comment">//è‡ªå®šä¹‰ body Wdiget</span><br>    )<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span></span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  State&lt;StatefulWidget&gt; createState() =&gt; _MyBodyPageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyBodyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyBodyPage</span>&gt;</span>&#123;<br>  <span class="hljs-comment">//æ»‘å—çš„å€¼</span><br>  <span class="hljs-built_in">double</span> sliderValue = <span class="hljs-number">0</span>;<br><br>  <span class="hljs-comment">// æ›´æ–°çŠ¶æ€</span><br>  <span class="hljs-keyword">void</span> updateSlider(value)&#123;<br>    sliderValue = value;<br>    setState(() &#123;<br><br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Padding(<br>      padding: EdgeInsets.all(<span class="hljs-number">20</span>),<br>      child: Column(<br>        children: [<br>          _slider() <br>        ],<br>      ),<br>    );<br>  &#125;<br><br>  <span class="hljs-comment">//æ„å»ºæ»‘å— Widget</span><br>  Slider _slider()&#123;<br>    <span class="hljs-keyword">return</span> Slider(<br>      value: sliderValue,<br>      max: <span class="hljs-number">100</span>, <span class="hljs-comment">//æœ€å¤§å€¼ä¸º 100</span><br>      activeColor: Colors.red, <span class="hljs-comment">//æ»‘å—é¢œè‰²ä¸ºçº¢è‰²</span><br>      inactiveColor: Colors.green, <span class="hljs-comment">//è½¨é“é¢œè‰²ä¸ºç»¿è‰²</span><br>      label: <span class="hljs-string">&quot;è¿›åº¦ï¼š<span class="hljs-subst">$sliderValue</span>&quot;</span>, <span class="hljs-comment">//æ°”æ³¡æ–‡æœ¬</span><br>      divisions: <span class="hljs-number">10</span>, <span class="hljs-comment">//åˆ»åº¦</span><br>      onChanged: (value)&#123; <span class="hljs-comment">//æ­£åœ¨æ»‘åŠ¨æˆ–è€…ç‚¹å‡»ï¼Œæœªæ¾æ‰‹</span><br>        updateSlider(value);<br>      &#125;,<br>      onChangeStart: (value)&#123; <span class="hljs-comment">//åˆšå¼€å§‹ç‚¹å‡»</span><br>        updateSlider(value);<br>      &#125;,<br>      onChangeEnd: (value)&#123; <span class="hljs-comment">//æ»‘åŠ¨æˆ–è€…ç‚¹å‡»ç»“æŸï¼Œå·²æ¾æ‰‹</span><br>        updateSlider(value);<br>      &#125;,<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1783f4399eb14b8eaafb5a5a69778c0d~tplv-k3u1fbpfcp-watermark.image?" alt="slider.gif" width="30%" /><p>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ SliderTheme åµŒå¥— Slider å®ç°å„ç§è‡ªå®šä¹‰æ ·å¼ï¼Œè¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†ï¼ŒSliderTheme å¸¸ç”¨å±æ€§æœ‰ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>data</td><td>SliderThemeData</td><td>å¿…å¡«é¡¹ï¼Œé€šè¿‡ SliderThemeData å®ç°å„ç§è‡ªå®šä¹‰æ ·å¼</td></tr><tr><td>child</td><td>Widget</td><td>å¿…å¡«é¡¹ï¼Œå­ Widget</td></tr></tbody></table><p>SliderThemeData å±æ€§ä»‹ç»ï¼š<a href="https://api.flutter.dev/flutter/material/SliderThemeData-class.html">https://api.flutter.dev/flutter/material/SliderThemeData-class.html</a></p><h2 id="äºŒã€è¡¨å•-Widget-ä¹‹ç»¼åˆæ¡ˆä¾‹"><a href="#äºŒã€è¡¨å•-Widget-ä¹‹ç»¼åˆæ¡ˆä¾‹" class="headerlink" title="äºŒã€è¡¨å• Widget ä¹‹ç»¼åˆæ¡ˆä¾‹"></a>äºŒã€è¡¨å• Widget ä¹‹ç»¼åˆæ¡ˆä¾‹</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨è¡¨å• Widget åšä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ç™»è®°ç³»ç»Ÿï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b87c5a8f38ca46c1a1c9931f6a9d6cda~tplv-k3u1fbpfcp-watermark.image?" alt="form_combine.gif" width="30%" /><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬å…ˆåˆ†æè¿™ä¸ªé¡µé¢ï¼š</p><p>1ã€å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªä»ä¸Šå¾€ä¸‹çš„å‚ç›´å¸ƒå±€ï¼Œæœ‰ä¸ªå†…è¾¹è·ï¼Œå­ Widget æ˜¯è‡ªé€‚åº”çš„ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ListView å¹¶è®¾ç½®ä¸€ä¸ª padding å®ç°</p><p>2ã€ç„¶åä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ˜¯ï¼Œè¾“å…¥å§“åï¼šæ–‡æœ¬æ¡†ï¼ˆTextFieldï¼‰ï¼Œæ€§åˆ«é€‰æ‹©ï¼šå•é€‰æ¡†ï¼ˆRadioï¼‰ï¼Œå…´è¶£çˆ±å¥½ï¼šå¤é€‰æ¡†ï¼ˆCheckboxï¼‰ï¼Œé¢œå€¼æ‰“åˆ†ï¼šæ»‘å—ï¼ˆSliderï¼‰ï¼Œæ°¸ä¸å®•æœºï¼šå¼€å…³ï¼ˆSwitchListTileï¼‰ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆRaisedButtonï¼‰ï¼Œç”¨æˆ·ä¿¡æ¯å±•ç¤ºï¼ˆTextï¼‰</p><p>3ã€è¿™äº› Widget éƒ½æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç»§æ‰¿ StatefulWidgetï¼Œå¹¶ä½¿ç”¨ setState æ–¹æ³•å»æ›´æ–°çŠ¶æ€</p><p>æˆ‘ä»¬ç”»ä¸€å¼ å›¾æ¥ç†ä¸€ä¸‹ Widget ä¹‹é—´çš„æ ‘å½¢ç»“æ„ï¼š</p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ca88da02d2e84137ac6b3fd017ab63c1~tplv-k3u1fbpfcp-watermark.image?" alt="è¡¨å• Widget ä¹‹ç»¼åˆæ¡ˆä¾‹.png" width="50%" /><p>æœ€åæˆ‘ä»¬è¿›è¡Œä»£ç å®ç°ï¼Œé‡Œé¢å†™äº†è¯¦ç»†çš„æ³¨é‡Šï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>      home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;ç”¨æˆ·ä¿¡æ¯ç™»è®°ç³»ç»Ÿ&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        ),<br>        body: MyBodyPage(), <span class="hljs-comment">//è‡ªå®šä¹‰ body Wdiget</span><br>      )<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  State&lt;StatefulWidget&gt; createState() =&gt; _MyBodyPageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyBodyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyBodyPage</span>&gt; </span>&#123;<br><br>  <span class="hljs-comment">//ç”¨æˆ·å§“å</span><br>  <span class="hljs-built_in">String</span> userName = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-comment">//æ€§åˆ«</span><br>  <span class="hljs-built_in">int</span> sex = <span class="hljs-number">1</span>;<br>  <span class="hljs-comment">//æ˜¯å¦å¼€å¯æ°¸ä¸å®•æœº</span><br>  <span class="hljs-built_in">bool</span> flag = <span class="hljs-keyword">false</span>;<br>  <span class="hljs-comment">//é¢œå€¼æ‰“åˆ†</span><br>  <span class="hljs-built_in">double</span> sliderValue = <span class="hljs-number">0</span>;<br>  <span class="hljs-comment">//å…´è¶£çˆ±å¥½</span><br>  <span class="hljs-built_in">List</span> hobbies = [<br>    &#123;<span class="hljs-string">&quot;checked&quot;</span>: <span class="hljs-keyword">false</span>, <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;æ‰“ç¯®çƒ&quot;</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;checked&quot;</span>: <span class="hljs-keyword">false</span>, <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;çˆ¬å±±&quot;</span>&#125;,<br>    &#123;<span class="hljs-string">&quot;checked&quot;</span>: <span class="hljs-keyword">false</span>, <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;å†™ä»£ç &quot;</span>&#125;,<br>  ];<br>  <span class="hljs-comment">//ä¸ªäººä¿¡æ¯</span><br>  <span class="hljs-built_in">String</span> info = <span class="hljs-string">&quot;&quot;</span>;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> ListView(<br>      padding: EdgeInsets.all(<span class="hljs-number">20</span>),<br>      children: [<br>        TextField( <span class="hljs-comment">//æ–‡æœ¬æ¡†ï¼šç”¨æˆ·å§“å</span><br>          decoration: InputDecoration(<br>              hintText: <span class="hljs-string">&quot;è¯·è¾“å…¥ç”¨æˆ·å§“å&quot;</span>, <span class="hljs-comment">//é»˜è®¤æç¤ºæ–‡æ¡ˆ</span><br>              label: Text(<span class="hljs-string">&quot;å§“å&quot;</span>) <span class="hljs-comment">//æ ‡ç­¾</span><br>          ),<br>          onChanged: (str)&#123;<br>            setState(() &#123;<br>              userName = str; <span class="hljs-comment">//æ›´æ–°ç”¨æˆ·å§“åçŠ¶æ€</span><br>            &#125;);<br>          &#125;,<br>        ),<br>        SizedBox(height: <span class="hljs-number">10</span>),<br>        Text(<span class="hljs-string">&quot;æ€§åˆ«ï¼š&quot;</span>),<br>        Row( <span class="hljs-comment">//æ€§åˆ«é€‰æ‹©</span><br>          children: [<br>            Text(<span class="hljs-string">&quot;ç”·&quot;</span>),<br>            Radio(value: <span class="hljs-number">1</span>, groupValue: sex, onChanged: _sexChanged),<br>            Text(<span class="hljs-string">&quot;å¥³&quot;</span>),<br>            Radio(value: <span class="hljs-number">2</span>, groupValue: sex, onChanged:_sexChanged)<br>          ],<br>        ),<br>        Text(<span class="hljs-string">&quot;å…´è¶£çˆ±å¥½ï¼š&quot;</span>),<br>        Row( <span class="hljs-comment">//å…´è¶£çˆ±å¥½</span><br>          children: _getHobbies(),<br>        ),<br>        _slider(),<br>        Row( <span class="hljs-comment">//é¢œå€¼æ‰“åˆ†</span><br>          mainAxisAlignment: MainAxisAlignment.center,<br>          children: [<br>            Text(<span class="hljs-string">&quot;é¢œå€¼ï¼š<span class="hljs-subst">$sliderValue</span>åˆ†&quot;</span>),<br>          ],<br>        ),<br>        SwitchListTile( <span class="hljs-comment">//å¼€å…³æ°¸ä¸å®•æœº</span><br>            value: flag,<br>            title: Text(<span class="hljs-string">&quot;æ°¸ä¸å®•æœº&quot;</span>),<br>            onChanged: (value)&#123;<br>              setState(() &#123;<br>                flag = value;<br>              &#125;);<br>            &#125;<br>        ),<br>        RaisedButton( <span class="hljs-comment">//è·å–ç”¨æˆ·ä¿¡æ¯</span><br>          child: Text(<span class="hljs-string">&quot;è·å–ç”¨æˆ·ä¿¡æ¯&quot;</span>),<br>          onPressed: ()&#123;<br>            setState(() &#123;<br>              info = getInfo(); <span class="hljs-comment">//æ›´æ–°ç”¨æˆ·çŠ¶æ€ä¿¡æ¯</span><br>            &#125;);<br>          &#125;,<br>          color: Colors.blue,<br>          textColor: Colors.white,<br>        ),<br><br>        Text(info) <span class="hljs-comment">//ç”¨æˆ·ä¿¡æ¯å±•ç¤º</span><br>      ],<br>    );<br>  &#125;<br><br>  <span class="hljs-comment">//è·å–ç”¨æˆ·å±•ç¤ºçš„ä¿¡æ¯</span><br>  <span class="hljs-built_in">String</span> getInfo() &#123;<br>    <span class="hljs-built_in">String</span> hobbiesStr = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> element <span class="hljs-keyword">in</span> hobbies) &#123;<br>      <span class="hljs-keyword">if</span>(element[<span class="hljs-string">&quot;checked&quot;</span>])&#123;<br>        hobbiesStr += element[<span class="hljs-string">&quot;title&quot;</span>] + <span class="hljs-string">&quot;ï¼Œ&quot;</span>;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;<span class="hljs-subst">$userName</span>ï¼Œæ€§åˆ«<span class="hljs-subst">$&#123;sex == <span class="hljs-number">1</span> ? <span class="hljs-string">&quot;ç”·&quot;</span> : <span class="hljs-string">&quot;å¥³&quot;</span>&#125;</span>ï¼Œå–œæ¬¢<span class="hljs-subst">$hobbiesStr</span><span class="hljs-subst">$&#123;flag ? <span class="hljs-string">&quot;æ°¸ä¸å®•æœºï¼Œ&quot;</span> : <span class="hljs-string">&quot;&quot;</span>&#125;</span>é¢œå€¼<span class="hljs-subst">$sliderValue</span>åˆ†&quot;</span>;<br>  &#125;<br><br>  <span class="hljs-comment">//æ›´æ–°æ€§åˆ«çŠ¶æ€</span><br>  <span class="hljs-keyword">void</span> _sexChanged(value)&#123;<br>    setState(() &#123;<br>      sex = value <span class="hljs-keyword">as</span> <span class="hljs-built_in">int</span>;<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-comment">//æ›´æ–°æ»‘å—çŠ¶æ€</span><br>  <span class="hljs-keyword">void</span> updateSlider(value)&#123;<br>    sliderValue = value;<br>    setState(() &#123;<br><br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-comment">//è·å–å…´è¶£çˆ±å¥½ Widget List</span><br>  <span class="hljs-built_in">List</span>&lt;Widget&gt; _getHobbies() &#123;<br>    <span class="hljs-built_in">List</span>&lt;Widget&gt; temp = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> element <span class="hljs-keyword">in</span> hobbies) &#123;<br>      <span class="hljs-comment">//æ·»åŠ  Text</span><br>      temp.add(Text(element[<span class="hljs-string">&quot;title&quot;</span>]));<br>      <span class="hljs-comment">//æ·»åŠ  Checkbox</span><br>      temp.add(Checkbox(<br>          value: element[<span class="hljs-string">&quot;checked&quot;</span>],<br>          onChanged: (value) &#123;<br>            setState(() &#123;<br>              element[<span class="hljs-string">&quot;checked&quot;</span>] = value;<br>            &#125;);<br>          &#125;));<br>    &#125;<br>    <span class="hljs-keyword">return</span> temp;<br>  &#125;<br><br>  <span class="hljs-comment">//è·å–æ»‘å— Widget</span><br>  Slider _slider()&#123;<br>    <span class="hljs-keyword">return</span> Slider(<br>      value: sliderValue,<br>      max: <span class="hljs-number">100</span>, <span class="hljs-comment">//æœ€å¤§å€¼ä¸º 100</span><br>      label: <span class="hljs-string">&quot;é¢œå€¼ï¼š<span class="hljs-subst">$sliderValue</span>åˆ†&quot;</span>, <span class="hljs-comment">//æ°”æ³¡æ–‡æœ¬</span><br>      divisions: <span class="hljs-number">10</span>, <span class="hljs-comment">//åˆ»åº¦</span><br>      onChanged: (value)&#123; <span class="hljs-comment">//æ­£åœ¨æ»‘åŠ¨æˆ–è€…ç‚¹å‡»ï¼Œæœªæ¾æ‰‹</span><br>        updateSlider(value);<br>      &#125;,<br>      onChangeStart: (value)&#123; <span class="hljs-comment">//åˆšå¼€å§‹ç‚¹å‡»</span><br>        updateSlider(value);<br>      &#125;,<br>      onChangeEnd: (value)&#123; <span class="hljs-comment">//æ»‘åŠ¨æˆ–è€…ç‚¹å‡»ç»“æŸï¼Œå·²æ¾æ‰‹</span><br>        updateSlider(value);<br>      &#125;,<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€æ€»ç»“"><a href="#ä¸‰ã€æ€»ç»“" class="headerlink" title="ä¸‰ã€æ€»ç»“"></a>ä¸‰ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†ï¼š</p><p>1ã€Flutter ä¸­å¸¸ç”¨çš„è¡¨å• Widget ï¼šTextFieldï¼ŒCheckBoxï¼ŒRadioï¼ŒSwitchï¼ŒCheckboxListTileï¼ŒRadioListTileï¼ŒSwitchListTileï¼ŒSlider çš„å¸¸ç”¨å±æ€§å’Œä½¿ç”¨ï¼Œä»¥åŠå®ƒä»¬çš„æ˜¾ç¤ºæ•ˆæœ</p><p>2ã€é€šè¿‡è¡¨å• Widget ç»„åˆå®ç°äº†ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ç™»è®°ç³»ç»Ÿ</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤</p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>åç»­ä¸ä¼šèŠ±å¤§ç¯‡å¹…å»ä»‹ç» Widgetï¼Œæˆ‘ä¼šç©¿æ’åœ¨å…¶å®ƒçŸ¥è¯†ç‚¹ä¸­ç®€å•ä»‹ç»ä¸‹ï¼ŒFlutter ä¸­æœ‰ 400 å¤šä¸ª Widgetï¼Œä¸å¯èƒ½æ¯ä¸ªéƒ½å»å­¦ï¼Œæˆ‘çš„å»ºè®®ï¼šæŒæ¡å¸¸ç”¨çš„ï¼Œå…¶å®ƒç”¨åˆ°æ—¶åœ¨å»å®˜ç½‘æŸ¥è¯¢ã€‚</p><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®² Flutter ä¸­çš„è·¯ç”±ä»¥åŠå®é™…å¼€å‘ä¸­è¯·æ±‚ Http æ¥å£æ¸²æŸ“é¡µé¢ï¼Œå°½è¯·æœŸå¾…å§ğŸº</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://www.bilibili.com/video/BV1S4411E7LY?p=19&vd_source=d0b24cb21c438ff4a9ac2e589eacb3d9">Flutter æ•™ç¨‹</a>ï¼šé€šä¿—æ˜“æ‡‚çš„ Flutter å…¥é—¨æ•™ç¨‹</p><blockquote><p><strong>ä½ çš„ç‚¹èµï¼Œè¯„è®ºï¼Œæ˜¯å¯¹æˆ‘å·¨å¤§çš„é¼“åŠ±ï¼</strong></p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„<strong>å…¬ä¼—å·ï¼š</strong>  <a href="https://link.juejin.cn/?target=http://m6z.cn/6jwi7b" title="http://m6z.cn/6jwi7b"><strong>sweetying</strong></a> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p><p>å¦‚æœ<strong>æœ‰é—®é¢˜</strong>ï¼Œå…¬ä¼—å·å†…æœ‰åŠ æˆ‘å¾®ä¿¡çš„å…¥å£ï¼Œåœ¨æŠ€æœ¯å­¦ä¹ ã€ä¸ªäººæˆé•¿çš„é“è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸€èµ·å‰è¿›ï¼</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Flutter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutter ç³»åˆ—ï¼ˆäº”ï¼‰ï¼šFlutter å¸¸ç”¨æŒ‰é’® Widget</title>
    <link href="/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9AFlutter%20%E5%B8%B8%E7%94%A8%E6%8C%89%E9%92%AE%20Widget/"/>
    <url>/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%94%EF%BC%89%EF%BC%9AFlutter%20%E5%B8%B8%E7%94%A8%E6%8C%89%E9%92%AE%20Widget/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101701772.jpeg" alt="hintersee-3601004_1920"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ï¼šæ•ˆæœå±•ç¤º -&gt; Widget ä»‹ç» -&gt; ä»£ç å®ç°çš„æ–¹å¼å¯¹ Imageï¼ŒListViewï¼ŒGridViewï¼ŒStack è¿›è¡Œäº†ä»‹ç»ï¼Œå¹¶ç©¿æ’è®²è§£äº†ä¸€äº›å…¶å®ƒ Widget ï¼Œæœ€åé€šè¿‡ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹å¯¹å­¦ä¹ çš„ Widget è¿›è¡Œäº†ç»„åˆä½¿ç”¨ã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/7135827895993237541">Flutter ç³»åˆ—ï¼ˆå››ï¼‰ï¼šFlutter å¸¸ç”¨ Widget äºŒ</a>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ Flutter æŒ‰é’® Widget è¿›è¡Œå­¦ä¹ </p><p>Flutter ä¸­çš„æŒ‰é’® Widget æœ‰å¾ˆå¤šï¼Œå¸¸è§çš„æŒ‰é’® Widget æœ‰ï¼šRaisedButtonï¼ŒFlatButtonï¼ŒIconButtonï¼ŒOutlineButtonï¼ŒButtonBarï¼ŒFloatingActionButton ç­‰ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹è¿™äº›å¸¸ç”¨çš„ Widget</p><h2 id="ä¸€ã€Flutter-å¸¸ç”¨æŒ‰é’®-Widget-ä»‹ç»"><a href="#ä¸€ã€Flutter-å¸¸ç”¨æŒ‰é’®-Widget-ä»‹ç»" class="headerlink" title="ä¸€ã€Flutter å¸¸ç”¨æŒ‰é’® Widget ä»‹ç»"></a>ä¸€ã€Flutter å¸¸ç”¨æŒ‰é’® Widget ä»‹ç»</h2><h3 id="1-1ã€Flutter-æŒ‰é’®-Widget-é€šç”¨å±æ€§"><a href="#1-1ã€Flutter-æŒ‰é’®-Widget-é€šç”¨å±æ€§" class="headerlink" title="1.1ã€Flutter æŒ‰é’® Widget é€šç”¨å±æ€§"></a>1.1ã€Flutter æŒ‰é’® Widget é€šç”¨å±æ€§</h3><p>é¦–å…ˆä»‹ç»ä¸€ä¸‹ï¼ŒæŒ‰é’® Widget éƒ½æœ‰çš„ä¸€äº›å±æ€§ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>onPressed</td><td>VoidCallback</td><td>æ­¤é¡¹ä¸ºå¿…å¡«å‚æ•°ï¼ŒæŒ‰ä¸‹æŒ‰é’®æ—¶è§¦å‘çš„å›è°ƒï¼Œæ¥æ”¶ä¸€ä¸ªæ–¹æ³•ä½œä¸ºå‚æ•°ï¼Œä¼  null è¡¨ç¤ºæŒ‰é’®ç¦ç”¨ï¼Œä¼šæ˜¾ç¤ºç¦ç”¨ç›¸å…³æ ·å¼</td></tr><tr><td>child</td><td>Widget</td><td>å­æ§ä»¶ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šä½¿ç”¨æ–‡æœ¬ Widget æ¥å¡«å……</td></tr><tr><td>textColor</td><td>Color</td><td>æ–‡æœ¬é¢œè‰²</td></tr><tr><td>color</td><td>Color</td><td>æŒ‰é’®èƒŒæ™¯é¢œè‰²</td></tr><tr><td>disabledColor</td><td>Color</td><td>æŒ‰é’®ç¦ç”¨æ—¶çš„èƒŒæ™¯é¢œè‰²</td></tr><tr><td>disabledTextColor</td><td>Color</td><td>æŒ‰é’®ç¦ç”¨æ—¶çš„æ–‡æœ¬é¢œè‰²</td></tr><tr><td>splashColor</td><td>Color</td><td>ç‚¹å‡»æŒ‰é’®æ—¶çš„æ°´æ³¢çº¹é¢œè‰²</td></tr><tr><td>highlightColor</td><td>Color</td><td>é•¿æŒ‰æŒ‰é’®åæŒ‰é’®çš„èƒŒæ™¯é¢œè‰²</td></tr><tr><td>elevation</td><td>double</td><td>æŒ‰é’®é˜´å½±çš„èŒƒå›´ï¼Œå€¼è¶Šå¤§é˜´å½±èŒƒå›´è¶Šå¤§</td></tr><tr><td>padding</td><td>EdgeInsetsGeometry</td><td>å…§è¾¹è·</td></tr><tr><td>shape</td><td>ShapeBorder</td><td>è®¾ç½®æŒ‰é’®çš„å½¢çŠ¶ï¼ŒShapeBorder å®ç°ç±»æœ‰ï¼š<br>RoundedRectangleBorderï¼šåœ†è§’å½¢çŠ¶<br>CircleBorderï¼šåœ†å½¢å½¢çŠ¶</td></tr></tbody></table><p>ä»‹ç»å®Œäº†æŒ‰é’® Widget çš„é€šç”¨å±æ€§ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹æ¯ä¸ªæŒ‰é’®åˆå§‹å½¢æ€çš„ä¸€ä¸ªæ•ˆæœï¼Œåœ¨ç»“åˆè¿™äº›æŒ‰é’®åšä¸€ä¸ªç»¼åˆæ¡ˆä¾‹</p><h3 id="1-2ã€RaisedButton"><a href="#1-2ã€RaisedButton" class="headerlink" title="1.2ã€RaisedButton"></a>1.2ã€RaisedButton</h3><p>RaisedButton è§åçŸ¥æ„ï¼šå‡¸èµ·çš„æŒ‰é’®ï¼Œå…¶å®å°±æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„ Material Design é£æ ¼çš„æŒ‰é’®ï¼š</p><p>è¿è¡Œå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter Button Widget&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        ),<br>        body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">//ä½¿ç”¨ ListView è®©æŒ‰é’®è‡ªé€‚åº”å±å¹•å®½åº¦</span><br>    <span class="hljs-keyword">return</span> ListView(<br>      <span class="hljs-comment">//å†…é—´è· 20</span><br>      padding: EdgeInsets.all(<span class="hljs-number">20</span>),<br>      children: [<br>        <span class="hljs-comment">//RaisedButton å‡¸èµ·æŒ‰é’®</span><br>        RaisedButton(<br>          onPressed:()&#123;&#125;,<br>          child: Text(<span class="hljs-string">&quot;RaisedButton&quot;</span>),<br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœå±•ç¤ºï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/426f79d2652f4d379394b8cc28902bd9~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220828103722122" width="50%" /><p>é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸€ä¸ªç°è‰²èƒŒæ™¯çš„å‡¸èµ·æŒ‰é’®</p><h3 id="1-3ã€FlatButton"><a href="#1-3ã€FlatButton" class="headerlink" title="1.3ã€FlatButton"></a>1.3ã€FlatButton</h3><p>FlatButton è§åçŸ¥æ„ï¼šæ‰å¹³çš„æŒ‰é’®ï¼Œå’Œ RaiseButton åˆšå¥½ç›¸åï¼Œæ²¡æœ‰å‡¸èµ·çš„æ•ˆæœã€‚å°†ä¸Šè¿° RaiseButton æ¢æˆ FlatButton æ•ˆæœå¦‚ä¸‹ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/326cfc9abf8c421e842ba8c5cfc7131d~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220828110640212" width="50%" /><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ²¡æœ‰èƒŒæ™¯ï¼Œå°±åƒä¸€ä¸ªæ–‡æœ¬ Widget ä¸€æ ·</p><h3 id="1-4ã€OutlineButton"><a href="#1-4ã€OutlineButton" class="headerlink" title="1.4ã€OutlineButton"></a>1.4ã€OutlineButton</h3><p>OutlineButton è§åçŸ¥æ„ï¼šå¸¦çº¿æ¡†çš„æŒ‰é’®ï¼Œå®ƒå°±åƒæ˜¯ FlatButton åŠ äº†ä¸€ä¸ªè¾¹æ¡†ã€‚å°†ä¸Šè¿° RaiseButton æ¢æˆ OutlineButton æ•ˆæœå¦‚ä¸‹ï¼š</p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dee2a6a1417a4396b12500861737a30e~tplv-k3u1fbpfcp-watermark.image?" alt="outlinebutton.png" width="50%" /><h3 id="1-5ã€IconButton"><a href="#1-5ã€IconButton" class="headerlink" title="1.5ã€IconButton"></a>1.5ã€IconButton</h3><p>IconButton è§åçŸ¥æ„ï¼šå¸¦ Icon çš„æŒ‰é’®ã€‚å°†ä¸Šè¿° RaiseButton æ¢æˆ IconButton å¹¶åšå±æ€§çš„è°ƒæ•´ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart">IconButton(<br>   icon: Icon(Icons.home),<br>   onPressed:()&#123;&#125;,<br>)<br></code></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcf789f83b5248c3910ed88306c43099~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220828111723913" width="50%" /><h3 id="1-6ã€ButtonBar"><a href="#1-6ã€ButtonBar" class="headerlink" title="1.6ã€ButtonBar"></a>1.6ã€ButtonBar</h3><p>ButtonBar æ˜¯ä¸€ä¸ªæŒ‰é’®ç»„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®ƒçš„ children å±æ€§ä¸­æ”¾å…¥å¤šä¸ªæŒ‰é’®ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter Button Widget&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        ),<br>        body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> ButtonBar(<br>      <span class="hljs-comment">//æŒ‰é’®ç»„</span><br>      children: [<br>        RaisedButton( <span class="hljs-comment">//RaisedButton</span><br>          onPressed: () &#123;&#125;,<br>          child: Text(<span class="hljs-string">&quot;RaisedButton&quot;</span>),<br>        ),<br>        FlatButton( <span class="hljs-comment">//FlatButton</span><br>          onPressed: () &#123;&#125;,<br>          child: Text(<span class="hljs-string">&quot;FlatButton&quot;</span>),<br>        ),<br>        OutlineButton( <span class="hljs-comment">//OutlineButton</span><br>          onPressed: () &#123;&#125;,<br>          child: Text(<span class="hljs-string">&quot;OutlineButton&quot;</span>),<br>        ),<br>        IconButton( <span class="hljs-comment">//IconButton</span><br>          icon: Icon(Icons.home),<br>          onPressed: () &#123;&#125;,<br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c49b50b9684249e18c84c942c80e6af5~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220828112553805" width="50%" /><h3 id="1-7ã€FloatingActionButton"><a href="#1-7ã€FloatingActionButton" class="headerlink" title="1.7ã€FloatingActionButton"></a>1.7ã€FloatingActionButton</h3><p>FloatingActionButton ç®€ç§° FABï¼Œå¯ä»¥å®ç°æµ®åŠ¨æŒ‰é’®ã€‚å®ƒå¸¸ç”¨çš„ä¸€äº›å±æ€§ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>onPressed</td><td>VoidCallback</td><td>æ­¤é¡¹ä¸ºå¿…å¡«å‚æ•°ï¼ŒæŒ‰ä¸‹æŒ‰é’®æ—¶è§¦å‘çš„å›è°ƒï¼Œæ¥æ”¶ä¸€ä¸ªæ–¹æ³•ä½œä¸ºå‚æ•°ï¼Œä¼  null è¡¨ç¤ºæŒ‰é’®ç¦ç”¨ï¼Œä¼šæ˜¾ç¤ºç¦ç”¨ç›¸å…³æ ·å¼</td></tr><tr><td>child</td><td>Widget</td><td>å­æ§ä»¶ï¼Œä¸€èˆ¬ä¸º Iconï¼Œä¸æ¨èä½¿ç”¨æ–‡å­—</td></tr><tr><td>backgroundColor</td><td>Color</td><td>èƒŒæ™¯é¢œè‰²</td></tr><tr><td>elevation</td><td>double</td><td>æœªç‚¹å‡»æ—¶å€™çš„é˜´å½±</td></tr><tr><td>highlightElevation</td><td>double</td><td>ç‚¹å‡»æ—¶çš„é˜´å½±å€¼ï¼Œé»˜è®¤ä¸ºï¼š12.0</td></tr><tr><td>shape</td><td>ShapeBorder</td><td>å®šä¹‰ FAB çš„å½¢çŠ¶</td></tr><tr><td>mini</td><td>bool</td><td>æ˜¯å¦æ˜¯ mini ç±»å‹ï¼Œé»˜è®¤ä¸ºï¼šfalse</td></tr></tbody></table><p>å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter Button Widget&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        ),<br>        body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> ListView(<br>      padding: EdgeInsets.all(<span class="hljs-number">20</span>),<br>      children: [<br>        FloatingActionButton( <span class="hljs-comment">//FloatingActionButton æŒ‰é’®</span><br>          onPressed: ()&#123;&#125;,<br>          child: Icon(Icons.search),<br>          backgroundColor: Colors.lightGreen,<br>          elevation: <span class="hljs-number">20</span>,<br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac14d2bb83594441b8d07bf8e131beb7~tplv-k3u1fbpfcp-watermark.image?" alt="floatingactionbutton.png" width="50%" /><h2 id="äºŒã€Flutter-2-x-æŒ‰é’®-Widget-çš„å˜åŒ–"><a href="#äºŒã€Flutter-2-x-æŒ‰é’®-Widget-çš„å˜åŒ–" class="headerlink" title="äºŒã€Flutter 2.x æŒ‰é’® Widget çš„å˜åŒ–"></a>äºŒã€Flutter 2.x æŒ‰é’® Widget çš„å˜åŒ–</h2><p>å¦‚æœä½ æ˜¯ Flutter 2.x çš„ç‰ˆæœ¬ï¼Œä½ ä¼šå‘ç°ä¹‹å‰çš„ä¸€äº›æŒ‰é’® Widget è¢«åºŸå¼ƒäº†ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e65c7518c914c4d82361cd1228732d4~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220828114616994" style="zoom:70%;" width="50%"/><p>ä¸»è¦æ˜¯ä¸Šé¢è¿™ä¸‰ä¸ªæŒ‰é’®çš„å˜åŒ–ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼š</p><table><thead><tr><th>Flutter 1.x ä¸­çš„æŒ‰é’® Widget</th><th>Flutter 2.x ä¸­çš„æŒ‰é’® Widget</th></tr></thead><tbody><tr><td>RaisedButton å‡¸èµ·æŒ‰é’®</td><td>ElevatedButton å‡¸èµ·æŒ‰é’®</td></tr><tr><td>FlatButton æ‰å¹³æŒ‰é’®</td><td>TextButton æ‰å¹³æŒ‰é’®</td></tr><tr><td>OutlinedButton çº¿æ¡†æŒ‰é’®</td><td>OutlinedButton çº¿æ¡†æŒ‰é’®</td></tr></tbody></table><p>å¦å¤–åœ¨ 1.x ä¸­è®¾ç½®çš„ä¸€ç³»åˆ—å±æ€§ï¼Œå¦‚ï¼šcolorï¼ŒtextColorï¼Œelevationï¼Œshapeç­‰åœ¨ 2.x ä¸­éƒ½è¢«å°è£…åˆ°äº† style å±æ€§ä¸­ï¼Œstyle å±æ€§æ¥æ”¶ä¸€ä¸ª ButtonStyle ç±»å‹çš„å¯¹è±¡ï¼Œä»‹ç»ä¸€ä¸‹ ButtonStyle ä¸­çš„å¸¸ç”¨å±æ€§ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>textStyle</td><td>MaterialStateProperty<TextStyle></td><td>æ–‡æœ¬çš„æ ·å¼ ä½†æ˜¯å¯¹äºé¢œè‰²æ˜¯ä¸èµ·ä½œç”¨çš„</td></tr><tr><td>backgroundColor</td><td>MaterialStateProperty<Color></td><td>æŒ‰é’®èƒŒæ™¯è‰²</td></tr><tr><td>foregroundColor</td><td>MaterialStateProperty<Color></td><td>æ–‡æœ¬åŠå›¾æ ‡é¢œè‰²</td></tr><tr><td>overlayColor</td><td>MaterialStateProperty<Color></td><td>é«˜äº®è‰²ï¼ŒæŒ‰é’®å¤„äº focusedï¼Œhovered or pressed æ—¶çš„é¢œè‰²</td></tr><tr><td>shadowColor</td><td>MaterialStateProperty<Color></td><td>é˜´å½±é¢œè‰²</td></tr><tr><td>elevation</td><td>MaterialStateProperty<double></td><td>æŒ‰é’®é˜´å½±çš„èŒƒå›´ï¼Œå€¼è¶Šå¤§é˜´å½±èŒƒå›´è¶Šå¤§</td></tr><tr><td>padding</td><td>MaterialStateProperty<EdgeInsetsGeometry></td><td>æŒ‰é’®å†…è¾¹è·</td></tr><tr><td>minimumSize</td><td>MaterialStateProperty<Size></td><td>æŒ‰é’®æœ€å°å€¼</td></tr><tr><td>fixedSize</td><td>MaterialStateProperty<Size></td><td>æŒ‰é’®å¤§å°</td></tr><tr><td>maximumSize</td><td>MaterialStateProperty<Size></td><td>æŒ‰é’®æœ€å¤§å€¼</td></tr><tr><td>side</td><td>MaterialStateProperty<BorderSide></td><td>è¾¹æ¡†</td></tr><tr><td>shape</td><td>MaterialStateProperty<OutlinedBorder></td><td>è®¾ç½®æŒ‰é’®çš„å½¢çŠ¶</td></tr><tr><td>alignment</td><td>AlignmentGeometry</td><td>æŒ‰é’®å­ Widget å¯¹é½æ–¹å¼</td></tr></tbody></table><p>å®è·µå¯¹æ¯”ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter Button Widget&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        ),<br>        body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> ListView(<br>      padding: EdgeInsets.all(<span class="hljs-number">20</span>),<br>      children: [<br>        RaisedButton( <span class="hljs-comment">//RaisedButton</span><br>          onPressed: ()&#123;&#125;,<br>          child: Text(<span class="hljs-string">&quot;RaisedButton&quot;</span>),<br>          textColor: Colors.white, <span class="hljs-comment">//æ–‡æœ¬é¢œè‰²</span><br>          color: Colors.green, <span class="hljs-comment">//æŒ‰é’®èƒŒæ™¯é¢œè‰²</span><br>          splashColor: Colors.red, <span class="hljs-comment">//æ°´æ³¢çº¹é¢œè‰²</span><br>          elevation: <span class="hljs-number">20</span>, <span class="hljs-comment">//é˜´å½±çš„èŒƒå›´</span><br>          shape: RoundedRectangleBorder( <span class="hljs-comment">//è®¾ç½® 20 çš„åœ†è§’</span><br>            borderRadius: BorderRadius.circular(<span class="hljs-number">20</span>)<br>          )<br>        ),<br>        SizedBox(height: <span class="hljs-number">40</span>),<br>        ElevatedButton( <span class="hljs-comment">//ElevatedButton</span><br>            onPressed: ()&#123;&#125;,<br>            child: Text(<span class="hljs-string">&quot;ElevatedButton&quot;</span>),<br>            style: ButtonStyle(<br>              foregroundColor: MaterialStateProperty.all(Colors.white), <span class="hljs-comment">//æ–‡æœ¬é¢œè‰²</span><br>              backgroundColor: MaterialStateProperty.all(Colors.green), <span class="hljs-comment">//æŒ‰é’®èƒŒæ™¯é¢œè‰²</span><br>              overlayColor: MaterialStateProperty.all(Colors.red), <span class="hljs-comment">//æ°´æ³¢çº¹é¢œè‰²</span><br>              elevation: MaterialStateProperty.all(<span class="hljs-number">20</span>), <span class="hljs-comment">//é˜´å½±çš„èŒƒå›´</span><br>              shape: MaterialStateProperty.all(<span class="hljs-comment">//è®¾ç½® 20 çš„åœ†è§’</span><br>                  RoundedRectangleBorder(<br>                      borderRadius: BorderRadius.circular(<span class="hljs-number">20</span>)<br>                  )<br>              )<br>            ),<br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f82277a9e354bf18e7249a66b799c94~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220828134202212" width="50%" /><h2 id="ä¸‰ã€æŒ‰é’®-Widget-ç»„åˆä¹‹ç»¼åˆæ¡ˆä¾‹"><a href="#ä¸‰ã€æŒ‰é’®-Widget-ç»„åˆä¹‹ç»¼åˆæ¡ˆä¾‹" class="headerlink" title="ä¸‰ã€æŒ‰é’® Widget ç»„åˆä¹‹ç»¼åˆæ¡ˆä¾‹"></a>ä¸‰ã€æŒ‰é’® Widget ç»„åˆä¹‹ç»¼åˆæ¡ˆä¾‹</h2><p>åœ¨è®²ç»¼åˆæ¡ˆä¾‹ä¹‹å‰æˆ‘ä»¬å…ˆå­¦ä¹ ä¸‹ BottomNavigationBar ï¼Œä¸€ä¼šä¼šç”¨åˆ°</p><h3 id="3-1ã€BottomNavigationBar-ä»‹ç»"><a href="#3-1ã€BottomNavigationBar-ä»‹ç»" class="headerlink" title="3.1ã€BottomNavigationBar ä»‹ç»"></a>3.1ã€BottomNavigationBar ä»‹ç»</h3><p>BottomNavigationBar æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„åº•éƒ¨å¯¼èˆªæ  Widgetï¼Œä¸€èˆ¬ç”¨åœ¨ Scaffold çš„ bottomNavigationBar å±æ€§ä¸­</p><p>BottomNavigationBar å¸¸ç”¨å±æ€§ä»‹ç»ï¼š</p><table><thead><tr><th>å±æ€§åç§°</th><th>å±æ€§ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>items</td><td>List<BottomNavigationBarItem></td><td>å¿…é¡»å±æ€§ï¼Œæœ€å°‘è¦æœ‰ä¸¤ä¸ªå­ Widget</td></tr><tr><td>onTap</td><td>ValueChanged</td><td>Widget ç‚¹å‡»äº‹ä»¶</td></tr><tr><td>currentIndex</td><td>int</td><td>å½“å‰æ˜¾ç¤ºçš„æ˜¯å“ªä¸ª Widget</td></tr><tr><td>elevation</td><td>double</td><td>é˜´å½±èŒƒå›´</td></tr><tr><td>type</td><td>BottomNavigationBarType</td><td>BottomNavigationBarType.fixedï¼šå›ºå®š<br>BottomNavigationBarType.shiftingï¼šå¯æ»‘åŠ¨</td></tr><tr><td>fixedColor</td><td>Color</td><td>ç›¸å½“äº selectedItemColorï¼Œä½†æ˜¯ä¸èƒ½è·Ÿ selectedItemColor åŒæ—¶å­˜åœ¨</td></tr><tr><td>backgroundColor</td><td>Color</td><td>èƒŒæ™¯é¢œè‰²</td></tr><tr><td>iconSize</td><td>double</td><td>è®¾ç½®å›¾æ ‡å¤§å°</td></tr><tr><td>selectedItemColor</td><td>Color</td><td>è®¾ç½® Widget é€‰ä¸­çš„é¢œè‰²</td></tr><tr><td>unselectedItemColor</td><td>Color</td><td>è®¾ç½® Widget æœªé€‰ä¸­çš„é¢œè‰²</td></tr><tr><td>selectedFontSize</td><td>double</td><td>è®¾ç½® Widget é€‰ä¸­æ—¶æ–‡å­—çš„å¤§å°</td></tr><tr><td>unselectedFontSize</td><td>double</td><td>è®¾ç½® Widget æœªé€‰ä¸­æ—¶æ–‡å­—çš„å¤§å°</td></tr></tbody></table><p>è¿è¡Œä¸‹é¢ä»£ç ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter Button Widget&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        ),<br>        bottomNavigationBar: MyBottomNavigationBar(),<br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBottomNavigationBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> BottomNavigationBar(<br>        iconSize: <span class="hljs-number">35</span>, <span class="hljs-comment">//å›¾æ ‡å¤§å° 35</span><br>        fixedColor: Colors.green, <span class="hljs-comment">//å›¾ç‰‡é¢œè‰²ç»¿è‰²</span><br>        type: BottomNavigationBarType.fixed, <span class="hljs-comment">//item å›ºå®šæ˜¾ç¤º</span><br>        items: [ <span class="hljs-comment">//è®¾ç½®äº† 3 ä¸ª å­ item</span><br>          BottomNavigationBarItem(icon: Icon(Icons.home), label: <span class="hljs-string">&quot;é¦–é¡µ&quot;</span>),<br>          BottomNavigationBarItem(icon: Icon(Icons.category), label: <span class="hljs-string">&quot;åˆ†ç±»&quot;</span>),<br>          BottomNavigationBarItem(icon: Icon(Icons.settings), label: <span class="hljs-string">&quot;è®¾ç½®&quot;</span>)<br>        ]);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/492432dd8d8e497a838565e7b619a70b~tplv-k3u1fbpfcp-zoom-1.image" width="30%"/><h3 id="3-2ã€ç»¼åˆæ¡ˆä¾‹"><a href="#3-2ã€ç»¼åˆæ¡ˆä¾‹" class="headerlink" title="3.2ã€ç»¼åˆæ¡ˆä¾‹"></a>3.2ã€ç»¼åˆæ¡ˆä¾‹</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨æŒ‰é’® Widget ç»„åˆæ¥å®ç°å¦‚ä¸‹æ•ˆæœï¼š</p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf7e80059f054488a3cf02691ed3521f~tplv-k3u1fbpfcp-watermark.image?" alt="button_together.png" width="30%" /><p>ç®€å•çš„åˆ†æä¸‹è¿™ä¸ªé¡µé¢ï¼šæœ€å¤–å±‚æœ‰ä¸ªå†…é—´è·ï¼ˆPaddingï¼‰ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¸€ä¸ªä»ä¸Šå¾€ä¸‹æ’åˆ—çš„å‚ç›´å¸ƒå±€ï¼ˆColumnï¼‰ï¼Œå‚ç›´å¸ƒå±€é‡Œé¢æœ‰ä¸€ç³»åˆ—ä½¿ç”¨ button å®ç°çš„æŒ‰é’®ï¼Œç®€å•èµ·è§ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ Flutter 1.x ç³»åˆ—çš„ Button å»å®ç°ï¼Œæœ€ååº•éƒ¨æœ‰ä¸€ä¸ª BottomNavigationBarï¼ŒBottomNavigationBar ä¸­é—´æœ‰ä¸€ä¸ªå‡¸èµ·çš„ FloatingActionButtonï¼Œç±»ä¼¼å’¸é±¼ä¸­é—´å‘å¸ƒæŒ‰é’®çš„æ•ˆæœã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç”¨ä»£ç å®ç°ä¸€ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Button Practice&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>      ),<br>      body: MyBodyPage(), <span class="hljs-comment">//è‡ªå®šä¹‰ body Wdiget</span><br>      bottomNavigationBar: MyBottomNavigationBar(), <span class="hljs-comment">//è‡ªå®šä¹‰ bottomNavigationBar Widget</span><br>      floatingActionButton: MyFloatingActionButton(), <span class="hljs-comment">//è‡ªå®šä¹‰ floatingActionButton Widget</span><br>      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked, <span class="hljs-comment">//floatingActionButton åœ¨åº•éƒ¨ä¸­å¿ƒåœé </span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰ BottomNavigationBar</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBottomNavigationBar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> BottomNavigationBar(<br>        iconSize: <span class="hljs-number">35</span>, <span class="hljs-comment">//å›¾æ ‡å¤§å° 35</span><br>        fixedColor: Colors.green, <span class="hljs-comment">//é€‰ä¸­é¢œè‰²ä¸ºç»¿è‰²</span><br>        type: BottomNavigationBarType.fixed, <span class="hljs-comment">//item å›ºå®šæ˜¾ç¤º</span><br>        items: [ <span class="hljs-comment">//è®¾ç½®äº† 3 ä¸ª å­ item</span><br>          BottomNavigationBarItem(icon: Icon(Icons.home), label: <span class="hljs-string">&quot;é¦–é¡µ&quot;</span>),<br>          BottomNavigationBarItem(icon: Icon(Icons.category), label: <span class="hljs-string">&quot;åˆ†ç±»&quot;</span>),<br>          BottomNavigationBarItem(icon: Icon(Icons.settings), label: <span class="hljs-string">&quot;è®¾ç½®&quot;</span>)<br>        ]);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//è‡ªå®šä¹‰ FloatingActionButton</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyFloatingActionButton</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">//ä½¿ç”¨ Container åŒ…è£¹ FloatingActionButton åœ¨å¤–å±‚åŠ ä¸€ä¸ªç™½è‰²çš„è¾¹æ¡†</span><br>    <span class="hljs-keyword">return</span>  Container(<br>      width: <span class="hljs-number">80</span>,<br>      height: <span class="hljs-number">80</span>,<br>      padding: EdgeInsets.all(<span class="hljs-number">8</span>),<br>      decoration: BoxDecoration(<br>          color: Colors.white,<br>          borderRadius: BorderRadius.circular(<span class="hljs-number">40</span>)<br>      ),<br>      child: FloatingActionButton(<br>        backgroundColor: Colors.yellow,<br>        onPressed: ()&#123;&#125;,<br>        child: Icon(Icons.add),<br>      ),<br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Padding(<span class="hljs-comment">//Padding å®ç°å†…é—´è· 20</span><br>      padding: EdgeInsets.all(<span class="hljs-number">20</span>),<br>      child: Column(<br>        children: [<br>          Row( <span class="hljs-comment">//ç¬¬ä¸€æ’ï¼šæ™®é€šæŒ‰é’® + çº¢è‰²æŒ‰é’® + å¸¦é˜´å½±çš„æŒ‰é’®</span><br>            children: [<br>              RaisedButton(<br>                onPressed: ()&#123;&#125;,<br>                child: Text(<span class="hljs-string">&quot;æ™®é€šæŒ‰é’®&quot;</span>),<br>              ),<br>              SizedBox(width: <span class="hljs-number">20</span>),<br>              RaisedButton(<br>                onPressed: ()&#123;&#125;,<br>                child: Text(<span class="hljs-string">&quot;çº¢è‰²æŒ‰é’®&quot;</span>),<br>                color: Colors.red,<br>                textColor: Colors.white,<br>              ),<br>              SizedBox(width: <span class="hljs-number">20</span>),<br>              RaisedButton(<br>                onPressed: ()&#123;&#125;,<br>                child: Text(<span class="hljs-string">&quot;å¸¦é˜´å½±çš„æŒ‰é’®&quot;</span>),<br>                color: Colors.blue,<br>                textColor: Colors.white,<br>                elevation: <span class="hljs-number">20</span>,<br>              )<br>            ],<br>          ),<br>          SizedBox(height: <span class="hljs-number">20</span>),<br>          Container( <span class="hljs-comment">//ç¬¬äºŒæ’ï¼šè‡ªé€‚åº”æŒ‰é’®</span><br>            height: <span class="hljs-number">60</span>,<br>            width: <span class="hljs-built_in">double</span>.infinity,<br>            child: RaisedButton(<br>              onPressed: () &#123;&#125;,<br>              child: Text(<span class="hljs-string">&quot;è‡ªé€‚åº”æŒ‰é’®&quot;</span>),<br>              textColor: Colors.white,<br>              color: Colors.blue,<br>            ),<br>          ),<br>          SizedBox(height: <span class="hljs-number">20</span>),<br>          Row(children: [ <span class="hljs-comment">//ç¬¬ä¸‰æ’ï¼šicon æŒ‰é’® + æœ‰å®½é«˜çš„æŒ‰é’®</span><br>            RaisedButton.icon(<br>              onPressed: ()&#123;&#125;,<br>              icon: Icon(Icons.home),<br>              label: Text(<span class="hljs-string">&quot; Icon æŒ‰é’®&quot;</span>),<br>              color: Colors.yellow,<br>              textColor: Colors.green,<br>            ),<br>            SizedBox(width: <span class="hljs-number">20</span>),<br>            Container(<br>              height: <span class="hljs-number">60</span>,<br>              width: <span class="hljs-number">200</span>,<br>              child: RaisedButton(<br>                onPressed: () &#123;&#125;,<br>                child: Text(<span class="hljs-string">&quot;æœ‰å®½é«˜çš„æŒ‰é’®&quot;</span>),<br>                textColor: Colors.white,<br>                color: Colors.orange,<br>              ),<br>            )<br>          ]),<br>          SizedBox(height: <span class="hljs-number">20</span>),<br>          Container( <span class="hljs-comment">//ç¬¬å››æ’ï¼šè‡ªé€‚åº”å¸¦åœ†è§’çš„æŒ‰é’®</span><br>            height: <span class="hljs-number">60</span>,<br>            width: <span class="hljs-built_in">double</span>.infinity,<br>            child: RaisedButton(<br>              onPressed: () &#123;&#125;,<br>              child: Text(<span class="hljs-string">&quot;è‡ªé€‚åº”å¸¦åœ†è§’çš„æŒ‰é’®&quot;</span>),<br>              textColor: Colors.white,<br>              color: Colors.blue,<br>              shape: RoundedRectangleBorder(<br>                  borderRadius: BorderRadius.circular(<span class="hljs-number">100</span>)<br>              ),<br>            ),<br>          ),<br>          SizedBox(height: <span class="hljs-number">20</span>),<br>          Container( <span class="hljs-comment">//ç¬¬äº”æ’ï¼šåœ†å½¢æŒ‰é’®</span><br>            height: <span class="hljs-number">100</span>,<br>            width: <span class="hljs-number">150</span>,<br>            child: RaisedButton(<br>              onPressed: () &#123;&#125;,<br>              child: Text(<span class="hljs-string">&#x27;åœ†å½¢æŒ‰é’®&#x27;</span>),<br>              textColor: Colors.white,<br>              color: Colors.lightGreen,<br>              elevation: <span class="hljs-number">20</span>,<br>              splashColor: Colors.green,<br>              shape: CircleBorder(side: BorderSide(color: Colors.white)),<br>            ),<br>          ),<br>          SizedBox(height: <span class="hljs-number">20</span>),<br>          Container( <span class="hljs-comment">//ç¬¬å…­æ’ï¼šæ³¨å†ŒæŒ‰é’®</span><br>            width: <span class="hljs-built_in">double</span>.infinity,<br>            height: <span class="hljs-number">50</span>,<br>            margin: EdgeInsets.fromLTRB(<span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">0</span>),<br>            child:  OutlineButton(<br>              child: Text(<span class="hljs-string">&quot;æ³¨å†Œ&quot;</span>),<br>              onPressed: ()&#123;&#125;,<br>              borderSide: BorderSide(<br>                  width: <span class="hljs-number">1</span>,<br>                  color: Colors.red<br>              ),<br>            ),<br>          ),<br>          SizedBox(height: <span class="hljs-number">20</span>),<br>          Container( <span class="hljs-comment">//ç¬¬ä¸ƒæ’ï¼šç™»é™†æŒ‰é’®</span><br>            width: <span class="hljs-built_in">double</span>.infinity,<br>            height: <span class="hljs-number">50</span>,<br>            margin: EdgeInsets.fromLTRB(<span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">0</span>),<br>            child:  RaisedButton(<br>              child: Text(<span class="hljs-string">&quot;ç™»é™†&quot;</span>),<br>              onPressed: ()&#123;&#125;,<br>              color: Colors.blue,<br>              textColor: Colors.white,<br>            ),<br>          )<br>        ],<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h2><p>æœ¬ç¯‡æˆ‘ä»¬è®²äº†ï¼š</p><p>1ã€Flutter ä¸­å¸¸ç”¨çš„æŒ‰é’® Widget ï¼šRaisedButtonï¼ŒFlatButtonï¼ŒIconButtonï¼ŒOutlineButtonï¼ŒButtonBarï¼ŒFloatingActionButton</p><p>2ã€ä»‹ç»äº† Flutter 1.x å’Œ Flutter 2.x æŒ‰é’®ç›¸å…³çš„å˜åŒ–åŠä½¿ç”¨</p><blockquote><p>Flutter 2.x ä¸­å¸¸ç”¨çš„å±æ€§éƒ½è¢«å°è£…åˆ°äº† style å±æ€§ä¸­</p></blockquote><p>3ã€ä»‹ç»äº† BottomNavigationBarï¼Œå¹¶é€šè¿‡ Flutter 1.x ç›¸å…³ Button + BottomNavigationBar + FloatingActionButton å®ç°äº†ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤</p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šä»‹ç» Flutter è¡¨å•ç›¸å…³ Widget ï¼Œå°½è¯·æœŸå¾…å§ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://www.bilibili.com/video/BV1S4411E7LY?p=19&vd_source=d0b24cb21c438ff4a9ac2e589eacb3d9">Flutter æ•™ç¨‹</a>ï¼šé€šä¿—æ˜“æ‡‚çš„ Flutter å…¥é—¨æ•™ç¨‹</p><blockquote><p><strong>ä½ çš„ç‚¹èµï¼Œè¯„è®ºï¼Œæ˜¯å¯¹æˆ‘å·¨å¤§çš„é¼“åŠ±ï¼</strong></p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„<strong>å…¬ä¼—å·ï¼š</strong>  <a href="https://link.juejin.cn/?target=http://m6z.cn/6jwi7b" title="http://m6z.cn/6jwi7b"><strong>sweetying</strong></a> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p><p>å¦‚æœ<strong>æœ‰é—®é¢˜</strong>ï¼Œå…¬ä¼—å·å†…æœ‰åŠ æˆ‘å¾®ä¿¡çš„å…¥å£ï¼Œåœ¨æŠ€æœ¯å­¦ä¹ ã€ä¸ªäººæˆé•¿çš„é“è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸€èµ·å‰è¿›ï¼</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Flutter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutter ç³»åˆ—ï¼ˆå››ï¼‰ï¼šFlutter å¸¸ç”¨ Widget äºŒ</title>
    <link href="/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AFlutter%20%E5%B8%B8%E7%94%A8%20Widget%20%E4%BA%8C/"/>
    <url>/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9AFlutter%20%E5%B8%B8%E7%94%A8%20Widget%20%E4%BA%8C/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101659599.jpeg" alt="sea-gfd0f885c2_1920"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† Flutter ç‰¹ç‚¹ä»¥åŠä¸€äº›å¸¸ç”¨çš„ Widgetï¼šMaterialAppï¼ŒScaffoldï¼ŒAppBarï¼ŒCenterï¼ŒContainerï¼ŒTextã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/7134343543975313445">Flutter ç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šFlutter ç‰¹ç‚¹åŠå¸¸ç”¨ Widget ä»‹ç»</a>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å¯¹ Flutter Widget è¿›è¡Œå­¦ä¹ </p><p>ä¸‹é¢æˆ‘ä¼šé€šè¿‡ï¼šæ•ˆæœå±•ç¤º -&gt; Widget è®²è§£ -&gt; ä»£ç å®ç°çš„æ–¹å¼å¯¹ Widget è¿›è¡Œä»‹ç»ï¼Œæœ€ååœ¨é€šè¿‡ Widget ç»„åˆç¼–å†™ä¸€ä¸ªç»¼åˆçš„æ¡ˆä¾‹</p><h2 id="ä¸€ã€Flutter-Widget-ä¹‹-Image"><a href="#ä¸€ã€Flutter-Widget-ä¹‹-Image" class="headerlink" title="ä¸€ã€Flutter Widget ä¹‹ Image"></a>ä¸€ã€Flutter Widget ä¹‹ Image</h2><p>Image æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›æ˜¾ç¤ºå›¾ç‰‡çš„ Widget</p><p>å…ˆçœ‹ä¸€çœ¼ä½¿ç”¨ Image å®ç°çš„æ•ˆæœ</p><h3 id="1-1ã€Image-æ•ˆæœå±•ç¤º"><a href="#1-1ã€Image-æ•ˆæœå±•ç¤º" class="headerlink" title="1.1ã€Image æ•ˆæœå±•ç¤º"></a>1.1ã€Image æ•ˆæœå±•ç¤º</h3><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f9c9d4e9e7b94ef0bb5299fd62faa8ae~tplv-k3u1fbpfcp-watermark.image" alt="flutter_01 (2).png"></p><p>åˆ˜äº¦è²çš„åœ†å½¢å›¾ç‰‡ğŸ˜„ï¼Œç¾çˆ†äº†ã€‚è¨€å½’æ­£ä¼ ï¼Œå¤§å®¶å¯ä»¥å…ˆæƒ³ä¸€ä¸‹æ€ä¹ˆå»å®ç°ï¼Ÿ</p><h3 id="1-2ã€Image-ä»‹ç»"><a href="#1-2ã€Image-ä»‹ç»" class="headerlink" title="1.2ã€Image ä»‹ç»"></a>1.2ã€Image ä»‹ç»</h3><p>Image ç»„ä»¶æœ‰å¾ˆå¤šæ„é€ æ–¹æ³•ï¼Œè¿™é‡Œç»™å¤§å®¶è®²ä¸¤ä¸ªå¸¸ç”¨çš„ï¼š</p><p>1ã€Image.network ï¼šåŠ è½½è¿œç¨‹å›¾ç‰‡</p><p>2ã€Image.asset ï¼šåŠ è½½æœ¬åœ°å›¾ç‰‡</p><p>ä¸Šé¢è¿™ä¸¤ä¸ªå±äº Image çš„å‘½åæ„é€ æ–¹æ³•ï¼Œå¯¹å‘½åæ„é€ æ–¹æ³•è¿˜ä¸ç†Ÿæ‚‰çš„èµ¶ç´§å…ˆå»çœ‹ä¸€ä¸‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7130647339294785549#heading-0">ä¼ é€é—¨</a></p><h4 id="1-2-1ã€Image-network-åŠ è½½è¿œç¨‹å›¾ç‰‡"><a href="#1-2-1ã€Image-network-åŠ è½½è¿œç¨‹å›¾ç‰‡" class="headerlink" title="1.2.1ã€Image.network åŠ è½½è¿œç¨‹å›¾ç‰‡"></a>1.2.1ã€Image.network åŠ è½½è¿œç¨‹å›¾ç‰‡</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Image Widget&quot;</span>),<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        elevation: <span class="hljs-number">30</span>,<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>      ),<br>      body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Image.network(<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯ä½¿ç”¨ Image.network ä¼ å…¥ä¸€å¼ å›¾ç‰‡ url ï¼Œè¿™æ ·å°±å¯ä»¥å°†è¿™å¼ ç½‘ç»œå›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥äº†ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b4f8ebf9c4034f23b4a52a59984b046d~tplv-k3u1fbpfcp-watermark.image" alt="flutter_02.png"></p><h4 id="1-2-2ã€Image-asset-åŠ è½½æœ¬åœ°å›¾ç‰‡"><a href="#1-2-2ã€Image-asset-åŠ è½½æœ¬åœ°å›¾ç‰‡" class="headerlink" title="1.2.2ã€Image.asset åŠ è½½æœ¬åœ°å›¾ç‰‡"></a>1.2.2ã€Image.asset åŠ è½½æœ¬åœ°å›¾ç‰‡</h4><p>åŠ è½½æœ¬åœ°å›¾ç‰‡ç¨å¾®å¤æ‚ä¸€äº›</p><p>1ã€æ–°å»ºå›¾ç‰‡ç›®å½•ï¼Œå¼•å…¥å›¾ç‰‡èµ„æº</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3315fbd5066448f7b8c87109f2e3db22~tplv-k3u1fbpfcp-watermark.image" alt="flutter_03 (2).png"></p><p>æˆ‘ä»¬æ–°å»ºäº† images æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨ images ä¸‹æ”¾å…¥äº†å›¾ç‰‡èµ„æºï¼Œåˆæ–°å»ºäº† 2.0x å’Œ 3.0x æ–‡ä»¶å¤¹åˆ†åˆ«å¯¹åº” 2 å€å›¾å’Œ 3 å€å›¾ï¼Œè¿™æ ·å°±èƒ½ä¿è¯ä¸åŒæ‰‹æœºåˆ†è¾¨ç‡çš„æ‰‹æœºåŠ è½½å¯¹åº”æ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡èµ„æº</p><p>2ã€æ‰“å¼€ pubspec.yaml é…ç½®æ–‡ä»¶å£°æ˜ä¸€ä¸‹æˆ‘ä»¬æ·»åŠ çš„å›¾ç‰‡</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2466b29935204ef0960cb4fa29be8cb2~tplv-k3u1fbpfcp-watermark.image" alt="flutter_04 (1).png"></p><p>3ã€æœ€ååœ¨ä»£ç ä¸­ä½¿ç”¨å°±å¯ä»¥äº†</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Image Widget&quot;</span>),<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        elevation: <span class="hljs-number">30</span>,<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>      ),<br>      body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Image.asset(<span class="hljs-string">&quot;images/ic_launcher_round.png&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f2105bb0b41846a88d69143a14eb4cda~tplv-k3u1fbpfcp-watermark.image" alt="flutter_05.png"></p><h4 id="1-2-3ã€Image-å¸¸ç”¨å±æ€§"><a href="#1-2-3ã€Image-å¸¸ç”¨å±æ€§" class="headerlink" title="1.2.3ã€Image å¸¸ç”¨å±æ€§"></a>1.2.3ã€Image å¸¸ç”¨å±æ€§</h4><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>alignment</td><td>Alignment</td><td>å›¾ç‰‡çš„å¯¹é½æ–¹å¼</td></tr><tr><td>color å’Œ colorBlendMode</td><td></td><td>è®¾ç½®å›¾ç‰‡çš„èƒŒæ™¯é¢œè‰²ï¼Œé€šå¸¸å’Œ colorBlendMode é…åˆä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥ä½¿å›¾ç‰‡é¢œè‰²å’ŒèƒŒæ™¯è‰²æ··åˆ</td></tr><tr><td>fit</td><td>BoxFit</td><td>fit å±æ€§ç”¨æ¥æ§åˆ¶å›¾ç‰‡çš„æ‹‰ä¼¸å’ŒæŒ¤å‹ï¼Œè¿™éƒ½æ˜¯æ ¹æ®çˆ¶å®¹å™¨æ¥çš„ï¼š<br/>BoxFit.fillï¼šå…¨å›¾æ˜¾ç¤ºï¼Œå›¾ç‰‡ä¼šè¢«æ‹‰ä¼¸ï¼Œå¹¶å……æ»¡çˆ¶å®¹å™¨<br/>BoxFit.containï¼šå…¨å›¾æ˜¾ç¤ºï¼Œæ˜¾ç¤ºåŸæ¯”ä¾‹ï¼Œå¯èƒ½ä¼šæœ‰ç©ºéš™<br/>BoxFit.coverï¼šæ˜¾ç¤ºå¯èƒ½æ‹‰ä¼¸ï¼Œå¯èƒ½è£åˆ‡ï¼Œå……æ»¡ï¼ˆå›¾ç‰‡è¦å……æ»¡æ•´ä¸ªå®¹å™¨ï¼Œè¿˜ä¸å˜å½¢ï¼‰<br/>BoxFit.fitWidthï¼šå®½åº¦å……æ»¡(æ¨ªå‘å……æ»¡)ï¼Œæ˜¾ç¤ºå¯èƒ½æ‹‰ä¼¸ï¼Œ å¯èƒ½è£åˆ‡<br/>BoxFit.fitHeightï¼šé«˜åº¦å……æ»¡(ç«–å‘å……æ»¡),æ˜¾ç¤ºå¯èƒ½æ‹‰ ä¼¸ï¼Œå¯èƒ½è£åˆ‡<br/>BoxFit.scaleDownï¼šæ•ˆæœå’Œ contain å·®ä¸å¤šï¼Œä½†æ˜¯æ­¤å±æ€§ä¸å…è®¸æ˜¾ç¤ºè¶…è¿‡åŸå›¾ç‰‡å¤§å°ï¼Œå¯å°ä¸å¯å¤§</td></tr><tr><td>width</td><td></td><td>å®½åº¦ï¼Œä¸€èˆ¬ç»“åˆ ClipOval Widget æ‰èƒ½çœ‹åˆ°æ•ˆæœ</td></tr><tr><td>height</td><td></td><td>é«˜åº¦ï¼Œä¸€èˆ¬ç»“åˆ ClipOval Widget æ‰èƒ½çœ‹åˆ°æ•ˆæœ</td></tr></tbody></table><p>æ›´å¤šå±æ€§å‚è€ƒï¼š<a href="https://api.flutter.dev/flutter/widgets/Image-class.html">https://api.flutter.dev/flutter/widgets/Image-class.html</a></p><p><strong>PS</strong>ï¼šClipOval æ˜¯ä¸€ä¸ªè£å‰ªå­ Widget ä¸ºæ¤­åœ†çš„ Widgetï¼Œå¸¸ç”¨äºåœ†å½¢ï¼Œåœ†è§’å›¾ç‰‡ç­‰</p><h3 id="1-3ã€æ•ˆæœå®ç°"><a href="#1-3ã€æ•ˆæœå®ç°" class="headerlink" title="1.3ã€æ•ˆæœå®ç°"></a>1.3ã€æ•ˆæœå®ç°</h3><p>å›é¡¾ 1.1 çš„æ•ˆæœï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªå±…ä¸­å±•ç¤ºçš„åœ†å½¢å›¾ç‰‡</p><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Center è¿›è¡Œå±…ä¸­ï¼Œç„¶åä½¿ç”¨ Image + ClipOval é…åˆç›¸å…³å±æ€§å®ç°åœ†å½¢å›¾ç‰‡ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Image Widget&quot;</span>),<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        elevation: <span class="hljs-number">30</span>,<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>      ),<br>      body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Center(<br>      child: ClipOval(<br>        child: Image.network(<br>          <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>,<br>          width: <span class="hljs-number">300</span>, <span class="hljs-comment">//è®¾ç½®å›¾ç‰‡çš„å®½åº¦ä¸º 300</span><br>          height: <span class="hljs-number">300</span>, <span class="hljs-comment">//è®¾ç½®å›¾ç‰‡çš„é«˜åº¦ä¸º 300</span><br>          fit: BoxFit.cover, <span class="hljs-comment">//è®¾ç½®å›¾ç‰‡ç­‰æ¯”æ”¾å¤§ï¼Œå……æ»¡çˆ¶å®¹å™¨</span><br>        ),<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å°±å®ç°äº†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ</p><h2 id="äºŒã€Flutter-Widget-ä¹‹-ListView"><a href="#äºŒã€Flutter-Widget-ä¹‹-ListView" class="headerlink" title="äºŒã€Flutter Widget ä¹‹ ListView"></a>äºŒã€Flutter Widget ä¹‹ ListView</h2><p>åˆ—è¡¨æ˜¯æˆ‘ä»¬é¡¹ç›®å¼€å‘ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§å¸ƒå±€æ–¹å¼ï¼ŒFlutter ç»™æˆ‘ä»¬æä¾›äº† ListView æ¥å®šä¹‰åˆ—è¡¨ï¼Œå®ƒæ”¯æŒå‚ç›´å’Œæ°´å¹³æ–¹å‘å±•ç¤ºï¼Œé€šè¿‡ä¸€ä¸ªå±æ€§å°±å¯ä»¥æ§åˆ¶åˆ—è¡¨çš„æ˜¾ç¤ºæ–¹å‘</p><h3 id="2-1ã€æ•ˆæœå±•ç¤º"><a href="#2-1ã€æ•ˆæœå±•ç¤º" class="headerlink" title="2.1ã€æ•ˆæœå±•ç¤º"></a>2.1ã€æ•ˆæœå±•ç¤º</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/71e5730aaec645d9b0652dc6e8c77b9c~tplv-k3u1fbpfcp-watermark.image" alt="flutter_06.png"></p><h3 id="2-2ã€ListView-ä»‹ç»"><a href="#2-2ã€ListView-ä»‹ç»" class="headerlink" title="2.2ã€ListView ä»‹ç»"></a>2.2ã€ListView ä»‹ç»</h3><h4 id="2-2-1ã€å¸¸ç”¨å±æ€§ä»‹ç»"><a href="#2-2-1ã€å¸¸ç”¨å±æ€§ä»‹ç»" class="headerlink" title="2.2.1ã€å¸¸ç”¨å±æ€§ä»‹ç»"></a>2.2.1ã€å¸¸ç”¨å±æ€§ä»‹ç»</h4><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>scrollDirection</td><td>Axis</td><td>Axis.horizontal æ°´å¹³åˆ—è¡¨ <br/>Axis.vertical å‚ç›´åˆ—è¡¨</td></tr><tr><td>padding</td><td>EdgeInsetsGeometry</td><td>å…§è¾¹è·</td></tr><tr><td>resolve</td><td>bool</td><td>ç»„ä»¶åå‘æ’åº</td></tr><tr><td>children</td><td>List<Widget></td><td>åˆ—è¡¨å…ƒç´ </td></tr></tbody></table><p>æ›´å¤šå±æ€§å‚è€ƒï¼š<a href="https://api.flutter.dev/flutter/widgets/ListView-class.html">https://api.flutter.dev/flutter/widgets/ListView-class.html</a></p><p>ListView çš„ children èƒ½åµŒå¥—å„ç§ Widget å»å®ç°åˆ—è¡¨ UI æ•ˆæœ</p><h4 id="2-2-2ã€ListTile-ä»‹ç»"><a href="#2-2-2ã€ListTile-ä»‹ç»" class="headerlink" title="2.2.2ã€ListTile ä»‹ç»"></a>2.2.2ã€ListTile ä»‹ç»</h4><p>ListTile æ˜¯ä¸€ä¸ªåˆ—è¡¨ item Widget ï¼Œé€šå¸¸ç”¨äºå„ç§åˆ—è¡¨ä¸­ï¼Œå…¶å¸¸ç”¨çš„å±æ€§æœ‰ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>leading</td><td>Widget</td><td>å·¦ä¾§ç»„ä»¶</td></tr><tr><td>title</td><td>Widget</td><td>æ ‡é¢˜</td></tr><tr><td>subtitle</td><td>Widget</td><td>å‰¯æ ‡é¢˜</td></tr><tr><td>trailing</td><td>Widget</td><td>å³ä¾§ç»„ä»¶</td></tr><tr><td>onTap</td><td></td><td>ç‚¹å‡»äº‹ä»¶å›è°ƒ</td></tr><tr><td>onLongPress</td><td></td><td>é•¿æŒ‰äº‹ä»¶å›è°ƒ</td></tr></tbody></table><p>æ›´å¤šå±æ€§å‚è€ƒï¼š<a href="https://api.flutter.dev/flutter/material/ListTile-class.html">https://api.flutter.dev/flutter/material/ListTile-class.html</a></p><p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ ListView + ListTile å®ç°ä¸€ä¸ªæ•ˆæœï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br><br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter ListView Widget&quot;</span>),<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        elevation: <span class="hljs-number">30</span>,<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>      ),<br>      body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> ListView(<br>      children: [<br>        ListTile(<br>          leading: Icon(Icons.search),<br>          title: Text(<span class="hljs-string">&quot;æ ‡é¢˜1&quot;</span>),<br>          subtitle: Text(<span class="hljs-string">&quot;æè¿°1&quot;</span>),<br>          trailing: Icon(Icons.home),<br>        ),<br>        ListTile(<br>          leading: Icon(Icons.search),<br>          title: Text(<span class="hljs-string">&quot;æ ‡é¢˜2&quot;</span>),<br>          subtitle: Text(<span class="hljs-string">&quot;æè¿°2&quot;</span>),<br>          trailing: Icon(Icons.home)<br>        ),<br>        ListTile(<br>          leading: Icon(Icons.search),<br>          title: Text(<span class="hljs-string">&quot;æ ‡é¢˜3&quot;</span>),<br>          subtitle: Text(<span class="hljs-string">&quot;æè¿°3&quot;</span>),<br>          trailing: Icon(Icons.home)<br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•ˆæœå›¾ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c02d016436184879a7d8871bdfb2e904~tplv-k3u1fbpfcp-watermark.image" alt="flutter_07.png"></p><h3 id="2-3ã€æ•ˆæœå®ç°"><a href="#2-3ã€æ•ˆæœå®ç°" class="headerlink" title="2.3ã€æ•ˆæœå®ç°"></a>2.3ã€æ•ˆæœå®ç°</h3><p>ä¸Šé¢ 2.1 å±•ç¤ºçš„æ•ˆæœå°±æ˜¯ï¼šListTile + æ¨ªçº¿ä½œä¸ºä¸€ä¸ª item è¿›è¡Œæ’åˆ—ï¼Œå¦‚ä½•å°†è¿™ä¸¤ä¸ª Widget åŒ…è£…ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œæˆ‘ä»¬å°±è¦å­¦ä¹ ä¸‹ Column </p><p>1ã€Column ä»‹ç»</p><p>Column æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„å‚ç›´å¸ƒå±€ Widgetï¼Œå…¶å¸¸ç”¨å±æ€§æœ‰ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>mainAxisAlignment</td><td>MainAxisAlignment</td><td>ä¸»è½´çš„æ’åºæ–¹å¼</td></tr><tr><td>crossAxisAlignment</td><td>CrossAxisAlignment</td><td>æ¬¡è½´çš„æ’åºæ–¹å¼</td></tr><tr><td>children</td><td>List<Widget></td><td>ç»„ä»¶å­å…ƒç´ </td></tr></tbody></table><p>æ›´å¤šå±æ€§å‚è€ƒï¼š<a href="https://api.flutter.dev/flutter/widgets/Column-class.html">https://api.flutter.dev/flutter/widgets/Column-class.html</a></p><p>åŒæ · Flutter ç»™æˆ‘ä»¬æä¾›äº†æ°´å¹³å¸ƒå±€ Widget Rowï¼Œå¸¸ç”¨å±æ€§å’Œ Column ä¸€æ ·</p><p>2ã€æ¨ªçº¿æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ Divider</p><p>okï¼Œç°åœ¨å°±å¯ä»¥å»å®ç°æ•ˆæœå›¾äº†ï¼Œä¸Šé¢ 2.2 çš„ä¾‹å­ ListView é‡Œé¢çš„æ•°æ®éƒ½æ˜¯å†™æ­»çš„ï¼Œä¸çµæ´»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ ListView çš„å‘½åæ„é€ æ–¹æ³• ListView.Builder æ¥å®ç°åŠ¨æ€åŠ è½½ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br><br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter ListView Widget&quot;</span>),<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        elevation: <span class="hljs-number">30</span>,<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>      ),<br>      body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-comment">//mock æ•°æ®ï¼šç›¸å½“äº List&lt;Map&gt;</span><br>  <span class="hljs-keyword">var</span> mDataList = [<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜1&quot;</span>,<br>      <span class="hljs-string">&quot;desc&quot;</span>:<span class="hljs-string">&quot;æè¿°1&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜2&quot;</span>,<br>      <span class="hljs-string">&quot;desc&quot;</span>:<span class="hljs-string">&quot;æè¿°2&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜3&quot;</span>,<br>      <span class="hljs-string">&quot;desc&quot;</span>:<span class="hljs-string">&quot;æè¿°3&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜4&quot;</span>,<br>      <span class="hljs-string">&quot;desc&quot;</span>:<span class="hljs-string">&quot;æè¿°4&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜5&quot;</span>,<br>      <span class="hljs-string">&quot;desc&quot;</span>:<span class="hljs-string">&quot;æè¿°6&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>  ];<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> ListView.builder(<span class="hljs-comment">//é€šè¿‡ ListView.builder å®ç°æ•°æ®çš„åŠ¨æ€åŠ è½½</span><br>        itemCount: mDataList.length, <span class="hljs-comment">//item çš„ä¸ªæ•°</span><br>        itemBuilder: (context, index) &#123; <span class="hljs-comment">//é€šè¿‡ itemBuilder æ„å»º Widget</span><br>          <span class="hljs-keyword">return</span> Column(<br>            children: [ <span class="hljs-comment">//Column é‡Œé¢åŒ…è£…äº† ListTile + Divider</span><br>              ListTile(<br>                leading: ClipOval( <span class="hljs-comment">//åœ†å½¢å›¾ç‰‡</span><br>                  child: Image.network(<br>                    mDataList[index][<span class="hljs-string">&quot;image&quot;</span>] ?? <span class="hljs-string">&quot;&quot;</span>,<br>                    width: <span class="hljs-number">50</span>,<br>                    height: <span class="hljs-number">50</span>,<br>                    fit: BoxFit.cover,<br>                  ),<br>                ),<br>                title: Text(mDataList[index][<span class="hljs-string">&quot;title&quot;</span>] ?? <span class="hljs-string">&quot;&quot;</span>), <span class="hljs-comment">//æ ‡é¢˜</span><br>                subtitle: Text(mDataList[index][<span class="hljs-string">&quot;desc&quot;</span>] ?? <span class="hljs-string">&quot;&quot;</span>), <span class="hljs-comment">//å‰¯æ ‡é¢˜</span><br>              ),<br>              Divider() <span class="hljs-comment">//æ¨ªçº¿</span><br>            ],<br>          );<br>        &#125;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å°±å®ç°äº†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœ</p><h2 id="ä¸‰ã€Flutter-Widget-ä¹‹-GridView"><a href="#ä¸‰ã€Flutter-Widget-ä¹‹-GridView" class="headerlink" title="ä¸‰ã€Flutter Widget ä¹‹ GridView"></a>ä¸‰ã€Flutter Widget ä¹‹ GridView</h2><p>GridView æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„ç½‘æ ¼å¸ƒå±€ Widgetï¼Œæˆ‘ä»¬å¿«é€Ÿè¿‡ä¸€ä¸‹ï¼Œç„¶åå®ç°ä¸€äº›æ•ˆæœï¼š</p><p>GridView åˆ›å»ºç½‘æ ¼åˆ—è¡¨æœ‰å¤šç§æ–¹å¼ï¼Œä¸»è¦ä»‹ç»ä¸¤ç§ï¼š</p><p>1ã€é€šè¿‡ GridView.count å®ç°ç½‘æ ¼å¸ƒå±€</p><p>2ã€é€šè¿‡ GridView.builder å®ç°ç½‘æ ¼å¸ƒå±€</p><p><strong>å¸¸ç”¨å±æ€§</strong>ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>scrollDirection</td><td>Axis</td><td>Axis.horizontal æ°´å¹³åˆ—è¡¨ <br/>Axis.vertical å‚ç›´åˆ—è¡¨</td></tr><tr><td>padding</td><td>EdgeInsetsGeometry</td><td>å…§è¾¹è·</td></tr><tr><td>resolve</td><td>bool</td><td>ç»„ä»¶åå‘æ’åº</td></tr><tr><td>children</td><td>List<Widget></td><td>åˆ—è¡¨å…ƒç´ </td></tr><tr><td>crossAxisSpacing</td><td>double</td><td>æ°´å¹³å­ Widget ä¹‹é—´é—´è·</td></tr><tr><td>mainAxisSpacing</td><td>double</td><td>å‚ç›´å­ Widget ä¹‹é—´é—´è·</td></tr><tr><td>crossAxisCount</td><td>int</td><td>ä¸€è¡Œçš„ Widget æ•°é‡</td></tr><tr><td>childAspectRatio</td><td>double</td><td>å­ Widget å®½é«˜æ¯”ä¾‹</td></tr><tr><td>gridDelegate</td><td>SliverGridDelegate</td><td>æ§åˆ¶å¸ƒå±€ä¸»è¦ç”¨åœ¨ GridView.builder é‡Œé¢</td></tr></tbody></table><h3 id="3-1ã€Flutter-GridView-count-å®ç°ç½‘æ ¼å¸ƒå±€"><a href="#3-1ã€Flutter-GridView-count-å®ç°ç½‘æ ¼å¸ƒå±€" class="headerlink" title="3.1ã€Flutter GridView.count å®ç°ç½‘æ ¼å¸ƒå±€"></a>3.1ã€Flutter GridView.count å®ç°ç½‘æ ¼å¸ƒå±€</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br><br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter ListView Widget&quot;</span>),<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        elevation: <span class="hljs-number">30</span>,<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>      ),<br>      body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br><br>  <span class="hljs-comment">//mock æ•°æ®</span><br>  <span class="hljs-keyword">var</span> mDataList = [<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜1&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜2&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜3&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜4&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>:<span class="hljs-string">&quot;æ ‡é¢˜5&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>:<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>  ];<br><br>  <span class="hljs-built_in">List</span>&lt;Widget&gt; _getListWidget() &#123;<br>    <span class="hljs-keyword">var</span> listWidget = mDataList.map((value) &#123;<br>      <span class="hljs-keyword">return</span> Container(<br>        decoration: <span class="hljs-comment">//è®¾ç½®ä¸€ä¸ªå®½åº¦ä¸º 1 ç»¿è‰²çš„è¾¹æ¡†</span><br>          BoxDecoration(border: Border.all(color: Colors.green, width: <span class="hljs-number">1.0</span>)),<br>        child: Column( <span class="hljs-comment">//å‚ç›´å¸ƒå±€é‡Œé¢åµŒå¥—ï¼šExpanded + SizedBox + Text + SizedBox</span><br>          children: [<br>            Expanded( <span class="hljs-comment">//å±•å¼€ Widgetï¼Œç±»ä¼¼ Android é‡Œé¢ Linearlayout è®¾ç½®æƒé‡ï¼Œç”¨åœ¨è¿™æ˜¯è®©å›¾ç‰‡è‡ªé€‚åº”å±•å¼€</span><br>              child: Image.network(<span class="hljs-comment">// å›¾ç‰‡</span><br>                value[<span class="hljs-string">&quot;image&quot;</span>] ?? <span class="hljs-string">&quot;&quot;</span>,<br>                fit: BoxFit.cover,<br>                width: <span class="hljs-built_in">double</span>.infinity, <span class="hljs-comment">//è®¾ç½®å›¾ç‰‡çš„å®½åº¦ä¸ºå±å¹•çš„å®½åº¦</span><br>              ),<br>            ),<br>            SizedBox(height: <span class="hljs-number">12</span>),<span class="hljs-comment">//è®¾ç½®ä¸€ä¸ªé«˜åº¦ä¸º 12 çš„ç©ºç™½é—´è·</span><br>            Text( <span class="hljs-comment">// è®¾ç½®æ–‡æœ¬</span><br>                value[<span class="hljs-string">&quot;title&quot;</span>] ?? <span class="hljs-string">&quot;&quot;</span>,<br>                textAlign: TextAlign.center,<br>                style: TextStyle(<br>                    fontSize: <span class="hljs-number">20</span><br>                )<br>            ),<br>            SizedBox(height: <span class="hljs-number">12</span>),<span class="hljs-comment">//è®¾ç½®ä¸€ä¸ªé«˜åº¦ä¸º 12 çš„ç©ºç™½é—´è·</span><br>          ],<br>        ),<br>      );<br>    &#125;);<br>    <span class="hljs-keyword">return</span> listWidget.toList();<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> GridView.count(<br>      crossAxisCount: <span class="hljs-number">2</span>,<span class="hljs-comment">// è®¾ç½®ä¸€è¡Œæ˜¾ç¤º Widget æ•°é‡ä¸º 2</span><br>      padding: EdgeInsets.all(<span class="hljs-number">20</span>), <span class="hljs-comment">//è®¾ç½® GridView å…§è¾¹è·ä¸º 20</span><br>      crossAxisSpacing: <span class="hljs-number">20</span>, <span class="hljs-comment">//è®¾ç½®æ°´å¹³å­ Widget ä¹‹é—´çš„é—´è·ä¸º 20</span><br>      mainAxisSpacing: <span class="hljs-number">20</span>,  <span class="hljs-comment">//è®¾ç½®å‚ç›´å­ Widget ä¹‹é—´çš„é—´è·ä¸º 20</span><br>      children: _getListWidget() <span class="hljs-comment">//è®¾ç½®å­ Widget</span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ä¸ªæ–° Widgetï¼šExpandedï¼ŒSizeBox</p><p>1ã€Expanded æ˜¯ç”¨äºå±•å¼€å­ Widget çš„ Widgetï¼Œå¸¸ç”¨äº Rowï¼ŒColumn ä¸­ï¼Œå…¶ flex å±æ€§å°±æ˜¯ç”¨æ¥è®¾ç½®æƒé‡çš„ï¼Œç±»ä¼¼äº Android çš„ LinearLayout è®¾ç½®æƒé‡</p><p>2ã€SizeBox ä¸»è¦æ˜¯ç”¨æ¥æŒ‡å®šä¸€æ®µé—´è·çš„ï¼Œå…¶æœ‰ä¸¤ä¸ªå±æ€§ï¼Œwidthï¼Œheightã€‚å¦‚æœè®¾ç½® width å°±æ˜¯æŒ‡å®šå®½åº¦ï¼Œå¦‚æœè®¾ç½® height å°±æ˜¯æŒ‡å®šé«˜åº¦</p><p>å®ç°æ•ˆæœï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ed5babf3a7642069893a05e1afe3240~tplv-k3u1fbpfcp-watermark.image" alt="flutter_08.png"></p><h3 id="3-2ã€Flutter-GridView-builder-å®ç°ç½‘æ ¼å¸ƒå±€"><a href="#3-2ã€Flutter-GridView-builder-å®ç°ç½‘æ ¼å¸ƒå±€" class="headerlink" title="3.2ã€Flutter GridView.builder å®ç°ç½‘æ ¼å¸ƒå±€"></a>3.2ã€Flutter GridView.builder å®ç°ç½‘æ ¼å¸ƒå±€</h3><p>åŒæ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬ä½¿ç”¨ GridView.builder æ¥å®ç°</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter GridView Widget&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>          elevation: <span class="hljs-number">30</span>, <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>        ),<br>        body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>        ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-comment">//mock æ•°æ®</span><br>  <span class="hljs-keyword">var</span> mDataList = [<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;æ ‡é¢˜1&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>: <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;æ ‡é¢˜2&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>: <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;æ ‡é¢˜3&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>: <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;æ ‡é¢˜4&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>: <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;title&quot;</span>: <span class="hljs-string">&quot;æ ‡é¢˜5&quot;</span>,<br>      <span class="hljs-string">&quot;image&quot;</span>: <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span><br>    &#125;,<br>  ];<br><br>  Widget _getListWidget(context, index) &#123;<br>    <span class="hljs-keyword">return</span> Container(<br>      decoration: <span class="hljs-comment">//è®¾ç½®ä¸€ä¸ªå®½åº¦ä¸º 1 ç»¿è‰²çš„è¾¹æ¡†</span><br>          BoxDecoration(border: Border.all(color: Colors.green, width: <span class="hljs-number">1.0</span>)),<br>      child: Column(<br>        <span class="hljs-comment">//å‚ç›´å¸ƒå±€é‡Œé¢åµŒå¥—ï¼šExpanded + SizedBox + Text + SizedBox</span><br>        children: [<br>          Expanded(<br>            <span class="hljs-comment">//æ‰©å±• Widgetï¼Œç±»ä¼¼ Android é‡Œé¢ Linearlayout è®¾ç½®æƒé‡ï¼Œç”¨åœ¨è¿™æ˜¯è®©å›¾ç‰‡è‡ªé€‚åº”</span><br>            child: Image.network(<br>              <span class="hljs-comment">// å›¾ç‰‡</span><br>              mDataList[index][<span class="hljs-string">&quot;image&quot;</span>] ?? <span class="hljs-string">&quot;&quot;</span>,<br>              fit: BoxFit.cover,<br>              width: <span class="hljs-built_in">double</span>.infinity, <span class="hljs-comment">//è®¾ç½®å›¾ç‰‡çš„å®½åº¦ä¸ºå±å¹•çš„å®½åº¦</span><br>            ),<br>          ),<br>          SizedBox(height: <span class="hljs-number">12</span>), <span class="hljs-comment">//è®¾ç½®ä¸€ä¸ªé«˜åº¦ä¸º 12 çš„ç©ºç™½é—´è·</span><br>          Text(<br>              <span class="hljs-comment">// è®¾ç½®æ–‡æœ¬</span><br>              mDataList[index][<span class="hljs-string">&quot;title&quot;</span>] ?? <span class="hljs-string">&quot;&quot;</span>,<br>              textAlign: TextAlign.center,<br>              style: TextStyle(fontSize: <span class="hljs-number">20</span>)),<br>          SizedBox(height: <span class="hljs-number">12</span>), <span class="hljs-comment">//è®¾ç½®ä¸€ä¸ªé«˜åº¦ä¸º 12 çš„ç©ºç™½é—´è·</span><br>        ],<br>      ),<br>    );<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> GridView.builder(<br>        itemCount: mDataList.length,<br>        padding: EdgeInsets.all(<span class="hljs-number">20</span>),<br>        gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(<br>          crossAxisCount: <span class="hljs-number">2</span>, <span class="hljs-comment">//è®¾ç½®ä¸€è¡Œæœ‰ä¸¤ä¸ª Widget</span><br>          crossAxisSpacing: <span class="hljs-number">20</span>, <span class="hljs-comment">//è®¾ç½®æ°´å¹³å­ Widget ä¹‹é—´çš„é—´è·ä¸º 20</span><br>          mainAxisSpacing: <span class="hljs-number">20</span>, <span class="hljs-comment">//è®¾ç½®å‚ç›´å­ Widget ä¹‹é—´çš„é—´è·ä¸º 20</span><br>          childAspectRatio: <span class="hljs-number">1</span>, <span class="hljs-comment">//è®¾ç½®å­ç»„ä»¶å®½é«˜æ¯”ä¾‹ä¸º 1</span><br>        ),<br>        itemBuilder: _getListWidget <span class="hljs-comment">//å°†æ–¹æ³•ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ å…¥</span><br>        );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å››ã€Flutter-Widget-ä¹‹-Stack"><a href="#å››ã€Flutter-Widget-ä¹‹-Stack" class="headerlink" title="å››ã€Flutter Widget ä¹‹ Stack"></a>å››ã€Flutter Widget ä¹‹ Stack</h2><p>Stack æ˜¯ Fluter æä¾›çš„å å±‚ Widget ï¼Œç±»ä¼¼ Android çš„ FrameLayout</p><p><strong>å¸¸ç”¨å±æ€§</strong>ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>alignment</td><td>AlignmentGeometry</td><td>é…ç½®æ‰€æœ‰å­å…ƒç´ çš„æ˜¾ç¤ºä½ç½®</td></tr><tr><td>children</td><td>List<Widget></td><td>å­ç»„ä»¶</td></tr></tbody></table><p>é€šå¸¸å®ƒä¼šé…åˆ Align æˆ– Positioned å®ç°å®šä½å¸ƒå±€</p><p><strong>Align å¸¸ç”¨å±æ€§</strong></p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>alignment</td><td>AlignmentGeometry</td><td>é…ç½®å­å…ƒç´ çš„æ˜¾ç¤ºä½ç½®</td></tr><tr><td>child</td><td>Widget</td><td>å­ç»„ä»¶</td></tr></tbody></table><p><strong>Positioned å¸¸ç”¨å±æ€§</strong></p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>top</td><td>double</td><td>å­å…ƒç´ è·ç¦»é¡¶éƒ¨çš„è·ç¦»</td></tr><tr><td>bottom</td><td>double</td><td>å­å…ƒç´ è·ç¦»åº•éƒ¨çš„è·ç¦»</td></tr><tr><td>left</td><td>double</td><td>å­å…ƒç´ è·ç¦»å·¦ä¾§è·ç¦»</td></tr><tr><td>right</td><td>double</td><td>å­å…ƒç´ è·ç¦»å³ä¾§è·ç¦»</td></tr><tr><td>child</td><td>Widget</td><td>å­ç»„ä»¶</td></tr></tbody></table><p>ä¸‹é¢æˆ‘ä»¬å®ç°å¦‚ä¸‹æ•ˆæœï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65d60dd3b5ee487e89e6abc3f3265e13~tplv-k3u1fbpfcp-watermark.image" alt="flutter_09.png"></p><h3 id="4-1ã€Stack-Align-å®ç°å®šä½å¸ƒå±€"><a href="#4-1ã€Stack-Align-å®ç°å®šä½å¸ƒå±€" class="headerlink" title="4.1ã€Stack + Align å®ç°å®šä½å¸ƒå±€"></a>4.1ã€Stack + Align å®ç°å®šä½å¸ƒå±€</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter Stack Widget&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>          elevation: <span class="hljs-number">30</span>, <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>        ),<br>        body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>        ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Stack(<br>      children: [<br>        Align(<br>          alignment: Alignment.topLeft,<span class="hljs-comment">//å·¦ä¸Š</span><br>          child: Container(<br>            width: <span class="hljs-number">100</span>,<br>            height: <span class="hljs-number">100</span>,<br>            color: Colors.red,<br>          ),<br>        ),<br>        Align(<br>          alignment: Alignment.topRight,<span class="hljs-comment">//å³ä¸Š</span><br>          child: Container(<br>            width: <span class="hljs-number">100</span>,<br>            height: <span class="hljs-number">100</span>,<br>            color: Colors.orange,<br>          ),<br>        ),<br>        Align(<br>          alignment: Alignment.center,<span class="hljs-comment">//ä¸­é—´</span><br>          child: Container(<br>            width: <span class="hljs-number">100</span>,<br>            height: <span class="hljs-number">100</span>,<br>            color: Colors.yellow,<br>          ),<br>        ),<br>        Align(<br>          alignment: Alignment.bottomLeft,<span class="hljs-comment">//å·¦ä¸‹</span><br>          child: Container(<br>            width: <span class="hljs-number">100</span>,<br>            height: <span class="hljs-number">100</span>,<br>            color: Colors.green,<br>          ),<br>        ),<br>        Align(<br>          alignment: Alignment.bottomRight,<span class="hljs-comment">//å³ä¸‹</span><br>          child: Container(<br>            width: <span class="hljs-number">100</span>,<br>            height: <span class="hljs-number">100</span>,<br>            color: Colors.blue,<br>          ),<br>        )<br>      ],<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2ã€Stack-Positioned-å®ç°å®šä½å¸ƒå±€"><a href="#4-2ã€Stack-Positioned-å®ç°å®šä½å¸ƒå±€" class="headerlink" title="4.2ã€Stack + Positioned å®ç°å®šä½å¸ƒå±€"></a>4.2ã€Stack + Positioned å®ç°å®šä½å¸ƒå±€</h3><p>è¿™ç§æ–¹å¼å¿…é¡»æŒ‡å®šç²¾ç¡®çš„å®½é«˜ï¼Œåœ¨ä¸åŒåˆ†è¾¨ç‡çš„æ‰‹æœºï¼Œå¯èƒ½æ˜¾ç¤ºä¼šæœ‰ç‚¹é—®é¢˜ï¼Œä¼˜å…ˆè¿˜æ˜¯ä½¿ç”¨ Stack + Align å®ç°å®šä½å¸ƒå±€ï¼Œå¦‚æœå¯¹ UI çš„å°åå·®èƒ½å¿½ç•¥ä¸è®¡ï¼Œç”¨è¿™ä¸ªä¹Ÿå¯ä»¥</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter Stack Widget&quot;</span>), <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>          elevation: <span class="hljs-number">30</span>, <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>        ),<br>        body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>        ),<br>  ));<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">final</span> size = MediaQuery.of(context).size;<br>    <span class="hljs-keyword">final</span> screenWidth = size.width; <span class="hljs-comment">//è·å–å±å¹•å®½åº¦</span><br>    <span class="hljs-keyword">final</span> screenHeight = size.height; <span class="hljs-comment">//è·å–å±å¹•é«˜åº¦</span><br>    <span class="hljs-keyword">return</span> Container(<br>      width: <span class="hljs-built_in">double</span>.infinity,<br>      height: <span class="hljs-built_in">double</span>.infinity,<br>      child: Stack(<br>        children: [<br>          Positioned(<span class="hljs-comment">//å·¦ä¸Š</span><br>            child: Container(<br>              width: <span class="hljs-number">100</span>,<br>              height: <span class="hljs-number">100</span>,<br>              color: Colors.red,<br>            ),<br>          ),<br>          Positioned(<span class="hljs-comment">//å³ä¸Š</span><br>            left: screenWidth - <span class="hljs-number">100</span>,<br>            child: Container(<br>              width: <span class="hljs-number">100</span>,<br>              height: <span class="hljs-number">100</span>,<br>              color: Colors.orange,<br>            ),<br>          ),<br>          Positioned(<span class="hljs-comment">//ä¸­é—´</span><br>            left: screenWidth / <span class="hljs-number">2</span> - <span class="hljs-number">50</span>,<br>            top: screenHeight / <span class="hljs-number">2</span> - <span class="hljs-number">90</span>,<br>            child: Container(<br>              width: <span class="hljs-number">100</span>,<br>              height: <span class="hljs-number">100</span>,<br>              color: Colors.yellow,<br>            ),<br>          ),<br>          Positioned(<span class="hljs-comment">//å·¦ä¸‹</span><br>            top: screenHeight - <span class="hljs-number">180</span>,<br>            child: Container(<br>              width: <span class="hljs-number">100</span>,<br>              height: <span class="hljs-number">100</span>,<br>              color: Colors.green,<br>            ),<br>          ),<br>          Positioned(<span class="hljs-comment">//å³ä¸‹</span><br>            left: screenWidth - <span class="hljs-number">100</span>,<br>            top: screenHeight - <span class="hljs-number">180</span>,<br>            child: Container(<br>              width: <span class="hljs-number">100</span>,<br>              height: <span class="hljs-number">100</span>,<br>              color: Colors.blue,<br>            ),<br>          )<br>        ],<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="äº”ã€Widget-ç»„åˆä¹‹ç»¼åˆæ¡ˆä¾‹"><a href="#äº”ã€Widget-ç»„åˆä¹‹ç»¼åˆæ¡ˆä¾‹" class="headerlink" title="äº”ã€Widget ç»„åˆä¹‹ç»¼åˆæ¡ˆä¾‹"></a>äº”ã€Widget ç»„åˆä¹‹ç»¼åˆæ¡ˆä¾‹</h2><p>è®²ç»¼åˆæ¡ˆä¾‹ä¹‹å‰æˆ‘ä»¬ä»‹ç»ä¸‹ Paddingï¼š</p><p>Padding æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›å±•ç¤ºå†…é—´è·çš„ Widgetï¼Œä¸ºå•¥è¦æä¾›è¿™ä¸ª Widget å‘¢ï¼Ÿå› ä¸ºå¾ˆå¤š Widget éƒ½æ²¡æœ‰ padding å±æ€§ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç”¨ Padding å¤„ç†ä¸å­ Widget çš„å…§é—´è·ï¼Œå…¶å¸¸ç”¨çš„å±æ€§å¦‚ä¸‹ï¼š</p><table><thead><tr><th>åç§°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>padding</td><td>EdgeInsetsGeometry</td><td>padding å€¼, EdgeInsets è®¾ç½®å¡«å……çš„å€¼</td></tr><tr><td>child</td><td>Widget</td><td>å­ç»„ä»¶</td></tr></tbody></table><p>okï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹ç»¼åˆæ¡ˆä¾‹è¦å®ç°çš„æ•ˆæœï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8b90e40d5ce42aa95c1a6be5bf0a1c1~tplv-k3u1fbpfcp-watermark.image" alt="flutter_10.png"></p><p>å…ˆæ‹ä¸€æ‹å®ç°çš„æ€è·¯ï¼šé¦–é¡µæˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªé¡µé¢æ•´ä½“æœ‰ä¸€ä¸ªå†…é—´è·ï¼ˆPaddingï¼‰ï¼Œå…ƒç´ åˆ’åˆ†ä¸º 4 å—ï¼Œä»ä¸Šåˆ°ä¸‹å‚ç›´æ’åˆ—ï¼Œå¯ä»¥ä½¿ç”¨ Columnï¼Œåœ¨çœ‹å…·ä½“çš„æ¯ä¸€å—ï¼š</p><p>ç¬¬ä¸€å—ï¼šä¸€ä¸ªé»‘è‰²çš„é•¿æ–¹å½¢ï¼Œå¯ä»¥ä½¿ç”¨ Container å®ç°</p><p>ç¬¬äºŒå—ï¼šå·¦è¾¹ä¸€å¼ é•¿å›¾ï¼Œå³è¾¹å…ˆæ•´ä½“ä¹Ÿçœ‹æˆä¸€å¼ å›¾ç‰‡ï¼Œå·¦å³æ¯”ä¾‹ 2 : 1ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Row + Expanded å®ç°ï¼Œåœ¨çœ‹å³è¾¹è¿™å—æ•´ä½“åˆåˆ†ä¸Šä¸‹ä¸¤å¼ å›¾ç‰‡ï¼Œä¸ºäº†è®©è¿™ä¸¤å¼ å›¾ç‰‡è‡ªé€‚åº”å®½åº¦ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ListView åµŒå¥—ä¸¤ä¸ª Image</p><p>ç¬¬ä¸‰å—ï¼šå·¦ä¸­å³ä¸‰å¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Stack + Align å®šä½å¸ƒå±€å®ç°</p><p>ç¬¬å››å—ï¼šç›´æ¥ä½¿ç”¨ ListTile å®ç°ï¼ŒListTile çš„ leading ä¸ºä¸€ä¸ªåœ†å½¢å›¾ç‰‡</p><p>å¦å¤–è¿˜æœ‰ä¸€äº›å°å°çš„ç»†èŠ‚ï¼Œå¦‚æ¯ä¸€å—ä¹‹é—´çš„é—´è·ï¼Œæ¨ªçº¿ï¼Œæ¯ä¸€å—å†…éƒ¨çš„é—´è·ï¼Œè¿™äº›æˆ‘ä»¬ä½¿ç”¨ SizedBoxï¼ŒDivider å®ç°</p><p>é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘æ•´ç†å‡ºäº†ä¸€å¼ ç»“æ„å›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a63bcb7778c42c6bcfef99a9bb3c81e~tplv-k3u1fbpfcp-watermark.image" alt="flutter_11 (2).png"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ç”¨ä»£ç å®ç°ä¸€ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MyApp());<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> MaterialApp(<br>      home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class="hljs-string">&quot;Flutter Widget Combine Pricetice&quot;</span>),<br>          elevation: <span class="hljs-number">30</span>, <span class="hljs-comment">//è®¾ç½®æ ‡é¢˜é˜´å½±</span><br>        ),<br>        body: MyHome(),<br>      ),<br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHome</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Padding( <span class="hljs-comment">//Padding å®ç°é¡µé¢å…§é—´è·</span><br>      padding: EdgeInsets.all(<span class="hljs-number">10</span>),<br>      child: Column( <span class="hljs-comment">//Column å®ç°å¸ƒå±€å‚ç›´æ’åˆ—</span><br>        children: [<br>          Container( <span class="hljs-comment">//Container å®ç°é»‘è‰²é•¿æ–¹å½¢</span><br>              color: Colors.black,<br>              height: <span class="hljs-number">180</span><br>          ),<br>          SizedBox(height: <span class="hljs-number">10</span>), <span class="hljs-comment">//é«˜åº¦ä¸º 10 çš„é—´è·</span><br>          Row( <span class="hljs-comment">// Row + Expanded å®ç°æ¨ªå‘å¸ƒå±€çš„ç­‰æ¯”åˆ†é…</span><br>            children: [<br>              Expanded(<br>                  flex: <span class="hljs-number">2</span>,<br>                  child: Container( <span class="hljs-comment">//Container åµŒå¥— Image å®ç°å·¦è¾¹é•¿å›¾</span><br>                    child: Image.network(<br>                        <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>,<br>                        fit: BoxFit.cover,<br>                        height: <span class="hljs-number">100</span>),<br>                  )),<br>              SizedBox(width: <span class="hljs-number">10</span>), <span class="hljs-comment">//é«˜åº¦ä¸º 10 çš„é—´è·</span><br>              Expanded(<br>                flex: <span class="hljs-number">1</span>,<br>                child: Container( <span class="hljs-comment">//Container åµŒå¥— ListView å®ç°å³è¾¹ä¸Šä¸‹ä¸¤å¼ è‡ªé€‚åº”å›¾</span><br>                  height: <span class="hljs-number">100</span>,<br>                  child: ListView(<br>                    children: [<br>                      Image.network(<br>                          <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>,<br>                          fit: BoxFit.cover,<br>                          height: <span class="hljs-number">45</span>),<br>                      SizedBox(height: <span class="hljs-number">10</span>), <span class="hljs-comment">//é«˜åº¦ä¸º 10 çš„é—´è·</span><br>                      Image.network(<br>                          <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>,<br>                          fit: BoxFit.cover,<br>                          height: <span class="hljs-number">45</span>),<br>                    ],<br>                  ),<br>                ),<br>              )<br>            ],<br>          ),<br>          Divider(), <span class="hljs-comment">//æ¨ªçº¿</span><br>          Stack( <span class="hljs-comment">// Stack + Align å®ç°å®šä½å¸ƒå±€</span><br>            children: [<br>              Align(<br>                  alignment: Alignment.topLeft,<br>                  child: Image.network(<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>,<br>                      width: <span class="hljs-number">70</span>,<br>                      height: <span class="hljs-number">70</span>,<br>                      fit: BoxFit.cover)<br>              ),<br>              Align(<br>                  alignment: Alignment.topCenter,<br>                  child: Image.network(<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>,<br>                      width: <span class="hljs-number">70</span>,<br>                      height: <span class="hljs-number">70</span>,<br>                      fit: BoxFit.cover)<br>              ),<br>              Align(<br>                  alignment: Alignment.topRight,<br>                  child: Image.network(<span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>,<br>                      width: <span class="hljs-number">70</span>,<br>                      height: <span class="hljs-number">70</span>,<br>                      fit: BoxFit.cover)<br>              )<br>            ],<br>          ),<br>          Divider(), <span class="hljs-comment">//æ¨ªçº¿</span><br>          ListTile( <span class="hljs-comment">// ListTile å®ç° item</span><br>            leading: ClipOval( <span class="hljs-comment">//åœ†å½¢å›¾ç‰‡</span><br>              child: Image.network(<br>                <span class="hljs-string">&quot;https://img.lianzhixiu.com/uploads/210106/37-21010609363aS.jpg&quot;</span>,<br>                width: <span class="hljs-number">50</span>,<br>                height: <span class="hljs-number">50</span>,<br>                fit: BoxFit.cover,<br>              ),<br>            ),<br>            title: Text(<br>              <span class="hljs-string">&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯åˆ˜äº¦è²&quot;</span>,<span class="hljs-comment">//æ ‡é¢˜</span><br>              style: TextStyle(<br>                  color: Colors.green,<br>                  fontWeight: FontWeight.bold<br>              )<br>            ),<br>            subtitle: Text(<br>                <span class="hljs-string">&quot;å¾ˆé«˜å…´è®¤è¯†ä½ &quot;</span>,<span class="hljs-comment">//å‰¯æ ‡é¢˜</span><br>                style: TextStyle(<br>                  color: Colors.orange,<br>                )<br>            ),<br>          )<br>        ],<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><p>æœ¬æ–‡é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€é‡‡ç”¨ æ•ˆæœ -&gt; Widget ä»‹ç» -&gt; ä»£ç å®ç°çš„æ–¹å¼å¯¹ Imageï¼ŒListViewï¼ŒGridViewï¼ŒStack è¿›è¡Œäº†ä»‹ç»</p><p>2ã€åœ¨ä»‹ç»ä¸Šé¢ Widget çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åˆç©¿æ’äº†å…¶å®ƒä¸€äº› Widget çš„è®²è§£ï¼šClipOvalï¼ŒListTileï¼ŒExpandedï¼ŒSizedBoxï¼ŒDividerï¼ŒAlignï¼ŒPositionedï¼ŒPadding</p><p>3ã€æœ€åé€šè¿‡ä¸€ä¸ªç»¼åˆæ¡ˆä¾‹å¯¹ä»‹ç»çš„ Widget è¿›è¡Œç»„åˆä½¿ç”¨</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤</p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šä»‹ç» Flutter Button ç›¸å…³ Widgetï¼Œä»¥åŠ Flutter 2.x Button çš„å˜åŒ–</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://api.flutter.dev/flutter/dart-ui/dart-ui-library.html">Flutter å®˜æ–¹ API æ–‡æ¡£</a></p><blockquote><p><strong>ä½ çš„ç‚¹èµï¼Œè¯„è®ºï¼Œæ˜¯å¯¹æˆ‘å·¨å¤§çš„é¼“åŠ±ï¼</strong></p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„<strong>å…¬ä¼—å·ï¼š</strong>  <a href="https://link.juejin.cn/?target=http://m6z.cn/6jwi7b" title="http://m6z.cn/6jwi7b"><strong>sweetying</strong></a> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p><p>å¦‚æœ<strong>æœ‰é—®é¢˜</strong>ï¼Œå…¬ä¼—å·å†…æœ‰åŠ æˆ‘å¾®ä¿¡çš„å…¥å£ï¼Œåœ¨æŠ€æœ¯å­¦ä¹ ã€ä¸ªäººæˆé•¿çš„é“è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸€èµ·å‰è¿›ï¼</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Flutter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutter ç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šFlutter ç‰¹ç‚¹åŠå¸¸ç”¨ Widget ä»‹ç»</title>
    <link href="/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AFlutter%20%E7%89%B9%E7%82%B9%E5%8F%8A%E5%B8%B8%E7%94%A8%20Widget%20%E4%BB%8B%E7%BB%8D/"/>
    <url>/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89%EF%BC%9AFlutter%20%E7%89%B9%E7%82%B9%E5%8F%8A%E5%B8%B8%E7%94%A8%20Widget%20%E4%BB%8B%E7%BB%8D/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101651486.jpeg" alt="konstantin-tretyak-JBvIUIFVzjo-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å…¨é¢ä»‹ç»äº† Dart è¯­æ³•ï¼Œå†…å®¹å¾ˆå¤šï¼Œæ–‡å­—+ä»£ç æœ‰ä¸‰ä¸‡å¤šå­—ï¼Œå¦‚æœä½ èƒ½å¤Ÿè€å¿ƒçœ‹å®Œå¹¶æ‰‹æ•²é‡Œé¢çš„ç¤ºä¾‹ï¼Œä½ ä¸€å®šä¼šæ”¶è·å¾ˆå¤§ã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯» <a href="https://juejin.cn/post/7130647339294785549#heading-0">Flutter ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šDart è¯­æ³•ç­‘åŸº</a>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥ Flutter çš„å­¦ä¹ ã€‚</p><h2 id="ä¸€ã€Flutter-ç‰¹ç‚¹ä»‹ç»"><a href="#ä¸€ã€Flutter-ç‰¹ç‚¹ä»‹ç»" class="headerlink" title="ä¸€ã€Flutter ç‰¹ç‚¹ä»‹ç»"></a>ä¸€ã€Flutter ç‰¹ç‚¹ä»‹ç»</h2><p>å­¦ä¹ ä¸€ä¸ªæ¡†æ¶ï¼Œæˆ‘ä»¬é¦–å…ˆè¦äº†è§£è¿™ä¸ªæ¡†æ¶çš„ç‰¹ç‚¹ï¼Œå°±å¥½æ¯”ä½ å­¦å¼€è½¦ä¸€æ ·ï¼Œä½ è¦çŸ¥é“è¿™ä¸ªè½¦æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä½ æ‰èƒ½å¿«é€Ÿçš„å»ä¸Šæ‰‹å®ƒã€‚Flutter ç‰¹ç‚¹ä»‹ç»ï¼š</p><h3 id="1-1ã€åœ¨-Flutter-ä¸­ï¼Œä¸‡ç‰©çš†-Widgetï¼ˆç»„ä»¶ï¼‰"><a href="#1-1ã€åœ¨-Flutter-ä¸­ï¼Œä¸‡ç‰©çš†-Widgetï¼ˆç»„ä»¶ï¼‰" class="headerlink" title="1.1ã€åœ¨ Flutter ä¸­ï¼Œä¸‡ç‰©çš† Widgetï¼ˆç»„ä»¶ï¼‰"></a>1.1ã€åœ¨ Flutter ä¸­ï¼Œä¸‡ç‰©çš† Widgetï¼ˆç»„ä»¶ï¼‰</h3><p>æˆ‘ä»¬åœ¨å†™ Flutter æ—¶ï¼Œä¸€å®šè¦æœ‰è¿™æ ·çš„æ„è¯†ã€‚è¿™æ ·æˆ‘ä»¬æ‰èƒ½æ›´å¥½åœ°ä¸Šæ‰‹å­¦ä¹ ã€‚åœ¨ Flutter ä¸­ï¼Œå‡ ä¹ä»»ä½•ä¸œè¥¿éƒ½æ˜¯ Widgetï¼Œä¸ä»…æ˜¯å¸¸è§çš„ UI ç»„ä»¶ï¼Œç”šè‡³æ˜¯å¸ƒå±€æ–¹å¼ï¼Œæ ·å¼ï¼ŒåŠ¨ç”»ç­‰éƒ½æ˜¯ Widget</p><h3 id="1-2ã€Widget-åµŒå¥—"><a href="#1-2ã€Widget-åµŒå¥—" class="headerlink" title="1.2ã€Widget åµŒå¥—"></a>1.2ã€Widget åµŒå¥—</h3><p>å†™ Android æ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨ Xml æ–‡ä»¶ä¸­ç¼–å†™å¸ƒå±€åŠ View åµŒå¥—ï¼Œç„¶ååœ¨ Java æˆ– Kotlin æ–‡ä»¶ä¸­è¿›è¡Œ View é€»è¾‘ç¼–å†™ã€‚ä½†å†™ Flutterï¼Œæ— è®ºæ˜¯ Widget åµŒå¥—ï¼Œè¿˜æ˜¯ Widget é€»è¾‘ç¼–å†™ï¼Œéƒ½æ˜¯åœ¨ Dart æ–‡ä»¶ä¸­è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å°±ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ï¼š</p><blockquote><p>1ã€å¤æ‚ç•Œé¢å‡ºç°å„ç§æ·±å±‚ Widget åµŒå¥—</p><p>2ã€ä»£ç é€»è¾‘æ··ä¹±ï¼Œå¯è¯»æ€§å·®</p></blockquote><p>ä½œä¸º Android å¼€å‘ï¼Œæˆ‘ä¸€å¼€å§‹çœŸçš„å¾ˆä¸ä¹ æƒ¯ï¼Œä½†æ˜¯éšç€ä½ å­¦ä¹ çš„æ·±å…¥ï¼Œå¯¹é¡¹ç›®è¿›è¡Œåˆç†çš„æ¶æ„è®¾è®¡ï¼ŒåŒ…ç»“æ„è®¾è®¡ï¼Œæ¸…æ™°çš„ä»£ç æ³¨é‡Šï¼Œä¸Šé¢çš„é—®é¢˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¾—åˆ°äº†è§£å†³</p><h3 id="1-3ã€Widget-çŠ¶æ€"><a href="#1-3ã€Widget-çŠ¶æ€" class="headerlink" title="1.3ã€Widget çŠ¶æ€"></a>1.3ã€Widget çŠ¶æ€</h3><p>åœ¨ Flutter ä¸­ï¼ŒWidget åˆ†ä¸ºä¸¤ç§ï¼š</p><blockquote><p>1ã€æ— çŠ¶æ€ Widget</p><p>2ã€æœ‰çŠ¶æ€ Widget</p></blockquote><p>æ— çŠ¶æ€ Widget (ç»§æ‰¿è‡ª StatelessWidget)ï¼šåˆå§‹åŒ–åæ— æ³•ä¿®æ”¹å…¶çŠ¶æ€å’Œ UIï¼Œå¦‚ï¼šTextï¼ŒScrollView</p><p>æœ‰çŠ¶æ€ Widget (ç»§æ‰¿è‡ª StatefulWidget)ï¼šå…¶çŠ¶æ€å¯èƒ½åœ¨ Widget ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿå˜åŒ–ã€‚å¦‚ Imageï¼Œ Scrollable ç­‰ã€‚åœ¨è°ƒç”¨ setState æ–¹æ³•åï¼ŒWidget ä¼šé‡æ–°ç»˜åˆ¶ï¼Œåˆ›å»ºå…¶æ–°çš„ Widget</p><p>StatelessWidget å’Œ StatefulWidget éƒ½ç»§æ‰¿è‡ªWidget</p><p><strong>å° Tips</strong>ï¼š</p><p>1ã€åœ¨ä½ ç¼–å†™è‡ªå®šä¹‰ Widget æ—¶ï¼Œä½ é¦–å…ˆåˆ¤æ–­å®ƒæ˜¯æœ‰çŠ¶æ€çš„è¿˜æ˜¯æ— çŠ¶æ€çš„ï¼Œå¦‚æœ Widget éœ€è¦æ ¹æ®ç”¨æˆ·äº¤äº’æˆ–å…¶ä»–å› ç´ è¿›è¡Œæ›´æ”¹ï¼Œåˆ™è¯¥ Widget æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå¦åˆ™å°±æ˜¯æ— çŠ¶æ€çš„</p><p>2ã€å½“ä½ éœ€è¦æ”¹å˜ Widget çŠ¶æ€æ—¶ï¼Œå¿…é¡»è°ƒç”¨ setState æ–¹æ³•æ¥é€šçŸ¥ Flutter æ¥æ›´æ–°åˆ›å»ºæ–°çš„ Widget</p><p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢ä¸€äº›ç‰¹ç‚¹å¯èƒ½ä¸€å¼€å§‹ä¸èƒ½ç†è§£ï¼Œæ¥ç€å¾€ä¸‹çœ‹ï¼Œæœ‰äº›é—®é¢˜éšç€ä½ çŸ¥è¯†çš„ç§¯ç´¯ä¾¿è¿åˆƒè€Œè§£äº†</p><h2 id="äºŒã€Flutter-å¸¸ç”¨-Widget-ä»‹ç»"><a href="#äºŒã€Flutter-å¸¸ç”¨-Widget-ä»‹ç»" class="headerlink" title="äºŒã€Flutter å¸¸ç”¨ Widget ä»‹ç»"></a>äºŒã€Flutter å¸¸ç”¨ Widget ä»‹ç»</h2><p>å…ˆçœ‹ä¸€å¼ æ•ˆæœå›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/963be24804034c308ba042a9fe6c6aac~tplv-k3u1fbpfcp-watermark.image" alt="1661082533405.jpg"></p><p>é—®é¢˜ï¼šä¸Šé¢çš„æ•ˆæœæ€ä¹ˆå®ç°çš„å‘¢ğŸ¤”ï¸ï¼Ÿ</p><p>å¦‚æœä½ æ˜¯å°ç™½ï¼Œé‚£ä¹ˆå°±è·Ÿç€æˆ‘çš„æ­¥ä¼ç»§ç»­å¾€ä¸‹å­¦ä¹ ã€‚å¦‚æœä¸æ˜¯ï¼Œä½ å¯ä»¥æƒ³ä¸€ä¸‹å¯ä»¥ä½¿ç”¨å“ªäº› Widget åµŒå¥—æ¥å®ç°ï¼Œä»¥åŠå®ç°çš„ä¸€äº›ç»†èŠ‚ã€‚</p><p>å¾…æˆ‘ä»¬å­¦ä¹ å®Œä¸‹é¢çš„ Widget åï¼Œåœ¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p><h3 id="2-1ã€MaterialApp"><a href="#2-1ã€MaterialApp" class="headerlink" title="2.1ã€MaterialApp"></a>2.1ã€MaterialApp</h3><p>è§åçŸ¥ä¹‰ï¼ŒMaterialApp å°±æ˜¯ä¸€ä¸ªå¸¦ Material Design è®¾è®¡é£æ ¼çš„ Widgetï¼Œä¸€èˆ¬ä½œä¸ºé¡¶å±‚ Widget æ¥ä½¿ç”¨</p><h4 id="2-1-1ã€å±æ€§"><a href="#2-1-1ã€å±æ€§" class="headerlink" title="2.1.1ã€å±æ€§"></a>2.1.1ã€å±æ€§</h4><p>æˆ‘ä»¬å¦‚æœè¦æŸ¥çœ‹ä¸€ä¸ª Widget æœ‰å“ªäº›å±æ€§ï¼Œå¯ä»¥é€šè¿‡ IDE ç›´æ¥ç‚¹å‡»è¿™ä¸ª Widget çš„æºç å»æŸ¥çœ‹ï¼Œä½ ä¼šå‘ç°æ¯ä¸ª Widget éƒ½åŒ…å«è®¸å¤šå±æ€§ï¼Œè¿™ä¹ˆå¤šå±æ€§ä¸å¯èƒ½æ¯ä¸ªéƒ½å»çœ‹ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š<strong>æŒæ¡åŸºç¡€å¸¸ç”¨çš„ï¼Œå…¶å®ƒç”¨åˆ°æ—¶ï¼Œçœ‹æºç æŒ‰éœ€å»å–</strong></p><p>MaterialApp æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">const</span> MaterialApp(&#123;<br>    Key? key,<br>    <span class="hljs-keyword">this</span>.navigatorKey,<br>    <span class="hljs-keyword">this</span>.scaffoldMessengerKey,<br>    <span class="hljs-keyword">this</span>.home,<br>    <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, WidgetBuilder&gt; <span class="hljs-keyword">this</span>.routes = <span class="hljs-keyword">const</span> &lt;<span class="hljs-built_in">String</span>, WidgetBuilder&gt;&#123;&#125;,<br>    <span class="hljs-keyword">this</span>.initialRoute,<br>    <span class="hljs-keyword">this</span>.onGenerateRoute,<br>    <span class="hljs-keyword">this</span>.onGenerateInitialRoutes,<br>    <span class="hljs-keyword">this</span>.onUnknownRoute,<br>    <span class="hljs-built_in">List</span>&lt;NavigatorObserver&gt; <span class="hljs-keyword">this</span>.navigatorObservers = <span class="hljs-keyword">const</span> &lt;NavigatorObserver&gt;[],<br>    <span class="hljs-keyword">this</span>.builder,<br>    <span class="hljs-keyword">this</span>.title = <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-keyword">this</span>.onGenerateTitle,<br>    <span class="hljs-keyword">this</span>.color,<br>    <span class="hljs-keyword">this</span>.theme,<br>    <span class="hljs-keyword">this</span>.darkTheme,<br>    <span class="hljs-keyword">this</span>.highContrastTheme,<br>    <span class="hljs-keyword">this</span>.highContrastDarkTheme,<br>    <span class="hljs-keyword">this</span>.themeMode = ThemeMode.system,<br>    <span class="hljs-keyword">this</span>.locale,<br>    <span class="hljs-keyword">this</span>.localizationsDelegates,<br>    <span class="hljs-keyword">this</span>.localeListResolutionCallback,<br>    <span class="hljs-keyword">this</span>.localeResolutionCallback,<br>    <span class="hljs-keyword">this</span>.supportedLocales = <span class="hljs-keyword">const</span> &lt;Locale&gt;[Locale(<span class="hljs-string">&#x27;en&#x27;</span>, <span class="hljs-string">&#x27;US&#x27;</span>)],<br>    <span class="hljs-keyword">this</span>.debugShowMaterialGrid = <span class="hljs-keyword">false</span>,<br>    <span class="hljs-keyword">this</span>.showPerformanceOverlay = <span class="hljs-keyword">false</span>,<br>    <span class="hljs-keyword">this</span>.checkerboardRasterCacheImages = <span class="hljs-keyword">false</span>,<br>    <span class="hljs-keyword">this</span>.checkerboardOffscreenLayers = <span class="hljs-keyword">false</span>,<br>    <span class="hljs-keyword">this</span>.showSemanticsDebugger = <span class="hljs-keyword">false</span>,<br>    <span class="hljs-keyword">this</span>.debugShowCheckedModeBanner = <span class="hljs-keyword">true</span>,<br>    <span class="hljs-keyword">this</span>.shortcuts,<br>    <span class="hljs-keyword">this</span>.actions,<br>    <span class="hljs-keyword">this</span>.restorationScopeId,<br>    <span class="hljs-keyword">this</span>.scrollBehavior,<br>    <span class="hljs-keyword">this</span>.useInheritedMediaQuery = <span class="hljs-keyword">false</span>,<br>  &#125;) : <span class="hljs-keyword">assert</span>(routes != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(navigatorObservers != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(title != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(debugShowMaterialGrid != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(showPerformanceOverlay != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(checkerboardRasterCacheImages != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(checkerboardOffscreenLayers != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(showSemanticsDebugger != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(debugShowCheckedModeBanner != <span class="hljs-keyword">null</span>),<br>       routeInformationProvider = <span class="hljs-keyword">null</span>,<br>       routeInformationParser = <span class="hljs-keyword">null</span>,<br>       routerDelegate = <span class="hljs-keyword">null</span>,<br>       backButtonDispatcher = <span class="hljs-keyword">null</span>,<br>       <span class="hljs-keyword">super</span>(key: key);<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šä¸‹é¢ä»‹ç»çš„å±æ€§ä»…æ˜¯ç”¨äºå®ç°ä¸Šé¢çš„æ•ˆæœå›¾</p><p>MaterialApp å¸¸ç”¨å±æ€§ï¼š</p><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>home</td><td>é…ç½® App ä¸»é¡µ</td></tr></tbody></table><p>MaterialApp æ›´å¤šå±æ€§ä»‹ç»ï¼š<a href="https://segmentfault.com/a/1190000040552453">https://segmentfault.com/a/1190000040552453</a></p><h3 id="2-2ã€Scaffold"><a href="#2-2ã€Scaffold" class="headerlink" title="2.2ã€Scaffold"></a>2.2ã€Scaffold</h3><p>Scaffold æ˜¯ä¸€ä¸ª Material Design è®¾è®¡é£æ ¼çš„è„šæ‰‹æ¶ Widgetï¼Œä¸€èˆ¬åµŒå¥—åœ¨ MaterialApp çš„ home å±æ€§ä¸­</p><h4 id="2-2-1ã€å±æ€§"><a href="#2-2-1ã€å±æ€§" class="headerlink" title="2.2.1ã€å±æ€§"></a>2.2.1ã€å±æ€§</h4><p>Scaffold æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">const</span> Scaffold(&#123;<br>    Key? key,<br>    <span class="hljs-keyword">this</span>.appBar,<br>    <span class="hljs-keyword">this</span>.body,<br>    <span class="hljs-keyword">this</span>.floatingActionButton,<br>    <span class="hljs-keyword">this</span>.floatingActionButtonLocation,<br>    <span class="hljs-keyword">this</span>.floatingActionButtonAnimator,<br>    <span class="hljs-keyword">this</span>.persistentFooterButtons,<br>    <span class="hljs-keyword">this</span>.drawer,<br>    <span class="hljs-keyword">this</span>.onDrawerChanged,<br>    <span class="hljs-keyword">this</span>.endDrawer,<br>    <span class="hljs-keyword">this</span>.onEndDrawerChanged,<br>    <span class="hljs-keyword">this</span>.bottomNavigationBar,<br>    <span class="hljs-keyword">this</span>.bottomSheet,<br>    <span class="hljs-keyword">this</span>.backgroundColor,<br>    <span class="hljs-keyword">this</span>.resizeToAvoidBottomInset,<br>    <span class="hljs-keyword">this</span>.primary = <span class="hljs-keyword">true</span>,<br>    <span class="hljs-keyword">this</span>.drawerDragStartBehavior = DragStartBehavior.start,<br>    <span class="hljs-keyword">this</span>.extendBody = <span class="hljs-keyword">false</span>,<br>    <span class="hljs-keyword">this</span>.extendBodyBehindAppBar = <span class="hljs-keyword">false</span>,<br>    <span class="hljs-keyword">this</span>.drawerScrimColor,<br>    <span class="hljs-keyword">this</span>.drawerEdgeDragWidth,<br>    <span class="hljs-keyword">this</span>.drawerEnableOpenDragGesture = <span class="hljs-keyword">true</span>,<br>    <span class="hljs-keyword">this</span>.endDrawerEnableOpenDragGesture = <span class="hljs-keyword">true</span>,<br>    <span class="hljs-keyword">this</span>.restorationId,<br>  &#125;) : <span class="hljs-keyword">assert</span>(primary != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(extendBody != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(extendBodyBehindAppBar != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(drawerDragStartBehavior != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">super</span>(key: key);<br></code></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>appBar</td><td>é…ç½®æ˜¾ç¤ºåœ¨ç•Œé¢é¡¶éƒ¨çš„ä¸€ä¸ª AppBar</td></tr><tr><td>body</td><td>é…ç½®å½“å‰ç•Œé¢æ‰€æ˜¾ç¤ºçš„ä¸»è¦å†…å®¹ Widget</td></tr></tbody></table><p>Scaffold æ›´å¤šå±æ€§ä»‹ç»ï¼š<a href="https://segmentfault.com/a/1190000040554948">https://segmentfault.com/a/1190000040554948</a></p><p>ä»¥ä¸Šä¸¤ä¸ª Widget å°±èƒ½æ­å»ºèµ·é¡µé¢çš„åŸºæœ¬æ¡†æ¶äº†ï¼Œä½†æ˜¯çœ‹åˆ°çš„ä¼šæ˜¯ä¸€ä¸ªç©ºç™½çš„é¡µé¢ã€‚å›åˆ°ä¸Šé¢é‚£å¼ å›¾ï¼Œæˆ‘ä»¬çœ‹åˆ°é¡¶éƒ¨æœ‰ä¸€ä¸ªæ ‡é¢˜æ ï¼Œè€Œä¸”è¿˜æœ‰é˜´å½±ï¼ŒFlutter ç»™æˆ‘ä»¬æä¾›äº† AppBar æ¥å®ç°</p><h3 id="2-3ã€AppBar"><a href="#2-3ã€AppBar" class="headerlink" title="2.3ã€AppBar"></a>2.3ã€AppBar</h3><p>AppBar æ˜¯åŸºäº Material Design è®¾è®¡é£æ ¼çš„æ ‡é¢˜æ  Widgetï¼Œä¸€èˆ¬åœ¨ Scaffold çš„ appBar å±æ€§ä¸­ä½¿ç”¨ï¼Œä½œä¸ºé¡¶éƒ¨æ ‡é¢˜æ </p><h4 id="2-3-1ã€å±æ€§"><a href="#2-3-1ã€å±æ€§" class="headerlink" title="2.3.1ã€å±æ€§"></a>2.3.1ã€å±æ€§</h4><p>AppBar æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs dart">AppBar(&#123;<br>    Key? key,<br>    <span class="hljs-keyword">this</span>.leading,<br>    <span class="hljs-keyword">this</span>.automaticallyImplyLeading = <span class="hljs-keyword">true</span>,<br>    <span class="hljs-keyword">this</span>.title,<br>    <span class="hljs-keyword">this</span>.actions,<br>    <span class="hljs-keyword">this</span>.flexibleSpace,<br>    <span class="hljs-keyword">this</span>.bottom,<br>    <span class="hljs-keyword">this</span>.elevation,<br>    <span class="hljs-keyword">this</span>.shadowColor,<br>    <span class="hljs-keyword">this</span>.shape,<br>    <span class="hljs-keyword">this</span>.backgroundColor,<br>    <span class="hljs-keyword">this</span>.foregroundColor,<br>    <span class="hljs-meta">@Deprecated</span>(<br>      <span class="hljs-string">&#x27;This property is no longer used, please use systemOverlayStyle instead. &#x27;</span><br>      <span class="hljs-string">&#x27;This feature was deprecated after v2.4.0-0.0.pre.&#x27;</span>,<br>    )<br>    <span class="hljs-keyword">this</span>.brightness,<br>    <span class="hljs-keyword">this</span>.iconTheme,<br>    <span class="hljs-keyword">this</span>.actionsIconTheme,<br>    <span class="hljs-meta">@Deprecated</span>(<br>      <span class="hljs-string">&#x27;This property is no longer used, please use toolbarTextStyle and titleTextStyle instead. &#x27;</span><br>      <span class="hljs-string">&#x27;This feature was deprecated after v2.4.0-0.0.pre.&#x27;</span>,<br>    )<br>    <span class="hljs-keyword">this</span>.textTheme,<br>    <span class="hljs-keyword">this</span>.primary = <span class="hljs-keyword">true</span>,<br>    <span class="hljs-keyword">this</span>.centerTitle,<br>    <span class="hljs-keyword">this</span>.excludeHeaderSemantics = <span class="hljs-keyword">false</span>,<br>    <span class="hljs-keyword">this</span>.titleSpacing,<br>    <span class="hljs-keyword">this</span>.toolbarOpacity = <span class="hljs-number">1.0</span>,<br>    <span class="hljs-keyword">this</span>.bottomOpacity = <span class="hljs-number">1.0</span>,<br>    <span class="hljs-keyword">this</span>.toolbarHeight,<br>    <span class="hljs-keyword">this</span>.leadingWidth,<br>    <span class="hljs-meta">@Deprecated</span>(<br>      <span class="hljs-string">&#x27;This property is obsolete and is false by default. &#x27;</span><br>      <span class="hljs-string">&#x27;This feature was deprecated after v2.4.0-0.0.pre.&#x27;</span>,<br>    )<br>    <span class="hljs-keyword">this</span>.backwardsCompatibility,<br>    <span class="hljs-keyword">this</span>.toolbarTextStyle,<br>    <span class="hljs-keyword">this</span>.titleTextStyle,<br>    <span class="hljs-keyword">this</span>.systemOverlayStyle,<br>  &#125;) : <span class="hljs-keyword">assert</span>(automaticallyImplyLeading != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(elevation == <span class="hljs-keyword">null</span> || elevation &gt;= <span class="hljs-number">0.0</span>),<br>       <span class="hljs-keyword">assert</span>(primary != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(toolbarOpacity != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(bottomOpacity != <span class="hljs-keyword">null</span>),<br>       preferredSize = _PreferredAppBarSize(toolbarHeight, bottom?.preferredSize.height),<br>       <span class="hljs-keyword">super</span>(key: key);<br></code></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>title</td><td>é…ç½®æ ‡é¢˜æ çš„æ ‡é¢˜</td></tr><tr><td>elevation</td><td>é…ç½®æ ‡é¢˜æ ä¸‹æ–¹çš„é˜´å½±å¤§å°</td></tr></tbody></table><p>AppBar æ›´å¤šå±æ€§ä»‹ç»ï¼š<a href="https://segmentfault.com/a/1190000040562147">https://segmentfault.com/a/1190000040562147</a></p><p>æ ‡é¢˜æ å®ç°äº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ body ä¸»ä½“éƒ¨åˆ†ï¼Œæˆ‘ä»¬åœ¨æ¥åˆ†æä¸€ä¸‹ï¼šå¯ä»¥çœ‹åˆ°ï¼Œä¸»ä½“éƒ¨åˆ†æ˜¯ä¸€ä¸ª<strong>å±…ä¸­</strong>æ˜¾ç¤ºçš„<strong>åœ†å½¢</strong>å›¾åƒï¼ŒèƒŒæ™¯æ˜¯è“è‰²ï¼Œæœ‰ä¸ªçº¢è‰²çš„è¾¹æ¡†ã€‚åœ†å½¢å›¾åƒé‡Œé¢æœ‰ä¸€è¡Œ<strong>æ–‡æœ¬</strong>ï¼Œæ–‡æœ¬çš„é¢œè‰²æ˜¯ç™½è‰²ï¼Œå­—ä½“æœ‰ç‚¹å€¾æ–œï¼Œå­—é—´è·åå¤§ï¼Œåªæ˜¾ç¤ºäº†ä¸€è¡Œï¼Œè¶…å‡ºéƒ¨åˆ† â€¦ ï¼Œè€Œä¸”æ–‡æœ¬çš„ä¸­é—´æœ‰ä¸€ä¸ªçº¢è‰²çš„è™šåˆ é™¤çº¿</p><p>ä¸Šé¢åŠ ç²—çš„æ–‡å­—å°±æ˜¯ç”¨äºå®ç°è¯¥æ•ˆæœçš„ Widgetï¼šCenterï¼ŒContainerï¼ŒText</p><h3 id="2-4ã€Center"><a href="#2-4ã€Center" class="headerlink" title="2.4ã€Center"></a>2.4ã€Center</h3><p>Center å°±æ˜¯å°†å­ Widget è¿›è¡Œä¸€ä¸ªå±…ä¸­å±•ç¤ºçš„ Widgetï¼Œå®ƒç»§æ‰¿è‡ª Alignï¼Œå› ä¸º Align é»˜è®¤çš„å¯¹é½æ–¹å¼æ˜¯å±…ä¸­çš„ï¼Œæ‰€ä»¥å®ƒèƒ½å®ç°å±…ä¸­æ•ˆæœï¼Œå¦‚æœ Center çš„å°ºå¯¸æ²¡æœ‰å—åˆ°é™åˆ¶ï¼Œé‚£ä¹ˆå®ƒå°†å……æ»¡æ•´ä¸ªå±å¹•</p><h4 id="2-4-1ã€å±æ€§"><a href="#2-4-1ã€å±æ€§" class="headerlink" title="2.4.1ã€å±æ€§"></a>2.4.1ã€å±æ€§</h4><p>Center æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">const</span> Center(&#123; Key? key, <span class="hljs-built_in">double?</span> widthFactor, <span class="hljs-built_in">double?</span> heightFactor, Widget? child &#125;)<br>    : <span class="hljs-keyword">super</span>(key: key, widthFactor: widthFactor, heightFactor: heightFactor, child: child);<br></code></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>child</td><td>é…ç½®å±…ä¸­æ˜¾ç¤ºçš„å­ Widget</td></tr></tbody></table><h3 id="2-5ã€Container"><a href="#2-5ã€Container" class="headerlink" title="2.5ã€Container"></a>2.5ã€Container</h3><p>Container æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„ä¸€ä¸ªå¤šåŠŸèƒ½ Widgetï¼Œå¦‚æœå­ Widget éœ€è¦ä¸€äº›èƒŒæ™¯æ ·å¼ã€å½¢çŠ¶ã€å°ºå¯¸é™åˆ¶ç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ Container æ¥è¿›è¡ŒåŒ…è£¹ï¼Œä¸Šé¢çš„åœ†å½¢å›¾åƒå°±æ˜¯ä½¿ç”¨ Container æ¥å®ç°çš„</p><h4 id="2-5-1ã€å±æ€§"><a href="#2-5-1ã€å±æ€§" class="headerlink" title="2.5.1ã€å±æ€§"></a>2.5.1ã€å±æ€§</h4><p>Container æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs dart">Container(&#123;<br>    Key? key,<br>    <span class="hljs-keyword">this</span>.alignment,<br>    <span class="hljs-keyword">this</span>.padding,<br>    <span class="hljs-keyword">this</span>.color,<br>    <span class="hljs-keyword">this</span>.decoration,<br>    <span class="hljs-keyword">this</span>.foregroundDecoration,<br>    <span class="hljs-built_in">double?</span> width,<br>    <span class="hljs-built_in">double?</span> height,<br>    BoxConstraints? constraints,<br>    <span class="hljs-keyword">this</span>.margin,<br>    <span class="hljs-keyword">this</span>.transform,<br>    <span class="hljs-keyword">this</span>.transformAlignment,<br>    <span class="hljs-keyword">this</span>.child,<br>    <span class="hljs-keyword">this</span>.clipBehavior = Clip.none,<br>  &#125;) : <span class="hljs-keyword">assert</span>(margin == <span class="hljs-keyword">null</span> || margin.isNonNegative),<br>       <span class="hljs-keyword">assert</span>(padding == <span class="hljs-keyword">null</span> || padding.isNonNegative),<br>       <span class="hljs-keyword">assert</span>(decoration == <span class="hljs-keyword">null</span> || decoration.debugAssertIsValid()),<br>       <span class="hljs-keyword">assert</span>(constraints == <span class="hljs-keyword">null</span> || constraints.debugAssertIsValid()),<br>       <span class="hljs-keyword">assert</span>(clipBehavior != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(decoration != <span class="hljs-keyword">null</span> || clipBehavior == Clip.none),<br>       <span class="hljs-keyword">assert</span>(color == <span class="hljs-keyword">null</span> || decoration == <span class="hljs-keyword">null</span>,<br>         <span class="hljs-string">&#x27;Cannot provide both a color and a decoration\n&#x27;</span><br>         <span class="hljs-string">&#x27;To provide both, use &quot;decoration: BoxDecoration(color: color)&quot;.&#x27;</span>,<br>       ),<br>       constraints =<br>        (width != <span class="hljs-keyword">null</span> || height != <span class="hljs-keyword">null</span>)<br>          ? constraints?.tighten(width: width, height: height)<br>            ?? BoxConstraints.tightFor(width: width, height: height)<br>          : constraints,<br>       <span class="hljs-keyword">super</span>(key: key);<br></code></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>child</td><td>é…ç½®æ˜¾ç¤ºçš„å­ Widget</td></tr><tr><td>color</td><td>é…ç½® Container èƒŒæ™¯é¢œè‰²</td></tr><tr><td>width</td><td>é…ç½® Container æ˜¾ç¤ºçš„å®½åº¦</td></tr><tr><td>height</td><td>é…ç½® Container æ˜¾ç¤ºçš„é«˜åº¦</td></tr><tr><td>alignment</td><td>é…ç½®å­ Widget çš„å¯¹é½æ–¹å¼</td></tr><tr><td>padding</td><td>é…ç½® Container å…§è¾¹è·</td></tr><tr><td>decoration</td><td>é…ç½® Container è£…é¥°</td></tr></tbody></table><p>decoration æ¥æ”¶ä¸€ä¸ª Decoration ç±»å‹çš„å‚æ•°ï¼Œå…¶å®ç°ç±»ï¼šBoxDecorationï¼ŒBoxDecoration çš„å±æ€§ï¼š</p><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>color</td><td>é…ç½® Container èƒŒæ™¯é¢œè‰²</td></tr><tr><td>border</td><td>é…ç½® Container æ˜¾ç¤ºçš„è¾¹æ¡†</td></tr><tr><td>borderRadius</td><td>é…ç½® Container æ˜¾ç¤ºçš„åœ†è§’</td></tr></tbody></table><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœ BoxDecoration è®¾ç½®äº† color å±æ€§ï¼Œå°±ä¸èƒ½è®¾ç½® Container çš„ color å±æ€§ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ­¤æ—¶åœ¨ BoxDecoration ä¸­è®¾ç½® color å³å¯</p><p>Container æ›´å¤šå±æ€§ä»‹ç»ï¼š<a href="https://www.liujunmin.com/flutter/container.html">https://www.liujunmin.com/flutter/container.html</a></p><h3 id="2-6ã€Text"><a href="#2-6ã€Text" class="headerlink" title="2.6ã€Text"></a>2.6ã€Text</h3><p>Text æ˜¯ Flutter ç»™æˆ‘ä»¬æä¾›çš„æ–‡æœ¬ Widgetï¼Œæœ€å¸¸ç”¨çš„ Widget ä¹‹ä¸€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°å„ç§æ–‡æœ¬æ•ˆæœ</p><h4 id="2-6-1ã€å±æ€§"><a href="#2-6-1ã€å±æ€§" class="headerlink" title="2.6.1ã€å±æ€§"></a>2.6.1ã€å±æ€§</h4><p>Text æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">const</span> Text(<br>    <span class="hljs-built_in">String</span> <span class="hljs-keyword">this</span>.data, &#123;<br>    Key? key,<br>    <span class="hljs-keyword">this</span>.style,<br>    <span class="hljs-keyword">this</span>.strutStyle,<br>    <span class="hljs-keyword">this</span>.textAlign,<br>    <span class="hljs-keyword">this</span>.textDirection,<br>    <span class="hljs-keyword">this</span>.locale,<br>    <span class="hljs-keyword">this</span>.softWrap,<br>    <span class="hljs-keyword">this</span>.overflow,<br>    <span class="hljs-keyword">this</span>.textScaleFactor,<br>    <span class="hljs-keyword">this</span>.maxLines,<br>    <span class="hljs-keyword">this</span>.semanticsLabel,<br>    <span class="hljs-keyword">this</span>.textWidthBasis,<br>    <span class="hljs-keyword">this</span>.textHeightBehavior,<br>  &#125;) : <span class="hljs-keyword">assert</span>(<br>         data != <span class="hljs-keyword">null</span>,<br>         <span class="hljs-string">&#x27;A non-null String must be provided to a Text widget.&#x27;</span>,<br>       ),<br>       textSpan = <span class="hljs-keyword">null</span>,<br>       <span class="hljs-keyword">super</span>(key: key);<br></code></pre></td></tr></table></figure><p>TextStyle æ„é€ æ–¹æ³•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">const</span> TextStyle(&#123;<br>    <span class="hljs-keyword">this</span>.inherit = <span class="hljs-keyword">true</span>,<br>    <span class="hljs-keyword">this</span>.color,<br>    <span class="hljs-keyword">this</span>.backgroundColor,<br>    <span class="hljs-keyword">this</span>.fontSize,<br>    <span class="hljs-keyword">this</span>.fontWeight,<br>    <span class="hljs-keyword">this</span>.fontStyle,<br>    <span class="hljs-keyword">this</span>.letterSpacing,<br>    <span class="hljs-keyword">this</span>.wordSpacing,<br>    <span class="hljs-keyword">this</span>.textBaseline,<br>    <span class="hljs-keyword">this</span>.height,<br>    <span class="hljs-keyword">this</span>.leadingDistribution,<br>    <span class="hljs-keyword">this</span>.locale,<br>    <span class="hljs-keyword">this</span>.foreground,<br>    <span class="hljs-keyword">this</span>.background,<br>    <span class="hljs-keyword">this</span>.shadows,<br>    <span class="hljs-keyword">this</span>.fontFeatures,<br>    <span class="hljs-keyword">this</span>.decoration,<br>    <span class="hljs-keyword">this</span>.decorationColor,<br>    <span class="hljs-keyword">this</span>.decorationStyle,<br>    <span class="hljs-keyword">this</span>.decorationThickness,<br>    <span class="hljs-keyword">this</span>.debugLabel,<br>    <span class="hljs-built_in">String?</span> fontFamily,<br>    <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt;? fontFamilyFallback,<br>    <span class="hljs-built_in">String?</span> package,<br>    <span class="hljs-keyword">this</span>.overflow,<br>  &#125;) : fontFamily = package == <span class="hljs-keyword">null</span> ? fontFamily : <span class="hljs-string">&#x27;packages/<span class="hljs-subst">$package</span>/<span class="hljs-subst">$fontFamily</span>&#x27;</span>,<br>       _fontFamilyFallback = fontFamilyFallback,<br>       _package = package,<br>       <span class="hljs-keyword">assert</span>(inherit != <span class="hljs-keyword">null</span>),<br>       <span class="hljs-keyword">assert</span>(color == <span class="hljs-keyword">null</span> || foreground == <span class="hljs-keyword">null</span>, _kColorForegroundWarning),<br>       <span class="hljs-keyword">assert</span>(backgroundColor == <span class="hljs-keyword">null</span> || background == <span class="hljs-keyword">null</span>, _kColorBackgroundWarning);<br></code></pre></td></tr></table></figure><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>data</td><td>é…ç½® Text è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼Œå¿…é¡»é…ç½®</td></tr><tr><td>maxLines</td><td>é…ç½® Text èƒ½æ˜¾ç¤ºçš„æœ€å¤§è¡Œæ•°</td></tr><tr><td>overflow</td><td>é…ç½® Text æ–‡å­—è¶…å‡ºå±å¹•åçš„å¤„ç†æ–¹å¼ï¼ˆclipï¼šè£å‰ªï¼Œfadeï¼šæ¸éšï¼Œellipsisï¼šâ€¦çœç•¥ï¼‰</td></tr><tr><td>style</td><td>é…ç½® Text æ˜¾ç¤ºçš„æ ·å¼</td></tr></tbody></table><p>style æ¥æ”¶ä¸€ä¸ª TextStyle ç±»å‹çš„å‚æ•°ï¼Œå®ƒçš„å±æ€§ï¼š</p><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>fontSize</td><td>é…ç½® Text æ˜¾ç¤ºçš„å­—ä½“å¤§å°</td></tr><tr><td>fontWeight</td><td>é…ç½® Text æ˜¾ç¤ºçš„å­—ä½“ç²—ç»†ï¼ˆboldï¼šç²—ä½“ï¼Œnormalï¼šæ­£å¸¸ä½“ï¼‰</td></tr><tr><td>color</td><td>é…ç½® Text æ˜¾ç¤ºçš„æ–‡å­—é¢œè‰²</td></tr><tr><td>decoration</td><td>é…ç½® text æ˜¾ç¤ºçš„è£…é¥°çº¿ï¼ˆnoneï¼šæ²¡æœ‰çº¿ï¼ŒlineThroughï¼šåˆ é™¤çº¿ï¼Œoverlineï¼šä¸Šåˆ’çº¿ï¼Œunderlineï¼šä¸‹åˆ’çº¿ï¼‰</td></tr><tr><td>decorationColor</td><td>é…ç½® Text æ˜¾ç¤ºçš„è£…é¥°çº¿é¢œè‰²</td></tr><tr><td>decorationStyle</td><td>é…ç½® Text æ˜¾ç¤ºçš„è£…é¥°çº¿é£æ ¼ï¼ˆdashedï¼šé•¿è™šçº¿ï¼Œdottedï¼šç‚¹è™šçº¿ï¼Œdoubleï¼šä¸¤æ ¹çº¿ï¼Œsolidï¼šä¸€æ ¹å®çº¿ï¼Œwavyï¼šæ³¢æµªçº¿ï¼‰</td></tr><tr><td>wordSpacing</td><td>é…ç½® Text æ˜¾ç¤ºçš„å•è¯é—´éš™</td></tr><tr><td>letterSpacing</td><td>é…ç½® Text æ˜¾ç¤ºçš„å­—æ¯é—´éš™</td></tr><tr><td>fontStyle</td><td>é…ç½® Text æ˜¾ç¤ºçš„æ–‡å­—æ ·å¼ï¼ˆitalicï¼šæ–œä½“ï¼Œnormalï¼šæ­£å¸¸ä½“ï¼‰</td></tr></tbody></table><p>Text æ›´å¤šå±æ€§ä»‹ç»ï¼š<a href="https://juejin.cn/post/6844903724846972942">https://juejin.cn/post/6844903724846972942</a></p><p>ä¸Šé¢ä»‹ç»çš„ Widget å°±å¯ä»¥å®ç°æ•ˆæœå›¾äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹å®ƒå§</p><h2 id="ä¸‰ã€æ•ˆæœå›¾å®ç°"><a href="#ä¸‰ã€æ•ˆæœå›¾å®ç°" class="headerlink" title="ä¸‰ã€æ•ˆæœå›¾å®ç°"></a>ä¸‰ã€æ•ˆæœå›¾å®ç°</h2><p>ä¸€ä¸ªæ¸…æ™°çš„æ€è·¯å¾ˆé‡è¦ï¼Œæˆ‘ä»¬å…ˆæ‹ä¸€æ‹ï¼š</p><p>1ã€ä½¿ç”¨ MaterialApp å’Œ Scaffold æ­å»ºé¡µé¢çš„åŸºæœ¬æ¡†æ¶</p><p>2ã€ä½¿ç”¨ AppBar å®ç°å¸¦é˜´å½±çš„é¡¶éƒ¨æ ‡é¢˜æ </p><p>3ã€ä½¿ç”¨ Center åµŒå¥—ä¸€ä¸ª Container å±…ä¸­æ˜¾ç¤ºï¼Œç„¶åé€šè¿‡ Container å±æ€§é…ç½®å°† Container è®¾ç½®ä¸ºå¸¦çº¢è‰²è¾¹æ¡†çš„åœ†å½¢å›¾åƒï¼ŒContainer åµŒå¥—ä¸€ä¸ª Text ï¼Œåœ¨å¯¹ Text è¿›è¡Œå±æ€§é…ç½®å³å¯</p><p>ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Widget Learning&quot;</span>),<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        elevation: <span class="hljs-number">30</span>,<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>      ),<br>      body: Center(<br>        child: Container( <span class="hljs-comment">// Center åµŒå¥—ä¸€ä¸ª Container</span><br>          width: <span class="hljs-number">300</span>, <span class="hljs-comment">//è®¾ç½® Container å®½åº¦ä¸º 300</span><br>          height: <span class="hljs-number">300</span>, <span class="hljs-comment">//è®¾ç½® Container é«˜åº¦ä¸º 300</span><br>          alignment: Alignment.center, <span class="hljs-comment">//è®¾ç½®å­ Widget å±…ä¸­</span><br>          padding: EdgeInsets.all(<span class="hljs-number">20</span>), <span class="hljs-comment">//è®¾ç½® Container å…§è¾¹è·ä¸º 20</span><br>          decoration: BoxDecoration( <span class="hljs-comment">//è®¾ç½® Container è£…é¥°</span><br>            color: Colors.blue, <span class="hljs-comment">//è®¾ç½® Container èƒŒæ™¯é¢œè‰²ä¸ºè“è‰²</span><br>            border: Border.all(<br>              color: Colors.red, <span class="hljs-comment">//è®¾ç½® Container è¾¹æ¡†é¢œè‰²ä¸ºçº¢è‰²</span><br>              width: <span class="hljs-number">2</span> <span class="hljs-comment">//è®¾ç½® Container è¾¹æ¡†çš„å®½åº¦ä¸º 2</span><br>            ),<br>            borderRadius: BorderRadius.all(Radius.circular(<span class="hljs-number">200</span>)), <span class="hljs-comment">//è®¾ç½® Container çš„å½¢çŠ¶ä¸ºä¸€ä¸ªåœ†å½¢</span><br>          ),<br>          child: Text( <span class="hljs-comment">//Container åµŒå¥—ä¸€ä¸ª Text</span><br>            <span class="hljs-string">&quot;Hello erdai str&quot;</span>, <span class="hljs-comment">// è®¾ç½® Text è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²</span><br>            maxLines: <span class="hljs-number">1</span>, <span class="hljs-comment">//è®¾ç½® Text æœ€å¤§æ˜¾ç¤ºä¸€è¡Œ</span><br>            overflow: TextOverflow.ellipsis, <span class="hljs-comment">//è®¾ç½® Text æ–‡æœ¬è¶…è¿‡ä¸€è¡Œ ... æ˜¾ç¤º</span><br>            style: TextStyle( <span class="hljs-comment">//é…ç½® Text æ ·å¼</span><br>                fontSize: <span class="hljs-number">28</span>, <span class="hljs-comment">//è®¾ç½® Text çš„å­—ä½“å¤§å°ä¸º 28</span><br>                fontWeight: FontWeight.bold, <span class="hljs-comment">//è®¾ç½® Text æ˜¾ç¤ºä¸ºç²—ä½“</span><br>                color: Colors.white, <span class="hljs-comment">//è®¾ç½® Text æ–‡å­—é¢œè‰²ä¸ºç™½è‰²</span><br>                decoration: TextDecoration.lineThrough, <span class="hljs-comment">//è®¾ç½® Text åˆ é™¤çº¿</span><br>                decorationColor: Colors.red, <span class="hljs-comment">//è®¾ç½® Text åˆ é™¤çº¿é¢œè‰²ä¸ºçº¢è‰²</span><br>                decorationStyle: TextDecorationStyle.dashed, <span class="hljs-comment">//è®¾ç½® Text åˆ é™¤çº¿ä¸ºè™šçº¿</span><br>                wordSpacing: <span class="hljs-number">20</span>, <span class="hljs-comment">//è®¾ç½® Text å•è¯ä¹‹é—´é—´è·ä¸º 20</span><br>                letterSpacing: <span class="hljs-number">6</span>, <span class="hljs-comment">//è®¾ç½® Text å­—æ¯é—´è·ä¸º 6</span><br>                fontStyle: FontStyle.italic <span class="hljs-comment">//è®¾ç½® Text å­—ä½“æ ·å¼ä¸ºæ–œä½“</span><br>            ),<br>          ),<br>        ),<br>      ),<br>    ),<br>  ));<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å°±å®ç°äº†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ç‚¹ç‘•ç–µï¼Œé‚£å°±æ˜¯ä»£ç éƒ½å†™åœ¨ main æ–¹æ³•ä¸­ï¼Œå¯¼è‡´ main æ–¹æ³•æ¯”è¾ƒè‡ƒè‚¿ï¼Œé‚£æ˜¯å¦æœ‰åŠæ³•å¯¹ main æ–¹æ³•ä¸­çš„é€»è¾‘è¿›è¡ŒæŠ½ç¦»å‘¢ï¼Ÿ</p><p>ç­”ï¼šæœ‰çš„ï¼Œè‡ªå®šä¹‰ Widget å¯¹ main æ–¹æ³•é€»è¾‘è¿›è¡ŒæŠ½ç¦»ä¼˜åŒ–</p><h2 id="å››ã€è‡ªå®šä¹‰-Widget"><a href="#å››ã€è‡ªå®šä¹‰-Widget" class="headerlink" title="å››ã€è‡ªå®šä¹‰ Widget"></a>å››ã€è‡ªå®šä¹‰ Widget</h2><p>ä¸Šé¢è®²è¿‡ï¼Œè‡ªå®šä¹‰ Widget å…ˆè¦å¯¹ Widget çš„çŠ¶æ€è¿›è¡Œåˆ¤æ–­ï¼Œæˆ‘ä»¬è¿™é‡Œæ— éœ€ç”¨æˆ·äº¤äº’ä»¥åŠå…¶ä»–å› ç´ è¿›è¡Œæ›´æ”¹ï¼Œå› æ­¤æ˜¯æ— çŠ¶æ€çš„ï¼Œç»§æ‰¿ StatelessWidget å³å¯</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹ body éƒ¨åˆ†çš„é€»è¾‘è¿›è¡ŒæŠ½ç¦»ï¼Œå°è£…ä¸ºä¸€ä¸ªè‡ªå®šä¹‰ Widgetï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBodyPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Center(<br>      child: Container( <span class="hljs-comment">// Center åµŒå¥—ä¸€ä¸ª Container</span><br>        width: <span class="hljs-number">300</span>, <span class="hljs-comment">//è®¾ç½® Container å®½åº¦ä¸º 300</span><br>        height: <span class="hljs-number">300</span>, <span class="hljs-comment">//è®¾ç½® Container é«˜åº¦ä¸º 300</span><br>        alignment: Alignment.center, <span class="hljs-comment">//è®¾ç½®å­ Widget å±…ä¸­</span><br>        padding: EdgeInsets.all(<span class="hljs-number">20</span>), <span class="hljs-comment">//è®¾ç½® Container å…§è¾¹è·ä¸º 20</span><br>        decoration: BoxDecoration( <span class="hljs-comment">//è®¾ç½® Container è£…é¥°</span><br>          color: Colors.blue, <span class="hljs-comment">//è®¾ç½® Container èƒŒæ™¯é¢œè‰²ä¸ºè“è‰²</span><br>          border: Border.all(<br>              color: Colors.red, <span class="hljs-comment">//è®¾ç½® Container è¾¹æ¡†é¢œè‰²ä¸ºçº¢è‰²</span><br>              width: <span class="hljs-number">2</span> <span class="hljs-comment">//è®¾ç½® Container è¾¹æ¡†çš„å®½åº¦ä¸º 2</span><br>          ),<br>          borderRadius: BorderRadius.all(Radius.circular(<span class="hljs-number">200</span>)), <span class="hljs-comment">//è®¾ç½® Container çš„å½¢çŠ¶ä¸ºä¸€ä¸ªåœ†å½¢</span><br>        ),<br>        child: Text( <span class="hljs-comment">//Container åµŒå¥—ä¸€ä¸ª Text</span><br>          <span class="hljs-string">&quot;Hello erdai str&quot;</span>, <span class="hljs-comment">// è®¾ç½® Text è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²</span><br>          maxLines: <span class="hljs-number">1</span>, <span class="hljs-comment">//è®¾ç½® Text æœ€å¤§æ˜¾ç¤ºä¸€è¡Œ</span><br>          overflow: TextOverflow.ellipsis, <span class="hljs-comment">//è®¾ç½® Text æ–‡æœ¬è¶…è¿‡ä¸€è¡Œ ... æ˜¾ç¤º</span><br>          style: TextStyle( <span class="hljs-comment">//é…ç½® Text æ ·å¼</span><br>              fontSize: <span class="hljs-number">28</span>, <span class="hljs-comment">//è®¾ç½® Text çš„å­—ä½“å¤§å°ä¸º 28</span><br>              fontWeight: FontWeight.bold, <span class="hljs-comment">//è®¾ç½® Text æ˜¾ç¤ºä¸ºç²—ä½“</span><br>              color: Colors.white, <span class="hljs-comment">//è®¾ç½® Text æ–‡å­—é¢œè‰²ä¸ºç™½è‰²</span><br>              decoration: TextDecoration.lineThrough, <span class="hljs-comment">//è®¾ç½® Text åˆ é™¤çº¿</span><br>              decorationColor: Colors.red, <span class="hljs-comment">//è®¾ç½® Text åˆ é™¤çº¿é¢œè‰²ä¸ºçº¢è‰²</span><br>              decorationStyle: TextDecorationStyle.dashed, <span class="hljs-comment">//è®¾ç½® Text åˆ é™¤çº¿ä¸ºè™šçº¿</span><br>              wordSpacing: <span class="hljs-number">20</span>, <span class="hljs-comment">//è®¾ç½® Text å•è¯ä¹‹é—´é—´è·ä¸º 20</span><br>              letterSpacing: <span class="hljs-number">6</span>, <span class="hljs-comment">//è®¾ç½® Text å­—æ¯é—´è·ä¸º 6</span><br>              fontStyle: FontStyle.italic <span class="hljs-comment">//è®¾ç½® Text å­—ä½“æ ·å¼ä¸ºæ–œä½“</span><br>          ),<br>        ),<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å®åˆ™å°±æ˜¯å°† body éƒ¨åˆ†çš„ä»£ç ç§»è¿‡æ¥ğŸ˜‚ï¼ŒæŒæ¡è‡ªå®šä¹‰ Widget çš„æ€è·¯å³å¯ï¼Œé‚£ä¹ˆ main æ–¹æ³•çš„ä»£ç å°±ç®€åŒ–äº†å¾ˆå¤šï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() &#123;<br>  runApp(MaterialApp(<br>    home: Scaffold(<br>      appBar: AppBar(<br>        title: Text(<span class="hljs-string">&quot;Flutter Widget Learning&quot;</span>),<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ æ ‡é¢˜</span><br>        elevation: <span class="hljs-number">30</span>,<span class="hljs-comment">//è®¾ç½®æ ‡é¢˜æ é˜´å½±</span><br>      ),<br>      body: MyBodyPage() <span class="hljs-comment">//è‡ªå®šä¹‰ Widget</span><br>    ),<br>  ));<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><p>æœ¬æ–‡é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€Flutter çš„ç‰¹ç‚¹ï¼Œäº†è§£å®ƒï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„å­¦ä¹  Flutter</p><p>2ã€ä»‹ç»äº†å®ç°æ•ˆæœå›¾ç”¨åˆ°çš„ Widgetï¼šMaterialAppï¼ŒScaffoldï¼ŒAppBarï¼ŒCenterï¼ŒContainerï¼ŒText</p><p>3ã€å­¦ä¹  Widget å®åˆ™å°±æ˜¯è¦é‡ç‚¹æŒæ¡å®ƒæœ‰å“ªäº›å±æ€§ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼šæŒæ¡å¸¸ç”¨çš„ï¼Œå…¶å®ƒçš„ç”¨åˆ°æ—¶æŸ¥çœ‹æºç å³<br>å¯ã€‚å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼šå½“ä½ ä¸çŸ¥é“å±æ€§æ€ä¹ˆèµ‹å€¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŸ¥çœ‹æºç äº†è§£å±æ€§çš„ç±»å‹ï¼Œç„¶åè¿›è¡Œç›¸åº”çš„èµ‹å€¼</p><p>4ã€ä»‹ç»äº†è‡ªå®šä¹‰å±æ€§ï¼Œæ ¹æ®çŠ¶æ€åˆ¤æ–­æ˜¯ç»§æ‰¿ StatelessWidget è¿˜æ˜¯ StatefulWidget</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤</p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>Flutter Widget æœ‰å¾ˆå¤šï¼Œä»Šå¤©æˆ‘ä»¬åªæ˜¯å­¦ä¹ äº†ç®€å•çš„å‡ ä¸ªï¼Œæ¥ä¸‹æ¥æˆ‘è¿˜ä¼šç»§ç»­å¯¹ Flutter Widget è¿›è¡Œä»‹ç»</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://www.bilibili.com/video/BV1S4411E7LY?p=19&vd_source=d0b24cb21c438ff4a9ac2e589eacb3d9">Flutter æ•™ç¨‹</a>ï¼šé€šä¿—æ˜“æ‡‚çš„ Flutter å…¥é—¨æ•™ç¨‹</p><blockquote><p><strong>ä½ çš„ç‚¹èµï¼Œè¯„è®ºï¼Œæ˜¯å¯¹æˆ‘å·¨å¤§çš„é¼“åŠ±ï¼</strong></p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„<strong>å…¬ä¼—å·ï¼š</strong>  <a href="https://link.juejin.cn/?target=http://m6z.cn/6jwi7b" title="http://m6z.cn/6jwi7b"><strong>sweetying</strong></a> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p><p>å¦‚æœ<strong>æœ‰é—®é¢˜</strong>ï¼Œå…¬ä¼—å·å†…æœ‰åŠ æˆ‘å¾®ä¿¡çš„å…¥å£ï¼Œåœ¨æŠ€æœ¯å­¦ä¹ ã€ä¸ªäººæˆé•¿çš„é“è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸€èµ·å‰è¿›ï¼</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Flutter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutter ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šDart è¯­æ³•ç­‘åŸº</title>
    <link href="/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9ADart%20%E8%AF%AD%E6%B3%95%E7%AD%91%E5%9F%BA/"/>
    <url>/2022/10/10/Flutter%20%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89%EF%BC%9ADart%20%E8%AF%AD%E6%B3%95%E7%AD%91%E5%9F%BA/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101643723.jpeg" alt="arjun-mj-KRB2m_nLQQA-unsplash"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¾ˆé«˜å…´é‡è§ä½ ~</p><p>åœ¨æœ¬ç³»åˆ—çš„ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† Flutter å¼€å‘ç¯å¢ƒæ­å»ºï¼Œä»¥åŠä½¿ç”¨ AndroidStudio è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Flutter é¡¹ç›®ï¼Œä½“éªŒäº†çƒ­é‡è½½ã€‚è¿˜æ²¡æœ‰çœ‹è¿‡ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ‹å‹ï¼Œå»ºè®®å…ˆå»é˜…è¯»<a href="https://juejin.cn/post/7057420846863745031">Flutter ç³»åˆ—ï¼ˆä¸€ï¼‰ï¼šè¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Flutter åº”ç”¨</a>ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼ŒDart åœ¨è®¾è®¡æ—¶åº”è¯¥æ˜¯å€Ÿé‰´äº†ç™¾å®¶è¯­è¨€ä¹‹æ‰€é•¿ğŸ˜„ï¼šJavaï¼ŒKotlinç­‰ï¼š</p><p>1ã€åœ¨é™æ€è¯­æ³•æ–¹é¢ï¼Œå¦‚ï¼šç±»å‹å®šä¹‰ï¼Œæ–¹æ³•å£°æ˜ï¼Œæ³›å‹ç­‰ï¼Œå’Œ Java éå¸¸ç›¸ä¼¼</p><p>2ã€ä¸€äº›è¯­æ³•ç‰¹æ€§ï¼Œå¦‚ï¼šå‡½æ•°å¼ç‰¹æ€§ï¼Œç©ºå®‰å…¨ï¼Œå‡½æ•°é»˜è®¤å€¼ç­‰ï¼Œå’Œ Kotlin éå¸¸ç›¸ä¼¼</p><p>3ã€Dart è¿˜æœ‰ä¸€äº›è‡ªå·±ç‹¬åˆ›çš„è¯­æ³•ï¼Œå¦‚ï¼šå‘½åæ„é€ æ–¹æ³•ï¼Œçº§è”æ“ä½œç¬¦ç­‰</p><p>æ€»ä¹‹ï¼Œç†Ÿæ‚‰ä¹‹åï¼Œä½ ä¼šå‘ç° Dart æ˜¯ä¸€é—¨éå¸¸æœ‰æ„æ€çš„ç¼–ç¨‹è¯­è¨€ï¼Œæ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬ä¸€èµ·è¿›å…¥ Dart çš„è¯­æ³•å­¦ä¹ å§</p><p><strong>æ³¨æ„</strong>ï¼š Dart è¯­æ³•å’Œ Javaï¼ŒKotlin çœŸçš„å¾ˆåƒï¼Œå°¤å…¶æ˜¯ Javaã€‚å¦å¤–å¦‚æœå¯¹ Kotlin è¯­æ³•ä¸ç†Ÿçš„ï¼Œå¯ä»¥å»çœ‹æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://juejin.cn/post/6942251919662383134">â€œKotlinâ€ç³»åˆ—: ä¸€ã€Kotlinå…¥é—¨</a></p><h2 id="ä¸€ã€å˜é‡å’Œæ–¹æ³•"><a href="#ä¸€ã€å˜é‡å’Œæ–¹æ³•" class="headerlink" title="ä¸€ã€å˜é‡å’Œæ–¹æ³•"></a>ä¸€ã€å˜é‡å’Œæ–¹æ³•</h2><h3 id="1-1ã€å˜é‡"><a href="#1-1ã€å˜é‡" class="headerlink" title="1.1ã€å˜é‡"></a>1.1ã€å˜é‡</h3><p>1ï¼‰ã€Dart å¯ä»¥æ˜¾ç¤ºæŒ‡æ˜ç±»å‹æ¥å£°æ˜ä¸€ä¸ªå¯å˜çš„å˜é‡ã€‚ä¸”æŒ‡æ˜çš„ç±»å‹åˆ†ä¸ºå¯ç©ºå’Œéç©º</p><p>2ï¼‰ã€Dart ä¹Ÿå¯ä»¥ä½¿ç”¨ var å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå¯å˜çš„å˜é‡ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šæ ¹æ®å˜é‡åˆå§‹å€¼è‡ªåŠ¨æ¨æ–­ç±»å‹</p><p>3ï¼‰ã€Dart ä½¿ç”¨ final å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªä¸å¯å˜çš„å˜é‡ï¼Œä¸”å¯ä»¥æ›¿ä»£ var æˆ–åŠ åœ¨ç±»å‹å‰é¢</p><p>4ï¼‰ã€Dart ä¸­å˜é‡å¦‚æœæ˜¯éç©ºç±»å‹ï¼Œé‚£ä¹ˆå¿…é¡»ç»™ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦åˆ™æ— æ³•ç¼–è¯‘é€šè¿‡ã€‚å¦‚æœæ˜¯å¯ç©ºç±»å‹ï¼Œé»˜è®¤å€¼éƒ½ä¸º null</p><p>5ï¼‰ã€Dart ä¸­æ¯ä¸€è¡Œä»£ç éƒ½è¦åŠ  ; ğŸ˜‚ï¼Œèµ°å›å¤´è·¯äº†ï¼Œæœ‰ç‚¹é¸¡è‚‹</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//1ã€Dart å¯ä»¥æ˜¾ç¤ºæŒ‡æ˜ç±»å‹æ¥å£°æ˜ä¸€ä¸ªå¯å˜çš„å˜é‡ã€‚ä¸”æŒ‡æ˜çš„ç±»å‹åˆ†ä¸ºå¯ç©ºå’Œéç©º</span><br><span class="hljs-comment">//1.1ã€ç±»æ¯” Javaï¼Œæ˜¾ç¤ºæŒ‡æ˜ç±»å‹æ¥å£°æ˜ä¸€ä¸ªå¯å˜çš„å˜é‡</span><br><span class="hljs-comment">//dart å†™æ³•ï¼š</span><br><span class="hljs-built_in">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-built_in">bool</span> b = <span class="hljs-keyword">true</span>;<br><br><span class="hljs-comment">//Java å†™æ³•</span><br><span class="hljs-built_in">int</span> a = <span class="hljs-number">10</span>;<br>boolean b = <span class="hljs-keyword">true</span>;<br><br><span class="hljs-comment">//1.2ã€æŒ‡æ˜çš„ç±»å‹åˆ†ä¸ºå¯ç©ºå’Œéç©º</span><br><span class="hljs-comment">//dart å†™æ³•</span><br><span class="hljs-built_in">int?</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-built_in">bool?</span> b = <span class="hljs-keyword">true</span>;<br><br><span class="hljs-comment">//kotlin å†™æ³•</span><br><span class="hljs-keyword">var</span> a: Int? = <span class="hljs-number">10</span><br><span class="hljs-keyword">var</span> b: Boolean? = <span class="hljs-keyword">true</span><br>  <br><span class="hljs-comment">//2ã€Dart ä¹Ÿå¯ä»¥ä½¿ç”¨ var å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå¯å˜çš„å˜é‡ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šæ ¹æ®å˜é‡åˆå§‹å€¼è‡ªåŠ¨æ¨æ–­ç±»å‹</span><br><span class="hljs-comment">//dart å†™æ³•</span><br><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">var</span> b = <span class="hljs-keyword">true</span>;<br><br><span class="hljs-comment">//kotlin å†™æ³•</span><br><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span><br><span class="hljs-keyword">var</span> b = <span class="hljs-keyword">true</span><br>  <br><span class="hljs-comment">//3ã€Dart ä½¿ç”¨ final å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªä¸å¯å˜çš„å˜é‡ï¼Œä¸”å¯ä»¥æ›¿ä»£ var æˆ–åŠ åœ¨ç±»å‹å‰é¢</span><br><span class="hljs-comment">//dart å†™æ³•</span><br><span class="hljs-keyword">final</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> aa = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">final</span> b = <span class="hljs-keyword">true</span>;<br><span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> bb = <span class="hljs-keyword">true</span>;<br><br><span class="hljs-comment">//Java å†™æ³•</span><br><span class="hljs-keyword">final</span> <span class="hljs-built_in">int</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">final</span> boolean b = <span class="hljs-keyword">true</span>;<br><br><span class="hljs-comment">//5ã€Dart ä¸­å˜é‡å¦‚æœæ˜¯éç©ºç±»å‹ï¼Œé‚£ä¹ˆå¿…é¡»ç»™ä¸€ä¸ªé»˜è®¤å€¼ã€‚å¦‚æœæ˜¯å¯ç©ºç±»å‹ï¼Œé»˜è®¤å€¼éƒ½ä¸º null</span><br><span class="hljs-keyword">void</span> main() &#123;<br>  <span class="hljs-built_in">String</span> s = <span class="hljs-string">&quot;erdai&quot;</span>;<br>  <span class="hljs-built_in">int?</span> i;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;<span class="hljs-subst">$s</span> <span class="hljs-subst">$i</span>&#x27;</span>); <span class="hljs-comment">//æ‰“å°ç»“æœï¼šerdai null</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å°å»ºè®®</strong>ï¼šå®šä¹‰å˜é‡ï¼Œä¼˜å…ˆä½¿ç”¨è‡ªåŠ¨æ¨æ–­ï¼Œæ¥è‡ª Dart å®˜æ–¹çš„å»ºè®®</p><p><strong>æ³¨æ„</strong>ï¼š Dart å®Œå…¨æŠ›å¼ƒäº† Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå…¨éƒ¨éƒ½æ˜¯å¯¹è±¡æ•°æ®ç±»å‹</p><p>5ï¼‰ã€Dart ä¸­è¿˜å¯ä»¥ä½¿ç”¨ Object å’Œ dynamic å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå˜é‡</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs abnf">//<span class="hljs-number">1</span>ã€Dart ä¸­è¿˜å¯ä»¥ä½¿ç”¨ Object å’Œ dynamic å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå˜é‡<br>//<span class="hljs-number">1.1</span>ã€Object å£°æ˜å˜é‡ï¼Œè¿™ä¸€ç‚¹å’Œ Java æ²¡ä»»ä½•åŒºåˆ«<br>Object a <span class="hljs-operator">=</span> <span class="hljs-number">10</span><span class="hljs-comment">;</span><br>Object b <span class="hljs-operator">=</span> true<span class="hljs-comment">;</span><br>Object str <span class="hljs-operator">=</span> <span class="hljs-string">&quot;erdai666&quot;</span><span class="hljs-comment">;</span><br><br>//<span class="hljs-number">1.2</span>ã€dynamic å£°æ˜å˜é‡ï¼Œè¿™ä¸€ç‚¹æ˜¯ Java æ‰€æ²¡æœ‰çš„<br>dynamic a <span class="hljs-operator">=</span> <span class="hljs-number">10</span><span class="hljs-comment">;</span><br>dynamic b <span class="hljs-operator">=</span> true<span class="hljs-comment">;</span><br>dynamic str <span class="hljs-operator">=</span> <span class="hljs-string">&quot;erdai666&quot;</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šObject å’Œ dynamic æœ‰å•¥åŒºåˆ«å‘¢ï¼ŸğŸ¤”ï¸</p><p>ç­”ï¼šObject æ˜¯æ‰€æœ‰ç±»çš„åŸºç±»ï¼Œç›¸å½“äºä¸€ä¸ªå¯ä»¥å…¼å®¹æ‰€æœ‰ç±»å‹çš„è¶…çº§ç±»å‹ï¼Œè¿™ç‚¹å’Œ Java ç±»ä¼¼ã€‚dynamic å°±æ˜¯ä¸€ä¸ªå®šä¹‰åŠ¨æ€ç±»å‹çš„å…³é”®å­—</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-comment">//1ã€å£°æ˜ä¸€ä¸ª Object ç±»å‹çš„å˜é‡è°ƒç”¨ substringï¼Œæ­¤æ—¶ä¼šç¼–è¯‘æŠ¥é”™ï¼Œå› ä¸º Object æ²¡æœ‰ substring æ–¹æ³•</span><br><span class="hljs-built_in">Object</span> <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;erdai666&quot;</span>;<br><span class="hljs-built_in">str</span>.<span class="hljs-property">substring</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">//ç¼–è¯‘æŠ¥é”™ï¼šThe method &#x27;substring&#x27; isn&#x27;t defined for the type &#x27;Object&#x27;.</span><br><br><span class="hljs-comment">//2ã€ä½¿ç”¨ dynamic å®šä¹‰ä¸€ä¸ªå˜é‡è°ƒç”¨ substringï¼Œæ­¤æ—¶å¯ä»¥ç»•è¿‡ç¼–è¯‘æ£€æŸ¥</span><br>dynamic <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;erdai666&quot;</span>;<br><span class="hljs-built_in">str</span>.<span class="hljs-property">substring</span>(<span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šä½¿ç”¨ dynamic å®šä¹‰çš„å˜é‡è°ƒç”¨ç›¸å…³æŒ‡å®šç±»å‹ api æ—¶ï¼Œå› ä¸ºä¼šç»•è¿‡ç¼–è¯‘å™¨æ£€æŸ¥ï¼Œæ‰€ä»¥åˆ«å†™é”™äº†ï¼Œå¦åˆ™è¿è¡Œæ—¶å°±ä¼šæŠ¥æ‰¾ä¸åˆ°æ­¤ apiï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/56018a16767142e28c710727a2e9fa39~tplv-k3u1fbpfcp-zoom-1.image" alt="img"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘å™¨æç¤ºï¼š String ç±»æ²¡æœ‰ subString æ–¹æ³•ã€‚å°±æ˜¯å› ä¸ºæˆ‘ä»¬ api å†™é”™äº†ï¼Œå°† substring å†™æˆäº† subString å¯¼è‡´çš„</p><h3 id="1-2ã€å¸¸é‡"><a href="#1-2ã€å¸¸é‡" class="headerlink" title="1.2ã€å¸¸é‡"></a>1.2ã€å¸¸é‡</h3><p>1ï¼‰ã€Dart ä½¿ç”¨ const å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå¸¸é‡</p><p>2ï¼‰ã€Dart å¯ä»¥ä½¿ç”¨ const å…³é”®å­—æ›¿ä»£ var æˆ–åŠ åœ¨ç±»å‹å‰é¢</p><p>3ï¼‰ã€Dart è¿˜å¯ä»¥ä½¿ç”¨ const å…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ªå¸¸é‡</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//1ã€Dart ä½¿ç”¨ const å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªå¸¸é‡</span><br><span class="hljs-comment">//2ã€Dart å¯ä»¥ä½¿ç”¨ const å…³é”®å­—æ›¿ä»£ var æˆ–åŠ åœ¨ç±»å‹å‰é¢</span><br><span class="hljs-keyword">const</span> a = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">const</span> b = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> aa = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-built_in">bool</span> bb = <span class="hljs-literal">true</span>;<br><br><span class="hljs-comment">//3ã€Dart è¿˜å¯ä»¥ä½¿ç”¨ const å…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ªå¸¸é‡</span><br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå†…å®¹å’Œå¼•ç”¨éƒ½ä¸å¯å˜çš„ list æ•°ç»„</span><br><span class="hljs-keyword">var</span> list = <span class="hljs-keyword">const</span> [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªå†…å®¹å’Œå¼•ç”¨éƒ½ä¸å¯å˜çš„ set é›†åˆ</span><br><span class="hljs-keyword">var</span> <span class="hljs-keyword">set</span> = <span class="hljs-keyword">const</span> &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;;<br></code></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘æœ‰ä¸€ä¸ªç–‘é—®ï¼šé‚£ const å’Œ final æœ‰å•¥å¼‚åŒå‘¢ï¼Ÿ</p><p>ç­”ï¼š</p><p>å¼‚ï¼š</p><p>1ã€final å¯ä»¥ä¸€å¼€å§‹ä¸èµ‹å€¼ï¼Œå¦‚æœèµ‹å€¼äº†åˆ™ä¸å¯å˜ã€‚const ä¸€å¼€å§‹å°±éœ€è¦èµ‹å€¼ä¸”ä¸å¯å˜</p><p>2ã€const å¿…é¡»ç»™ä¸€ä¸ªæ˜ç¡®çš„ç¼–è¯‘å¸¸é‡å€¼ï¼ˆå³ç¼–è¯‘æœŸé—´å°±ç¡®å®šçš„å€¼ï¼‰</p><p>3ã€final å¯ä»¥é€šè¿‡è®¡ç®—æˆ–è€…æ–¹æ³•è·å–ä¸€ä¸ªå€¼ï¼ˆå³è¿è¡ŒæœŸé—´ç¡®å®šçš„å€¼ï¼‰</p><p>4ã€final è¡¨ç¤ºå¼•ç”¨ä¸å¯å˜ï¼Œä½†å†…å®¹æ˜¯å¯å˜çš„ã€‚const è¡¨ç¤ºå†…å®¹å’Œå¼•ç”¨éƒ½ä¸å¯å˜</p><p>åŒï¼š</p><p>1ã€finalï¼Œconst å…³é”®å­—éƒ½å¯ä»¥ç”¨æ¥å®šä¹‰ä¸€ä¸ªå¸¸é‡</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€final å¯ä»¥ä¸€å¼€å§‹ä¸èµ‹å€¼ï¼Œå¦‚æœèµ‹å€¼äº†åˆ™ä¸å¯å˜ã€‚const ä¸€å¼€å§‹å°±éœ€è¦èµ‹å€¼ä¸”ä¸å¯å˜<br><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€const å¿…é¡»ç»™ä¸€ä¸ªæ˜ç¡®çš„ç¼–è¯‘å¸¸é‡å€¼ï¼ˆå³ç¼–è¯‘æœŸé—´å°±ç¡®å®šçš„å€¼ï¼‰<br><span class="hljs-regexp">//</span><span class="hljs-number">3</span>ã€final å¯ä»¥é€šè¿‡è®¡ç®—/æ–¹æ³•è·å–ä¸€ä¸ªå€¼ï¼ˆå³è¿è¡ŒæœŸé—´ç¡®å®šçš„å€¼ï¼‰<br><br>final a;<span class="hljs-regexp">//</span>ç¼–è¯‘é€šè¿‡<br>a = <span class="hljs-number">10</span>;<span class="hljs-regexp">//</span>ç¼–è¯‘é€šè¿‡<br><br>const b;<span class="hljs-regexp">//</span>ç¼–è¯‘æŠ¥é”™<br>b = <span class="hljs-number">10</span>;<span class="hljs-regexp">//</span>ç¼–è¯‘æŠ¥é”™<br><br><span class="hljs-regexp">//</span><span class="hljs-number">4</span>ã€final è¡¨ç¤ºå¼•ç”¨ä¸å¯å˜ï¼Œä½†å†…å®¹æ˜¯å¯å˜çš„ã€‚const è¡¨ç¤ºå†…å®¹å’Œå¼•ç”¨éƒ½ä¸å¯å˜<br>final set = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;;<br>set.add(<span class="hljs-number">4</span>);<br><br>var list = const [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br>list.add(<span class="hljs-number">4</span>);<span class="hljs-regexp">//</span>è¿è¡ŒæŠ¥é”™ï¼Œconst list ä¸å¯æ–°å¢å…ƒç´ <br></code></pre></td></tr></table></figure><h3 id="1-3ã€æ–¹æ³•"><a href="#1-3ã€æ–¹æ³•" class="headerlink" title="1.3ã€æ–¹æ³•"></a>1.3ã€æ–¹æ³•</h3><h4 id="1-3-1ã€æ–¹æ³•å®šä¹‰"><a href="#1-3-1ã€æ–¹æ³•å®šä¹‰" class="headerlink" title="1.3.1ã€æ–¹æ³•å®šä¹‰"></a>1.3.1ã€æ–¹æ³•å®šä¹‰</h4><p>1ï¼‰ã€æ–¹æ³•å’Œå‡½æ•°æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨ Java ä¸­æˆ‘ä»¬ä¹ æƒ¯å«æ–¹æ³• (method)ã€‚åœ¨ Kotlin ä¸­æˆ‘ä»¬ä¹ æƒ¯å«å‡½æ•° (function)ã€‚å›  Dart æ›´åƒ Java ï¼Œå› æ­¤è¿™é‡Œå»ºè®®å¤§å®¶ä¹Ÿå«æ–¹æ³• (method)</p><p>2ï¼‰ã€æ–¹æ³•æ˜¯è¿è¡Œä»£ç çš„è½½ä½“ï¼Œåƒæˆ‘ä»¬ä½¿ç”¨è¿‡çš„ main æ–¹æ³•å°±æ˜¯ä¸€ä¸ªæ–¹æ³•</p><p>Dart ä¸­å®šä¹‰æ–¹æ³•çš„è¯­æ³•è§„åˆ™ï¼š</p><blockquote><p>è¿”å›å‚æ•°ç±»å‹ æ–¹æ³•å(å‚æ•°1,å‚æ•°2,å‚æ•°3â€¦) {</p><p>æ–¹æ³•ä½“</p><p>}</p></blockquote><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs reasonml"><span class="hljs-comment">//1ã€Dart å†™æ³•1ï¼šæ–¹æ³•çš„å‚æ•°ä½¿ç”¨ï¼švar å‚æ•°å</span><br>String <span class="hljs-keyword">method</span><span class="hljs-constructor">Name(<span class="hljs-params">var</span> <span class="hljs-params">name</span>,<span class="hljs-params">var</span> <span class="hljs-params">age</span>)</span>&#123;<br>  return <span class="hljs-string">&quot;erdai666&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//2ã€Dart å†™æ³•2ï¼šæ–¹æ³•çš„å‚æ•°ä½¿ç”¨ï¼šç±»å‹ å‚æ•°å</span><br>String <span class="hljs-keyword">method</span><span class="hljs-constructor">Name(String <span class="hljs-params">name</span>,<span class="hljs-params">int</span> <span class="hljs-params">age</span>)</span>&#123;<br>  return <span class="hljs-string">&quot;erdai666&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//3ã€Dart å†™æ³•3ï¼šæ–¹æ³•çš„è¿”å›ç±»å‹å¯çœç•¥ï¼Œæ ¹æ®æ–¹æ³•ä½“æœ€åä¸€è¡Œä»£ç è¿›è¡Œè¿”å›ç±»å‹æ¨æ–­</span><br><span class="hljs-keyword">method</span><span class="hljs-constructor">Name(<span class="hljs-params">var</span> <span class="hljs-params">name</span>,<span class="hljs-params">var</span> <span class="hljs-params">age</span>)</span>&#123;<br>  return <span class="hljs-string">&quot;erdai666&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">//4ã€å¦‚æœæ²¡æœ‰å†™è¿”å›ç±»å‹ï¼Œä¸”æ–¹æ³•ä½“æœ€åä¸€è¡Œä»£ç æ²¡æœ‰æ˜ç¡®å†™è¿”å›è¯­å¥ï¼Œé‚£ä¹ˆé»˜è®¤æ‰§è¡Œï¼šreturn null</span><br><span class="hljs-keyword">method</span><span class="hljs-constructor">Name(<span class="hljs-params">var</span> <span class="hljs-params">name</span>,<span class="hljs-params">var</span> <span class="hljs-params">age</span>)</span>&#123;<br>  <br>&#125;<br><br><span class="hljs-comment">//5ã€Dart å†™æ³•4ï¼šæ— è¿”å›å€¼ä½¿ç”¨ void å…³é”®å­—</span><br>void <span class="hljs-keyword">method</span><span class="hljs-constructor">Name(<span class="hljs-params">var</span> <span class="hljs-params">name</span>,<span class="hljs-params">var</span> <span class="hljs-params">age</span>)</span>&#123;<br>  <br>&#125;<br><br><span class="hljs-comment">//6ã€Dart å†™æ³•5ï¼šå¦‚æœæ–¹æ³•ä½“åªæœ‰ä¸€è¡Œè¡¨è¾¾å¼ï¼Œå¯å°†å…¶æ”¹æˆå•è¡Œæ–¹æ³•æ ·å¼ï¼Œæ–¹æ³•åå’Œæ–¹æ³•ä½“ç”¨ =&gt; è¿æ¥</span><br>String <span class="hljs-keyword">method</span><span class="hljs-constructor">Name(<span class="hljs-params">var</span> <span class="hljs-params">name</span>,<span class="hljs-params">var</span> <span class="hljs-params">age</span>)</span> =&gt; <span class="hljs-string">&quot;erdai666&quot;</span>;<br></code></pre></td></tr></table></figure><p>æ–¹æ³•è¯­æ³•è§£é‡Šï¼š</p><ul><li><p>æ‰€æœ‰æ–¹æ³•éƒ½æœ‰è¿”å›å€¼ï¼Œå³ä½¿è¿”å›å€¼æ˜¯ void</p></li><li><p>æ–¹æ³•çš„è¿”å›ç±»å‹ï¼Œå¯å†™å¯ä¸å†™ã€‚å¦‚æœä¸å†™ï¼Œä¼šæ ¹æ®æ–¹æ³•ä½“é‡Œé¢æœ€åä¸€è¡Œä»£ç è¿›è¡Œç±»å‹æ¨æ–­</p></li><li><p>å¦‚æœæ²¡æœ‰å†™è¿”å›ç±»å‹ï¼Œä¸”æ–¹æ³•ä½“æœ€åä¸€è¡Œä»£ç æ²¡æœ‰æ˜ç¡®å†™è¿”å›è¯­å¥ï¼Œé‚£ä¹ˆé»˜è®¤æ‰§è¡Œï¼šreturn null</p></li><li><p>æ–¹æ³•åç§°å¯ä»¥éšä¾¿å–ï¼Œå°±åƒ Java ï¼ŒKotlin é‡Œé¢å®šä¹‰æ–¹æ³•åä¸€æ ·</p></li><li><p>æ–¹æ³•åé‡Œé¢çš„å‚æ•°å¯ä»¥æœ‰ä»»æ„å¤šä¸ªï¼Œå‚æ•°çš„å£°æ˜æ ¼å¼æœ‰ä¸¤ç§ï¼š</p><blockquote><p>1ã€var å‚æ•°å</p><p>2ã€ç±»å‹ å‚æ•°å</p></blockquote></li></ul><!----><ul><li>å¦‚æœæ–¹æ³•ä½“åªæœ‰ä¸€è¡Œè¡¨è¾¾å¼ï¼Œå¯å°†å…¶æ”¹æˆå•è¡Œæ–¹æ³•æ ·å¼ï¼Œæ–¹æ³•åå’Œæ–¹æ³•ä½“ç”¨ &#x3D;&gt; è¿æ¥</li></ul><p><strong>å°å»ºè®®</strong>ï¼šå®šä¹‰ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå»ºè®®æŠŠè¿”å›ç±»å‹ç»™å†™å‡ºæ¥ï¼Œå¯è¯»æ€§å¼º</p><h4 id="1-3-2ã€å¯é€‰å‚æ•°-amp-å‘½åå‚æ•°-amp-é»˜è®¤å‚æ•°"><a href="#1-3-2ã€å¯é€‰å‚æ•°-amp-å‘½åå‚æ•°-amp-é»˜è®¤å‚æ•°" class="headerlink" title="1.3.2ã€å¯é€‰å‚æ•° &amp; å‘½åå‚æ•° &amp; é»˜è®¤å‚æ•°"></a>1.3.2ã€å¯é€‰å‚æ•° &amp; å‘½åå‚æ•° &amp; é»˜è®¤å‚æ•°</h4><h5 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h5><p>1ï¼‰ã€å¯é€‰å‚æ•°é¡¾åæ€ä¹‰å°±æ˜¯å¯ä»¥é€‰æ‹©çš„å‚æ•°ï¼Œä½¿ç”¨ [] è¡¨ç¤ºå¯é€‰çš„ä½ç½®å‚æ•°ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> optionFunction(<span class="hljs-keyword">var</span> value1,[<span class="hljs-keyword">var</span> value2 = <span class="hljs-number">2</span>,<span class="hljs-keyword">var</span> value3 = <span class="hljs-number">3</span>])&#123;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;<span class="hljs-subst">$value1</span> <span class="hljs-subst">$value2</span> <span class="hljs-subst">$value3</span>&#x27;</span>);<br>&#125;<br><br><span class="hljs-keyword">void</span> main()&#123;<br>  optionFunction(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><p>ç–‘é—®ï¼šå¦‚æœæˆ‘åªæƒ³ç»™ value1 å’Œ value3 ä¼ å‚ï¼šå¯ä»¥åšåˆ°å—ï¼Ÿ</p><p>ç­”ï¼šä¸èƒ½ã€‚å¦‚æœæƒ³åšåˆ°ï¼Œå°±éœ€è¦ä½¿ç”¨å‘½åå‚æ•°</p><h5 id="å‘½åå‚æ•°"><a href="#å‘½åå‚æ•°" class="headerlink" title="å‘½åå‚æ•°"></a>å‘½åå‚æ•°</h5><p>1ï¼‰ã€å‘½åå‚æ•°é»˜è®¤éƒ½ä¸ºå¯é€‰å‚æ•°ã€‚å¦‚æœæ˜¯å¿…è¦å‚æ•°ï¼Œåˆ™éœ€è¦ç”¨ required å…³é”®å­—ï¼Œä¸”ä½¿ç”¨ required ä¿®é¥°çš„å‚æ•°ä¸èƒ½æä¾›é»˜è®¤å€¼</p><p>2ï¼‰ã€ä½¿ç”¨ {} æ¥æŒ‡å®šå‘½åå‚æ•°</p><p>3ï¼‰ã€å‘½åå‚æ•°å¿…é¡»ä»¥ key: value çš„å½¢å¼å»æŒ‡å®š</p><p>å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//1ã€ä½¿ç”¨ &#123;&#125; æ¥æŒ‡å®šå‘½åå‚æ•°</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">optionFunction</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> value1,&#123;<span class="hljs-keyword">var</span> value2 = <span class="hljs-number">2</span>,<span class="hljs-keyword">var</span> value3 = <span class="hljs-number">3</span>&#125;</span>)&#123;<br>  <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;$value1 $value2 $value3&#x27;</span>);<br>&#125;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-title function_">optionFunction</span>(<span class="hljs-number">1</span>,<span class="hljs-attr">value3</span>: <span class="hljs-number">4</span>);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">4</span><br><br> <br><span class="hljs-comment">//2ã€å¦‚æœæ˜¯å¿…è¦å‚æ•°ï¼Œåˆ™éœ€è¦ç”¨ required å…³é”®å­—ï¼Œä¸”ä½¿ç”¨ required ä¿®é¥°çš„å‚æ•°ä¸èƒ½æä¾›é»˜è®¤å€¼</span><br><span class="hljs-comment">//æ­¤æ—¶ value2 ä¸ºå¿…ä¼ çš„å‚æ•°</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">optionFunction</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> value1,&#123;required <span class="hljs-keyword">var</span> value2,<span class="hljs-keyword">var</span> value3 = <span class="hljs-number">3</span>&#125;</span>)&#123;<br>  <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;$value1 $value2 $value3&#x27;</span>);<br>&#125;  <br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-title function_">optionFunction</span>(<span class="hljs-number">1</span>,<span class="hljs-attr">value2</span>: <span class="hljs-number">4</span>);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span> <span class="hljs-number">4</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h5 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" class="headerlink" title="é»˜è®¤å‚æ•°"></a>é»˜è®¤å‚æ•°</h5><p>å¦‚ä¸Šæˆ‘ä»¬åˆšæ‰ç»™å¯é€‰å‚æ•°å’Œå‘½åå‚æ•°æä¾›çš„é»˜è®¤å€¼</p><p>1ï¼‰ã€é»˜è®¤å‚æ•°å°±æ˜¯ç»™å¯é€‰å‚æ•°æä¾›é»˜è®¤å€¼ï¼Œä»¥ä¾¿åœ¨æœªæä¾›ç›¸åº”å®å‚æ—¶ä½¿ç”¨</p><p>2ï¼‰ã€é»˜è®¤å€¼å¿…é¡»æ˜¯ç¼–è¯‘æ—¶å¸¸é‡</p><p>3ï¼‰ã€å¦‚æœå¯é€‰å‚æ•°æ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œé‚£é»˜è®¤å€¼å°±ä¸º null</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//1ã€å¦‚æœå¯é€‰å‚æ•°æ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œé‚£é»˜è®¤å€¼å°±ä¸º null</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">optionFunction</span>(<span class="hljs-params"><span class="hljs-keyword">var</span> value1,&#123;<span class="hljs-keyword">var</span> value2 = <span class="hljs-number">2</span>,<span class="hljs-keyword">var</span> value3&#125;</span>)&#123;<br>  <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;$value1 $value2 $value3&#x27;</span>);<br>&#125;<br> <br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-title function_">optionFunction</span>(<span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-literal">null</span><br></code></pre></td></tr></table></figure><h4 id="1-3-3ã€åŒ¿åæ–¹æ³•ï¼ˆåˆç§°é—­åŒ…ï¼‰"><a href="#1-3-3ã€åŒ¿åæ–¹æ³•ï¼ˆåˆç§°é—­åŒ…ï¼‰" class="headerlink" title="1.3.3ã€åŒ¿åæ–¹æ³•ï¼ˆåˆç§°é—­åŒ…ï¼‰"></a>1.3.3ã€åŒ¿åæ–¹æ³•ï¼ˆåˆç§°é—­åŒ…ï¼‰</h4><p>1ï¼‰ã€åŒ¿åæ–¹æ³•é¡¾åæ€ä¹‰å°±æ˜¯æ²¡æœ‰åå­—çš„æ–¹æ³•ï¼Œè¯­æ³•è§„åˆ™å¦‚ä¸‹ï¼š</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs gcode"><span class="hljs-comment">//1ã€æ–¹å¼ä¸€ï¼š</span><br><span class="hljs-comment">(var å‚æ•°å)</span>&#123;<br>   æ–¹æ³•ä½“<br>&#125;<br><br><span class="hljs-comment">//2ã€æ–¹å¼äºŒï¼š</span><br><span class="hljs-comment">(ç±»å‹ å‚æ•°å)</span>&#123;<br>   æ–¹æ³•ä½“<br>&#125;<br><br><span class="hljs-comment">//3ã€æ–¹å¼ä¸‰ï¼šå¦‚æœæ–¹æ³•ä½“åªæœ‰ä¸€è¡Œä»£ç å¯ä»¥å°†åŒ¿åæ–¹æ³•ç”¨å•è¡Œè¡¨ç¤º</span><br><span class="hljs-comment">(var å‚æ•°å)</span> =&gt; æ–¹æ³•ä½“<br><span class="hljs-comment">(ç±»å‹ å‚æ•°å)</span> =&gt; æ–¹æ³•ä½“<br>  <br><span class="hljs-comment">//4ã€æ–¹å¼å››ï¼šçœç•¥ var æˆ–ç±»å‹</span><br><span class="hljs-comment">(å‚æ•°å)</span>&#123;<br>   æ–¹æ³•ä½“<br>&#125;<br><br><span class="hljs-comment">(å‚æ•°å)</span> =&gt; æ–¹æ³•ä½“<br></code></pre></td></tr></table></figure><p>2ï¼‰ã€åŒ¿åæ–¹æ³•ä¸€èˆ¬ä¼šå½“åšå‚æ•°æˆ–èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//1ã€åŒ¿åæ–¹æ³•å½“ä½œå‚æ•°ä½¿ç”¨</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">const</span> list = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br>  list.<span class="hljs-title function_">forEach</span>((element)&#123;<br>    <span class="hljs-title function_">print</span>(element);<br>  &#125;);<br>  <span class="hljs-comment">//å¯ç®€åŒ–æˆå¦‚ä¸‹å†™æ³•ï¼š</span><br>  <span class="hljs-comment">//list.forEach((element) =&gt; print(element));</span><br>&#125;<br><br><span class="hljs-comment">//2ã€åŒ¿åæ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">const</span> list = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br>  <span class="hljs-keyword">var</span> <span class="hljs-keyword">function</span> = (element)&#123;<br>    <span class="hljs-title function_">print</span>(element);<br>  &#125;;<br>  <span class="hljs-comment">//å¯ç®€åŒ–æˆå¦‚ä¸‹å†™æ³•ï¼š</span><br>  <span class="hljs-comment">//var function = (element) =&gt;  print(element);</span><br>  list.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>3ï¼‰ã€åŒ¿åæ–¹æ³•ç«‹å³æ‰§è¡Œ</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-comment">//1ã€æ–¹å¼1</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span>()</span>&#123;<br>  <span class="hljs-keyword">var</span> func = ()&#123;<br>    print(<span class="hljs-string">&#x27;666&#x27;</span>);<br>  &#125;;<br>  (func)();<br>&#125;<br><br><span class="hljs-comment">//2ã€æ–¹å¼2</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span>()</span>&#123;<br>  (()&#123;<br>    print(<span class="hljs-string">&#x27;666&#x27;</span>);<br>  &#125;)();<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">666</span><br></code></pre></td></tr></table></figure><p>4ï¼‰ã€åŒ¿åæ–¹æ³•å†…éƒ¨å¯ä»¥å¼•ç”¨åŒ…å«è¯¥åŒ¿åæ–¹æ³•çš„æ‰€æœ‰å±‚çº§ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œä¸åŒ¿åæ–¹æ³•è°ƒç”¨çš„ä½ç½®æ— å…³ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//makeAdder è¿”å›ä¸€ä¸ªåŒ¿åæ–¹æ³•</span><br><span class="hljs-title class_">Function</span> <span class="hljs-title function_">makeAdder</span>(<span class="hljs-params">num addBy</span>)&#123;<br>  <span class="hljs-comment">//åŒ¿åæ–¹æ³•è®¿é—® addBy å‚æ•°</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">num i</span>) =&gt;</span> addBy + i;<br>&#125;<br><br><span class="hljs-keyword">void</span>  <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œä¼ å…¥å®å‚ä¸º 2</span><br>  <span class="hljs-keyword">var</span> add1 = <span class="hljs-title function_">makeAdder</span>(<span class="hljs-number">2</span>);<br>  <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œä¼ å…¥å®å‚ä¸º 3</span><br>  <span class="hljs-keyword">var</span> add2 = <span class="hljs-title function_">makeAdder</span>(<span class="hljs-number">3</span>);<br><br>  <span class="hljs-comment">//åˆ†åˆ«è°ƒç”¨ä¸¤ä¸ªåŒ¿åæ–¹æ³•ï¼Œå¹¶æ‰“å°ç»“æœ</span><br>  <span class="hljs-title function_">print</span>(<span class="hljs-title function_">add1</span>(<span class="hljs-number">3</span>));<br>  <span class="hljs-title function_">print</span>(<span class="hljs-title function_">add2</span>(<span class="hljs-number">4</span>));<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">5</span><br><span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šDart ä¸­çš„æ–¹æ³•ä¹Ÿæ˜¯ä¸€ç§ç±»å‹ï¼Œå¯¹åº” Function ç±»ï¼Œæ‰€ä»¥æ–¹æ³•å¯ä»¥è¢«èµ‹å€¼ç»™å˜é‡æˆ–ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªæ–¹æ³•</p><h4 id="1-3-4ã€é™æ€æ–¹æ³•"><a href="#1-3-4ã€é™æ€æ–¹æ³•" class="headerlink" title="1.3.4ã€é™æ€æ–¹æ³•"></a>1.3.4ã€é™æ€æ–¹æ³•</h4><p>1ï¼‰ã€ä½¿ç”¨ static å…³é”®å­—ä¿®é¥°çš„æ–¹æ³•å³ä¸ºé™æ€æ–¹æ³•ï¼Œå› é™æ€æ–¹æ³•ä¸å±äºç±»å®ä¾‹ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•è®¿é—®ç±»æˆå‘˜</p><p>2ï¼‰ã€é™æ€æ–¹æ³•å¯ä»¥ä½¿ç”¨ç±»åç›´æ¥è°ƒç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span>&#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">staticFunction1</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">staticFunction2</span>(<span class="hljs-params"></span>)&#123;<br> <br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-title class_">Test</span>.<span class="hljs-title function_">staticFunction1</span>();<br>  <span class="hljs-title class_">Test</span>.<span class="hljs-title function_">staticFunction2</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="äºŒã€åŸºæœ¬ç±»å‹å’Œè¿ç®—ç¬¦"><a href="#äºŒã€åŸºæœ¬ç±»å‹å’Œè¿ç®—ç¬¦" class="headerlink" title="äºŒã€åŸºæœ¬ç±»å‹å’Œè¿ç®—ç¬¦"></a>äºŒã€åŸºæœ¬ç±»å‹å’Œè¿ç®—ç¬¦</h2><h3 id="2-1ã€åŸºæœ¬ç±»å‹"><a href="#2-1ã€åŸºæœ¬ç±»å‹" class="headerlink" title="2.1ã€åŸºæœ¬ç±»å‹"></a>2.1ã€åŸºæœ¬ç±»å‹</h3><p>å‰é¢æåˆ°è¿‡ï¼šDart å®Œå…¨æŠ›å¼ƒäº† Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå…¨éƒ¨éƒ½æ˜¯å¯¹è±¡æ•°æ®ç±»å‹ã€‚å› æ­¤æˆ‘ä»¬è¿™é‡Œè®²çš„åŸºæœ¬ç±»å‹ï¼Œä¹Ÿæ˜¯å¯¹è±¡æ•°æ®ç±»å‹ï¼Œåªä¸è¿‡æ˜¯ Dart é»˜è®¤ç»™æˆ‘ä»¬æä¾›çš„</p><h4 id="2-1-1ã€æ•°å­—ç±»å‹"><a href="#2-1-1ã€æ•°å­—ç±»å‹" class="headerlink" title="2.1.1ã€æ•°å­—ç±»å‹"></a>2.1.1ã€æ•°å­—ç±»å‹</h4><p>1ï¼‰ã€åœ¨dartè¯­è¨€ä¸­æ•°å­—ç±»å‹ä¸»è¦æœ‰ä¸‹é¢ä¸‰ç§ï¼š</p><blockquote><p>intï¼šæ•´æ•°ç±»å‹</p><p>doubleï¼šæµ®ç‚¹æ•°ç±»å‹</p><p>numï¼šæ•°å­—ç±»å‹ï¼Œintå’Œdoubleéƒ½æ˜¯å®ƒçš„å­ç±»</p></blockquote><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs abnf">var x <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;   // åˆå§‹åŒ–ä¸º int ç±»å‹</span><br>var y <span class="hljs-operator">=</span> <span class="hljs-number">1.1</span><span class="hljs-comment">;  // åŒ…å«å°æ•°ï¼Œåˆå§‹åŒ–ä¸º double</span><br><br>// æ˜ç¡®æŒ‡å®šæ•°æ®ç±»å‹<br>double z <span class="hljs-operator">=</span> <span class="hljs-number">1</span><span class="hljs-comment">;</span><br>num d <span class="hljs-operator">=</span> <span class="hljs-number">100</span><span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>2ï¼‰ã€æ•°å­—ç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹äº’ç›¸è½¬æ¢</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// å°† String ç±»å‹è½¬æ¢æˆ int ç±»å‹</span><br><span class="hljs-keyword">var</span> one = <span class="hljs-built_in">int</span>.parse(<span class="hljs-string">&#x27;1&#x27;</span>);<br><br><span class="hljs-comment">// å°† String ç±»å‹è½¬æ¢æˆ double ç±»å‹</span><br><span class="hljs-keyword">var</span> onePointOne = <span class="hljs-built_in">double</span>.parse(<span class="hljs-string">&#x27;1.1&#x27;</span>);<br><br><br><span class="hljs-comment">// å°† int ç±»å‹è½¬æ¢æˆ String ç±»å‹</span><br><span class="hljs-built_in">String</span> oneAsString = <span class="hljs-number">1.</span>toString();<br><br><span class="hljs-comment">// å°† double ç±»å‹è½¬æ¢æˆ String ç±»å‹, ä¿ç•™ä¸¤ä½å°æ•°</span><br><span class="hljs-built_in">String</span> piAsString = <span class="hljs-number">3.14159</span>.toStringAsFixed(<span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure><h4 id="2-1-2ã€å­—ç¬¦ä¸²ç±»å‹"><a href="#2-1-2ã€å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="2.1.2ã€å­—ç¬¦ä¸²ç±»å‹"></a>2.1.2ã€å­—ç¬¦ä¸²ç±»å‹</h4><p>1ï¼‰ã€å­—ç¬¦ä¸²ç±»å‹ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·åŒ…è£¹å­—ç¬¦ä¸²éƒ½å¯ä»¥</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span> s1 = <span class="hljs-string">&#x27;Hello&#x27;</span>;<br><span class="hljs-keyword">var</span> s2 = <span class="hljs-string">&quot;erdai&quot;</span>;<br></code></pre></td></tr></table></figure><h5 id="2-1-2-1ã€å­—ç¬¦ä¸²å†…åµŒè¡¨è¾¾å¼"><a href="#2-1-2-1ã€å­—ç¬¦ä¸²å†…åµŒè¡¨è¾¾å¼" class="headerlink" title="2.1.2.1ã€å­—ç¬¦ä¸²å†…åµŒè¡¨è¾¾å¼"></a>2.1.2.1ã€å­—ç¬¦ä¸²å†…åµŒè¡¨è¾¾å¼</h5><p>1ï¼‰ã€Dart æ”¯æŒåœ¨å­—ç¬¦ä¸²ä¸­å†…åµŒå˜é‡ï¼Œæˆ–è€…å¹²è„†å†…åµŒè¡¨è¾¾å¼</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// å†…åµŒå˜é‡</span><br><span class="hljs-keyword">var</span> s3 = <span class="hljs-string">&#x27;ä½ å¥½: <span class="hljs-subst">$s2</span>&#x27;</span>;<br><br><span class="hljs-comment">// å†…åµŒè¡¨è¾¾å¼</span><br><span class="hljs-keyword">var</span> s4 = <span class="hljs-string">&quot;è½¬å¤§å†™ï¼š<span class="hljs-subst">$&#123;s2.toUpperCase()&#125;</span>&quot;</span>;<br></code></pre></td></tr></table></figure><h5 id="2-1-2-2ã€å­—ç¬¦ä¸²ç›¸åŠ ï¼ˆè¿æ¥ï¼‰"><a href="#2-1-2-2ã€å­—ç¬¦ä¸²ç›¸åŠ ï¼ˆè¿æ¥ï¼‰" class="headerlink" title="2.1.2.2ã€å­—ç¬¦ä¸²ç›¸åŠ ï¼ˆè¿æ¥ï¼‰"></a>2.1.2.2ã€å­—ç¬¦ä¸²ç›¸åŠ ï¼ˆè¿æ¥ï¼‰</h5><p>å­—ç¬¦ä¸²ç›¸åŠ ï¼Œå°±æ˜¯å°†ä¸¤ä¸ªå­—ç¬¦ä¸²è¿æ¥èµ·æ¥ï¼Œdart è¯­è¨€ä¸­æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼å®ç°å­—ç¬¦ä¸²è¿æ¥ï¼š</p><p>1ï¼‰ã€è¿ç»­çš„å­—é¢å­—ç¬¦ä¸²å®šä¹‰ï¼Œé»˜è®¤ä¼šå°†å­—ç¬¦ä¸²è¿æ¥èµ·æ¥</p><p>2ï¼‰ã€ä½¿ç”¨ + åŠ å·è¿æ¥å­—ç¬¦ä¸²</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">void</span> main()&#123;<br>  <span class="hljs-comment">//1ã€è¿ç»­çš„å­—é¢å­—ç¬¦ä¸²å®šä¹‰ï¼Œé»˜è®¤ä¼šå°†å­—ç¬¦ä¸²è¿æ¥èµ·æ¥</span><br>  <span class="hljs-built_in">var</span> str1 = <span class="hljs-string">&quot;erdai&quot;</span> <span class="hljs-string">&quot;666&quot;</span>;<br>  <span class="hljs-comment">//2ã€ä½¿ç”¨ + åŠ å·è¿æ¥å­—ç¬¦ä¸²</span><br>  <span class="hljs-built_in">var</span> str2 = <span class="hljs-string">&quot;erdai&quot;</span> + <span class="hljs-string">&quot;666&quot;</span>;<br>  <span class="hljs-keyword">print</span>(str1);<br>  <span class="hljs-keyword">print</span>(str2);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>erdai666<br>erdai666<br></code></pre></td></tr></table></figure><h5 id="2-1-2-3ã€å¤šè¡Œå­—ç¬¦ä¸²å®šä¹‰"><a href="#2-1-2-3ã€å¤šè¡Œå­—ç¬¦ä¸²å®šä¹‰" class="headerlink" title="2.1.2.3ã€å¤šè¡Œå­—ç¬¦ä¸²å®šä¹‰"></a>2.1.2.3ã€å¤šè¡Œå­—ç¬¦ä¸²å®šä¹‰</h5><p>1ï¼‰ã€ä½¿ç”¨ <strong>â€˜â€™â€™</strong> ä¸‰å¼•å·å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ä¿ç•™å­—ç¬¦ä¸²çš„æ¢è¡Œç¬¦</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">void main() &#123;<br>  var s1 = <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">è¿™æ˜¯ç¬¬ä¸€è¡Œå­—ç¬¦ä¸²ã€‚</span><br><span class="hljs-string">è¿™æ˜¯ç¬¬äºŒè¡Œå­—ç¬¦ä¸²ã€‚</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span>;<br>  print(s1);<br>&#125;<br><br><span class="hljs-regexp">//</span>æ‰“å°ç»“æœ<br>è¿™æ˜¯ç¬¬ä¸€è¡Œå­—ç¬¦ä¸²ã€‚<br>è¿™æ˜¯ç¬¬äºŒè¡Œå­—ç¬¦ä¸²ã€‚<br></code></pre></td></tr></table></figure><h4 id="2-1-3ã€å¸ƒå°”ç±»å‹"><a href="#2-1-3ã€å¸ƒå°”ç±»å‹" class="headerlink" title="2.1.3ã€å¸ƒå°”ç±»å‹"></a>2.1.3ã€å¸ƒå°”ç±»å‹</h4><p>å¸ƒå°”ç±»å‹å°±ä¸¤ç§å€¼ï¼štrue æˆ–è€… falseï¼Œ åˆ†åˆ«è¡¨ç¤ºçœŸå’Œå‡</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">var isOk <span class="hljs-operator">=</span> false<span class="hljs-comment">;</span><br>bool status <span class="hljs-operator">=</span> true<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><h4 id="2-1-4ã€æšä¸¾ç±»å‹"><a href="#2-1-4ã€æšä¸¾ç±»å‹" class="headerlink" title="2.1.4ã€æšä¸¾ç±»å‹"></a>2.1.4ã€æšä¸¾ç±»å‹</h4><p>1ï¼‰ã€æšä¸¾ç±»å‹å…¶å®å°±æ˜¯ä¸€ç»„å¸¸é‡çš„é›†åˆï¼Œéƒ½æ˜¯åªè¯»çš„</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-comment">// ä½¿ç”¨ enum å…³é”®å­—ï¼Œå®šä¹‰ Color æšä¸¾ç±»å‹ï¼ŒColor åŒ…å«äº†3ä¸ªå¸¸é‡ redã€greenã€blue</span><br><span class="hljs-keyword">enum</span> Color &#123; <span class="hljs-built_in">red</span>, <span class="hljs-built_in">green</span>, <span class="hljs-built_in">blue</span> &#125;<br><br><span class="hljs-comment">// è¯»å– Color.blue æšä¸¾å¸¸é‡</span><br>var aColor = Color.<span class="hljs-property">blue</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨ switch è¯­å¥åˆ¤æ–­ aColor å˜é‡å€¼</span><br><span class="hljs-title function_">switch</span> (aColor) &#123;<br>  <span class="hljs-keyword">case</span> Color.<span class="hljs-property">red</span>:  <span class="hljs-comment">// ä½¿ç”¨æšä¸¾å¸¸é‡ä½œä¸ºæ£€æµ‹æ¡ä»¶ï¼ŒaColor == Color.red åˆ™æˆç«‹ã€‚</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Red as roses!&#x27;</span>);<br>    <span class="hljs-keyword">break</span>;<br>  <span class="hljs-keyword">case</span> Color.<span class="hljs-property">green</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Green as grass!&#x27;</span>);<br>    <span class="hljs-keyword">break</span>;<br>  <span class="hljs-keyword">default</span>: <span class="hljs-comment">// é»˜è®¤æ¡ä»¶</span><br>    <span class="hljs-built_in">print</span>(aColor); <span class="hljs-comment">// &#x27;Color.blue&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure><p>2ï¼‰ã€æšä¸¾å¸¸é‡éƒ½æœ‰ä¸€ä¸ªä» 0 å¼€å§‹æ•°å­—ç¼–å·ï¼Œç¬¬ä¸€ä¸ªå¸¸é‡æ˜¯ 0ï¼Œç¬¬äºŒä¸ªæ˜¯ 1ï¼Œä»¥æ­¤ç±»æ¨</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-keyword">void</span> main() &#123;<br>  <span class="hljs-keyword">print</span>(Color.green.<span class="hljs-keyword">index</span>);<br>  <span class="hljs-keyword">print</span>(Color.blue.<span class="hljs-keyword">index</span>);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h3 id="2-2ã€è¿ç®—ç¬¦"><a href="#2-2ã€è¿ç®—ç¬¦" class="headerlink" title="2.2ã€è¿ç®—ç¬¦"></a>2.2ã€è¿ç®—ç¬¦</h3><p>è¿ç®—ç¬¦è¿™ä¸€å—ï¼Œé™¤äº†çº§è”è°ƒç”¨æ˜¯ Java å’Œ Kotlin æ‰€æ²¡æœ‰çš„ï¼Œå…¶ä»–è¿ç®—ç¬¦åŸºæœ¬ç±»ä¼¼</p><h4 id="2-2-1ã€çº§è”è°ƒç”¨"><a href="#2-2-1ã€çº§è”è°ƒç”¨" class="headerlink" title="2.2.1ã€çº§è”è°ƒç”¨"></a>2.2.1ã€çº§è”è°ƒç”¨</h4><p>1ï¼‰ã€çº§è”è°ƒç”¨å°±æ˜¯é€šè¿‡ <strong>.. (ä¸¤ä¸ªè¿ç»­çš„ç‚¹)</strong> è¿ç»­è°ƒç”¨å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs awk">querySelector(<span class="hljs-string">&#x27;#confirm&#x27;</span>) <span class="hljs-regexp">//</span> é€šè¿‡ querySelector æŸ¥è¯¢è·å¾—ä¸€ä¸ªå¯¹è±¡<br>  ..text = <span class="hljs-string">&#x27;Confirm&#x27;</span> <span class="hljs-regexp">//</span> è®¾ç½®å¯¹è±¡ text å±æ€§<br>  ..classes.add(<span class="hljs-string">&#x27;important&#x27;</span>);  <span class="hljs-regexp">//</span> è°ƒç”¨å¯¹è±¡çš„ classes å±æ€§çš„ add å‡½æ•°<br><br><span class="hljs-regexp">//</span>ç­‰ä»·å¦‚ä¸‹ä»£ç <br><br><span class="hljs-regexp">//</span> é€šè¿‡ querySelector æŸ¥è¯¢è·å¾—ä¸€ä¸ªå¯¹è±¡<br>var button = querySelector(<span class="hljs-string">&#x27;#confirm&#x27;</span>);<br><span class="hljs-regexp">//</span> è®¾ç½®å¯¹è±¡ text å±æ€§<br>button.text = <span class="hljs-string">&#x27;Confirm&#x27;</span>;<br><span class="hljs-regexp">//</span> è°ƒç”¨å¯¹è±¡çš„ classes å±æ€§çš„ add å‡½æ•°<br>button.classes.add(<span class="hljs-string">&#x27;important&#x27;</span>);<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šå¤§å®¶å…ˆå…³æ³¨è¯­æ³•å³å¯</p><h4 id="2-2-2ã€èµ‹å€¼è¿ç®—ç¬¦"><a href="#2-2-2ã€èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="2.2.2ã€èµ‹å€¼è¿ç®—ç¬¦"></a>2.2.2ã€èµ‹å€¼è¿ç®—ç¬¦</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€ä½¿ç”¨ = è¿›è¡Œèµ‹å€¼<br>a = <span class="hljs-number">100</span>;<br><br><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€å¤åˆèµ‹å€¼è¿ç®—ç¬¦<br>a *= <span class="hljs-number">3</span>; <span class="hljs-regexp">//</span> ç­‰ä»·äº a = a * <span class="hljs-number">3</span><br>a -= <span class="hljs-number">3</span>; <span class="hljs-regexp">//</span> ç­‰ä»·äº a = a - <span class="hljs-number">3</span><br>a += <span class="hljs-number">3</span>; <span class="hljs-regexp">//</span> ç­‰ä»·äº a = a + <span class="hljs-number">3</span><br>a <span class="hljs-regexp">/= 3; /</span><span class="hljs-regexp">/ ç­‰ä»·äº a = a /</span> <span class="hljs-number">3</span><br>a %= <span class="hljs-number">3</span>; <span class="hljs-regexp">//</span> ç­‰ä»·äº a = a % <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h4 id="2-2-3ã€ç®—æ•°è¿ç®—ç¬¦"><a href="#2-2-3ã€ç®—æ•°è¿ç®—ç¬¦" class="headerlink" title="2.2.3ã€ç®—æ•°è¿ç®—ç¬¦"></a>2.2.3ã€ç®—æ•°è¿ç®—ç¬¦</h4><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>+</td><td>åŠ </td></tr><tr><td>-</td><td>å‡</td></tr><tr><td>-expr</td><td>ç®—æ•°å–å</td></tr><tr><td>*</td><td>ä¹˜</td></tr><tr><td>&#x2F;</td><td>é™¤</td></tr><tr><td>~&#x2F;</td><td>é™¤æ³•ï¼Œç»“æœå–æ•´</td></tr><tr><td>%</td><td>æ±‚ä½™</td></tr><tr><td>++</td><td>æ”¯æŒå‰ç½®è‡ªå¢å’Œåç½®è‡ªå¢</td></tr><tr><td>â€“</td><td>æ”¯æŒå‰ç½®è‡ªå‡å’Œåç½®è‡ªå‡</td></tr></tbody></table><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> a = <span class="hljs-number">5</span><br>var a = <span class="hljs-number">2</span> + <span class="hljs-number">3</span>;<br><span class="hljs-regexp">//</span> a1 = -<span class="hljs-number">1</span><br>var a1 = <span class="hljs-number">2</span> - <span class="hljs-number">3</span>;<br><span class="hljs-regexp">//</span> a2 = <span class="hljs-number">6</span><br>var a2 = <span class="hljs-number">2</span> * <span class="hljs-number">3</span>;<br><span class="hljs-regexp">//</span> a3 = <span class="hljs-number">2.5</span><br>var a3 = <span class="hljs-number">5</span> / <span class="hljs-number">2</span>;<br><span class="hljs-regexp">//</span> æ•´é™¤ï¼Œa4 = <span class="hljs-number">2</span><br>var a4 = <span class="hljs-number">5</span> ~/ <span class="hljs-number">2</span>;<br><span class="hljs-regexp">//</span> æ±‚ä½™æ•° a5 = <span class="hljs-number">1</span><br>var a5 = <span class="hljs-number">5</span> % <span class="hljs-number">2</span>;<br><span class="hljs-regexp">//</span>a++ å’Œ ++a åŒºåˆ«ï¼ša++ å…ˆç”¨åœ¨åŠ ï¼Œ++aå…ˆåŠ åœ¨ç”¨<br>a++; <span class="hljs-regexp">//</span> ç›¸å½“äº a = a + <span class="hljs-number">1</span><br>++a; <br>a--; <span class="hljs-regexp">//</span> ç›¸å½“äº a = a - <span class="hljs-number">1</span><br>--a;<br></code></pre></td></tr></table></figure><h4 id="2-2-4ã€å…³ç³»è¿ç®—ç¬¦"><a href="#2-2-4ã€å…³ç³»è¿ç®—ç¬¦" class="headerlink" title="2.2.4ã€å…³ç³»è¿ç®—ç¬¦"></a>2.2.4ã€å…³ç³»è¿ç®—ç¬¦</h4><p>å…³ç³»è¿è¿ç®—ç¬¦å¸¸ç”¨äºæ¡ä»¶è¡¨è¾¾å¼ä¸­ï¼Œåˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹</p><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&#x3D;&#x3D;</td><td>åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰</td></tr><tr><td>!&#x3D;</td><td>åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ä¸ç›¸ç­‰</td></tr><tr><td>&gt;</td><td>å¤§äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&gt;&#x3D;</td><td>å¤§äºç­‰äº</td></tr><tr><td>&lt;&#x3D;</td><td>å°äºç­‰äº</td></tr></tbody></table><h4 id="2-2-5ã€ç±»å‹æµ‹è¯•è¿ç®—ç¬¦"><a href="#2-2-5ã€ç±»å‹æµ‹è¯•è¿ç®—ç¬¦" class="headerlink" title="2.2.5ã€ç±»å‹æµ‹è¯•è¿ç®—ç¬¦"></a>2.2.5ã€ç±»å‹æµ‹è¯•è¿ç®—ç¬¦</h4><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>as</td><td>ç”¨äºç±»å‹è½¬æ¢ï¼Œå°†ä¸€ä¸ªå¯¹è±¡ç±»å‹è½¬æ¢æˆå¦å¤–ä¸€ç§å¯¹è±¡ç±»å‹ï¼Œä¸€èˆ¬ç”¨äºå­ç±»å¯¹è±¡è½¬æ¢æˆçˆ¶ç±»å¯¹è±¡ã€‚</td></tr><tr><td>is</td><td>ç”¨äºæ£€æµ‹ä¸€ä¸ªå˜é‡æ˜¯å¦å±äºæŸç§å¯¹è±¡ç±»å‹</td></tr><tr><td>is!</td><td>ç”¨äºæ£€æµ‹ä¸€ä¸ªå˜é‡ä¸å±äºæŸç§å¯¹è±¡ç±»å‹</td></tr></tbody></table><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> å¦‚æœ emp å˜é‡æ˜¯ Person ç±»å‹åˆ™æ¡ä»¶ä¸º true<br><span class="hljs-keyword">if</span> (emp is Person) &#123;<br>  <span class="hljs-regexp">//</span> å¿½ç•¥ä»£ç <br>&#125;<br><br><span class="hljs-regexp">//</span> æ°¸è¿œè¿”å› true, å› ä¸ºæ‰€æœ‰ç±»å‹éƒ½ç»§æ‰¿äº† Objectã€‚<br><span class="hljs-keyword">if</span> (emp is Object) &#123;<br>    <span class="hljs-regexp">//</span> å¿½ç•¥ä»£ç <br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœå˜é‡æ˜¯æŸä¸ªç±»çš„å­ç±»çš„å®ä¾‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡ä¹Ÿå±äºçˆ¶ç±»ç±»å‹ï¼Œis æ¡ä»¶è¿”å› true</p><h4 id="2-2-6ã€é€»è¾‘è¿ç®—ç¬¦"><a href="#2-2-6ã€é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="2.2.6ã€é€»è¾‘è¿ç®—ç¬¦"></a>2.2.6ã€é€»è¾‘è¿ç®—ç¬¦</h4><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>!expr</td><td>è¡¨è¾¾å¼æ¡ä»¶å–å</td></tr><tr><td>||</td><td>é€»è¾‘æˆ–</td></tr><tr><td>&amp;&amp;</td><td>é€»è¾‘ä¸</td></tr></tbody></table><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>å¸¸ç”¨äºæ¡ä»¶è¯­å¥ç»„åˆè¡¨è¾¾å¼<br><span class="hljs-keyword">if</span> (!done &amp;&amp; (col == <span class="hljs-number">0</span> || col == <span class="hljs-number">3</span>)) &#123;<br>  <span class="hljs-regexp">//</span>...<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-2-7ã€ä½è¿ç®—ç¬¦"><a href="#2-2-7ã€ä½è¿ç®—ç¬¦" class="headerlink" title="2.2.7ã€ä½è¿ç®—ç¬¦"></a>2.2.7ã€ä½è¿ç®—ç¬¦</h4><p>äºŒè¿›åˆ¶ä½è¿ç®—ç¬¦</p><table><thead><tr><th>è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&amp;</td><td>ä¸</td></tr><tr><td>|</td><td>æˆ–</td></tr><tr><td>^</td><td>å¼‚æˆ–</td></tr><tr><td>~expr</td><td>æŒ‰ä½å–å</td></tr><tr><td>&lt;&lt;</td><td>å·¦ç§»</td></tr><tr><td>&gt;&gt;</td><td>å³ç§»</td></tr></tbody></table><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tap">// a = 256<br>var a =<span class="hljs-number"> 1 </span>&lt;&lt; 8; //<span class="hljs-number"> 1 </span>å·¦ç§»<span class="hljs-number"> 8 </span>ä½ç›¸å½“äºï¼š1 *<span class="hljs-number"> 2 </span>çš„<span class="hljs-number"> 8 </span>æ¬¡æ–¹<br></code></pre></td></tr></table></figure><h4 id="2-2-8ã€æ¡ä»¶è¿ç®—ç¬¦"><a href="#2-2-8ã€æ¡ä»¶è¿ç®—ç¬¦" class="headerlink" title="2.2.8ã€æ¡ä»¶è¿ç®—ç¬¦"></a>2.2.8ã€æ¡ä»¶è¿ç®—ç¬¦</h4><p>Dart ä¸­æœ‰ä¸¤ç§æ¡ä»¶è¿ç®—ç¬¦ï¼š</p><p>1ã€è¯­æ³•è§„åˆ™ï¼šcondition ? expr1 : expr2 ï¼Œç±»ä¼¼ Java ä¸‰ç›®è¿ç®—ç¬¦ã€‚condition è¡¨è¾¾å¼ä¸ºçœŸï¼Œåˆ™æ‰§è¡Œå¹¶è¿”å› expr1 çš„å€¼ï¼Œ å¦åˆ™æ‰§è¡Œ expr2</p><p>2ã€è¯­æ³•è§„åˆ™ï¼šexpr1 ?? expr2 ï¼Œç±»ä¼¼ Kotlin çš„ ?: ã€‚å¦‚æœ expr1 ä¸ç­‰äº null, åˆ™æ‰§è¡Œ expr1 å¹¶è¿”å› expr1 çš„å€¼ï¼Œå¦åˆ™æ‰§è¡Œå¹¶è¿”å› expr2 çš„å€¼</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> å¦‚æœisPublicä¸ºçœŸï¼Œvisibility = <span class="hljs-string">&#x27;public&#x27;</span> å¦åˆ™ visibility = <span class="hljs-string">&#x27;private&#x27;</span><br>var visibility = isPublic ? <span class="hljs-string">&#x27;public&#x27;</span> : <span class="hljs-string">&#x27;private&#x27;</span>;<br><br><span class="hljs-regexp">//</span> è¿™ç§è¯­æ³•åœ¨å¤„ç†å‚æ•°é»˜è®¤å€¼éå¸¸æœ‰ç”¨ã€‚<br><span class="hljs-regexp">//</span> å¦‚æœnameä¸ç­‰äºnull, åˆ™payerName = name å¦åˆ™payerName = <span class="hljs-string">&#x27;Guest&#x27;</span><br>String payerName = name ?? <span class="hljs-string">&#x27;Guest&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="ä¸‰ã€æ•°ç»„å’Œé›†åˆ"><a href="#ä¸‰ã€æ•°ç»„å’Œé›†åˆ" class="headerlink" title="ä¸‰ã€æ•°ç»„å’Œé›†åˆ"></a>ä¸‰ã€æ•°ç»„å’Œé›†åˆ</h2><h3 id="3-1ã€List-æ•°ç»„"><a href="#3-1ã€List-æ•°ç»„" class="headerlink" title="3.1ã€List æ•°ç»„"></a>3.1ã€List æ•°ç»„</h3><h4 id="3-1-1ã€å®šä¹‰"><a href="#3-1-1ã€å®šä¹‰" class="headerlink" title="3.1.1ã€å®šä¹‰"></a>3.1.1ã€å®šä¹‰</h4><p>1ï¼‰ã€ä¸ Java çš„æ•°ç»„ç±»å‹ä¸åŒï¼ŒDart ä¸­çš„æ•°ç»„ç±»å‹å°±æ˜¯ Listï¼Œå®ƒæ˜¯æ³›å‹ç±»å‹æ•°æ®ç»“æ„ï¼Œæ”¯æŒä»»æ„æ•°æ®ç±»å‹çš„æ•°ç»„</p><p>2ï¼‰ã€List æ•°ç»„å®šä¹‰çš„å…ƒç´ æœ‰åºå¯é‡å¤ï¼Œç±»ä¼¼ Java çš„ List é›†åˆ</p><p>3ï¼‰ã€Dart ä¸­ List æ•°ç»„ä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p><p>1ã€å¯å˜é•¿åº¦æ•°ç»„</p><p>2ã€å›ºå®šé•¿åº¦æ•°ç»„</p><p>ä¸ç®¡æ˜¯å“ªç§ç±»å‹çš„æ•°ç»„ï¼Œä»–ä»¬çš„æ“ä½œæ–¹å¼æ˜¯ä¸€æ ·çš„</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€å¯å˜é•¿åº¦æ•°ç»„<br><span class="hljs-regexp">//</span>å®šä¹‰ä¸€ä¸ª int ç±»å‹çš„å¯å˜æ•°ç»„<br>List&lt;int&gt; a = []; <span class="hljs-regexp">//</span>ç­‰ä»·ï¼švar a = &lt;int&gt;[];<br><br><span class="hljs-regexp">//</span>å®šä¹‰ä¸€ä¸ª String ç±»å‹çš„å¯å˜æ•°ç»„<br>var strs = &lt;String&gt;[]; <span class="hljs-regexp">//</span>ç­‰ä»· List&lt;String&gt; strs = [];<br><br><span class="hljs-regexp">//</span>å¦‚ä¸‹è¿™ç§å®šä¹‰æ–¹å¼ï¼Œç¼–è¯‘å™¨ä¼šç»™æˆ‘ä»¬æ¨æ–­å‡ºæ˜¯å­—ç¬¦ä¸²ç±»å‹çš„å¯å˜æ•°ç»„<br>var strs = [<span class="hljs-string">&#x27;å­—ç¬¦ä¸²&#x27;</span>];<br></code></pre></td></tr></table></figure><p>1ã€ç†Ÿæ‚‰ Java çš„äººéƒ½çŸ¥é“ï¼Œä¸Šè¿°è¿™ç§å®šä¹‰å°±æ˜¯æ³›å‹ç±»å‹çš„è¯­æ³•ï¼Œ&lt;&gt; ç¬¦å·å®šä¹‰çš„æ˜¯ List çš„å…ƒç´ ç±»å‹</p><p>2ã€ä¸Šè¿°å®šä¹‰æ•°ç»„æˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šæ•°ç»„å¤§å°ï¼Œå› æ­¤ä»–ä»¬å®šä¹‰çš„éƒ½æ˜¯å¯å˜æ•°ç»„ï¼Œå¯å˜æ•°ç»„å¯ä»¥å¾€æ•°ç»„ä¸­æ’å…¥ä¸é™åˆ¶æ•°é‡çš„å…ƒç´  ï¼ˆåªè¦æ²¡è¶…è¿‡å†…å­˜é™åˆ¶ï¼‰</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€å›ºå®šé•¿åº¦æ•°ç»„<br><span class="hljs-regexp">//</span>å®šä¹‰ä¸€ä¸ªå›ºå®šé•¿åº¦ä¸º <span class="hljs-number">3</span> ï¼Œç±»å‹ä¸º int çš„æ•°ç»„<br>var list = List.filled(<span class="hljs-number">3</span>,<span class="hljs-number">0</span>);<br><br><span class="hljs-regexp">//</span>æµ‹è¯•ä¸€<br>void main() &#123;<br>  <span class="hljs-regexp">//</span>å®šä¹‰ä¸€ä¸ªå›ºå®šé•¿åº¦ä¸º <span class="hljs-number">3</span> ï¼Œç±»å‹ä¸º int çš„æ•°ç»„<br>  var list = List.filled(<span class="hljs-number">3</span>,<span class="hljs-number">0</span>);<br>  list[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>  list[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;<br>  list[<span class="hljs-number">2</span>] = <span class="hljs-number">3</span>;<br>  <span class="hljs-regexp">//</span>æ­¤æ—¶å¦‚æœæˆ‘ä»¬æ·»åŠ ç¬¬ <span class="hljs-number">4</span> ä¸ªå…ƒç´ ï¼Œåˆ™ä¼šæŠ¥æ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸<br>  <span class="hljs-regexp">//</span>list[<span class="hljs-number">3</span>] = <span class="hljs-number">4</span>; <span class="hljs-regexp">//</span>æ•°ç»„ä¸‹æ ‡è¶Šç•Œ<br>  <span class="hljs-keyword">for</span> (var value <span class="hljs-keyword">in</span> list) &#123;<br>    print(value);<br>  &#125;<br>&#125;<br><span class="hljs-regexp">//</span>æ‰“å°ç»“æœ<br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br>  <br><span class="hljs-regexp">//</span>æµ‹è¯•äºŒï¼š<br>void main() &#123;<br>  <span class="hljs-regexp">//</span>å®šä¹‰ä¸€ä¸ªå›ºå®šé•¿åº¦ä¸º <span class="hljs-number">2</span> ï¼Œç±»å‹ä¸º String çš„æ•°ç»„<br>  var list = List.filled(<span class="hljs-number">2</span>,<span class="hljs-string">&quot;&quot;</span>);<br>  list[<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;erdai&quot;</span>;<br>  list[<span class="hljs-number">1</span>] = <span class="hljs-string">&quot;666&quot;</span>;<br><br>  <span class="hljs-keyword">for</span> (var value <span class="hljs-keyword">in</span> list) &#123;<br>    print(value);<br>  &#125;<br>&#125;<br><span class="hljs-regexp">//</span>æ‰“å°ç»“æœ<br>erdai<br><span class="hljs-number">666</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼š</strong></p><p>1ã€ä¸Šè¿° filled æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªè¡¨ç¤ºæ•°ç»„é•¿åº¦ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºå­˜æ”¾çš„å…ƒç´ ç±»å‹åˆå§‹å€¼</p><p>2ã€å›ºå®šé•¿åº¦çš„æ•°ç»„ï¼Œåªèƒ½é€šè¿‡æ•°ç»„ä¸‹æ ‡çš„æ–¹å¼è¯»å†™æ•°ç»„ï¼Œä¸èƒ½ä½¿ç”¨ addï¼Œinsert æ–¹æ³•ä¿®æ”¹æ•°ç»„ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><h4 id="3-1-2ã€ä¼¸å±•è¿ç®—ç¬¦"><a href="#3-1-2ã€ä¼¸å±•è¿ç®—ç¬¦" class="headerlink" title="3.1.2ã€ä¼¸å±•è¿ç®—ç¬¦"></a>3.1.2ã€ä¼¸å±•è¿ç®—ç¬¦</h4><p>å¦‚æœæˆ‘ä»¬æƒ³å°†ä¸€ä¸ª List æ•°ç»„çš„å…ƒç´ å¡«å……åˆ°å¦å¤–ä¸€ä¸ªæ•°ç»„å»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¼¸å±•è¿ç®—ç¬¦ <strong>â€¦</strong> ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs actionscript"><span class="hljs-keyword">var</span> list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];<br><span class="hljs-keyword">var</span> list2 = [<span class="hljs-number">0</span>, ...list]; <span class="hljs-comment">// å°† list æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ä¸€ä¸ªä¸ªå±•å¼€æ¥ï¼Œæ’å…¥åˆ° list2 ä¸­</span><br><span class="hljs-comment">// ç­‰ä»·ä»£ç  var list2 = [0, 1, 2, 3]</span><br></code></pre></td></tr></table></figure><h4 id="3-1-3ã€å¸¸ç”¨-Api-ä»‹ç»"><a href="#3-1-3ã€å¸¸ç”¨-Api-ä»‹ç»" class="headerlink" title="3.1.3ã€å¸¸ç”¨ Api ä»‹ç»"></a>3.1.3ã€å¸¸ç”¨ Api ä»‹ç»</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€é¦–å…ˆå®šä¹‰ä¸€ä¸ª int ç±»å‹çš„å¯å˜æ•°ç»„<br>var a = &lt;int&gt;[];<br><br><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€å¾€æ•°ç»„å°¾å·´æ·»åŠ å…ƒç´  a:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>a.add(<span class="hljs-number">1</span>);<br>a.add(<span class="hljs-number">2</span>);<br>a.add(<span class="hljs-number">3</span>);<br><br><span class="hljs-regexp">//</span><span class="hljs-number">3</span>ã€ä¿®æ”¹ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ a:[<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>a[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br><br><span class="hljs-regexp">//</span><span class="hljs-number">4</span>ã€åœ¨æ•°ç»„ <span class="hljs-number">0</span> ä½ç½®ï¼Œæ’å…¥ <span class="hljs-number">100</span> a:[<span class="hljs-number">100</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]<br>a.insert(<span class="hljs-number">0</span>,<span class="hljs-number">100</span>);<br><br><span class="hljs-regexp">//</span><span class="hljs-number">5</span>ã€åˆ é™¤ä¸€ä¸ªå…ƒç´  a:[<span class="hljs-number">100</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>]<br><span class="hljs-regexp">//</span>æ ¹æ®å…ƒç´ åˆ é™¤<br>a.remove(<span class="hljs-number">3</span>);<br><br><span class="hljs-regexp">//</span>æ ¹æ®ä¸‹æ ‡åˆ é™¤ a:[<span class="hljs-number">100</span>,<span class="hljs-number">2</span>]<br>a.removeAt(<span class="hljs-number">1</span>);<br><br><span class="hljs-regexp">//</span><span class="hljs-number">6</span>ã€è·å–æ•°ç»„å¤§å°<br>print(a.length); <span class="hljs-regexp">//</span>æ‰“å°ï¼š<span class="hljs-number">2</span><br>  <br><span class="hljs-regexp">//</span><span class="hljs-number">7</span>ã€æ•°ç»„æ’åºï¼šé»˜è®¤æ•°ç»„ä»å°åˆ°å¤§æ’åº a:[<span class="hljs-number">2</span>,<span class="hljs-number">100</span>]<br>a.sort();<br><br><span class="hljs-regexp">//</span><span class="hljs-number">8</span>ã€åˆ¤æ–­æ•°ç»„æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ <br>a.contains(<span class="hljs-number">2</span>); <span class="hljs-regexp">//</span> true<br><br><span class="hljs-regexp">//</span><span class="hljs-number">9</span>ã€æ¸…ç©º Listï¼Œåˆ é™¤æ‰€æœ‰æ•°æ® a:[]<br>a.clear();<br></code></pre></td></tr></table></figure><h3 id="3-2ã€Set-é›†åˆ"><a href="#3-2ã€Set-é›†åˆ" class="headerlink" title="3.2ã€Set é›†åˆ"></a>3.2ã€Set é›†åˆ</h3><h4 id="3-2-1ã€å®šä¹‰"><a href="#3-2-1ã€å®šä¹‰" class="headerlink" title="3.2.1ã€å®šä¹‰"></a>3.2.1ã€å®šä¹‰</h4><p>1ï¼‰ã€Dart ä¸­çš„ Set æ˜¯æ— åºé›†åˆç±»å‹ï¼ŒSet è·Ÿ List éƒ½èƒ½ä¿å­˜ä¸€ç»„æ•°æ®ï¼ŒåŒºåˆ«å°±æ˜¯ Set çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå’Œ Java çš„ Set é›†åˆç±»ä¼¼</p><p>2ï¼‰ã€Set æ”¯æŒä»»æ„ç±»å‹æ•°æ®ï¼Œä¸»è¦æœ‰ä¸‹é¢ä¸‰ç§æ–¹å¼åˆå§‹åŒ–ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cmake">//<span class="hljs-number">1</span>ã€æ–¹å¼ä¸€ï¼šä½¿ç”¨ &#123;&#125; å®šä¹‰ä¸€ä¸ª <span class="hljs-keyword">String</span> ç±»å‹çš„ <span class="hljs-keyword">Set</span><br>var strSet = &#123;<span class="hljs-string">&quot;str&quot;</span>&#125;;<br><br>//<span class="hljs-number">2</span>ã€æ–¹å¼äºŒï¼šå®šä¹‰ä¸€ä¸ªç©ºçš„ <span class="hljs-keyword">String</span> ç±»å‹çš„ <span class="hljs-keyword">Set</span><br>var names = &lt;<span class="hljs-keyword">String</span>&gt;&#123;&#125;;<br><br>//<span class="hljs-number">3</span>ã€æ–¹å¼ä¸‰ï¼šé€šè¿‡ <span class="hljs-keyword">Set</span> å¯¹è±¡å®šä¹‰ä¸€ä¸ªå¯ä»¥ä¿å­˜ <span class="hljs-keyword">String</span> ç±»å‹çš„ <span class="hljs-keyword">Set</span><br>var names = <span class="hljs-keyword">Set</span>&lt;<span class="hljs-keyword">String</span>&gt;();<br></code></pre></td></tr></table></figure><h4 id="3-2-2ã€å¸¸ç”¨-Api-ä»‹ç»"><a href="#3-2-2ã€å¸¸ç”¨-Api-ä»‹ç»" class="headerlink" title="3.2.2ã€å¸¸ç”¨ Api ä»‹ç»"></a>3.2.2ã€å¸¸ç”¨ Api ä»‹ç»</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€é¦–å…ˆå®šä¹‰ä¸€ä¸ª set é›†åˆ<br>var names = &lt;String&gt;&#123;&#125;;<br><br><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€æ·»åŠ ä¸€ä¸ªå…ƒç´  names:&#123;<span class="hljs-string">&quot;Dart&quot;</span>&#125;<br>names.add(<span class="hljs-string">&quot;Dart&quot;</span>);<br><br><span class="hljs-regexp">//</span><span class="hljs-number">3</span>ã€æ·»åŠ ä¸€ä¸ª List æ•°ç»„ names:&#123;<span class="hljs-string">&quot;Dart&quot;</span>,<span class="hljs-string">&quot;Flutter&quot;</span>&#125;<br>var titles = [<span class="hljs-string">&quot;Flutter&quot;</span>];<br>names.addAll(titles);<br><br><span class="hljs-regexp">//</span><span class="hljs-number">4</span>ã€è·å– Set å¤§å°<br>print(names.length); <span class="hljs-regexp">//</span>æ‰“å°ï¼š<span class="hljs-number">2</span><br><br><span class="hljs-regexp">//</span><span class="hljs-number">5</span>ã€åˆ é™¤å…ƒç´ <br><span class="hljs-regexp">//</span>æ ¹æ®å…ƒç´ è¿›è¡Œåˆ é™¤ names:&#123;<span class="hljs-string">&quot;Dart&quot;</span>&#125;<br>names.remove(<span class="hljs-string">&quot;Flutter&quot;</span>);<br><br><span class="hljs-regexp">//</span><span class="hljs-number">6</span>ã€åˆ¤æ–­ Set æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ <br>names.contains(<span class="hljs-string">&quot;Dart&quot;</span>); <span class="hljs-regexp">//</span>true<br><br><span class="hljs-regexp">//</span><span class="hljs-number">7</span>ã€æ¸…ç©º Set æ‰€æœ‰å…ƒç´  names:&#123;&#125;<br>names.clear();<br></code></pre></td></tr></table></figure><h3 id="3-3ã€Map-é›†åˆ"><a href="#3-3ã€Map-é›†åˆ" class="headerlink" title="3.3ã€Map é›†åˆ"></a>3.3ã€Map é›†åˆ</h3><h4 id="3-3-1ã€å®šä¹‰"><a href="#3-3-1ã€å®šä¹‰" class="headerlink" title="3.3.1ã€å®šä¹‰"></a>3.3.1ã€å®šä¹‰</h4><p>1ï¼‰ã€Dart ä¸­ map ç±»å‹ï¼Œå°±æ˜¯ä¸€ç§å“ˆå¸Œç±»å‹æ•°æ®ï¼Œmap ç±»å‹çš„æ•°æ®éƒ½æ˜¯ç”± key å’Œ value ä¸¤ä¸ªå€¼ç»„æˆï¼Œkey æ˜¯å”¯ä¸€çš„ï¼Œvalue ä¸å¿…å”¯ä¸€ï¼Œè¯»å†™æ•°æ®éƒ½æ˜¯é€šè¿‡ key è¿›è¡Œï¼Œmap ä¹Ÿæ˜¯æ³›å‹ç±»å‹ï¼Œæ”¯æŒä»»æ„ç±»å‹æ•°æ®ï¼Œkey å’Œ value å¯ä»¥æ˜¯ä»»æ„ç±»å‹æ•°æ®</p><p>2ï¼‰ã€map ä¸»è¦æœ‰ä»¥ä¸‹å››ç§æ–¹å¼åˆå§‹åŒ–ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">//1ã€æ–¹å¼ä¸€ï¼šç›´æ¥ä»¥key, value çš„æ–¹å¼åˆå§‹åŒ–ä¸€ä¸ª map ç±»å‹å˜é‡ï¼Œ key å’Œ value éƒ½æ˜¯ String ç±»å‹</span><br><span class="hljs-keyword">var</span> map1 = &#123;<br>  <span class="hljs-comment">//æ ¼å¼  Key: Value</span><br>  <span class="hljs-string">&#x27;first&#x27;</span>: <span class="hljs-string">&#x27;partridge&#x27;</span>,<br>  <span class="hljs-string">&#x27;second&#x27;</span>: <span class="hljs-string">&#x27;turtledoves&#x27;</span>,<br>  <span class="hljs-string">&#x27;fifth&#x27;</span>: <span class="hljs-string">&#x27;golden rings&#x27;</span><br>&#125;;<br><br><span class="hljs-comment">//2ã€æ–¹å¼äºŒï¼šç›´æ¥é€šè¿‡ Map ç±»æ„é€ ä¸€ä¸ª map ç±»å‹å˜é‡, key ç±»å‹ä¸º String, value ç±»å‹ä¸º int</span><br><span class="hljs-keyword">var</span> map2 = <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">int</span>&gt;();<br><br><span class="hljs-comment">//3ã€æ–¹å¼ä¸‰ï¼šå®šä¹‰ä¸€ä¸ª key ç±»å‹ä¸º String, value ç±»å‹ä¸º int çš„ç©º Map</span><br><span class="hljs-keyword">var</span> map3 = &lt;<span class="hljs-built_in">String</span>,<span class="hljs-built_in">int</span>&gt;&#123;&#125;<br><br><span class="hljs-comment">//4ã€æ–¹å¼å››ï¼šå®šä¹‰ä¸€ä¸ªç»•è¿‡ç¼–è¯‘æ£€æŸ¥çš„åŠ¨æ€ keyï¼Œvalue ç±»å‹ Map</span><br><span class="hljs-keyword">var</span> map4 = <span class="hljs-built_in">Map</span>(); <span class="hljs-comment">//ç­‰ä»·äºï¼švar map4 = &#123;&#125;;</span><br></code></pre></td></tr></table></figure><h4 id="3-3-2ã€å¸¸ç”¨-Api-ä»‹ç»"><a href="#3-3-2ã€å¸¸ç”¨-Api-ä»‹ç»" class="headerlink" title="3.3.2ã€å¸¸ç”¨ Api ä»‹ç»"></a>3.3.2ã€å¸¸ç”¨ Api ä»‹ç»</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€é¦–å…ˆå®šä¹‰ä¸€ä¸ª map<br>var map = &#123;&#125;;<br><br><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€å‘ map æ·»åŠ æ•°æ® map:&#123;<span class="hljs-string">&quot;key1&quot;</span>:<span class="hljs-string">&quot;value1&quot;</span>,<span class="hljs-string">&quot;key2&quot;</span>:<span class="hljs-string">&quot;value2&quot;</span>&#125;<br><span class="hljs-regexp">//</span>ä½¿ç”¨ [] æ“ä½œç¬¦è¯»å†™ map æ•°æ®ï¼Œè¯­æ³•ï¼šmapå˜é‡[key]<br>map[<span class="hljs-string">&quot;key1&quot;</span>] = <span class="hljs-string">&quot;value1&quot;</span>;<br>map[<span class="hljs-string">&quot;key2&quot;</span>] = <span class="hljs-string">&quot;value2&quot;</span>;<br><br><span class="hljs-regexp">//</span><span class="hljs-number">3</span>ã€æŸ¥è¯¢ mapï¼šä½¿ç”¨[]æ“ä½œç¬¦ï¼Œæ ¹æ® key æŸ¥è¯¢å¯¹åº”çš„ value å€¼ï¼Œå¦‚æœ key ä¸å­˜åœ¨åˆ™è¿”å› null<br>var v1 = map[<span class="hljs-string">&quot;key1&quot;</span>];<br>var v2 = map[<span class="hljs-string">&quot;key2&quot;</span>];<br><br><span class="hljs-regexp">//</span><span class="hljs-number">4</span>ã€æ›´æ–° map æ•°æ®ï¼šæ ¹æ® key æ›´æ–° map æ•°æ®å’Œæ·»åŠ  map æ•°æ®ç”¨æ³•ä¸€æ ·<br><span class="hljs-regexp">//</span>å¦‚æœ key å€¼ä¸å­˜åœ¨åˆ™æ·»åŠ ï¼Œå¦åˆ™æ›´æ–° key çš„æ•°æ®<br><span class="hljs-regexp">//m</span>ap:&#123;<span class="hljs-string">&quot;key1&quot;</span>:<span class="hljs-string">&quot;value1&quot;</span>,<span class="hljs-string">&quot;key2&quot;</span>:<span class="hljs-string">&quot;value2&quot;</span>&#125;<br>map[<span class="hljs-string">&quot;key2&quot;</span>] = <span class="hljs-string">&quot;erdai&quot;</span>;<br><br><span class="hljs-regexp">//</span><span class="hljs-number">5</span>ã€è·å– map å¤§å°<br>print(map.length); <span class="hljs-regexp">//</span>æ‰“å°ï¼š<span class="hljs-number">2</span><br><br><span class="hljs-regexp">//</span><span class="hljs-number">6</span>ã€éå† map<br>map.forEach((k, v) &#123;<br>  print(<span class="hljs-string">&#x27;$k $v&#x27;</span>);<br>&#125;);<br><br><span class="hljs-regexp">//</span><span class="hljs-number">7</span>ã€åˆ é™¤ map æ•°æ®ï¼šé€šè¿‡ remove å‡½æ•°å¯ä»¥åˆ é™¤æŒ‡å®šçš„ key æ•°æ®<br><span class="hljs-regexp">//m</span>ap:&#123;<span class="hljs-string">&quot;key2&quot;</span>:<span class="hljs-string">&quot;value2&quot;</span>&#125;<br>map.remove(<span class="hljs-string">&quot;key1&quot;</span>);<br><br><span class="hljs-regexp">//</span><span class="hljs-number">8</span>ã€æ¸…ç©ºæ‰€æœ‰ map æ•°æ® map:&#123;&#125;<br>map.clear();<br></code></pre></td></tr></table></figure><h2 id="å››ã€ç¨‹åºçš„é€»è¾‘æ§åˆ¶"><a href="#å››ã€ç¨‹åºçš„é€»è¾‘æ§åˆ¶" class="headerlink" title="å››ã€ç¨‹åºçš„é€»è¾‘æ§åˆ¶"></a>å››ã€ç¨‹åºçš„é€»è¾‘æ§åˆ¶</h2><p>è¿™ä¸ªç« èŠ‚ç›¸å¯¹ç®€å•ï¼Œæˆ‘ä»¬å°±ç®€å•ä¸¾ä¸ªä¾‹å­</p><h3 id="4-1ã€if-else"><a href="#4-1ã€if-else" class="headerlink" title="4.1ã€if-else"></a>4.1ã€if-else</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">if</span> (isRaining()) &#123;<br>  <span class="hljs-regexp">//</span> ä»£ç <span class="hljs-number">1</span><br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isSnowing()) &#123;<br>  <span class="hljs-regexp">//</span> ä»£ç <span class="hljs-number">2</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-regexp">//</span> ä»£ç <span class="hljs-number">3</span><br>&#125;<br></code></pre></td></tr></table></figure><p>elseæ˜¯å¯é€‰çš„ï¼Œæ ¹æ®éœ€è¦ç»„åˆå³å¯</p><h3 id="4-2ã€for-i-å’Œ-for-in-å¾ªç¯"><a href="#4-2ã€for-i-å’Œ-for-in-å¾ªç¯" class="headerlink" title="4.2ã€for-i å’Œ for-in å¾ªç¯"></a>4.2ã€for-i å’Œ for-in å¾ªç¯</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> å®šä¹‰ int æ•°ç»„<br>var list = [<span class="hljs-number">5</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">6</span>,<span class="hljs-number">3</span>];<br><br><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€<span class="hljs-keyword">for</span>-i å¾ªç¯éå†æ•°ç»„<br><span class="hljs-keyword">for</span> (var i = <span class="hljs-number">0</span>; i &lt; list.length; i++) &#123;<br>  <span class="hljs-regexp">//</span> æ‰“å°æ•°ç»„å…ƒç´ <br>  print(list[i]); <br>&#125;<br><br><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€<span class="hljs-keyword">for</span>-<span class="hljs-keyword">in</span> å¾ªç¯éå†æ•°ç»„å˜é‡ list<br><span class="hljs-keyword">for</span> (var v <span class="hljs-keyword">in</span> list) &#123;<br>  <span class="hljs-regexp">//</span> æ‰“å°æ•°ç»„å…ƒç´  v<br>  print(v); <br>&#125;<br><br><span class="hljs-regexp">//</span>æ‰“å°ç»“æœ<br><span class="hljs-number">5</span><br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">6</span><br><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h3 id="4-3ã€switchè¯­å¥"><a href="#4-3ã€switchè¯­å¥" class="headerlink" title="4.3ã€switchè¯­å¥"></a>4.3ã€switchè¯­å¥</h3><p>1ï¼‰ã€switch è¯­å¥çš„ä½œç”¨è·Ÿ if è¯­å¥ç±»ä¼¼ï¼Œç”¨äºæ£€æµ‹å„ç§æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œç„¶åæ‰§è¡Œç›¸åº”åˆ†æ”¯çš„ä»£ç </p><p>2ï¼‰ã€switch æ”¯æŒæ£€æµ‹ intï¼ŒString ç±»å‹å˜é‡çš„æ£€æµ‹ï¼Œå½“ç„¶å¦‚æœä½ è‡ªå®šä¹‰çš„ç±»é‡è½½äº† &#x3D;&#x3D; æ“ä½œç¬¦ï¼Œä¹Ÿå¯ä»¥åœ¨ switch æ¡ä»¶ä¸­ä½¿ç”¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> æ¡ä»¶çŠ¶æ€å˜é‡<br>var command = <span class="hljs-string">&#x27;OPEN&#x27;</span>;<br><br>switch (command) &#123; <span class="hljs-regexp">//</span> éœ€è¦æ£€æµ‹çš„å˜é‡ <br>  case <span class="hljs-string">&#x27;CLOSED&#x27;</span>:  <span class="hljs-regexp">//</span>case è¯­å¥ç”¨äºè®¾ç½®æ£€æµ‹æ¡ä»¶<br>    executeClosed(); <span class="hljs-regexp">//</span> å¦‚æœ command = <span class="hljs-string">&#x27;CLOSED&#x27;</span>ï¼Œæ‰§è¡Œå½“å‰åˆ†æ”¯ä»£ç ã€‚<br>    <span class="hljs-keyword">break</span>; <span class="hljs-regexp">//</span> ç»“æŸå½“å‰åˆ†æ”¯æ‰§è¡Œé€»è¾‘<br>  case <span class="hljs-string">&#x27;PENDING&#x27;</span>:<br>    executePending();<br>    <span class="hljs-keyword">break</span>;<br>  case <span class="hljs-string">&#x27;APPROVED&#x27;</span>:<br>    executeApproved();<br>    <span class="hljs-keyword">break</span>;<br>  default: <span class="hljs-regexp">//</span> å¦‚æœä¸Šé¢çš„ case è¯­å¥éƒ½æ²¡æœ‰åŒ¹é…æˆåŠŸï¼Œåˆ™æ‰§è¡Œ default åˆ†æ”¯çš„é€»è¾‘ã€‚<br>    executeUnknown();<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-4ã€while-å’Œ-do-while-å¾ªç¯è¯­å¥"><a href="#4-4ã€while-å’Œ-do-while-å¾ªç¯è¯­å¥" class="headerlink" title="4.4ã€while å’Œ do-while å¾ªç¯è¯­å¥"></a>4.4ã€while å’Œ do-while å¾ªç¯è¯­å¥</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span><span class="hljs-number">1</span>ã€<span class="hljs-keyword">while</span> å¾ªç¯è¯­å¥ä¾‹å­<br>void main() &#123;<br>  <span class="hljs-regexp">//</span> å®šä¹‰ int æ•°ç»„<br>  var list = [<span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>];<br><br>  <span class="hljs-regexp">//</span> å¾ªç¯éå†æ•°ç»„<br>  var i = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">while</span> (i &lt; list.length) &#123;<br>    <span class="hljs-regexp">//</span> æ¡ä»¶ä¸º true åˆ™æ‰§è¡Œå¾ªç¯ä½“ä»£ç <br>    print(list[i]); <span class="hljs-regexp">//</span> æ‰“å°æ•°ç»„å…ƒç´ <br>    i++; <span class="hljs-regexp">//</span> æ•°ç»„ä¸‹æ ‡é€’å¢<br>  &#125;<br>&#125;<br><br><span class="hljs-regexp">//</span><span class="hljs-number">2</span>ã€<span class="hljs-keyword">do</span>-<span class="hljs-keyword">while</span> å¾ªç¯è¯­å¥ä¾‹å­<br>void main() &#123;<br>  <span class="hljs-regexp">//</span> å®šä¹‰ int æ•°ç»„<br>  var list = [<span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>];<br><br>  <span class="hljs-regexp">//</span> å¾ªç¯éå†æ•°ç»„<br>  var i = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">do</span> &#123;<br>    print(list[i]);<br>    i++;<br>  &#125; <span class="hljs-keyword">while</span> (i &lt; list.length); <span class="hljs-regexp">//</span> å…ˆæ‰§è¡Œå¾ªç¯ä½“ä»£ç åå†æ£€æµ‹å¾ªç¯æ¡ä»¶ï¼Œæ¡ä»¶ä¸º true åˆ™ç»§ç»­æ‰§è¡Œå¾ªç¯<br>&#125;<br><br><span class="hljs-regexp">//</span>æ‰“å°ç»“æœ<br><span class="hljs-number">5</span><br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><span class="hljs-number">6</span><br><span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h2 id="äº”ã€é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#äº”ã€é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="äº”ã€é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>äº”ã€é¢å‘å¯¹è±¡ç¼–ç¨‹</h2><p>Dart æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå¯¹è±¡éƒ½æ˜¯ç”±ç±»åˆ›å»ºçš„ï¼Œæ‰€æœ‰ç±»éƒ½æ˜¯ç”± Object ç±»æ´¾ç”Ÿå‡ºæ¥çš„å­ç±»ï¼Œé™¤äº† Object , æ‰€æœ‰ç±»åªæœ‰ä¸€ä¸ªçˆ¶ç±»ï¼ˆå³åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼‰</p><p>å°½ç®¡ Dart è¯­è¨€ä¸­ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»ï¼Œä½†æ˜¯ Dart è¯­è¨€æä¾›äº† mixin æœºåˆ¶ï¼Œå¯ä»¥å¤ç”¨å¤šä¸ªç±»ï¼Œè¾¾åˆ°ç±»ä¼¼å¤šç»§æ‰¿çš„æ•ˆæœ</p><h3 id="5-1ã€ç±»å’Œå¯¹è±¡"><a href="#5-1ã€ç±»å’Œå¯¹è±¡" class="headerlink" title="5.1ã€ç±»å’Œå¯¹è±¡"></a>5.1ã€ç±»å’Œå¯¹è±¡</h3><p>1ï¼‰ã€Dart æ²¡æœ‰ publicã€protected å’Œ private ç­‰æˆå‘˜è®¿é—®é™å®šç¬¦ã€‚é»˜è®¤æƒ…å†µä¸‹å±æ€§ï¼Œæ–¹æ³•ï¼Œç±»ç­‰éƒ½æ˜¯å…±æœ‰çš„ï¼Œç±»ä¼¼ Java çš„ publicã€‚å¦‚æœæƒ³è¦è¡¨ç¤ºç§æœ‰ï¼Œåˆ™ä»¥ä¸‹åˆ’çº¿ _ å¼€å¤´å»å‘½å</p><p>2ï¼‰ã€Dart ä¸­å®ä¾‹åŒ–å¯¹è±¡å’Œ Java ç±»ä¼¼ï¼Œnew å…³é”®å­—å¯å†™å¯ä¸å†™</p><p>3ï¼‰ã€å½“æˆ‘ä»¬åœ¨ç±»ä¸­åˆ›å»ºç§æœ‰å±æ€§æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ç»™ç§æœ‰å±æ€§æä¾› getter å’Œ setter æ–¹æ³•ä¾›å¤–ç•Œè®¿é—®ï¼š</p><p>get æ–¹æ³•è¯­æ³•æ ¼å¼ï¼š<strong>è¿”å›å€¼ç±»å‹ get æ–¹æ³•å { æ–¹æ³•ä½“ }</strong></p><p>set æ–¹æ³•è¯­æ³•æ ¼å¼ï¼š<strong>set æ–¹æ³•å ( å‚æ•° ) { æ–¹æ³•ä½“ }</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>  <span class="hljs-comment">// å®šä¹‰ç±»æˆå‘˜å±æ€§ï¼Œé»˜è®¤ç±»çš„æˆå‘˜å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯å…±æœ‰çš„ï¼Œç±»ä¼¼ java çš„ public</span><br>  <span class="hljs-keyword">var</span> name;<br>  <span class="hljs-comment">// ä»¥ä¸‹åˆ’çº¿ ( _ ) å¼€å¤´å‘½åçš„å±æ€§ä»£è¡¨ç§æœ‰æˆå‘˜å±æ€§</span><br>  <span class="hljs-keyword">var</span> _age;<br><br>  <span class="hljs-comment">// è·Ÿç±»ååŒåçš„æ–¹æ³•ï¼Œä¸ºæ„é€ æ–¹æ³•</span><br>  <span class="hljs-comment">// è¿™é‡Œè‡ªå®šä¹‰äº†ä¸€ä¸ªæºå¸¦å‚æ•°çš„æ„é€ æ–¹æ³•ã€‚</span><br>  <span class="hljs-comment">// å¦‚æœæˆ‘ä»¬æ²¡æœ‰è‡ªå®šä¹‰æ„é€ æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªä¸å¸¦å‚æ•°çš„é»˜è®¤æ„é€ æ–¹æ³•</span><br>  Person(<span class="hljs-keyword">var</span> name, <span class="hljs-keyword">var</span> age) &#123;<br>    <span class="hljs-comment">// å› ä¸ºå‚æ•°åå’Œç±»å±æ€§ååŒåï¼Œå¯ä»¥ä½¿ç”¨thiså¼•ç”¨å½“å‰å¯¹è±¡</span><br>    <span class="hljs-keyword">this</span>.name = name;<br>    <span class="hljs-comment">// å¯ä»¥å¿½ç•¥thiså…³é”®å­—ï¼Œç›´æ¥å¼•ç”¨ç±»æˆå‘˜</span><br>    _age = age;<br>  &#125;<br>  <br>  <span class="hljs-comment">//ä¸º _age æä¾› getter å’Œ setter æ–¹æ³•</span><br>  <span class="hljs-built_in">int</span> <span class="hljs-keyword">get</span> age&#123;<br>    <span class="hljs-keyword">return</span> _age;<br>  &#125;<br>  <span class="hljs-comment">//getter æ–¹æ³•è¿˜å¯ä»¥ç®€åŒ–ä¸ºæ­¤å†™æ³•ï¼šint get age =&gt; _age;</span><br><br>  <span class="hljs-keyword">set</span> age(<span class="hljs-built_in">int</span> age)&#123;<br>    _age = age;<br>  &#125;<br><br>  <span class="hljs-comment">// å®šä¸€ä¸ª public çš„æ–¹æ³•</span><br>  <span class="hljs-built_in">String</span> greet(<span class="hljs-built_in">String</span> who) =&gt; <span class="hljs-string">&#x27;Hello, <span class="hljs-subst">$who</span>. I am <span class="hljs-subst">$name</span>, my age is <span class="hljs-subst">$_age</span> !&#x27;</span>;<br>&#125;<br><br><span class="hljs-keyword">void</span> main()&#123;<br>  <span class="hljs-keyword">var</span> person = Person(<span class="hljs-string">&quot;erdai&quot;</span>,<span class="hljs-number">18</span>);<br>  <span class="hljs-comment">//ä¸‹é¢è¿™å¥å°±æ˜¯è°ƒç”¨äº† age çš„ set æ–¹æ³•</span><br>  person.age = <span class="hljs-number">20</span>;<br>  <span class="hljs-keyword">var</span> greet = person.greet(<span class="hljs-string">&quot;lucy&quot;</span>);<br>  <span class="hljs-built_in">print</span>(greet);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>Hello, lucy. I am erdai, my age <span class="hljs-keyword">is</span> <span class="hljs-number">20</span> !<br></code></pre></td></tr></table></figure><h3 id="5-2ã€æ„é€ æ–¹æ³•"><a href="#5-2ã€æ„é€ æ–¹æ³•" class="headerlink" title="5.2ã€æ„é€ æ–¹æ³•"></a>5.2ã€æ„é€ æ–¹æ³•</h3><p>å¦‚æœæˆ‘ä»¬æ²¡æœ‰è‡ªå®šä¹‰ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªä¸å¸¦å‚æ•°çš„é»˜è®¤æ„é€ æ–¹æ³•</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-comment">// è¿™ä¸ªç±»ä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>&#123;<br>    <span class="hljs-keyword">String</span> name;<br>&#125;<br><br><span class="hljs-comment">// é€šè¿‡é»˜è®¤æ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡</span><br><span class="hljs-keyword">var</span> p = Person();<br></code></pre></td></tr></table></figure><h4 id="5-2-1ã€è‡ªå®šä¹‰æ„é€ æ–¹æ³•"><a href="#5-2-1ã€è‡ªå®šä¹‰æ„é€ æ–¹æ³•" class="headerlink" title="5.2.1ã€è‡ªå®šä¹‰æ„é€ æ–¹æ³•"></a>5.2.1ã€è‡ªå®šä¹‰æ„é€ æ–¹æ³•</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>&#123;<br>  <span class="hljs-keyword">var</span> x,y;<br>  <br>  Point(<span class="hljs-keyword">var</span> x,<span class="hljs-keyword">var</span> y)&#123;<br>    <span class="hljs-comment">// é€šè¿‡thisè®¿é—®æˆå‘˜å±æ€§ï¼Œå½“ç„¶ä¸€èˆ¬é™¤éå‡ºç°å‘½åå†²çªï¼Œå¦åˆ™å¯ä»¥å¿½ç•¥this</span><br>    <span class="hljs-keyword">this</span>.x = x;<br>    <span class="hljs-keyword">this</span>.y = y;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹äºæ„é€ æ–¹æ³•ä¸­ï¼Œç®€å•çš„èµ‹å€¼æ“ä½œï¼ŒDartè¯­è¨€æä¾›äº†æ›´ç®€æ´çš„è¯­æ³•ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>&#123;<br>  <span class="hljs-keyword">var</span> x,y;<br><br>  <span class="hljs-comment">// ç›´æ¥å°†æ„é€ æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°èµ‹å€¼ç»™this.x, ç¬¬äºŒä¸ªå‚æ•°èµ‹å€¼ç»™this.y</span><br>  Point(<span class="hljs-keyword">this</span>.x,<span class="hljs-keyword">this</span>.y);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-2-2ã€åˆå§‹åŒ–å‚æ•°åˆ—è¡¨"><a href="#5-2-2ã€åˆå§‹åŒ–å‚æ•°åˆ—è¡¨" class="headerlink" title="5.2.2ã€åˆå§‹åŒ–å‚æ•°åˆ—è¡¨"></a>5.2.2ã€åˆå§‹åŒ–å‚æ•°åˆ—è¡¨</h4><p>Dart è¿˜ä¸ºæ„é€ æ–¹æ³•æä¾›äº† <strong>å‚æ•°åˆå§‹åŒ–åˆ—è¡¨</strong> çš„è¯­æ³•ï¼Œç”¨äºåˆå§‹åŒ–å¯¹è±¡å‚æ•°</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>&#123;<br>  <span class="hljs-keyword">var</span> x,y;<br><br>  <span class="hljs-comment">// å†’å· : åé¢çš„è¡¨è¾¾å¼å°±æ˜¯å‚æ•°åˆå§‹åŒ–åˆ—è¡¨ï¼Œæ¯ä¸ªè¡¨è¾¾å¼ç”¨é€—å·åˆ†éš”</span><br>  Point(<span class="hljs-keyword">var</span> x,<span class="hljs-keyword">var</span> y): <span class="hljs-keyword">this</span>.x = x,<span class="hljs-keyword">this</span>.y = y&#123;<br>    <span class="hljs-comment">// ä½¿ç”¨å‚æ•°åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–å¯¹è±¡å±æ€§ï¼Œè¿™é‡Œå¦‚æœæ²¡æœ‰åˆ«çš„åˆå§‹åŒ–å·¥ä½œè¦åšï¼Œå¯ä»¥æ˜¯ç©ºçš„</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-2-3ã€å‘½åæ„é€ æ–¹æ³•"><a href="#5-2-3ã€å‘½åæ„é€ æ–¹æ³•" class="headerlink" title="5.2.3ã€å‘½åæ„é€ æ–¹æ³•"></a>5.2.3ã€å‘½åæ„é€ æ–¹æ³•</h4><p>1ï¼‰ã€Dart å¯ä»¥ä½¿ç”¨å‘½åæ„é€ æ–¹æ³•è¯­æ³•ï¼Œåˆ›å»ºå¤šä¸ªæ„é€ æ–¹æ³•ï¼Œå‘½åæ„é€ æ–¹æ³•è¯­æ³•æ ¼å¼ï¼š <strong>ç±»å.æ„é€ æ–¹æ³•å(å‚æ•°åˆ—è¡¨)</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>&#123;<br>  <span class="hljs-keyword">var</span> x,y;<br><br>  <span class="hljs-title class_">Point</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>);<br><br>  <span class="hljs-comment">// å‘½åæ„é€ æ–¹æ³• namedConstructor</span><br>  <span class="hljs-title class_">Point</span>.<span class="hljs-title function_">namedConstructor</span>(<span class="hljs-params"></span>)&#123;<br>    x = <span class="hljs-number">0</span>;<br>    y = <span class="hljs-number">0</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-comment">// ä½¿ç”¨å‘½åæ„é€ æ–¹æ³•å®ä¾‹åŒ–å¯¹è±¡</span><br>  <span class="hljs-keyword">var</span> point = <span class="hljs-title class_">Point</span>.<span class="hljs-title function_">namedConstructor</span>();<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä»¥æ”¹å†™ä¸ºï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span>&#123;<br>  <span class="hljs-keyword">var</span> x,y;<br><br>  Point(<span class="hljs-keyword">this</span>.x,<span class="hljs-keyword">this</span>.y);<br>  <span class="hljs-comment">// å‘½åæ„é€ æ–¹æ³• namedConstructor</span><br>  <span class="hljs-comment">// è¿™é‡Œä½¿ç”¨å‚æ•°åˆå§‹åŒ–åˆ—è¡¨ï¼Œç›´æ¥é€šè¿‡ this è°ƒç”¨ä¸Šé¢çš„æ„é€ æ–¹æ³•ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•° 0ï¼Œåˆå§‹åŒ–å¯¹è±¡</span><br>  Point.namedConstructor():<span class="hljs-keyword">this</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-2-4ã€factory-æ„é€ æ–¹æ³•"><a href="#5-2-4ã€factory-æ„é€ æ–¹æ³•" class="headerlink" title="5.2.4ã€factory æ„é€ æ–¹æ³•"></a>5.2.4ã€factory æ„é€ æ–¹æ³•</h4><p>1ï¼‰ã€Dart æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ æ–¹æ³•ï¼Œç±»ä¼¼è®¾è®¡æ¨¡å¼ä¸­çš„å·¥å‚æ¨¡å¼ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡</p><p>2ï¼‰ã€factory æ„é€ æ–¹æ³•åªèƒ½è®¿é—®é™æ€å±æ€§å’Œé™æ€æˆå‘˜æ–¹æ³•ï¼Œå› æ­¤ä¸èƒ½è®¿é—® this å¼•ç”¨</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-comment">//1ã€å®šä¹‰ä¸ªæ—¥å¿—ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span> &#123;<br>  <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> name;<br>  <span class="hljs-type">bool</span> mute = <span class="hljs-literal">false</span>;<br><br>  <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç§æœ‰çš„_cacheå±æ€§ï¼Œç”¨æ¥ä¿å­˜åˆ›å»ºå¥½çš„Loggerå¯¹è±¡</span><br>  <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> Map&lt;<span class="hljs-type">String</span>, Logger&gt; _cache = &#123;&#125;;<br><br>  <span class="hljs-comment">// æ³¨æ„è¿™ä¸ªæ„é€ æ–¹æ³•ï¼Œå‰é¢ä½¿ç”¨äº†factoryå…³é”®å­—ä¿®é¥°ï¼Œè¿™ä»£è¡¨è¿™ä¸ªæ„é€ æ–¹æ³•æ˜¯ä¸€ä¸ªå·¥å‚æ„é€ æ–¹æ³•</span><br>  <span class="hljs-comment">// å·¥å‚æ„é€ æ–¹æ³•ä¸ä¼šæ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„Loggerå¯¹è±¡</span><br>  <span class="hljs-function">factory <span class="hljs-title">Logger</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>&#123;<br>    <span class="hljs-comment">// æ ¹æ®nameåˆ¤æ–­ç¼“å­˜çš„Loggerå¯¹è±¡æ˜¯å¦å­˜åœ¨</span><br>    <span class="hljs-keyword">if</span> (_cache.<span class="hljs-built_in">containsKey</span>(name)) &#123;<br>      <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„Loggerå¯¹è±¡</span><br>      <span class="hljs-keyword">return</span> _cache[name]!;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œåˆ™è°ƒç”¨å‘½åæ„é€ æ–¹æ³•_internalåˆ›å»ºä¸€ä¸ªLoggerå¯¹è±¡</span><br>      <span class="hljs-keyword">final</span> logger = Logger._internal(name);<br>      <span class="hljs-comment">// æ ¹æ®nameç¼“å­˜logger</span><br>      _cache[name] = logger;<br>      <span class="hljs-comment">// è¿”å›æ–°çš„Loggerå¯¹è±¡</span><br>      <span class="hljs-keyword">return</span> logger;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// æ³¨æ„è¿™ä¸ªæ˜¯ä¸€ä¸ªç§æœ‰çš„å‘½åæ„é€ æ–¹æ³•ã€‚</span><br>  Logger._internal(<span class="hljs-keyword">this</span>.name);<br><br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-type">String</span> msg)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!mute) <span class="hljs-built_in">print</span>(msg);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//2ã€æµ‹è¯•</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>  var logger = <span class="hljs-built_in">Logger</span>(<span class="hljs-string">&quot;erdai&quot;</span>);<br>  logger.<span class="hljs-built_in">log</span>(logger.name);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>erdai<br></code></pre></td></tr></table></figure><h3 id="5-3ã€ç»§æ‰¿å’Œå¤šæ€"><a href="#5-3ã€ç»§æ‰¿å’Œå¤šæ€" class="headerlink" title="5.3ã€ç»§æ‰¿å’Œå¤šæ€"></a>5.3ã€ç»§æ‰¿å’Œå¤šæ€</h3><h4 id="5-3-1ã€ç»§æ‰¿"><a href="#5-3-1ã€ç»§æ‰¿" class="headerlink" title="5.3.1ã€ç»§æ‰¿"></a>5.3.1ã€ç»§æ‰¿</h4><p>1ï¼‰ã€Dart é€šè¿‡ extend å…³é”®å­—ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œå’Œ Java ç±»ä¼¼</p><p>2ï¼‰ã€å­ç±»ä¼šç»§æ‰¿çˆ¶ç±»å¯è§çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸ä¼šç»§æ‰¿æ„é€ æ–¹æ³•</p><p>3ï¼‰ã€å­ç±»èƒ½å¤Ÿå¤å†™çˆ¶ç±»çš„ getterï¼Œsetterï¼Œä»¥åŠæ™®é€šæ–¹æ³•ï¼Œä½¿ç”¨ @override è¡¨ç¤ºè¦†å†™</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span></span>&#123;<br>  <span class="hljs-built_in">String</span> name = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-built_in">int</span> age = <span class="hljs-number">0</span>;<br><br>  <span class="hljs-comment">//è®¡ç®—å±æ€§</span><br>  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> adult =&gt; <span class="hljs-keyword">this</span>.age &gt; <span class="hljs-number">18</span>;<br><br>  <span class="hljs-comment">//ç§æœ‰å±æ€§ï¼Œå¯¹äºå­ç±»ä¸å¯è§</span><br>  <span class="hljs-built_in">String</span> _address = <span class="hljs-string">&quot;&quot;</span>;<br><br>  <span class="hljs-keyword">void</span> method()&#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Parent&#x27;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Children</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Parent</span></span>&#123;<br>  <br>  <span class="hljs-keyword">void</span> specificMethod()&#123;<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Children specificMethod&#x27;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">void</span> main()&#123;<br>  <span class="hljs-keyword">var</span> child = Children();<br>  <span class="hljs-comment">//è°ƒç”¨å­ç±»è‡ªå·±çš„æ–¹æ³•</span><br>  child.specificMethod();<br>  <span class="hljs-comment">//è®¿é—®çˆ¶ç±»çš„å±æ€§</span><br>  child.name = <span class="hljs-string">&quot;erdai&quot;</span>;<br>  child.age = <span class="hljs-number">18</span>;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;<span class="hljs-subst">$&#123;child.name&#125;</span> <span class="hljs-subst">$&#123;child.age&#125;</span>&#x27;</span>);<br>  <span class="hljs-comment">//è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•</span><br>  child.method();<br>  <span class="hljs-comment">//è®¿é—®çˆ¶ç±»çš„è®¡ç®—å±æ€§</span><br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;<span class="hljs-subst">$&#123;child.adult&#125;</span>&#x27;</span>);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>Children specificMethod<br>erdai <span class="hljs-number">18</span><br>Parent<br><span class="hljs-keyword">false</span><br></code></pre></td></tr></table></figure><h4 id="5-3-2ã€å¤šæ€"><a href="#5-3-2ã€å¤šæ€" class="headerlink" title="5.3.2ã€å¤šæ€"></a>5.3.2ã€å¤šæ€</h4><p>1ï¼‰ã€ç®€å•çš„ç†è§£ï¼šå¤šæ€å°±æ˜¯å°†å­ç±»çš„å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»çš„å¼•ç”¨ï¼ŒåŒä¸€ä¸ªæ–¹æ³•è°ƒç”¨ä¼šæœ‰ä¸åŒçš„æ‰§è¡Œæ•ˆæœ</p><p>2ï¼‰ã€å¤šæ€çš„ä½“ç°ï¼šçˆ¶ç±»å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè®©ç»§æ‰¿å®ƒçš„å­ç±»å»å®ç°ï¼Œæ¯ä¸ªå­ç±»æœ‰ä¸åŒçš„è¡¨ç°</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span></span>&#123;<br>  void animalType()&#123;<br><br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span></span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  void animalType() &#123;<br>    print(&#x27;<span class="hljs-type">I</span> am dog&#x27;);<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Pig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span></span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  void animalType() &#123;<br>    print(&#x27;<span class="hljs-type">I</span> am pig&#x27;);<br>  &#125;<br>&#125;<br><br>void main()&#123;<br>  <span class="hljs-comment">//å­ç±»çš„å¯¹è±¡èµ‹å€¼ç»™çˆ¶ç±»çš„å¼•ç”¨</span><br>  <span class="hljs-type">Animal</span> animal1 = <span class="hljs-type">Dog</span>();<br>  <span class="hljs-type">Animal</span> animal2 = <span class="hljs-type">Pig</span>();<br>  <span class="hljs-comment">//åŒä¸€ä¸ªæ–¹æ³•è°ƒç”¨ä¼šæœ‰ä¸åŒçš„æ‰§è¡Œæ•ˆæœ</span><br>  animal1.animalType();<br>  animal2.animalType();<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-type">I</span> am dog<br><span class="hljs-type">I</span> am pig<br></code></pre></td></tr></table></figure><h3 id="5-4ã€æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•"><a href="#5-4ã€æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•" class="headerlink" title="5.4ã€æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•"></a>5.4ã€æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•</h3><p>1ï¼‰ã€æŠ½è±¡ç±»å°±æ˜¯ä¸èƒ½å®ä¾‹åŒ–çš„ç±»ï¼Œé€šè¿‡ abstract å…³é”®å­—å£°æ˜</p><p>2ï¼‰ã€æŠ½è±¡æ–¹æ³•å°±æ˜¯æ²¡æœ‰å®ç°çš„æ–¹æ³•ï¼ŒDart ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸èƒ½ç”¨ abstract å£°æ˜ï¼ŒDart ä¸­æ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•å°±ç§°ä¸ºæŠ½è±¡æ–¹æ³•</p><p>3ï¼‰ã€ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå­ç±»å¿…é¡»è¦å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">// ä½¿ç”¨ abstract å…³é”®å­—ä¿®é¥°çš„ç±»ï¼Œå°±æ˜¯æŠ½è±¡ç±»</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Doer</span></span>&#123;<br>  <span class="hljs-comment">// æŠ½è±¡ç±»è·Ÿæ™®é€šç±»ä¸€æ ·ï¼Œå¯ä»¥å®šä¹‰æˆå‘˜å˜é‡ï¼Œæˆå‘˜æ–¹æ³•ã€‚</span><br>  <span class="hljs-type">String</span> name = <span class="hljs-string">&quot;&quot;</span>;<br>  <span class="hljs-comment">// å®šä¹‰ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æˆ‘ä»¬æ²¡æœ‰å®ç°å…·ä½“çš„åŠŸèƒ½</span><br>  void doSomething();<br>&#125;<br><br><span class="hljs-comment">// ç»§æ‰¿æŠ½è±¡ç±» Doer</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EffectiveDoer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Doer</span></span>&#123;<br>  <span class="hljs-comment">// å®ç°æŠ½è±¡ç±»çš„æŠ½è±¡æ–¹æ³•</span><br>  <span class="hljs-meta">@override</span><br>  void doSomething() &#123;<br>    print(&#x27;doSomething&#x27;);<br>  &#125;<br>&#125;<br><br>void main()&#123;<br>  <span class="hljs-keyword">var</span> doer = <span class="hljs-type">EffectiveDoer</span>();<br>  doer.doSomething();<br>  doer.name = <span class="hljs-string">&quot;erdai&quot;</span>;<br>  print(doer.name);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>doSomething<br>erdai<br></code></pre></td></tr></table></figure><h3 id="5-5ã€æ¥å£"><a href="#5-5ã€æ¥å£" class="headerlink" title="5.5ã€æ¥å£"></a>5.5ã€æ¥å£</h3><p>1ï¼‰ã€Dart ä¸­çš„æ¥å£æ²¡æœ‰ä½¿ç”¨ interface å…³é”®å­—å®šä¹‰ï¼Œè€Œæ˜¯æ™®é€šç±»å’ŒæŠ½è±¡ç±»éƒ½å¯ä»¥ä½œä¸ºæ¥å£è¢«å®ç°ã€‚ä½†æ˜¯ä¸€èˆ¬éƒ½æ˜¯ç”¨æŠ½è±¡ç±»æ¥å®šä¹‰æ¥å£</p><p>2ï¼‰ã€å­ç±»é€šè¿‡ implements æ¥å®ç°æ¥å£</p><p>3ï¼‰ã€é»˜è®¤æƒ…å†µæ¯ä¸€ä¸ªç±»éƒ½<strong>éšå«</strong>ä¸€ä¸ªåŒ…å«æ‰€æœ‰å…¬æœ‰æˆå‘˜ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰çš„æ¥å£å®šä¹‰</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Fruit</span>&#123;<br>  <span class="hljs-comment">// åŒ…å«åœ¨éšå¼æ¥å£é‡Œé¢</span><br>  <span class="hljs-title class_">String</span> name = <span class="hljs-string">&quot;&quot;</span>;<br>  <br>  <span class="hljs-comment">// æ„é€ æ–¹æ³•ä¸åŒ…å«åœ¨éšå¼æ¥å£é‡Œé¢</span><br>  <span class="hljs-title class_">Fruit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br>  <br>  <span class="hljs-comment">// åŒ…å«åœ¨éšå¼æ¥å£é‡Œé¢</span><br>  <span class="hljs-built_in">void</span> <span class="hljs-title function_">eat</span>();<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Apple</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Fruit</span>&#123;<br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-title class_">String</span> name = <span class="hljs-string">&quot;è‹¹æœ&quot;</span>;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-built_in">void</span> <span class="hljs-title function_">eat</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;åƒ$name&#x27;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">var</span> fruit = <span class="hljs-title class_">Apple</span>();<br>  fruit.<span class="hljs-title function_">eat</span>();<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>åƒè‹¹æœ<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šè™½ç„¶æ™®é€šç±»ä¹Ÿå¯ä»¥ä½œä¸ºæ¥å£å®ç°ï¼Œä½†æ˜¯ä¾ç„¶éœ€è¦å®ç°æ™®é€šç±»é‡Œé¢æ‰€æœ‰çš„å…¬æœ‰æˆå‘˜ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œå› æ­¤å»ºè®®å¤§å®¶ä½¿ç”¨æŠ½è±¡ç±»æ¥ä½œä¸ºæ¥å£å®ç°ï¼Œå› ä¸ºæŠ½è±¡ç±»æœ¬æ¥å°±æ˜¯ç”¨æ¥å®šä¹‰ç»™å­ç±»å®ç°çš„</p><h2 id="å…­ã€ç©ºå®‰å…¨æ£€æŸ¥"><a href="#å…­ã€ç©ºå®‰å…¨æ£€æŸ¥" class="headerlink" title="å…­ã€ç©ºå®‰å…¨æ£€æŸ¥"></a>å…­ã€ç©ºå®‰å…¨æ£€æŸ¥</h2><p>1ï¼‰ã€Dart åœ¨ 2.12 ç‰ˆæœ¬å’Œ Flutter 2.0 ä¸­å¼•å…¥äº†ç©ºå®‰å…¨çš„æ–°ç‰¹æ€§ï¼Œåœ¨ç©ºå®‰å…¨ç‰ˆæœ¬ä¸‹ï¼Œè¿è¡Œæ—¶çš„ <strong>NPE (NullPointer Exception)</strong> å¼‚å¸¸è¢«æå‰åˆ°äº†ç¼–è¯‘æœŸ</p><p>2ï¼‰ã€åœ¨ç©ºå®‰å…¨æ¨å‡ºä¹‹å‰ï¼Œé™æ€ç±»å‹ç³»ç»Ÿå…è®¸æ‰€æœ‰çš„ç±»å‹å€¼ä¸º nullï¼Œå› ä¸º Null æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»ã€‚è€Œåœ¨ç©ºå®‰å…¨æ¨å‡ºåï¼Œæ‰€æœ‰ç±»å‹é»˜è®¤ä¸ºä¸å¯ç©ºç±»å‹ï¼ŒNull ä¸å†æ˜¯æ‰€æœ‰ç±»çš„å­ç±»ï¼Œå®ƒå˜æˆäº†å’Œå…¶ä»–ç±»å‹å¹¶è¡Œçš„ç±»</p><p>3ï¼‰ã€Dart æ–°å¢äº†ä¸€äº›å…³é”®å­—ç”¨äºç©ºå®‰å…¨ï¼Œå¦‚ä¸‹ï¼š</p><table><thead><tr><th><strong>å…³é”®å­—</strong></th><th><strong>å«ä¹‰</strong></th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>?</td><td>å¯ç©º</td><td>int a?;</td></tr><tr><td>!</td><td>éç©º</td><td>int b &#x3D; a!;</td></tr><tr><td>late</td><td>å»¶è¿Ÿåˆå§‹åŒ–</td><td>late int a;</td></tr><tr><td>required</td><td>å¯é€‰å‚æ•°çš„ä¸å¯ç©º</td><td>{required int a}</td></tr></tbody></table><h3 id="6-1ã€ç©ºç±»å‹å£°æ˜ç¬¦-ï¼Ÿ"><a href="#6-1ã€ç©ºç±»å‹å£°æ˜ç¬¦-ï¼Ÿ" class="headerlink" title="6.1ã€ç©ºç±»å‹å£°æ˜ç¬¦ ï¼Ÿ"></a>6.1ã€<strong>ç©ºç±»å‹å£°æ˜ç¬¦ ï¼Ÿ</strong></h3><p>1ï¼‰ã€åœ¨ç±»å‹åé¢åŠ ä¸Š ï¼Ÿï¼Œè¡¨ç¤ºå¯ç©ºç±»å‹</p><p>2ï¼‰ã€ä½¿ç”¨ var å…³é”®å­—å®šä¹‰çš„å˜é‡ä¹Ÿæ˜¯å¯ç©ºç±»å‹</p><p>3ï¼‰ã€å¯ç©ºç±»å‹å˜é‡çš„è°ƒç”¨ï¼Œä½¿ç”¨ ?. æ“ä½œç¬¦ï¼Œå®ƒè¡¨ç¤ºå¦‚æœå½“å‰å¯¹è±¡ä¸ä¸º null åˆ™è°ƒç”¨ï¼Œä¸º null åˆ™ä»€ä¹ˆéƒ½ä¸åš</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs axapta"><span class="hljs-comment">//1ã€åœ¨ç±»å‹åé¢åŠ ä¸Š ï¼Ÿï¼Œè¡¨ç¤ºå¯ç©ºç±»å‹</span><br><span class="hljs-keyword">void</span> main() &#123;<br>  <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ª String çš„å¯ç©ºç±»å‹ï¼Œé»˜è®¤å€¼ä¸º null</span><br>  String? <span class="hljs-built_in">str</span>;<br>  <span class="hljs-comment">//ç¼–è¯‘æŠ¥çº¢ï¼Œå› ä¸ºå¯ç©ºç±»å‹éœ€è¦ä½¿ç”¨ ?. è°ƒç”¨</span><br>  <span class="hljs-comment">//æç¤ºï¼šThe property &#x27;length&#x27; can&#x27;t be unconditionally accessed because the receiver can be &#x27;null&#x27;.</span><br>  <span class="hljs-keyword">print</span>(<span class="hljs-built_in">str</span>.length); <br>&#125;<br><br><span class="hljs-comment">//2ã€ä½¿ç”¨ var å…³é”®å­—å®šä¹‰çš„å˜é‡ä¹Ÿæ˜¯å¯ç©ºç±»å‹</span><br><span class="hljs-keyword">void</span> main() &#123;<br>  <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªåŠ¨æ€çš„å¯ç©ºç±»å‹ strï¼Œé»˜è®¤å€¼ä¸º null</span><br>  <span class="hljs-built_in">var</span> <span class="hljs-built_in">str</span>;<br>  <span class="hljs-comment">//ä¸‹é¢è¿™å¥ä»£ç ä¼šç»•è¿‡ç¼–è¯‘å™¨æ£€æŸ¥ï¼Œä½†è¿è¡Œæ—¶ä¼šæŠ¥é”™ï¼šNoSuchMethodError: &#x27;length&#x27;</span><br>  <span class="hljs-keyword">print</span>(<span class="hljs-built_in">str</span>.length);<br>&#125;<br><br><span class="hljs-comment">//3ã€å¯ç©ºç±»å‹å˜é‡çš„è°ƒç”¨ï¼Œä½¿ç”¨ ?. æ“ä½œç¬¦ï¼Œå®ƒè¡¨ç¤ºå¦‚æœå½“å‰å¯¹è±¡ä¸ä¸º null åˆ™è°ƒç”¨ï¼Œä¸º null åˆ™ä»€ä¹ˆéƒ½ä¸åš</span><br><span class="hljs-keyword">void</span> main() &#123;<br>  String? str1;<br>  <span class="hljs-built_in">var</span> str2;<br>  <span class="hljs-keyword">print</span>(str1?.length);<br>  <span class="hljs-keyword">print</span>(str2?.length);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-literal">null</span><br><span class="hljs-literal">null</span><br></code></pre></td></tr></table></figure><h3 id="6-2ã€éç©ºæ–­è¨€"><a href="#6-2ã€éç©ºæ–­è¨€" class="headerlink" title="6.2ã€éç©ºæ–­è¨€ !"></a>6.2ã€<strong>éç©ºæ–­è¨€ !</strong></h3><p>1ï¼‰ã€ä½¿ç”¨ ! å…³é”®å­—è¡¨ç¤ºå‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯ä¸€ä¸ªä¸å¯èƒ½ä¸ºç©ºçš„å˜é‡ã€‚å¦‚æœä¸ºç©ºï¼Œä½ å°±æŠ›å¼‚å¸¸</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-built_in">String</span>? <span class="hljs-title function_">getName</span>() =&gt; <span class="hljs-string">&quot;erdai&quot;</span>;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>() &#123;<br> <span class="hljs-built_in">String</span>? <span class="hljs-built_in">str</span> = <span class="hljs-title function_">getName</span>();<br> <span class="hljs-comment">//æ­¤æ—¶ä¼šç¼–è¯‘æŠ¥çº¢ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•æ™ºèƒ½åˆ¤ç©º</span><br> <span class="hljs-comment">//print(str.length);</span><br> <span class="hljs-comment">//å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ ! å…³é”®å­—</span><br> <span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>!.<span class="hljs-property">length</span>);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h3 id="6-3ã€late-å»¶è¿Ÿåˆå§‹åŒ–"><a href="#6-3ã€late-å»¶è¿Ÿåˆå§‹åŒ–" class="headerlink" title="6.3ã€late å»¶è¿Ÿåˆå§‹åŒ–"></a>6.3ã€<strong>late å»¶è¿Ÿåˆå§‹åŒ–</strong></h3><p>1ï¼‰ã€late å…³é”®å­—ä¼šå‘Šè¯‰ç¼–è¯‘å™¨ï¼šè¿™æ˜¯ä¸ªéç©ºå˜é‡ï¼Œæˆ‘ç¨åä¼šåˆå§‹åŒ–</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs processing"><span class="hljs-comment">//æ­¤æ—¶ä¼šç¼–è¯‘æŠ¥çº¢ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¼šå‘Šè¯‰æˆ‘ä»¬éç©ºå˜é‡å¿…é¡»å…ˆåˆå§‹åŒ–</span><br><span class="hljs-comment">//String str;</span><br><span class="hljs-comment">//å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ late å…³é”®å­—</span><br>late <span class="hljs-built_in">String</span> <span class="hljs-built_in">str</span>;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>() &#123;<br>  <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;erdai&quot;</span>;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-built_in">str</span>);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>erdai<br></code></pre></td></tr></table></figure><h3 id="6-4ã€required-å…³é”®å­—"><a href="#6-4ã€required-å…³é”®å­—" class="headerlink" title="6.4ã€required å…³é”®å­—"></a>6.4ã€<strong>required å…³é”®å­—</strong></h3><p>1ï¼‰ã€required å…³é”®å­—ä¸»è¦æ˜¯ç”¨æ¥æ ‡è®°å‘½åå‚æ•°ï¼Œåœ¨ä½¿ç”¨æ—¶ä¸€å®šè¦ç»™ä»–ä»¬èµ‹å€¼ï¼Œä½¿å¾—ä»–ä»¬ä¸ä¸ºç©º</p><p>2ï¼‰ã€ä½¿ç”¨ required ä¿®é¥°çš„å‚æ•°ä¸èƒ½æä¾›é»˜è®¤å€¼</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> optionFunction(<span class="hljs-keyword">var</span> value1,&#123;<span class="hljs-keyword">required</span> <span class="hljs-keyword">var</span> value2,<span class="hljs-keyword">var</span> value3 = <span class="hljs-number">3</span>&#125;)&#123;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;<span class="hljs-subst">$value1</span> <span class="hljs-subst">$value2</span> <span class="hljs-subst">$value3</span>&#x27;</span>);<br>&#125; <br><br><span class="hljs-keyword">void</span> main() &#123;<br>  optionFunction(<span class="hljs-number">1</span>, value2: <span class="hljs-number">100</span>);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">1</span> <span class="hljs-number">100</span> <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure><h2 id="ä¸ƒã€æœ‰è¶£çš„è¿ç®—ç¬¦é‡è½½"><a href="#ä¸ƒã€æœ‰è¶£çš„è¿ç®—ç¬¦é‡è½½" class="headerlink" title="ä¸ƒã€æœ‰è¶£çš„è¿ç®—ç¬¦é‡è½½"></a>ä¸ƒã€æœ‰è¶£çš„è¿ç®—ç¬¦é‡è½½</h2><p>ä¸ Kotlin ç±»ä¼¼ï¼ŒDart çš„è¿ç®—ç¬¦é‡è½½å…è®¸æˆ‘ä»¬è®©ä»»æ„ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œç›¸åŠ ï¼Œæˆ–è€…æ˜¯è¿›è¡Œå…¶ä»–æ›´å¤šçš„è¿ç®—æ“ä½œ</p><p>1ï¼‰ã€è¿ç®—ç¬¦é‡è½½ä½¿ç”¨çš„æ˜¯ operator å…³é”®å­—ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æŒ‡å®šè¿ç®—ç¬¦å‰é¢åŠ ä¸Š operator å…³é”®å­—ï¼Œå°±å¯ä»¥å®ç°è¿ç®—ç¬¦é‡è½½çš„åŠŸèƒ½äº†ï¼ŒDart æ”¯æŒçš„é‡è½½è¿ç®—ç¬¦å¦‚ä¸‹ï¼š</p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;   +   |   []</span><br><span class="hljs-attribute">&gt;</span>   /   ^   []=<br><span class="hljs-attribute">&lt;=  ~/  &amp;   ~</span><br><span class="hljs-attribute">&gt;</span>=  *   <span class="hljs-attribute">&lt;&lt;  ==</span><br><span class="hljs-attribute">â€“   %   &gt;</span>&gt;<br></code></pre></td></tr></table></figure><p>2ï¼‰ã€é‡è½½è¿ç®—ç¬¦çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs arduino">å‡½æ•°è¿”å›å€¼ <span class="hljs-keyword">operator</span> è¿ç®—ç¬¦(è¿ç®—ç¬¦å‚æ•°) &#123;<br>    <span class="hljs-comment">// å®ç°è¿ç®—ç¬¦é‡è½½é€»è¾‘</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥å®è·µä¸€ä¸‹ï¼š</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">class</span> <span class="hljs-type">Money</span>&#123;<br>  <span class="hljs-type">int</span> <span class="hljs-keyword">value</span> = <span class="hljs-number">0</span>;<br><br>  <span class="hljs-type">Money</span>(this.<span class="hljs-keyword">value</span>);<br><br>  //é‡è½½ + å·è¿ç®—ç¬¦, ä¸¤ä¸ª <span class="hljs-type">Money</span> å¯¹è±¡ç›¸åŠ ,ç„¶åè¿”å›ä¸€ä¸ªæ–°çš„ <span class="hljs-type">Money</span> å¯¹è±¡<br>  <span class="hljs-type">Money</span> <span class="hljs-keyword">operator</span> +(<span class="hljs-type">Money</span> <span class="hljs-type">money</span>)&#123;<br>    var sum = <span class="hljs-keyword">value</span> + <span class="hljs-type">money</span>.<span class="hljs-keyword">value</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-type">Money</span>(sum);<br>  &#125;<br>&#125;<br><br><span class="hljs-type">void</span> main() &#123;<br>  var money1 = <span class="hljs-type">Money</span>(<span class="hljs-number">100</span>);<br>  var money2 = <span class="hljs-type">Money</span>(<span class="hljs-number">200</span>);<br>  //ä¸¤ä¸ªå¯¹è±¡ç›¸åŠ <br>  var money3 = money1 + money2;<br>  print(money3.<span class="hljs-keyword">value</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å…«ã€-mixin-æ··å…¥"><a href="#å…«ã€-mixin-æ··å…¥" class="headerlink" title="å…«ã€ mixin æ··å…¥"></a>å…«ã€ mixin æ··å…¥</h2><p>1ï¼‰ã€å‰é¢è¯´åˆ° Dart è¯­è¨€çš„ç±»æ˜¯å•ç»§æ‰¿çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°ç±»ä¼¼å¤šç»§æ‰¿çš„æ•ˆæœå¯ä»¥ä½¿ç”¨ mixin æœºåˆ¶ï¼Œåˆå«æ··å…¥æœºåˆ¶ï¼Œä¾‹å¦‚æŠŠç±» A æ··å…¥åˆ°ç±» B ä¸­ï¼Œé‚£ä¹ˆç±» B å°±æ‹¥æœ‰äº†ç±» A çš„æˆå‘˜ï¼Œè·Ÿç»§æ‰¿çš„ç‰¹æ€§éå¸¸ç›¸ä¼¼</p><p>2ï¼‰ã€å®šä¹‰ä¸€ä¸ªå¯ä»¥è¢« mixin çš„ç±»ï¼Œä½¿ç”¨ mixin å…³é”®å­—ä»£æ›¿ class å…³é”®å­—å³å¯</p><p>3ï¼‰ã€ç»§æ‰¿è¢« mixin çš„ç±»ï¼Œä½¿ç”¨ with å…³é”®å­—ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œä¸­é—´ç”¨ , éš”å¼€</p><p>4ï¼‰ã€è¢« mixin çš„ç±»åªèƒ½ç»§æ‰¿è‡ª Objectï¼Œä¸èƒ½ç»§æ‰¿å…¶ä»–ç±»ï¼Œä¸”ä¸èƒ½æœ‰æ„é€ æ–¹æ³•</p><p>5ï¼‰ã€ä½¿ç”¨ on å…³é”®å­—å¯ä»¥æŒ‡å®šå“ªäº›ç±»å¯ä»¥ä½¿ç”¨è¯¥ mixin ç±»ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œä¸­é—´ç”¨ , éš”å¼€</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-comment">//1ã€å®šä¹‰ä¸€ä¸ªå¯ä»¥è¢« mixin çš„ç±»ï¼Œä½¿ç”¨ mixin å…³é”®å­—ä»£æ›¿ class å…³é”®å­—å³å¯</span><br><span class="hljs-comment">//2ã€ç»§æ‰¿è¢« mixin çš„ç±»ï¼Œä½¿ç”¨ with å…³é”®å­—ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œä¸­é—´ç”¨ , éš”å¼€</span><br><span class="hljs-keyword">mixin</span> A&#123;<br>  <span class="hljs-built_in">void</span> getA()&#123;<br>    print(<span class="hljs-string">&#x27;A&#x27;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">mixin</span> B&#123;<br>  <span class="hljs-built_in">void</span> getB()&#123;<br>    print(<span class="hljs-string">&#x27;B&#x27;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-symbol">C</span>&#123;<br>  <span class="hljs-built_in">void</span> getC()&#123;<br>    print(<span class="hljs-string">&#x27;C&#x27;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-symbol">CC</span> <span class="hljs-symbol">extends</span> <span class="hljs-symbol">C</span> <span class="hljs-symbol">with</span> <span class="hljs-symbol">A,<span class="hljs-symbol">B</span></span>&#123;&#125;<br><br><span class="hljs-built_in">void</span> main() &#123;<br>  var cc = CC();<br>  cc.getA();<br>  cc.getB();<br>  cc.getC();<br>  print(cc <span class="hljs-keyword">is</span> A);<br>  print(cc <span class="hljs-keyword">is</span> B);<br>  print(cc <span class="hljs-keyword">is</span> C);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>A<br>B<br>C<br><span class="hljs-literal">true</span><br><span class="hljs-literal">true</span><br><span class="hljs-literal">true</span><br>  <br><span class="hljs-comment">//3ã€è¢« mixin çš„ç±»åªèƒ½ç»§æ‰¿è‡ª Objectï¼Œä¸èƒ½ç»§æ‰¿å…¶ä»–ç±»ï¼Œä¸”ä¸èƒ½æœ‰æ„é€ æ–¹æ³•</span><br><span class="hljs-keyword">class</span> <span class="hljs-symbol">D</span> &#123;&#125;<br><br><span class="hljs-comment">//ç¼–è¯‘æŠ¥é”™ï¼Œmixin ç±»ä¸èƒ½ç»§æ‰¿å…¶ä»–ç±»ï¼Œåªèƒ½ç»§æ‰¿è‡ª Object</span><br><span class="hljs-keyword">mixin</span> E extends D&#123;<br>   <span class="hljs-comment">//ç¼–è¯‘æŠ¥é”™ï¼Œmixin ç±»ä¸èƒ½æœ‰æ„é€ æ–¹æ³•</span><br>   E();<br>&#125;<br><br><span class="hljs-comment">//4ã€ä½¿ç”¨ on å…³é”®å­—å¯ä»¥æŒ‡å®šå“ªäº›ç±»å¯ä»¥ä½¿ç”¨è¯¥ mixin ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-symbol">F</span>&#123;&#125;<br><br><span class="hljs-keyword">mixin</span> G on F&#123;&#125;<br><br><span class="hljs-comment">//class I with G&#123;&#125; //ç¼–è¯‘æŠ¥é”™ï¼šmixin ç±» G æ²¡æœ‰æŒ‡å®š I å¯ä»¥ä½¿ç”¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-symbol">I</span> <span class="hljs-symbol">extends</span> <span class="hljs-symbol">F</span> <span class="hljs-symbol">with</span> <span class="hljs-symbol">G</span>&#123;&#125; <span class="hljs-comment">//ç¼–è¯‘é€šè¿‡ï¼Œç»§æ‰¿ F é—´æ¥çš„ä½¿ç”¨ mixin ç±» G</span><br></code></pre></td></tr></table></figure><h2 id="ä¹ã€Dart-æ³›å‹"><a href="#ä¹ã€Dart-æ³›å‹" class="headerlink" title="ä¹ã€Dart æ³›å‹"></a>ä¹ã€Dart æ³›å‹</h2><p>æ³›å‹ç¼–ç¨‹æœºåˆ¶æœ€ä¸»è¦çš„ç›®çš„æ˜¯ä¸ºäº†ä»£ç å¤ç”¨ï¼Œé¿å…ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚å¦‚æœä½ å¯¹ Java ï¼ŒKotlin æ³›å‹å¾ˆç†Ÿæ‚‰ï¼Œä½ ä¼šè§‰å¾— Dart æ³›å‹éå¸¸ç®€å•ã€‚å¯¹ Java ï¼ŒKotlin æ³›å‹è¿˜ä¸ç†Ÿæ‚‰çš„ï¼Œçœ‹æˆ‘è¿™ç¯‡æ–‡ç« <a href="https://juejin.cn/post/6950042154496425992">ä¼ é€é—¨</a></p><p>1ï¼‰ã€Dart ä¸­æ³›å‹ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§ä½¿ç”¨ï¼š</p><p>1ã€æ³›å‹ç±»</p><p>2ã€æ³›å‹æ¥å£</p><p>3ã€é™åˆ¶æ³›å‹ç±»å‹</p><h3 id="9-1ã€æ³›å‹ç±»å’Œæ³›å‹æ¥å£"><a href="#9-1ã€æ³›å‹ç±»å’Œæ³›å‹æ¥å£" class="headerlink" title="9.1ã€æ³›å‹ç±»å’Œæ³›å‹æ¥å£"></a>9.1ã€æ³›å‹ç±»å’Œæ³›å‹æ¥å£</h3><p>1ï¼‰ã€æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç±»ï¼Œæˆ–è€…æ¥å£çš„æ—¶å€™ï¼Œåœ¨ç±»ååé¢å¢åŠ æ³›å‹å‚æ•°ï¼Œå°±æ˜¯ä¸ºè¿™ä¸ªç±»æˆ–æ¥å£æ·»åŠ äº†ä¸€ä¸ªæ³›å‹</p><p>2ï¼‰ã€æ³›å‹è¯­æ³•æ ¼å¼ï¼š<code>&lt;T&gt;</code> ï¼Œå¤šä¸ªæ³›å‹ä¹‹é—´ç”¨ , éš”å¼€ï¼š&lt;T,K&gt;</p><p>3ï¼‰ã€æ³›å‹å‚æ•°çš„å‘½åå¯ä»¥éšä¾¿å–ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¹ æƒ¯ä½¿ç”¨å¤§å†™å­—æ¯ä»£è¡¨æ³›å‹å‚æ•°</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">//ä¸€ã€æ³›å‹ç±»</span><br><span class="hljs-comment">//1ã€å®šä¹‰æ³›å‹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericClass</span>&lt;T&gt;&#123;<br><br>  T? name;<br><br>  <span class="hljs-title class_">GenericClass</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);<br><br>  <span class="hljs-built_in">void</span> <span class="hljs-title function_">setName</span>(<span class="hljs-params">T? value</span>)&#123;<br>    name = value;<br>  &#125;<br><br>  T? <span class="hljs-title function_">getName</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> name;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//2ã€æ³›å‹ç±»ä½¿ç”¨</span><br><span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> genericClass = <span class="hljs-title class_">GenericClass</span>&lt;<span class="hljs-title class_">String</span>&gt;(<span class="hljs-string">&quot;&quot;</span>);<br>  genericClass.<span class="hljs-title function_">setName</span>(<span class="hljs-string">&quot;erdai&quot;</span>);<br>  <span class="hljs-title function_">print</span>(genericClass.<span class="hljs-title function_">getName</span>());<br>&#125;<br><br><span class="hljs-comment">//3ã€æ‰“å°ç»“æœ</span><br>erdai<br>  <br><span class="hljs-comment">//äºŒã€æ³›å‹æ¥å£</span><br><span class="hljs-comment">//1ã€å®šä¹‰æ³›å‹æ¥å£</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericInterface</span>&lt;K,V&gt;&#123;<br>  <span class="hljs-built_in">void</span> <span class="hljs-title function_">setKeyValue</span>(K key,V value);<br>&#125;<br><br><span class="hljs-comment">//2ã€å®šä¹‰æ³›å‹æ¥å£å®ç°ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericInterfaceImpl</span>&lt;K,V&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GenericInterface</span>&lt;K,V&gt;&#123;<br><br>  <span class="hljs-keyword">var</span> map = &#123;&#125;;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-built_in">void</span> <span class="hljs-title function_">setKeyValue</span>(<span class="hljs-params">K key, V value</span>) &#123;<br>    map[key] = value;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//3ã€æ³›å‹æ¥å£ä½¿ç”¨</span><br><span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> impl = <span class="hljs-title class_">GenericInterfaceImpl</span>&lt;<span class="hljs-title class_">String</span>,int&gt;();<br>  impl.<span class="hljs-title function_">setKeyValue</span>(<span class="hljs-string">&quot;erdai&quot;</span>, <span class="hljs-number">666</span>);<br>  impl.<span class="hljs-property">map</span>.<span class="hljs-title function_">forEach</span>((key, value) &#123;<br>    <span class="hljs-title function_">print</span>(<span class="hljs-string">&#x27;$key $value&#x27;</span>);<br>  &#125;);<br>&#125;<br><br><span class="hljs-comment">//4ã€æ‰“å°ç»“æœ</span><br>erdai <span class="hljs-number">666</span><br></code></pre></td></tr></table></figure><h3 id="9-2ã€é™åˆ¶æ³›å‹ç±»å‹"><a href="#9-2ã€é™åˆ¶æ³›å‹ç±»å‹" class="headerlink" title="9.2ã€é™åˆ¶æ³›å‹ç±»å‹"></a>9.2ã€é™åˆ¶æ³›å‹ç±»å‹</h3><p>1ï¼‰ã€é™åˆ¶æ³›å‹å‚æ•°ç±»å‹è¯­æ³•æ ¼å¼ï¼š&lt;æ³›å‹å‚æ•° extends çˆ¶ç±»&gt;</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseClass</span></span>&#123;<br><br>  void baseMethod()&#123;<br>    print(&#x27;<span class="hljs-type">BaseClass</span> baseMethod...&#x27;);<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseClass</span></span>&#123;<br>  <span class="hljs-meta">@override</span><br>  void baseMethod() &#123;<br>    print(&#x27;<span class="hljs-type">Child</span> baseMethod&#x27;);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">//T ç±»å‹å¿…é¡»æ˜¯ BaseClass æˆ–è€…å…¶å­ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo&lt;T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseClass&gt;</span></span>&#123;<br>  <span class="hljs-type">T</span>? t;<br>  <br>  <span class="hljs-type">Foo</span>(<span class="hljs-keyword">this</span>.t);<br><br>  void fooTest()&#123;<br>    t?.baseMethod();<br>  &#125;<br>&#125;<br><br>void main()&#123;<br>  <span class="hljs-comment">//1ã€ä½¿ç”¨çˆ¶ç±» BaseClass ä½œä¸ºæ³›å‹å‚æ•°æ˜¯å…è®¸çš„</span><br>  <span class="hljs-keyword">var</span> baseClass = <span class="hljs-type">BaseClass</span>();<br>  <span class="hljs-keyword">var</span> foo1 = <span class="hljs-type">Foo</span>&lt;<span class="hljs-type">BaseClass</span>&gt;(baseClass);<br>  foo1.fooTest();<br>  <br>  <span class="hljs-comment">//2ã€ä½¿ç”¨å­ç±» Child ä½œä¸ºæ³›å‹å‚æ•°</span><br>  <span class="hljs-keyword">var</span> childClass = <span class="hljs-type">Child</span>();<br>  <span class="hljs-keyword">var</span> foo2 = <span class="hljs-type">Foo</span>&lt;<span class="hljs-type">Child</span>&gt;(childClass);<br>  foo2.fooTest();<br><br>  <span class="hljs-comment">//3ã€å¦‚æœä¸ä¼ å…¥ä»»ä½•æ³›å‹å‚æ•°ï¼Œé»˜è®¤ä½¿ç”¨çˆ¶ç±» BaseClass ä½œä¸ºæ³›å‹å‚æ•°</span><br>  <span class="hljs-keyword">var</span> foo3 = <span class="hljs-type">Foo</span>(baseClass);<br>  foo3.fooTest();<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-type">BaseClass</span> baseMethod...<br><span class="hljs-type">Child</span> baseMethod<br><span class="hljs-type">BaseClass</span> baseMethod...<br></code></pre></td></tr></table></figure><h2 id="åã€Dart-Import-å¯¼å…¥åŒ…"><a href="#åã€Dart-Import-å¯¼å…¥åŒ…" class="headerlink" title="åã€Dart Import å¯¼å…¥åŒ…"></a>åã€Dart Import å¯¼å…¥åŒ…</h2><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¯¼å…¥æˆ‘ä»¬çš„æœ¬åœ°æ¨¡å—æˆ–è€…ç¬¬ä¸‰æ–¹å¼€æºåŒ…ã€‚Dart ä¸­ä¸»è¦é€šè¿‡ import æŒ‡ä»¤å¯¼å…¥åŒ…</p><h3 id="10-1ã€å¯¼å…¥å†…ç½®åŒ…"><a href="#10-1ã€å¯¼å…¥å†…ç½®åŒ…" class="headerlink" title="10.1ã€å¯¼å…¥å†…ç½®åŒ…"></a>10.1ã€å¯¼å…¥å†…ç½®åŒ…</h3><p>1ï¼‰ã€Dart å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„åŒ…ï¼Œè¿™äº›å†…ç½®çš„åŒ…ä¼šéšç€ Dart sdk ä¸€èµ·å®‰è£…åœ¨æœ¬åœ°</p><p>2ï¼‰ã€å¯¼å…¥å†…ç½®åŒ…ä½¿ç”¨ dart: ä½œä¸ºè·¯å¾„å‰ç¼€</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å¯¼å…¥å†…ç½® math åŒ…ï¼Œä½¿ç”¨ dart: ä½œä¸ºå‰ç¼€ã€‚</span><br><span class="hljs-comment">// math åŒ…ä¸»è¦æä¾›ä¸€äº›æ•°å­¦ç›¸å…³çš„å‡½æ•°ï¼Œä¾‹å¦‚ï¼Œæ­£å¼¦å‡½æ•°ã€æ±‚æœ€å¤§å€¼å‡½æ•°ç­‰ç­‰</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;dart:math&#x27;</span>;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// è°ƒç”¨ math åŒ…ä¸­çš„ max å‡½æ•°ï¼Œæ±‚ä¸¤ä¸ªæ•°ä¸­çš„æœ€å¤§å€¼ã€‚</span><br>  <span class="hljs-keyword">var</span> a = <span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>);<br>  <span class="hljs-title function_">print</span>(a); <span class="hljs-comment">//æ‰“å° 100</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-2ã€åŒ…çš„åˆ«å"><a href="#10-2ã€åŒ…çš„åˆ«å" class="headerlink" title="10.2ã€åŒ…çš„åˆ«å"></a>10.2ã€åŒ…çš„åˆ«å</h3><p>é»˜è®¤æƒ…å†µè°ƒç”¨åŒ…ä¸­çš„å‡½æ•°æˆ–è€…ç±»ï¼Œä¸éœ€è¦åŒ…åä½œä¸ºå‰ç¼€ï¼Œä¸Šé¢è°ƒç”¨äº† math åŒ…ä¸­çš„ max å‡½æ•°ï¼Œç›´æ¥ä½¿ç”¨åŒ…ä¸­çš„å‡½æ•°åã€‚ä½†æ˜¯è¿™æ ·ä¼šå­˜åœ¨å‘½åå†²çªçš„å¯èƒ½æ€§ï¼Œå¦‚æœå¯¼å…¥çš„ä¸¤ä¸ªåŒ…ï¼ŒåŒ…å«äº†åŒåçš„ç±»æˆ–è€…å‡½æ•°ï¼Œå°±ä¼šå‡ºç°å‘½åå†²çªï¼Œå› æ­¤æä¾›åˆ«åæœºåˆ¶</p><p>1ï¼‰ã€ä½¿ç”¨ as å…³é”®å­—æŒ‡å®šåŒ…çš„åˆ«å</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//ä½¿ç”¨ as å…³é”®å­—ï¼ŒæŒ‡å®šåŒ…çš„åˆ«å</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;dart:math&#x27;</span> <span class="hljs-keyword">as</span> math;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-comment">// ä½¿ç”¨åˆ«åï¼Œå¼•ç”¨åŒ…ä¸­çš„å‡½æ•° ã€‚</span><br>  <span class="hljs-keyword">var</span> a = math.<span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>);<br>  <span class="hljs-title function_">print</span>(a); <span class="hljs-comment">//æ‰“å° 100</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="10-3ã€å¯¼å…¥åŒ…çš„éƒ¨åˆ†å†…å®¹"><a href="#10-3ã€å¯¼å…¥åŒ…çš„éƒ¨åˆ†å†…å®¹" class="headerlink" title="10.3ã€å¯¼å…¥åŒ…çš„éƒ¨åˆ†å†…å®¹"></a>10.3ã€å¯¼å…¥åŒ…çš„éƒ¨åˆ†å†…å®¹</h3><p>1ï¼‰ã€æœ‰æ—¶å€™æˆ‘ä»¬ä¸æƒ³å¯¼å…¥æ•´ä¸ªåŒ…ï¼Œåªæƒ³å¯¼å…¥åŒ…é‡Œé¢çš„æŸä¸ªç±»æˆ–è€…æŸä¸ªå‡½æ•°ã€‚Dart æä¾›äº†show å’Œ hide å…³é”®å­—å¤„ç†å¯¼å…¥åŒ…çš„éƒ¨åˆ†å†…å®¹</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs lua">//<span class="hljs-number">1</span>ã€ä»…å¯¼å…¥ <span class="hljs-built_in">max</span> å‡½æ•°, å¯¼å…¥å¤šä¸ªå†…å®¹ä½¿ç”¨é€—å·åˆ†éš”ï¼Œä¾‹å¦‚ show <span class="hljs-built_in">max</span>,<span class="hljs-built_in">sin</span><br>import <span class="hljs-string">&#x27;dart:math&#x27;</span> show <span class="hljs-built_in">max</span>;<br><br>//<span class="hljs-number">2</span>ã€é™¤äº†<span class="hljs-built_in">max</span>å‡½æ•°ï¼Œå¯¼å…¥ <span class="hljs-built_in">math</span> ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚<br>import <span class="hljs-string">&#x27;dart:math&#x27;</span> hide <span class="hljs-built_in">max</span>;<br></code></pre></td></tr></table></figure><h3 id="10-4ã€å¯¼å…¥æœ¬åœ°æ¨¡å—"><a href="#10-4ã€å¯¼å…¥æœ¬åœ°æ¨¡å—" class="headerlink" title="10.4ã€å¯¼å…¥æœ¬åœ°æ¨¡å—"></a>10.4ã€å¯¼å…¥æœ¬åœ°æ¨¡å—</h3><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ä¼šå¯¼å…¥æœ¬åœ°çš„æ¨¡å—ï¼Œä¸€èˆ¬é¡¹ç›®ä¸­ä¼šæœ‰å¤šä¸ª dart è„šæœ¬æ–‡ä»¶ï¼Œæ¯ä¸ª dart è„šæœ¬å®ç°ä¸åŒæ¨¡å—çš„ä»£ç ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ç›´æ¥å¯¼å…¥ dart è„šæœ¬æ–‡ä»¶å³å¯</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span>ä¾‹å¦‚æˆ‘æœ‰ä¸ªæœ¬åœ°æ¨¡å—ï¼šlibs/stack.dart<br><br><span class="hljs-regexp">//</span>å¯¼å…¥æœ¬åœ°æ¨¡å—<br><span class="hljs-regexp">//</span>ç›´æ¥é€šè¿‡æœ¬åœ°æ–‡ä»¶è·¯å¾„å¯¼å…¥ dart è„šæœ¬å³å¯<br>import <span class="hljs-string">&#x27;libs/stack.dart&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="10-5ã€å¯¼å…¥ç¬¬ä¸‰æ–¹å¼€æºåŒ…"><a href="#10-5ã€å¯¼å…¥ç¬¬ä¸‰æ–¹å¼€æºåŒ…" class="headerlink" title="10.5ã€å¯¼å…¥ç¬¬ä¸‰æ–¹å¼€æºåŒ…"></a>10.5ã€å¯¼å…¥ç¬¬ä¸‰æ–¹å¼€æºåŒ…</h3><h4 id="10-5-1ã€æŸ¥æ‰¾ç¬¬ä¸‰æ–¹å¼€æºåŒ…"><a href="#10-5-1ã€æŸ¥æ‰¾ç¬¬ä¸‰æ–¹å¼€æºåŒ…" class="headerlink" title="10.5.1ã€æŸ¥æ‰¾ç¬¬ä¸‰æ–¹å¼€æºåŒ…"></a>10.5.1ã€æŸ¥æ‰¾ç¬¬ä¸‰æ–¹å¼€æºåŒ…</h4><p><a href="https://pub.dev/">https://pub.dev/</a> ï¼šè¿™ä¸ªæ˜¯ pub çš„ä¸­å¤®ä»“åº“, ä¸Šé¢æœ‰å¤§é‡çš„ç¬¬ä¸‰æ–¹å¼€æºåŒ…ï¼Œå¯ä»¥åˆ°è¿™é‡Œæ‰¾åˆ°è‡ªå·±æƒ³è¦çš„åŒ…</p><h4 id="10-5-2ã€é…ç½®ä¾èµ–åŒ…"><a href="#10-5-2ã€é…ç½®ä¾èµ–åŒ…" class="headerlink" title="10.5.2ã€é…ç½®ä¾èµ–åŒ…"></a>10.5.2ã€é…ç½®ä¾èµ–åŒ…</h4><p>åœ¨é¡¹ç›®æ ¹ç›®å½• pubspec.yaml ä¸­é…ç½® dependencies å±æ€§ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><blockquote><p>dependencies:</p><p>åŒ…å: ç‰ˆæœ¬å·</p></blockquote><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">dependencies</span>:<br>  <span class="hljs-attribute">http</span>: ^<span class="hljs-number">0</span>.<span class="hljs-number">13</span>.<span class="hljs-number">5</span><br>  <span class="hljs-attribute">cupertino_icons</span>: ^<span class="hljs-number">1</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p>å…³äºç‰ˆæœ¬å·è¯´æ˜ï¼Œå¦‚ä¸‹:</p><ul><li>^1.2.1 ä»£è¡¨çš„æ›´æ–°ç‰ˆæœ¬èŒƒå›´ä¸º &gt;&#x3D;1.2.1 &amp;&amp; &lt; 2.0.0</li><li>^0.2.1 ä»£è¡¨çš„æ›´æ–°ç‰ˆæœ¬èŒƒå›´ä¸º &gt;&#x3D;0.2.1 &amp;&amp; &lt; 0.3.0</li><li>^0.0.2 ä»£è¡¨çš„æ›´æ–°ç‰ˆæœ¬èŒƒå›´ä¸º 0.0.2ï¼ˆç›¸å½“äºé”å®šä¸ºäº† 0.0.2 ç‰ˆæœ¬ï¼‰</li></ul><p><strong>è§„å¾‹</strong>ï¼š å®åˆ™å°±æ˜¯æŠŠ ^ åé¢é 0 çš„æ•°å­— +1 ï¼Œç„¶åæŠŠå…¶ä»–ä½å˜ä¸º 0 å°±æ˜¯å®ƒçš„æœ€å¤§ç‰ˆæœ¬ã€‚å¦å¤–å¦‚æœæœ€åä¸€ä½é 0 ï¼Œå…¶ä»–ä½ä¸º 0 ï¼Œå°±ç›¸å½“äºé”ç‰ˆæœ¬ã€‚å¦‚ï¼š</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs coq">æœ€å¤§ç‰ˆæœ¬ï¼š^<span class="hljs-number">1.2</span><span class="hljs-number">.1</span> =&gt; <span class="hljs-number">2.2</span><span class="hljs-number">.1</span> =&gt; <span class="hljs-number">2.0</span><span class="hljs-number">.0</span> èŒƒå›´ï¼š<span class="hljs-number">1.2</span><span class="hljs-number">.1</span><span class="hljs-number">-2.0</span><span class="hljs-number">.0</span><br>æœ€å¤§ç‰ˆæœ¬ï¼š^<span class="hljs-number">0.2</span><span class="hljs-number">.1</span> =&gt; <span class="hljs-number">0.3</span><span class="hljs-number">.1</span> =&gt; <span class="hljs-number">0.3</span><span class="hljs-number">.0</span> èŒƒå›´ï¼š<span class="hljs-number">0.2</span><span class="hljs-number">.1</span><span class="hljs-number">-0.3</span><span class="hljs-number">.0</span><br>^<span class="hljs-number">0.0</span><span class="hljs-number">.2</span>ï¼šå›ºå®šç‰ˆæœ¬ï¼š<span class="hljs-number">0.0</span><span class="hljs-number">.2</span><br></code></pre></td></tr></table></figure><h4 id="10-5-3ã€ä¸‹è½½ä¾èµ–åŒ…"><a href="#10-5-3ã€ä¸‹è½½ä¾èµ–åŒ…" class="headerlink" title="10.5.3ã€ä¸‹è½½ä¾èµ–åŒ…"></a>10.5.3ã€ä¸‹è½½ä¾èµ–åŒ…</h4><p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">flutter pub <span class="hljs-keyword">get</span><br></code></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥ä½¿ç”¨å¼€å‘å·¥å…·çš„å¯è§†åŒ–ç•Œé¢æ“ä½œ</p><h4 id="10-5-4ã€å¯¼å…¥ç¬¬ä¸‰æ–¹å¼€æºåŒ…"><a href="#10-5-4ã€å¯¼å…¥ç¬¬ä¸‰æ–¹å¼€æºåŒ…" class="headerlink" title="10.5.4ã€å¯¼å…¥ç¬¬ä¸‰æ–¹å¼€æºåŒ…"></a>10.5.4ã€å¯¼å…¥ç¬¬ä¸‰æ–¹å¼€æºåŒ…</h4><p>ä¾èµ–åŒ…ä¸‹è½½å®‰è£…åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ import å¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…ï¼Œç¬¬ä¸‰æ–¹åŒ…å‰ç¼€ä¸º package:</p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tcl">// è¿™é‡Œå¯¼å…¥ <span class="hljs-keyword">http</span> åŒ…ï¼Œåˆ«åä¸º <span class="hljs-keyword">http</span><br>import &#x27;<span class="hljs-keyword">package</span>:<span class="hljs-keyword">http</span>/<span class="hljs-keyword">http</span>.dart&#x27; as <span class="hljs-keyword">http</span>;<br></code></pre></td></tr></table></figure><h2 id="åä¸€ã€Dart-å¼‚å¸¸å¤„ç†"><a href="#åä¸€ã€Dart-å¼‚å¸¸å¤„ç†" class="headerlink" title="åä¸€ã€Dart å¼‚å¸¸å¤„ç†"></a>åä¸€ã€Dart å¼‚å¸¸å¤„ç†</h2><p>ç±»ä¼¼ Javaï¼ŒDart æä¾›äº† Exception å’Œ Error ä¸¤ç§ç±»å‹çš„å¼‚å¸¸ä»¥åŠä¸€äº›å­ç±»</p><p>1ï¼‰ã€ä½¿ç”¨ throw å…³é”®å­—æŠ›å‡ºè‡ªå®šä¹‰ç±»å‹å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥å°†ä»»ä½•é null å¯¹è±¡ä½œä¸ºå¼‚å¸¸æŠ›å‡º</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-keyword">throw</span> <span class="hljs-built_in">Exception</span>(<span class="hljs-string">&#x27;è¿™æ˜¯ä¸€ä¸ªå¼‚å¸¸&#x27;</span>);<br><span class="hljs-keyword">throw</span> <span class="hljs-string">&#x27;è¿™æ˜¯ä¸€ä¸ªå¼‚å¸¸&#x27;</span>;<br></code></pre></td></tr></table></figure><p><strong>å°å»ºè®®</strong>ï¼šä¸€èˆ¬å»ºè®®æŠ›å‡º Exception å’Œ Error , æˆ–è€…ä»–ä»¬çš„å­ç±»</p><p>2ï¼‰ã€ä½¿ç”¨ try&#x2F;on catch é…åˆæ•è·å¼‚å¸¸</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs scss">void <span class="hljs-selector-tag">main</span>() &#123;<br>  try &#123;<br>    <span class="hljs-selector-tag">var</span> s;<br>    <span class="hljs-built_in">print</span>(s.length);<br>  &#125; on NoSuchMethodError catch (e) &#123;<br>    <span class="hljs-comment">//æ•è·å¼‚å¸¸å¹¶æ‰“å°</span><br>    <span class="hljs-built_in">print</span>(e);<br>  &#125; catch (e, s) &#123;<br>    <span class="hljs-comment">//å…œåº•å¤„ç† eï¼šæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ sï¼šæ ˆä¿¡æ¯ï¼Œæ­¤å‚æ•°å¯å†™å¯ä¸å†™</span><br>    <span class="hljs-built_in">print</span>(e);<br>    <span class="hljs-built_in">print</span>(s);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ï¼š</p><p>1ã€ä½¿ç”¨ on å’Œ catch æ¥æ•è·å¼‚å¸¸ï¼šon ç”¨æ¥æŒ‡å®šå¼‚å¸¸çš„ç±»å‹ï¼Œcatch åˆ™ç”¨æ¥æ•è·å¯¹è±¡</p><p>2ã€å½“æŠ›å‡ºçš„é”™è¯¯å¹¶ä¸æ˜¯ on æŒ‡å®šçš„å¼‚å¸¸ç±»å‹æ—¶ï¼Œåˆ™èµ°æœ€åé¢çš„ catch å…œåº•</p><p>3ã€å…œåº• catch æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ ˆä¿¡æ¯</p><p>3ï¼‰ã€ä½¿ç”¨ rethrow å†æ¬¡æŠ›å‡ºå¼‚å¸¸</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">exceptionMethod</span>()</span>&#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-built_in">dynamic</span> b = <span class="hljs-literal">true</span>;<br>    print(b++); <span class="hljs-comment">//NoSuchMethodError</span><br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    rethrow; <span class="hljs-comment">//å°†ä¸Šè¿°å¼‚å¸¸å†æ¬¡æŠ›å‡º</span><br>  &#125;<br>&#125;<br><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span>()</span> &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    exceptionMethod();<br>  &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>    <span class="hljs-comment">//æ•è·å¼‚å¸¸å¹¶æ‰“å°</span><br>    print(e);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="åäºŒã€Dart-å¼‚æ­¥å¤„ç†"><a href="#åäºŒã€Dart-å¼‚æ­¥å¤„ç†" class="headerlink" title="åäºŒã€Dart å¼‚æ­¥å¤„ç†"></a>åäºŒã€Dart å¼‚æ­¥å¤„ç†</h2><p>Dart æ˜¯å•çº¿ç¨‹æ¨¡å‹çš„è¯­è¨€ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç¨‹åºä¸­åšè€—æ—¶æ“ä½œï¼šè¯·æ±‚ Api æ¥å£ï¼Œæ–‡ä»¶ IO ç­‰ï¼Œå°±å¯èƒ½å¯¼è‡´ç‚¹å‡»äº‹ä»¶æ²¡æœ‰å“åº”ï¼Œç¨‹åºå¡é¡¿ä¹‹ç±»çš„æƒ…å†µã€‚ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼ŒDart å¼•å…¥äº†å¼‚æ­¥æ“ä½œæœºåˆ¶ï¼š</p><p>1ã€Dart å¼‚æ­¥å¤„ç†ä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œå…¶ä»–ä»»åŠ¡å¯ä»¥ç»§ç»­è¿è¡Œ</p><p>2ã€å› ä¸º Dart çš„å¼‚æ­¥æœºåˆ¶å¹¶ä¸æ¶‰åŠçº¿ç¨‹çš„åˆ‡æ¢ï¼Œä»…ä»…æ˜¯ç”±æˆ‘ä»¬çš„ç¼–ç¨‹è¯­è¨€å»æ§åˆ¶ï¼Œæ‰€ä»¥å®ƒçš„æ‰§è¡Œæ•ˆç‡éå¸¸é«˜</p><h3 id="12-1ã€Dart-å¼‚æ­¥å¤„ç†çš„ç”¨æ³•"><a href="#12-1ã€Dart-å¼‚æ­¥å¤„ç†çš„ç”¨æ³•" class="headerlink" title="12.1ã€Dart å¼‚æ­¥å¤„ç†çš„ç”¨æ³•"></a>12.1ã€Dart å¼‚æ­¥å¤„ç†çš„ç”¨æ³•</h3><p>1ï¼‰ã€Dart è¯­è¨€ä¸­ï¼Œæœ‰å¾ˆå¤šåº“çš„å‡½æ•°è¿”å› Future æˆ–è€… Stream å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡éƒ½æ˜¯ Dart å¯¹å¼‚æ­¥ç¼–ç¨‹æ”¯æŒçš„å®ç°</p><p>Future - ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥è®¡ç®—ä»»åŠ¡ï¼Œå¯ä»¥è·å–ä»»åŠ¡çš„è®¡ç®—ç»“æœ</p><p>Stream - ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥çš„æ•°æ®åºåˆ—ï¼Œé€šå¸¸ç”¨äºè¯»å–è¿ç»­çš„æ•°æ®æˆ–è€…äº‹ä»¶</p><h4 id="12-1-1ã€Future"><a href="#12-1-1ã€Future" class="headerlink" title="12.1.1ã€Future"></a>12.1.1ã€Future</h4><p>1ï¼‰ã€Futureä»£è¡¨çš„æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„è®¡ç®—ä»»åŠ¡ï¼Œå¦‚æœä»»åŠ¡è¿˜æ²¡æ‰§è¡Œå®Œæˆï¼Œæˆ‘ä»¬æ˜¯æ‹¿ä¸åˆ°å¼‚æ­¥ä»»åŠ¡çš„ç»“æœ</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs awk">import <span class="hljs-string">&#x27;package:http/http.dart&#x27;</span> as http;<br><br>void main() &#123;<br>  var url = <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>;<br>  <span class="hljs-regexp">//</span>è°ƒç”¨ get å‡½æ•°è¯·æ±‚ url, è¿”å›ä¸€ä¸ªå°è£…äº† http è¯·æ±‚ä»»åŠ¡çš„ future å¯¹è±¡<br>  Future fTask = http.get(Uri.parse(url));<br>  <span class="hljs-regexp">//</span>æ‰“å° future å¯¹è±¡<br>  print(fTask);<br>  <br>  <span class="hljs-regexp">//</span> å‘ future å¯¹è±¡æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå¤„ç†è¯·æ±‚ç»“æœ<br>  fTask.then((response) =&gt; &#123;<br>    print(<span class="hljs-string">&#x27;Response status: $&#123;response.statusCode&#125;&#x27;</span>)<br>  &#125;);<br>  <span class="hljs-regexp">//</span> æ‰“å° main å‡½æ•°ç»“æŸæ ‡è®°<br>  print(<span class="hljs-string">&#x27;main end...&#x27;</span>);<br>&#125;<br><br><span class="hljs-regexp">//</span>æ‰“å°ç»“æœ<br>Instance of <span class="hljs-string">&#x27;Future&lt;Response&gt;&#x27;</span><br>main end...<br>Response status: <span class="hljs-number">200</span><br><br>Process finished with <span class="hljs-keyword">exit</span> code <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ï¼š</p><p>1ã€é¦–å…ˆæ‰“å°äº† fTask ï¼Œè¾“å‡ºè¡¨ç¤º fTask æ˜¯ä¸€ä¸ª Future å¯¹è±¡ï¼Œå°†æ¥ä¼šè¿”å›ä¸€ä¸ªå« Response çš„ç»“æœå¯¹è±¡</p><p>2ã€æ¥ä¸‹æ¥æ‰“å°äº† main endâ€¦ ï¼Œè€Œä¸æ˜¯å…ˆè¾“å‡º http çš„è¯·æ±‚çŠ¶æ€ç </p><p>3ã€æœ€åæ‰“å°äº† http çš„è¯·æ±‚çŠ¶æ€ç ï¼šResponse status: 200 ï¼Œç„¶åè¿›ç¨‹ä¹Ÿé€€å‡ºäº†</p><p>ä¸Šé¢è¿™æ®µç¨‹åºåœ¨æ‰“å°äº† main endâ€¦ æ—¶è¿›ç¨‹å¹¶æ²¡æœ‰é€€å‡ºï¼Œè€Œæ˜¯ç­‰åˆ°æ‰“å°äº† http çš„è¯·æ±‚çŠ¶æ€ç ï¼šResponse status: 200 æ‰é€€å‡ºï¼Œè¿™ä¹ŸéªŒè¯äº†æˆ‘ä»¬å‰é¢ä¸€ä¸ªè§‚ç‚¹ï¼š <strong>Dart çš„å¼‚æ­¥æœºåˆ¶å¹¶ä¸æ¶‰åŠçº¿ç¨‹çš„åˆ‡æ¢ï¼Œä»…ä»…æ˜¯ç”±æˆ‘ä»¬çš„ç¼–ç¨‹è¯­è¨€å»æ§åˆ¶ï¼Œæ‰€ä»¥å®ƒçš„æ‰§è¡Œæ•ˆç‡éå¸¸é«˜</strong></p><h4 id="12-1-2ã€await-å’Œ-async"><a href="#12-1-2ã€await-å’Œ-async" class="headerlink" title="12.1.2ã€await å’Œ async"></a>12.1.2ã€await å’Œ async</h4><p>ä¸Šè¿°è¿™ä¸ªä¾‹å­å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼š</p><p>1ã€éœ€è¦æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå¦‚æœæˆ‘æœ‰å¤šå±‚å›è°ƒï¼Œå¯è¯»æ€§å°±ä¼šå˜å¾—å¾ˆå·®</p><p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ await å’Œ async æœºåˆ¶æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸”å®ƒè¿˜èƒ½è®©æˆ‘ä»¬ä½¿ç”¨åŒæ­¥çš„æ–¹å¼å†™å‡ºå¼‚æ­¥çš„ä»£ç </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span>&#123;<br>  <span class="hljs-keyword">var</span> url = <span class="hljs-string">&quot;https://www.baidu.com/&quot;</span>;<br>  <span class="hljs-comment">//è¯·æ±‚ url, é€šè¿‡ awaitï¼Œç­‰å¾… future å¼‚æ­¥è®¡ç®—ä»»åŠ¡çš„ç»“æœï¼Œæ‰§è¡ŒæˆåŠŸå°±ç›´æ¥è¿”å›ç»“æœ</span><br>  <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> http.<span class="hljs-keyword">get</span>(<span class="hljs-built_in">Uri</span>.parse(url));<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Response status: <span class="hljs-subst">$&#123;response.statusCode&#125;</span>&#x27;</span>);<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;main end...&#x27;</span>);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>Response status: <span class="hljs-number">200</span><br>main end...<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ï¼š</p><p>1ã€è¾“å‡ºç»“æœçš„é¡ºåºï¼Œè·Ÿæˆ‘ä»¬ä¹¦å†™ä»£ç çš„é¡ºåºä¸€è‡´</p><p>2ã€é€šè¿‡æ ‡è®° async å’Œ await å…³é”®å­—ï¼Œæˆ‘ä»¬çš„å¼‚æ­¥ä»£ç ï¼Œçœ‹èµ·æ¥è·ŸåŒæ­¥ä»£ç æ²¡ä»€ä¹ˆåŒºåˆ«ï¼š</p><ul><li>async å…³é”®å­—çš„ä½œç”¨å°±æ˜¯æ ‡è®°ä¸€ä¸ªå‡½æ•°æ˜¯å¼‚æ­¥å‡½æ•°</li><li>await å…³é”®å­—çš„ä½œç”¨æ˜¯ç­‰å¾…å¼‚æ­¥ä»»åŠ¡çš„ç»“æœ</li></ul><p><strong>æ³¨æ„ï¼š</strong> await å…³é”®å­—åªèƒ½åœ¨æ ‡è®°äº†async çš„å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p><h4 id="12-1-3ã€Stream"><a href="#12-1-3ã€Stream" class="headerlink" title="12.1.3ã€Stream"></a>12.1.3ã€Stream</h4><p>1ï¼‰ã€Stream ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥çš„æ•°æ®åºåˆ—ï¼Œæ˜¯ä¸€ç§å¼‚æ­¥è¯»å–æµå¼æ•°æ®çš„æ–¹å¼ï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><blockquote><p>await for (æ•°æ®ç±»å‹ å˜é‡ in streamç±»å‹å˜é‡) {</p><p>&#x2F;&#x2F; å¤„ç†æ•°æ®</p><p>}</p></blockquote><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function">Future&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">sumStream</span>(<span class="hljs-params">Stream&lt;<span class="hljs-built_in">int</span>&gt; stream</span>) <span class="hljs-keyword">async</span></span> &#123;<br>  <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">await</span> <span class="hljs-keyword">for</span> (final <span class="hljs-keyword">value</span> <span class="hljs-keyword">in</span> stream) &#123;<br>    sum += <span class="hljs-keyword">value</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-comment">//async* è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªéœ€è¿”å› Stream ç±»å‹å‚æ•°çš„å¼‚æ­¥å‡½æ•°</span><br><span class="hljs-function">Stream&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">countStream</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> to</span>) <span class="hljs-keyword">async</span>*</span> &#123;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">1</span>; i &lt;= to; i++) &#123;<br>    <span class="hljs-comment">//yield åœ¨è¿™é‡Œè¡¨ç¤ºæš‚æ—¶è®©å‡ºèµ„æºè®©å…¶ä»–ä»£ç æ‰§è¡Œ</span><br>    <span class="hljs-keyword">yield</span> i;<br>  &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span>() <span class="hljs-keyword">async</span></span>&#123;<br>  <span class="hljs-keyword">var</span> stream = countStream(<span class="hljs-number">10</span>);<br>  <span class="hljs-comment">//é€šè¿‡ await ç­‰å¾… sumStream è®¡ç®—è¿”å›ç»“æœ</span><br>  <span class="hljs-keyword">var</span> sum = <span class="hljs-keyword">await</span> sumStream(stream);<br>  print(sum);<br>&#125;<br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br><span class="hljs-number">55</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç æˆ‘ä»¬ä½¿ç”¨ await æ ‡è®° for in å¾ªç¯è¯­å¥ï¼Œå¾ªç¯è¯»å– stream ç±»å‹å˜é‡ä¸­çš„æ•°æ®ï¼Œä»£ç ä¹¦å†™ä¹Ÿå¾ˆç›´è§‚ï¼Œè·ŸåŒæ­¥ä»£ç çš„ä¹¦å†™æ–¹å¼ä¸€è‡´</p><h2 id="åä¸‰ã€Dart-Isolate-å¹¶å‘"><a href="#åä¸‰ã€Dart-Isolate-å¹¶å‘" class="headerlink" title="åä¸‰ã€Dart Isolate å¹¶å‘"></a>åä¸‰ã€Dart Isolate å¹¶å‘</h2><p>æˆ‘ä»¬çŸ¥é“ä¸€èˆ¬å¸¸ç”¨çš„å¹¶å‘æœºåˆ¶ä¸»è¦åŒ…æ‹¬è¿›ç¨‹ï¼Œçº¿ç¨‹ä»¥åŠåé¢çš„åç¨‹ã€‚ä½†æ˜¯ Dart ä¸ä¸€èˆ¬ ğŸ˜‚ ï¼ŒDart ä¸­çš„å¹¶å‘æœºåˆ¶ä¸»è¦æ˜¯ç”± Isolate å»å®ç°çš„ã€‚æ‰€è°“ Isolate ï¼Œä½ å¯ä»¥ç®€å•çš„ç†è§£æ˜¯ä¸€ç§ç‰¹æ®Šçš„çº¿ç¨‹</p><p>Isolate çš„ç‰¹ç‚¹ï¼š</p><p>1ã€Isolate ä¹‹é—´ä¸èƒ½å…±äº«å†…å­˜</p><p>2ã€Isolate ä¹‹é—´åªèƒ½é€šè¿‡æ¶ˆæ¯é€šè®¯</p><p>ä¸èƒ½å…±äº«å†…å­˜ï¼Œæ„å‘³ç€ä½ ä¸èƒ½åƒçº¿ç¨‹é‚£æ ·é€šè¿‡å˜é‡å…±äº«çŠ¶æ€ï¼Œæ¯ä¸ª Isolate éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ï¼Œè¿™æ ·è®¾è®¡çš„å¥½å¤„<strong>å°±æ˜¯ä½ ä¸ç”¨åŠ é”ï¼Œä¹Ÿèƒ½å®‰å…¨çš„æ“ä½œè‡ªå·±çš„æ•°æ®</strong></p><p>è¿™é‡Œä½ æ˜¯å¦ä¼šæœ‰ä¸€ä¸ªç–‘é—®ğŸ¤”ï¸ï¼šå‰é¢æˆ‘ä»¬é€šè¿‡ Dart å¼‚æ­¥æœºåˆ¶å¤„ç†äº†æ¥å£è¯·æ±‚ä¹‹ç±»çš„å¼‚æ­¥ä»»åŠ¡ï¼Œä¸æ˜¯ä¹Ÿæœ‰ç±»ä¼¼å¹¶å‘çš„æ•ˆæœå—ï¼Ÿé‚£ä¸ºä»€ä¹ˆè¿˜è¦å¼•å…¥ Isolate å¹¶å‘æœºåˆ¶å‘¢ï¼Ÿ</p><p>ç­”ï¼šå‰é¢æˆ‘ä»¬è®²çš„å¼‚æ­¥æœºåˆ¶ä½ å¯ä»¥ç†è§£ä¸ºä¸€ç§å‡å¼‚æ­¥ï¼Œå› ä¸ºå®ƒå®é™…è¿˜æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å»å¤„ç†å„ç§ç½‘ç»œ IOï¼Œè¿™äº›ç½‘ç»œ IO å¹¶ä¸æ€ä¹ˆæ¶ˆè€— CPU èµ„æºï¼Œåªæ˜¯éœ€è¦å¤§é‡çš„ç­‰å¾…è¯·æ±‚å“åº”çš„æ—¶é—´ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç­‰å¾…çš„ç©ºé—²æ—¶é—´å»å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œè¿™å°±æ˜¯å¼‚æ­¥æœºåˆ¶èƒ½å¤Ÿæé«˜æ€§èƒ½çš„åŸå› ã€‚è¿™ç§æœºåˆ¶å…¶å®å’Œ Android Handler æœºåˆ¶æœ‰ç‚¹ç±»ä¼¼ã€‚è€Œç°åœ¨å¦‚æœä½ æœ‰ä¸€ä¸ªè®¡ç®—é‡éå¸¸å¤§çš„ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼šä½ éœ€è¦å¯¹è§†é¢‘è¿›è¡Œæ ¼å¼åŒ–å¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™è¿™äº› CPU å¯†é›†å‹è®¡ç®—å°±ä¼šé˜»å¡ä½ çš„çº¿ç¨‹ï¼Œå¯¼è‡´å…¶ä»–ä»»åŠ¡éƒ½æ‰§è¡Œä¸äº†ã€‚å› æ­¤é’ˆå¯¹è¿™ç§æ¯”è¾ƒè€— CPU èµ„æºçš„ä»»åŠ¡ï¼Œæœ€å¥½åˆ›å»ºä¸€ä¸ª Isolate å»å¤„ç†ï¼Œé¿å…é˜»å¡ä¸» Isolate ï¼ˆä¹Ÿå°±æ˜¯ä¸»çº¿ç¨‹ï¼‰ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥åˆ©ç”¨è®¾å¤‡çš„å¤šæ ¸ç‰¹æ€§</p><h3 id="13-1ã€Isolate-åŸºæœ¬ç”¨æ³•"><a href="#13-1ã€Isolate-åŸºæœ¬ç”¨æ³•" class="headerlink" title="13.1ã€Isolate åŸºæœ¬ç”¨æ³•"></a>13.1ã€Isolate åŸºæœ¬ç”¨æ³•</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">//</span> å¯¼å…¥ isolate åŒ…<br>import <span class="hljs-string">&#x27;dart:isolate&#x27;</span>;<br><br>void main() &#123;<br>  <span class="hljs-regexp">//</span> é€šè¿‡ Isolate.spawn é™æ€å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Isolate<br>  <span class="hljs-regexp">//</span> spawn æ˜¯ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œè¡¨ç¤º Isolate å…¥å£å‡½æ•°æ¥å—çš„å‚æ•°ç±»å‹<br>  <span class="hljs-regexp">//</span> è¿™é‡Œ spawn çš„æ³›å‹å‚æ•°æ˜¯ Stringï¼ŒsubTask æ˜¯å…¥å£å‡½æ•°<br>  <span class="hljs-regexp">//</span> ç¬¬äºŒä¸ªå‚æ•°è·Ÿæ³›å‹å‚æ•°ç±»å‹ä¸€è‡´ï¼Œè¡¨ç¤ºä¼ é€’ç»™å…¥å£å‡½æ•°çš„å‚æ•°ï¼Œè¿™é‡Œä¼ å…¥çš„æ˜¯å­—ç¬¦ä¸²<br>  Isolate.spawn&lt;String&gt;(subTask, <span class="hljs-string">&quot;my task&quot;</span>);<br>  print(<span class="hljs-string">&quot;main func end.&quot;</span>);<br>&#125;<br><br><span class="hljs-regexp">//</span> Isolate å…¥å£å‡½æ•°å®šä¹‰ï¼Œæ¥å—ä¸€ä¸ª String å‚æ•°<br><span class="hljs-regexp">//</span> å…¥å£å‡½æ•°çš„å‚æ•°ç±»å‹ç”±ä¸Šé¢çš„ spawn çš„æ³›å‹å‚æ•°å†³å®š<br>void subTask(String msg)&#123;<br>  print(<span class="hljs-string">&quot;subTask receive: $msg &quot;</span>);<br>&#125;<br><br><span class="hljs-regexp">//</span>æ‰“å°ç»“æœ<br>main <span class="hljs-keyword">func</span> end.<br>subTask receive: my task<br></code></pre></td></tr></table></figure><p>é€šè¿‡è¾“å‡ºï¼Œæˆ‘ä»¬å‘ç°å…ˆæ‰“å°äº† main func endï¼Œç„¶åï¼Œæ‰§è¡Œæ–°å»º Isolate çš„å…¥å£å‡½æ•°ã€‚ å¦‚æœæˆ‘ä»¬æƒ³è®©ä»£ç æ‰§è¡Œé¡ºåºï¼Œè·Ÿæˆ‘ä»¬ä¹¦å†™é¡ºåºä¸€è‡´çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ await å…³é”®å­—ç­‰å¾… Isolate æ‰§è¡Œç»“æŸï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// å¯¼å…¥ isolate åŒ…</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;dart:isolate&#x27;</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨ async å…³é”®å­—å°† main å‡½æ•°æ ‡è®°ä¸ºä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œè¿™æ ·æ‰èƒ½ä½¿ç”¨ await å…³é”®å­—</span><br><span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span>&#123;<br>  <span class="hljs-comment">// ä½¿ç”¨ await å…³é”®å­—ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆ</span><br>  <span class="hljs-keyword">await</span> Isolate.spawn&lt;<span class="hljs-built_in">String</span>&gt;(subTask, <span class="hljs-string">&quot;my task&quot;</span>);<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;main func end.&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// Isolate å…¥å£å‡½æ•°å®šä¹‰ï¼Œæ¥å—ä¸€ä¸ª String å‚æ•°</span><br><span class="hljs-keyword">void</span> subTask(<span class="hljs-built_in">String</span> msg)&#123;<br>  <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;subTask receive: <span class="hljs-subst">$msg</span> &quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>subTask receive: my task <br>main func end.<br></code></pre></td></tr></table></figure><h3 id="13-2ã€Isolate-æ¶ˆæ¯é€šè®¯"><a href="#13-2ã€Isolate-æ¶ˆæ¯é€šè®¯" class="headerlink" title="13.2ã€Isolate æ¶ˆæ¯é€šè®¯"></a>13.2ã€Isolate æ¶ˆæ¯é€šè®¯</h3><p>å¤šä¸ª Isolate ä¹‹é—´åªèƒ½é€šè¿‡æ¶ˆæ¯è¿›è¡Œé€šè®¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å»è·å–ä¸€ä¸ª Isolate è¿”å›çš„ç»“æœå‘¢ï¼Ÿ</p><p>ç­”ï¼šä¸»è¦é€šè¿‡ ReceivePort å’Œ SendPort ä¸¤ä¸ªç±»å¤„ç†æ¶ˆæ¯é€šè®¯</p><p>1ï¼‰ã€ReceivePort è´Ÿè´£æ¥æ”¶ SendPort å‘é€çš„æ¶ˆæ¯ï¼Œ SendPort å’Œ ReceivePort æ˜¯æ†ç»‘å…³ç³»ï¼Œ SendPort æ˜¯ç”± ReceivePort åˆ›å»ºçš„</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs csharp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span>() <span class="hljs-keyword">async</span></span>&#123;<br>   <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª ReceivePort ç”¨äºæ¥æ”¶æ¶ˆæ¯</span><br>   <span class="hljs-keyword">var</span> recv = ReceivePort();<br><br>   <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ª Isolateï¼Œæ³›å‹å‚æ•°ä¸º SendPortï¼Œå…¥å£å‡½æ•°ä¸º subTask</span><br>   <span class="hljs-comment">// subTask å…¥å£å‡½æ•°çš„å‚æ•°ä¸º SendPort ç±»å‹ï¼Œå› æ­¤ spawn ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥ recv çš„ sendPort å¯¹è±¡</span><br>   Isolate.spawn&lt;SendPort&gt;(subTask, recv.sendPort);<br><br>   <span class="hljs-comment">// ä½¿ç”¨ await ç­‰å¾… recv çš„ç¬¬ä¸€æ¡æ¶ˆæ¯</span><br>   <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">await</span> recv.first;<br>   print(<span class="hljs-string">&quot;receiveï¼š$result&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">// Isolate å…¥å£å‡½æ•°å®šä¹‰ï¼Œæ¥æ”¶ä¸€ä¸ª SendPort å¯¹è±¡ä½œä¸ºå‚æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">subTask</span>(<span class="hljs-params">SendPort port</span>)</span>&#123;<br>  <span class="hljs-comment">// ä½¿ç”¨ SendPort å‘é€ä¸€æ¡å­—ç¬¦ä¸²æ¶ˆæ¯</span><br>  port.send(<span class="hljs-string">&quot;subTask Result&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>receiveï¼šsubTask Result<br></code></pre></td></tr></table></figure><h2 id="åå››ã€æ€»ç»“"><a href="#åå››ã€æ€»ç»“" class="headerlink" title="åå››ã€æ€»ç»“"></a>åå››ã€æ€»ç»“</h2><p>æœ¬ç¯‡ä¼°è®¡æ˜¯æˆ‘å†™è¿‡æœ€é•¿çš„æ–‡ç« äº†ï¼Œæ¯”ä¹‹å‰å†™ Kotlin å…¥é—¨é‚£ä¸€ç¯‡è¿˜è¦é•¿ğŸ˜‚ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™ç¯‡æ–‡ç« å‡ ä¹æ¶µç›–äº† Dart çš„æ‰€æœ‰è¯­æ³•çŸ¥è¯†ï¼Œå¦‚æœä½ èƒ½å¤Ÿè€å¿ƒçœ‹åˆ°è¿™é‡Œï¼Œå¹¶æ‰‹æ•²é‡Œé¢çš„ç¤ºä¾‹ï¼Œç›¸ä¿¡ä½ ä¸€å®šæ”¶è·å¾ˆå¤§ã€‚å¦‚æœè§‰å¾—æˆ‘å†™çš„è¿˜ä¸é”™ï¼Œè¯·ç»™æˆ‘ç‚¹ä¸ªèµå§ğŸ¤</p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>åŸºç¡€æ‰“å¥½äº†ï¼Œä¸‹ç¯‡æ–‡ç« æˆ‘ä»¬å°±æ­£å¼è¿›å…¥åˆ° Flutter çš„å­¦ä¹ äº†ï¼Œæ•¬è¯·æœŸå¾…å§ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://juejin.cn/post/7075337131974983688#heading-72">ä¸€æ–‡æå®šDartè¯­æ³•</a></p><p><a href="https://www.tizi365.com/archives/165.html">Dartè¯­è¨€æ•™ç¨‹</a></p><p><a href="https://juejin.cn/post/7028710779171897351#heading-7">Flutter åŸºç¡€ | Dart è¯­æ³•</a></p><p><a href="https://dart.cn/tutorials/language">Dart å®˜æ–¹æ•™ç¨‹</a></p><blockquote><p><strong>ä½ çš„ç‚¹èµï¼Œè¯„è®ºï¼Œæ˜¯å¯¹æˆ‘å·¨å¤§çš„é¼“åŠ±ï¼</strong></p><p>æ¬¢è¿å…³æ³¨æˆ‘çš„<strong>å…¬ä¼—å·ï¼š</strong> <a href="http://m6z.cn/6jwi7b"><strong>sweetying</strong></a> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p><p>å¦‚æœ<strong>æœ‰é—®é¢˜</strong>ï¼Œå…¬ä¼—å·å†…æœ‰åŠ æˆ‘å¾®ä¿¡çš„å…¥å£ï¼Œåœ¨æŠ€æœ¯å­¦ä¹ ã€ä¸ªäººæˆé•¿çš„é“è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸€èµ·å‰è¿›ï¼</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Flutter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutterç³»åˆ—ï¼ˆä¸€ï¼‰ï¼šè¿è¡Œä½ çš„ç¬¬ä¸€ä¸ªFlutteråº”ç”¨</title>
    <link href="/2022/09/05/Flutter%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E8%BF%90%E8%A1%8C%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAFlutter%E5%BA%94%E7%94%A8/"/>
    <url>/2022/09/05/Flutter%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E8%BF%90%E8%A1%8C%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AAFlutter%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p><img src="https://raw.githubusercontent.com/sweetying520/picgo/master/img/202210101643858.png" alt="tiger_bg"></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Flutter æ˜¯ Google æ¨å‡ºå¹¶å¼€æºçš„ç§»åŠ¨ç«¯å¼€å‘æ¡†æ¶ï¼Œä¸»æ‰“è·¨å¹³å°ã€é«˜ä¿çœŸã€é«˜æ€§èƒ½ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡ Dart è¯­è¨€å¼€å‘ Appï¼Œä¸€å¥—ä»£ç å¯ä»¥åŒæ—¶è¿è¡Œåœ¨ iOS å’Œ Androidå¹³å°ã€‚</p><p>2018 å¹´ 12 æœˆï¼ŒGoogle å‘å¸ƒ Flutter 1.0ã€‚ä»é‚£æ—¶å€™å¼€å§‹ï¼ŒFlutter ä»¥è¿…é›·ä¸åŠæ©è€³ä¹‹åŠ¿ï¼Œè¿…é€Ÿå´›èµ·ï¼Œå¹¶ç¨³å›ºäº†å…¶åœ¨å¸‚åœºä¸Šçš„åœ°ä½ã€‚</p><p>å¦‚ä»Šï¼ŒFlutter ç›¸å…³èµ„æºå’Œç¤¾åŒºéƒ½å·²æ¸æ¸æˆç†Ÿï¼Œå¾—åˆ°äº†å¾ˆå¤šå¼€å‘è€…å’Œä¼ä¸šçš„ä¿¡ä»»ã€‚å¦å¤–å› ä¸ºå…¬å¸ä¸šåŠ¡æ‰©å¼ ï¼Œå‡†å¤‡å¼•å…¥ Flutter å¼€å‘é¡¹ç›®ï¼Œæ‰€ä»¥å­¦ä¹  Flutter åŠ¿åœ¨å¿…è¡Œï¼Œä¸‹é¢å°±è·Ÿç€æˆ‘çš„è„šæ­¥è¿›è¡Œ Flutter çš„å­¦ä¹ å§</p><h2 id="ä¸€ã€Flutter-å¼€å‘ç¯å¢ƒæ­å»º"><a href="#ä¸€ã€Flutter-å¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="ä¸€ã€Flutter å¼€å‘ç¯å¢ƒæ­å»º"></a>ä¸€ã€Flutter å¼€å‘ç¯å¢ƒæ­å»º</h2><p><strong>æ³¨æ„</strong>ï¼šæœ¬æ–‡ä»¥ macOS ç³»ç»Ÿä¸ºä¾‹</p><h3 id="1ï¼‰ã€ä½¿ç”¨é•œåƒ"><a href="#1ï¼‰ã€ä½¿ç”¨é•œåƒ" class="headerlink" title="1ï¼‰ã€ä½¿ç”¨é•œåƒ"></a>1ï¼‰ã€ä½¿ç”¨é•œåƒ</h3><p>ç”±äºåœ¨å›½å†…è®¿é—® Flutter æœ‰æ—¶å¯èƒ½ä¼šå—åˆ°é™åˆ¶ï¼Œ Flutter å®˜æ–¹ä¸ºä¸­å›½å¼€å‘è€…æ­å»ºäº†ä¸´æ—¶é•œåƒï¼Œæˆ‘ä»¬åªéœ€å°†å¦‚ä¸‹ç¯å¢ƒå˜é‡é…ç½®åˆ°ç”¨æˆ·ç¯å¢ƒå˜é‡ä¸­å³å¯ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">export</span> PUB_HOSTED_URL=https:<span class="hljs-comment">//pub.flutter-io.cn</span><br><span class="hljs-keyword">export</span> FLUTTER_STORAGE_BASE_URL=https:<span class="hljs-comment">//storage.flutter-io.cn</span><br></code></pre></td></tr></table></figure><h3 id="2ï¼‰ã€ä¸‹è½½-Flutter-SDK"><a href="#2ï¼‰ã€ä¸‹è½½-Flutter-SDK" class="headerlink" title="2ï¼‰ã€ä¸‹è½½ Flutter SDK"></a>2ï¼‰ã€ä¸‹è½½ Flutter SDK</h3><p>æ–¹å¼æœ‰ 2ï¼š</p><h4 id="1ã€ç›´æ¥å»-Flutter-å®˜ç½‘ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…å³å¯"><a href="#1ã€ç›´æ¥å»-Flutter-å®˜ç½‘ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…å³å¯" class="headerlink" title="1ã€ç›´æ¥å» Flutter å®˜ç½‘ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…å³å¯"></a>1ã€ç›´æ¥å» Flutter å®˜ç½‘ä¸‹è½½æœ€æ–°çš„å®‰è£…åŒ…å³å¯</h4><p>ä¸‹è½½åœ°å€ï¼š<a href="https://docs.flutter.dev/development/tools/sdk/releases?tab=macos#macos">https://docs.flutter.dev/development/tools/sdk/releases?tab=macos#macos</a></p><h4 id="2ã€é€šè¿‡-git-clone-ä¸‹è½½"><a href="#2ã€é€šè¿‡-git-clone-ä¸‹è½½" class="headerlink" title="2ã€é€šè¿‡ git clone ä¸‹è½½"></a>2ã€é€šè¿‡ git clone ä¸‹è½½</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">git clone -b master https:<span class="hljs-comment">//github.com/flutter/flutter.git</span><br></code></pre></td></tr></table></figure><p>ä¸Šè¿°è¿™å¥å‘½ä»¤ä¼šå°†ä»“åº“å…‹éš†ä¸‹æ¥å¹¶åˆ‡æ¢åˆ° master åˆ†æ”¯</p><p><strong>æ³¨æ„</strong>ï¼šä¸Šè¿°ä¸¤ç§æ–¹å¼ç¬¬ä¸€ç§éœ€è¦è§£å‹ï¼Œç¬¬äºŒç§ä¸éœ€è¦ï¼Œæ€»ä¹‹å°†å®ƒä»¬æ”¾ç½®åˆ°æ‚¨æƒ³æ”¾çš„åœ°æ–¹å³å¯</p><h3 id="3ï¼‰ã€é…ç½®-Flutter-ç¯å¢ƒå˜é‡"><a href="#3ï¼‰ã€é…ç½®-Flutter-ç¯å¢ƒå˜é‡" class="headerlink" title="3ï¼‰ã€é…ç½® Flutter ç¯å¢ƒå˜é‡"></a>3ï¼‰ã€é…ç½® Flutter ç¯å¢ƒå˜é‡</h3><p>å°† Flutter ç¯å¢ƒå˜é‡é…ç½®åˆ°ä½ çš„ç”¨æˆ·ç¯å¢ƒï¼Œä¸‹é¢ä»¥æˆ‘ä¸ªäººçš„ä¸ºä¾‹ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dart"># flutter ç¯å¢ƒå˜é‡<br><span class="hljs-keyword">export</span> FLUTTER_HOME=/Users/zhouying/Library/flutter<br><span class="hljs-keyword">export</span> PATH=$&#123;PATH&#125;:$&#123;FLUTTER_HOME&#125;/bin<br></code></pre></td></tr></table></figure><h3 id="4ï¼‰ã€éªŒè¯-Flutter-æ˜¯å¦å®‰è£…æˆåŠŸ"><a href="#4ï¼‰ã€éªŒè¯-Flutter-æ˜¯å¦å®‰è£…æˆåŠŸ" class="headerlink" title="4ï¼‰ã€éªŒè¯ Flutter æ˜¯å¦å®‰è£…æˆåŠŸ"></a>4ï¼‰ã€éªŒè¯ Flutter æ˜¯å¦å®‰è£…æˆåŠŸ</h3><p>é€šè¿‡<code>flutter doctor</code>æ¥æ£€æŸ¥æ˜¯å¦éœ€è¦å®‰è£…å…¶å®ƒä¾èµ–é¡¹æ¥å®Œæˆå®‰è£…ï¼Œè¿™ä¸ªè¿‡ç¨‹ç¬¬ä¸€æ¬¡å¯èƒ½éœ€è¦è€—è´¹ä¸€æ®µæ—¶é—´ï¼Œä¸‹æ¬¡å°±ä¼šå¿«å¾ˆå¤š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3928cb6c9f4d443fa22245f7ba2a8d58~tplv-k3u1fbpfcp-watermark.image" alt="202201261529488.png"></p><p>ä»ä¸Šé¢è¯Šæ–­ä¿¡æ¯æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š</p><p>1ã€Flutter ç‰ˆæœ¬å’Œæ¸ é“å· ok</p><p>2ã€Flutterè¿è¡Œæ‰€éœ€çš„ Android å·¥å…·é“¾ ok</p><p>3ã€Flutter æ‰€éœ€çš„ iOS å¼€å‘ç¯å¢ƒä¸ ok</p><p>4ã€Chrome ok</p><p>5ã€AndroidStudio ok</p><p>6ã€è¿æ¥çš„è®¾å¤‡ ok</p><p>7ã€HTTP ä¸»æœºå¯ç”¨æ€§ ok</p><h3 id="5ï¼‰ã€ä¸€äº›é¢å¤–å¸¸ç”¨çš„-Flutter-å‘½ä»¤"><a href="#5ï¼‰ã€ä¸€äº›é¢å¤–å¸¸ç”¨çš„-Flutter-å‘½ä»¤" class="headerlink" title="5ï¼‰ã€ä¸€äº›é¢å¤–å¸¸ç”¨çš„ Flutter å‘½ä»¤"></a>5ï¼‰ã€ä¸€äº›é¢å¤–å¸¸ç”¨çš„ Flutter å‘½ä»¤</h3><p>1ã€é€šè¿‡<code>flutter --help</code>æŸ¥çœ‹æ‰€å®‰è£… Flutter éœ€è¦çš„å¸®åŠ©</p><p>2ã€é€šè¿‡<code>flutter --version</code>æŸ¥çœ‹ Flutter ç‰ˆæœ¬</p><p>3ã€é€šè¿‡<code>flutter devices</code>æŸ¥çœ‹å½“å‰å¯ç”¨çš„è®¾å¤‡</p><p>4ã€é€šè¿‡<code>flutter run</code>è¿è¡Œå¯åŠ¨ä½ çš„åº”ç”¨ç¨‹åº</p><h2 id="äºŒã€å¹³å°è®¾ç½®"><a href="#äºŒã€å¹³å°è®¾ç½®" class="headerlink" title="äºŒã€å¹³å°è®¾ç½®"></a>äºŒã€å¹³å°è®¾ç½®</h2><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œä¸»è¦è®² Android å¹³å°</p><h3 id="1ï¼‰ã€å®‰è£…å¹¶é…ç½®ä½ çš„-Android-Studio"><a href="#1ï¼‰ã€å®‰è£…å¹¶é…ç½®ä½ çš„-Android-Studio" class="headerlink" title="1ï¼‰ã€å®‰è£…å¹¶é…ç½®ä½ çš„ Android Studio"></a>1ï¼‰ã€å®‰è£…å¹¶é…ç½®ä½ çš„ Android Studio</h3><p>1ã€ä¸‹è½½å¹¶å®‰è£… <a href="https://developer.android.com/studio/index.html">Android Studio</a>.</p><p><strong>æ³¨æ„</strong>ï¼šAndroid Studio éœ€è¦ 3.0 æˆ–æ›´é«˜ç‰ˆæœ¬</p><p>2ã€å¯åŠ¨ Android Studioï¼Œç„¶åæ‰§è¡Œ Android Studio å®‰è£…å‘å¯¼ï¼Œè¿™å°†å®‰è£…æœ€æ–°çš„ Android SDKï¼ŒAndroid SDK å¹³å°å·¥å…·å’Œ Android SDK æ„å»ºå·¥å…·ï¼Œè¿™æ˜¯ Flutter ä¸º Android å¼€å‘æ—¶æ‰€å¿…éœ€çš„</p><h3 id="2ï¼‰ã€è®¾ç½®ä½ çš„-Android-è®¾å¤‡"><a href="#2ï¼‰ã€è®¾ç½®ä½ çš„-Android-è®¾å¤‡" class="headerlink" title="2ï¼‰ã€è®¾ç½®ä½ çš„ Android è®¾å¤‡"></a>2ï¼‰ã€è®¾ç½®ä½ çš„ Android è®¾å¤‡</h3><p><strong>æ³¨æ„</strong>ï¼šAndroid è®¾å¤‡éœ€è¦ Android 4.1ï¼ˆAPI level 16ï¼‰æˆ–æ›´é«˜ç‰ˆæœ¬</p><h4 id="1ã€çœŸæœº"><a href="#1ã€çœŸæœº" class="headerlink" title="1ã€çœŸæœº"></a>1ã€çœŸæœº</h4><blockquote><p>1ã€åœ¨æ‚¨çš„è®¾å¤‡ä¸Šå¯ç”¨ <strong>å¼€å‘äººå‘˜é€‰é¡¹</strong> å’Œ <strong>USBè°ƒè¯•</strong></p><p>2ã€ä½¿ç”¨USBå°†æ‰‹æœºæ’å…¥ç”µè„‘ã€‚å¦‚æœæ‚¨çš„è®¾å¤‡å‡ºç°æç¤ºï¼Œè¯·æˆæƒæ‚¨çš„è®¡ç®—æœºè®¿é—®æ‚¨çš„è®¾å¤‡</p><p>3ã€åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œ <code>flutter devices</code> å‘½ä»¤ä»¥éªŒè¯Flutterè¯†åˆ«æ‚¨è¿æ¥çš„Androidè®¾å¤‡</p><p>4ã€è¿è¡Œå¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åº <code>flutter run</code></p></blockquote><h4 id="2ã€æ¨¡æ‹Ÿå™¨"><a href="#2ã€æ¨¡æ‹Ÿå™¨" class="headerlink" title="2ã€æ¨¡æ‹Ÿå™¨"></a>2ã€æ¨¡æ‹Ÿå™¨</h4><blockquote><p>1ã€åœ¨æ‚¨çš„æœºå™¨ä¸Šå¯ç”¨ <a href="https://developer.android.com/studio/run/emulator-acceleration.html">VM acceleration</a> </p><p>2ã€å¯åŠ¨ <strong>Android Studio&gt;Tools&gt;Android&gt;AVD Manager</strong> å¹¶é€‰æ‹© <strong>Create Virtual Device</strong></p><p>3ã€é€‰æ‹©ä¸€ä¸ªè®¾å¤‡å¹¶é€‰æ‹© <strong>Next</strong></p><p>4ã€ä¸ºè¦æ¨¡æ‹Ÿçš„ Android ç‰ˆæœ¬é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªç³»ç»Ÿæ˜ åƒï¼Œç„¶åé€‰æ‹© <strong>Next</strong>. å»ºè®®ä½¿ç”¨ <em>x86</em> æˆ– <em>x86_64</em> image </p><p>5ã€åœ¨ Emulated Performanceä¸‹, é€‰æ‹© <strong>Hardware - GLES 2.0</strong> ä»¥å¯ç”¨ <a href="https://developer.android.com/studio/run/emulator-acceleration.html">ç¡¬ä»¶åŠ é€Ÿ</a></p><p>6ã€éªŒè¯AVDé…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç„¶åé€‰æ‹© <strong>Finish</strong></p><p>7ã€åœ¨ Android Virtual Device Manager ä¸­, ç‚¹å‡»å·¥å…·æ çš„ <strong>Run</strong>ã€‚æ¨¡æ‹Ÿå™¨å¯åŠ¨å¹¶æ˜¾ç¤ºæ‰€é€‰æ“ä½œç³»ç»Ÿç‰ˆæœ¬æˆ–è®¾å¤‡çš„å¯åŠ¨ç”»é¢.</p><p>8ã€è¿è¡Œ <code>flutter run</code> å¯åŠ¨æ‚¨çš„è®¾å¤‡. è¿æ¥çš„è®¾å¤‡åæ˜¯ <code>Android SDK built for &lt;platform&gt;</code>ï¼Œå…¶ä¸­ <em>platform</em> æ˜¯èŠ¯ç‰‡ç³»åˆ—ï¼Œå¦‚ x86</p></blockquote><h3 id="3ï¼‰ã€åœ¨-AndroidStudio-ä¸Šå®‰è£…-Flutter-å’Œ-dart-æ’ä»¶"><a href="#3ï¼‰ã€åœ¨-AndroidStudio-ä¸Šå®‰è£…-Flutter-å’Œ-dart-æ’ä»¶" class="headerlink" title="3ï¼‰ã€åœ¨ AndroidStudio ä¸Šå®‰è£… Flutter å’Œ dart æ’ä»¶"></a>3ï¼‰ã€åœ¨ AndroidStudio ä¸Šå®‰è£… Flutter å’Œ dart æ’ä»¶</h3><ul><li><code>Flutter</code>æ’ä»¶ï¼š æ”¯æŒFlutterå¼€å‘å·¥ä½œæµ (è¿è¡Œã€è°ƒè¯•ã€çƒ­é‡è½½ç­‰)</li><li><code>Dart</code>æ’ä»¶ï¼š æä¾›ä»£ç åˆ†æ (è¾“å…¥ä»£ç æ—¶è¿›è¡ŒéªŒè¯ã€ä»£ç è¡¥å…¨ç­‰)</li></ul><p>è¦å®‰è£…è¿™äº›:</p><ol><li>å¯åŠ¨ Android Studio</li><li>æ‰“å¼€æ’ä»¶é¦–é€‰é¡¹ <strong>Preferences &gt; Plugins</strong></li><li>é€‰æ‹© <strong>Browse repositoriesâ€¦</strong>, é€‰æ‹© Flutter æ’ä»¶å¹¶ç‚¹å‡» <code>install</code></li><li>é‡å¯ Android Studio åæ’ä»¶ç”Ÿæ•ˆ</li></ol><p><strong>æ³¨æ„</strong>ï¼šå½“ä½ å®‰è£… Flutter æ’ä»¶åï¼Œä¼šè‡ªåŠ¨å®‰è£… Dart æ’ä»¶</p><h2 id="ä¸‰ã€åˆ›å»ºå¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª-Flutter-åº”ç”¨"><a href="#ä¸‰ã€åˆ›å»ºå¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª-Flutter-åº”ç”¨" class="headerlink" title="ä¸‰ã€åˆ›å»ºå¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Flutter åº”ç”¨"></a>ä¸‰ã€åˆ›å»ºå¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Flutter åº”ç”¨</h2><h3 id="1ï¼‰ã€åˆ›å»ºæ–°åº”ç”¨"><a href="#1ï¼‰ã€åˆ›å»ºæ–°åº”ç”¨" class="headerlink" title="1ï¼‰ã€åˆ›å»ºæ–°åº”ç”¨"></a>1ï¼‰ã€åˆ›å»ºæ–°åº”ç”¨</h3><p>1ã€é€‰æ‹© <strong>File &gt; New Flutter Project</strong></p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c6360e622964e47b26eb78d4d6324ae~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220112220116827" style="zoom:50%;" /><p>2ã€é€‰æ‹© <strong>Flutter</strong> ä½œä¸º project ç±»å‹, ç„¶åç‚¹å‡» Next</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9bdad331ea4c45119cdb82840793e3b1~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220112220159083" style="zoom:50%;" /><p>3ã€è¾“å…¥é¡¹ç›®åç§° (å¦‚ <code>myapp</code>)ï¼Œç„¶åç‚¹å‡» Next</p><p><strong>æ³¨æ„</strong>ï¼šProject name å­—æ¯å¿…é¡»éƒ½æ˜¯å°å†™ï¼Œå¦åˆ™ä¼šæç¤ºä½ ä¸èƒ½åˆ›å»ºåº”ç”¨</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5de438253adc4fb9ba333b9e0fd2f522~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220112220309504" style="zoom:50%;" /><p>4ã€ç‚¹å‡» <strong>Finish</strong></p><p>5ã€ç­‰å¾… Android Studio å®‰è£… SDK å¹¶åˆ›å»ºé¡¹ç›®</p><h3 id="2ï¼‰ã€Flutter-å·¥ç¨‹ç»“æ„è§£æ"><a href="#2ï¼‰ã€Flutter-å·¥ç¨‹ç»“æ„è§£æ" class="headerlink" title="2ï¼‰ã€Flutter å·¥ç¨‹ç»“æ„è§£æ"></a>2ï¼‰ã€Flutter å·¥ç¨‹ç»“æ„è§£æ</h3><p>å¦‚ä¸‹å›¾å°±æ˜¯æˆ‘ä»¬åˆ›å»ºå¥½çš„ä¸€ä¸ª Flutter é¡¹ç›®å·¥ç¨‹ç»“æ„ï¼š</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c06e013ea6f54f208fd3e355f98639aa~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220113145050564" style="zoom:50%;" /><p>ç®€å•çš„è§£é‡Šä¸€ä¸‹ï¼š</p><table><thead><tr><th>æ–‡ä»¶</th><th>æè¿°</th></tr></thead><tbody><tr><td>myapp</td><td>é¡¹ç›®å·¥ç¨‹åç§°</td></tr><tr><td>.dart_tool</td><td>Dart å·¥å…·å¼€å‘ç›¸å…³é…ç½®</td></tr><tr><td>.idea</td><td>Flutter å¼€å‘ç¯å¢ƒé…ç½®</td></tr><tr><td>android</td><td>Android å¹³å°ç›¸å…³ä»£ç </td></tr><tr><td>ios</td><td>iOS å¹³å°ç›¸å…³ä»£ç </td></tr><tr><td>lib</td><td>è·¨å¹³å°ä»£ç ï¼Œä¹Ÿæ˜¯ Flutter é¡¹ç›®ä¸»è¦å…³å¿ƒçš„ç›®å½•</td></tr><tr><td>test</td><td>æµ‹è¯•ç›¸å…³ä»£ç </td></tr><tr><td>.gitignore</td><td>git æäº¤ä»“åº“å¿½ç•¥æ–‡ä»¶</td></tr><tr><td>.metadata</td><td>å¯¹å½“å‰å·¥ç¨‹çš„é…ç½®è®°å½•</td></tr><tr><td>.packages</td><td>ä»¥ lib ç»“å°¾çš„æ–‡ä»¶ç»å¯¹è·¯å¾„</td></tr><tr><td>analysis_options.yaml</td><td>é™æ€åˆ†ææ–‡ä»¶</td></tr><tr><td>myapp.iml</td><td>å·¥ç¨‹æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„é…ç½®</td></tr><tr><td>pubspec.lock</td><td>å½“å‰é¡¹ç›®ä¾èµ–æ‰€ç”Ÿæˆçš„æ–‡ä»¶</td></tr><tr><td>pubspec.yaml</td><td>é¡¹ç›®æè¿°æ–‡ä»¶ï¼ŒåŒ…å«äº†é¡¹ç›®çš„æè¿°ä¿¡æ¯ä»¥åŠæ‰€éœ€è¦çš„ä¾èµ–çš„åº“</td></tr><tr><td>README.md</td><td>é¡¹ç›®æè¿°ä¿¡æ¯</td></tr><tr><td>External Libraries</td><td>Android å¼€å‘åŒ…ï¼Œèµ„æºæ–‡ä»¶ã€Dart SDK æ–‡ä»¶ã€å·¥ç¨‹å¼€å‘ä¾èµ–æ’ä»¶ API ç­‰ç­‰</td></tr><tr><td>Scratches and Consoles</td><td>åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶å’Œç¼“å†²åŒºåˆ—è¡¨</td></tr></tbody></table><h3 id="3ï¼‰ã€è¿è¡Œåº”ç”¨"><a href="#3ï¼‰ã€è¿è¡Œåº”ç”¨" class="headerlink" title="3ï¼‰ã€è¿è¡Œåº”ç”¨"></a>3ï¼‰ã€è¿è¡Œåº”ç”¨</h3><p>1ã€å®šä½åˆ° Android Studio å·¥å…·æ ï¼Œé€‰æ‹©è¿è¡Œåº”ç”¨çš„ Android è®¾å¤‡ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯çœŸæœº</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a722418fe13f4df8880c3d82dc8df874~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20220112220957667"></p><p>2ã€åœ¨å·¥å…·æ ä¸­ç‚¹å‡» <strong>Run å›¾æ ‡</strong>ï¼Œæˆ–è€…è°ƒç”¨èœå•é¡¹ <strong>Run &gt; Run</strong>ï¼Œæˆ–è€…ä½¿ç”¨<code>flutter run</code> å‘½ä»¤æ¥è¿è¡Œä½ çš„åº”ç”¨</p><p>3ã€å¦‚æœä¸€åˆ‡æ­£å¸¸, ä½ åº”è¯¥åœ¨ä½ çš„è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šä¼šçœ‹åˆ°å¯åŠ¨çš„åº”ç”¨ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/baf1a7e5dc404bc3b3835c3025801cf9~tplv-k3u1fbpfcp-watermark.image" alt="202201261600172.png"></p><h3 id="4ï¼‰ã€ä½“éªŒçƒ­é‡è½½"><a href="#4ï¼‰ã€ä½“éªŒçƒ­é‡è½½" class="headerlink" title="4ï¼‰ã€ä½“éªŒçƒ­é‡è½½"></a>4ï¼‰ã€ä½“éªŒçƒ­é‡è½½</h3><blockquote><p>Flutter å¯ä»¥é€šè¿‡ <em>çƒ­é‡è½½ï¼ˆhot reloadï¼‰</em> å®ç°å¿«é€Ÿæ•ˆæœé¢„è§ˆï¼Œçƒ­é‡è½½å°±æ˜¯æ— éœ€é‡å¯åº”ç”¨ç¨‹åºå°±èƒ½å®æ—¶åŠ è½½ä¿®æ”¹åçš„ä»£ç ï¼Œå¹¶ä¸”ä¸ä¼šä¸¢å¤±çŠ¶æ€ï¼ˆè¿™å’Œ webpack çš„çƒ­é‡è½½æ˜¯ä¸€æ ·çš„ï¼‰ã€‚ç®€å•çš„å¯¹ä»£ç è¿›è¡Œæ›´æ”¹ï¼Œç„¶åå‘Šè¯‰ IDE æˆ–å‘½ä»¤è¡Œå·¥å…·ä½ éœ€è¦é‡æ–°åŠ è½½ï¼ˆç‚¹å‡»reloadæŒ‰é’®ï¼‰ï¼Œä½ å°±ä¼šåœ¨ä½ çš„è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šçœ‹åˆ°æ›´æ”¹</p></blockquote><p>1ã€å°†å­—ç¬¦ä¸²<code>You have pushed the button this many times:&#39;</code> æ›´æ”¹ä¸º<code>You have clicked the button this many times:&#39;</code></p><p>2ã€ä¸è¦æŒ‰<code>Stop</code>æŒ‰é’®ï¼Œè®©ä½ çš„åº”ç”¨ç»§ç»­è¿è¡Œ</p><p>3ã€è¦æŸ¥çœ‹ä½ çš„æ›´æ”¹, åªéœ€è°ƒç”¨<code>command + s</code>ï¼Œæˆ–ç‚¹å‡» <strong>çƒ­é‡è½½æŒ‰é’®</strong> (å¸¦æœ‰é—ªç”µâš¡ï¸å›¾æ ‡çš„æŒ‰é’®) å³å¯</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c2690d17dd74f8eae0da8e6ff48b409~tplv-k3u1fbpfcp-watermark.image" alt="202201261539133.png"></p><h2 id="å››ã€æ€»ç»“"><a href="#å››ã€æ€»ç»“" class="headerlink" title="å››ã€æ€»ç»“"></a>å››ã€æ€»ç»“</h2><p>æœ¬ç¯‡æ–‡ç« è®²çš„ä¸€äº›é‡ç‚¹å†…å®¹ï¼š</p><p>1ã€Flutter å¼€å‘ç¯å¢ƒæ­å»º</p><p>2ã€Flutter åœ¨ Android å¹³å°ç›¸å…³è®¾ç½®</p><p>3ã€åˆ›å»ºå¹¶è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Flutter é¡¹ç›®ï¼ŒFlutter å·¥ç¨‹ç»“æ„è§£æ</p><p>å¥½äº†ï¼Œæœ¬ç¯‡æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ© ğŸ¤ </p><p><strong>æ„Ÿè°¢ä½ é˜…è¯»è¿™ç¯‡æ–‡ç« </strong></p><h3 id="ä¸‹ç¯‡é¢„å‘Š"><a href="#ä¸‹ç¯‡é¢„å‘Š" class="headerlink" title="ä¸‹ç¯‡é¢„å‘Š"></a>ä¸‹ç¯‡é¢„å‘Š</h3><p>å› ä¸º Flutter æ˜¯åŸºäº Dart è¯­è¨€å¼€å‘çš„ï¼Œæ‰€ä»¥ä¸‹ç¯‡æ–‡ç« æˆ‘ä¼šè®² Dart è¯­è¨€ç›¸å…³çš„å†…å®¹ï¼Œæ•¬è¯·æœŸå¾…å§ğŸ˜„</p><h3 id="å‚è€ƒå’Œæ¨è"><a href="#å‚è€ƒå’Œæ¨è" class="headerlink" title="å‚è€ƒå’Œæ¨è"></a>å‚è€ƒå’Œæ¨è</h3><p><a href="https://flutterchina.club/setup-macos/">Flutter å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://book.flutterchina.club/chapter1/flutter_intro.html">ã€ŠFlutterå®æˆ˜Â·ç¬¬äºŒç‰ˆã€‹- Preview</a></p><blockquote><p>å…¨æ–‡åˆ°æ­¤ï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ¬¢è¿ç‚¹èµï¼Œæ”¶è—ï¼Œè¯„è®ºå’Œè½¬å‘ï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›</p></blockquote><blockquote><p>æ¬¢è¿å…³æ³¨æˆ‘çš„ <strong>å…¬ ä¼— å·</strong>ï¼Œå¾®ä¿¡æœç´¢ <strong>sweetying</strong> ï¼Œæ–‡ç« æ›´æ–°å¯ç¬¬ä¸€æ—¶é—´æ”¶åˆ°</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åŸåˆ›</tag>
      
      <tag>Flutter</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
